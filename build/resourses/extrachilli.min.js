/*! ExtraChilli v2.38.0  Copyright (c) 2021 Big Time Gaming  ( http://www.bigtimegaming.com ) */
!function(){"use strict";var e,t;function i(){amplify.publish("OnPauseSignal")}function n(){amplify.publish("OnResumeSignal")}void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[e]?alert("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):(document.addEventListener(t,function(){(document[e]?i:n)()},!1),document.addEventListener("pause",i,!1),document.addEventListener("resume",n,!1))}(),function(o){var e=(t.prototype.queueRequest=function(e){this.requests.push(e),this.sendRequest()},t.prototype.sendRequest=function(){var e,n,s=this;this.inProgress||(n=this.requests.shift())&&(n.ajaxArgs.success=function(t){o.GameTimer.setWindowTimeout(function(){var e;null!==(e=n.onSuccess)&&void 0!==e&&e.call(n,t),s.inProgress=!1,s.sendRequest()},0)},n.ajaxArgs.error=function(e,t,i){o.GameTimer.setWindowTimeout(function(){var e;null!==(e=n.onError)&&void 0!==e&&e.call(n),s.inProgress=!1,n.nonCritical?s.sendRequest():s.requests=[]},0)},this.onQueueEmptied&&(n.ajaxArgs.complete=function(){o.GameTimer.setWindowTimeout(function(){s.inProgress||s.requests.length||s.onQueueEmptied()},0)}),this.inProgress=!0,null!==(e=n.onSending)&&void 0!==e&&e.call(n),btg$.ajax(n.ajaxArgs))},t);function t(e){this.requests=[],this.onQueueEmptied=e?e.onQueueEmptied:null}o.AjaxQueue=e}(utils=utils||{});var __extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(s){var t,e=(t=PIXI.AnimatedSprite,__extends(o,t),o.create=function(e,t,i,n){void 0===n&&(n=0);e=new o(e);return e.id=t,e.setLayoutInternal(i,n,!0),e},o.prototype.setLayoutInternal=function(e,t,i){var n=s.Layouts.get();if(n){n=n.getTextureEntry(this.id,e,t);if(n){this.layoutEntry=n,this.name=s.Layouts.getEntryName(n),this.x=n.x,this.y=n.y,this.width=n.width,this.height=n.height,void 0!==n.alpha&&(this.alpha=n.alpha),void 0!==n.blendMode&&(this.blendMode=s.BLEND_MODE.fromString(n.blendMode));e=!1;return n.processRotateAndMirror&&(n.mirror||n.rotation)&&(e=!0,this.setPivot(.5,.5),n.mirror&&(this.width*=-1),null!=n.rotation&&(this.rotation=n.rotation/180*Math.PI)),null!=n.tint&&(t=parseInt(n.tint,16),isNaN(t)||(this.tint=t)),n.metadata&&(n=n.metadata,e||this.setPivot(n.pivotX,n.pivotY),n.speed&&(this.animationSpeed=n.speed),null!=n.loop&&(this.loop=n.loop)),!0}}return!1},o.prototype.setPivot=function(e,t){var i;null!=e&&this.anchor.x!==e&&(i=(e-this.anchor.x)*this.width,this.anchor.x=e,this.position.x+=i),null!=t&&this.anchor.y!==t&&(i=(t-this.anchor.y)*this.height,this.anchor.y=t,this.position.y+=i)},o);function o(e){return t.call(this,e)||this}s.AnimatedSpriteWrapper=e}(utils=utils||{}),function(e){var t=(l.copy2D=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i].concat();return t},l.deepCopy=function(e){return l.deepCopyInternal(e,[],[])},l.deepCopyInternal=function(e,t,i){var n=[];t.push(e),i.push(n);for(var s=0,o=e;s<o.length;s++){var r,a=o[s];Array.isArray(a)?-1===(r=t.indexOf(a))?n.push(l.deepCopyInternal(a,t,i)):n.push(i[r]):n.push(a)}return n},l.insist=function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},l.find=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(t(s))return s}},l.findIndex=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1},l.last=function(e){return e[e.length-1]},l.penultimate=function(e){return e[e.length-2]},l.count2D=function(e,t){for(var i=0,n=0,s=e;n<s.length;n++){var o=s[n];if(o)for(var r=0,a=o;r<a.length;r++)t(a[r])&&i++}return i},l.removeItems=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0,s=t;n<s.length;n++)for(var o,r=s[n];-1!==(o=e.lastIndexOf(r))&&e.splice(o,1),-1!==o;);},l);function l(){}e.ArrayUtils=t}(utils=utils||{}),function(n){var e=(t.openWindow=function(t){if(n.DeviceInfo.onIOSStandaloneMode())try{var e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank");var i=document.createEvent("HTMLEvents");i.initEvent("click",!0,!0),e.dispatchEvent(i)}catch(e){amplify.publish("ReportError",{error:e}),window.open(t,"_blank")}else window.open(t,"_blank")},t);function t(){}n.BrowserUtils=e}(utils=utils||{}),function(o){var i,n;(e=i=i||{}).PaysOpened="pays_opened_o",e.HelpOpened="help_opened_o",e.AutoPlayed="auto_played_o",e.SoundMuted="sound_muted_o",e.FreeSpins="freespins_o",e.FreeRounds="freerounds_o",e.BoughtFeature="bought_feature_o",e.BlockedFeatureBuyBecausePriceLimit="blockedfeaturebuy_pricelimit_o",e.BlockedFeatureBuyBecauseDisabled="blockedfeaturebuy_disabled_o",(e=n=n||{}).GameVersion="game_version",e.IntegrationCode="integration_code",e.IsPixiCanvas="is_pixi_canvas",e.AwardCapSet="award_cap_set",e.AwardCapHit="award_cap_hit",e.Heartbeat="heartbeat",e.FreeSpinChoice="freespin_choice",e.BetSpin="bet_spin",e.BetFeatureBuy="bet_featurebuy",e.PlayerSelect="player_select";var e=(t.init=function(){"undefined"!=typeof gtag||t.instance||(t.instance=new t)},t.prototype.setupSignals=function(){var t=this;amplify.subscribe("OnGameInitialised",function(){t.start()}),amplify.subscribe("SetAnalyticsState",function(e){e.enabled?(t.disableAnalytics=!1,delete window["ga-disable-"+genericgame.GenericGame.GA_TID],t.startCalled&&!t.initialisedAt&&t.start()):(t.disableAnalytics=!0,window["ga-disable-"+genericgame.GenericGame.GA_TID]=!0)}),amplify.subscribe("Analytics_ShowPays",function(){t.sendOneOffEvent(i.PaysOpened)}),amplify.subscribe("Analytics_ShowHelp",function(){t.sendOneOffEvent(i.HelpOpened)}),amplify.subscribe("StartAutoSpinsSignal",function(){t.sendOneOffEvent(i.AutoPlayed,!0)}),amplify.subscribe("StartFreeSpinsSignal",function(){t.sendOneOffEvent(i.FreeSpins,!0)}),amplify.subscribe("AcceptedFreeRoundsSignal",function(){t.sendOneOffEvent(i.FreeRounds,!0)}),amplify.subscribe("OnSoundsOnPressed",function(){t.soundOff=!1}),amplify.subscribe("OnSoundsOffPressed",function(){t.soundOff=!0}),amplify.subscribe("MultiplierBegin",function(){t.sendEvent(!0,n.FreeSpinChoice,"Multiplier")}),amplify.subscribe("RoamingBegin",function(){t.sendEvent(!0,n.FreeSpinChoice,"Roaming")}),amplify.subscribe("Analytics_FreeSpinChoice",function(e){t.sendEvent(!0,n.FreeSpinChoice,e.choice)}),amplify.subscribe("FeatureDropStartClicked",function(){t.sendOneOffEvent(i.BoughtFeature,!0)}),amplify.subscribe("Analytics_BlockedFeatureBuyBecauseDisabled",function(){t.sendOneOffEvent(i.BlockedFeatureBuyBecauseDisabled)}),amplify.subscribe("Analytics_BlockedFeatureBuyBecausePriceLimit",function(){t.sendOneOffEvent(i.BlockedFeatureBuyBecausePriceLimit)}),amplify.subscribe("Analytics_BetSpin",function(e){t.sendRateLimitedEvent({oneInN:genericgame.GenericGame.ANALYTICS_BETSPIN_ONEIN,interactive:!0,category:n.BetSpin,value:t.getValueInCents(e.stake),label:t.getPlatformTypeAndCurrencyLabel()}),t.playerSelectGameName&&(e=genericgame.GenericGame.ANALYTICS_PLAYERSELECT_ONEIN,t.sampleOneIn(e)&&t.sendEvent(!0,n.PlayerSelect,t.playerSelectGameName,null,e))}),amplify.subscribe("Analytics_BetFeatureBuy",function(e){t.sendRateLimitedEvent({oneInN:genericgame.GenericGame.ANALYTICS_BETFEATUREBUY_ONEIN,interactive:!0,category:n.BetFeatureBuy,value:t.getValueInCents(e.cost),label:t.getPlatformTypeAndCurrencyLabel()})}),amplify.subscribe("SetAwardCap",function(e){t.awardCapSet=e.value,t.initialisedAt&&t.sendAwardCapSetEvent()}),amplify.subscribe("Analytics_AwardCapHit",function(e){t.sendEvent(!1,n.AwardCapHit,n.AwardCapHit,t.getPlatformTypeAndCurrencyLabel(),t.getValueInCents(e.value))}),amplify.subscribe("SendRequest",function(e){-1!=t.playStartIndicators.indexOf(e.requestType)&&(t.onPlayStarted(),t.soundOff&&t.sendOneOffEvent(i.SoundMuted))}),amplify.subscribe("Analytics_PlayerSelect",function(e){t.playerSelectGameName=e.gameName})},t.prototype.sampleOneIn=function(e){return Math.random()<1/e},t.prototype.getPlatformTypeAndCurrencyLabel=function(){return apiMapper.type+"_"+(o.Currency.getCurrencyCode()||"?")},t.prototype.getValueInCents=function(e){return Math.round(100*e)},t.prototype.start=function(){var e=this;this.startCalled=!0;var t=genericgame.GenericGame;t.GA_TID&&!this.disableAnalytics&&(this.setupGtag(),this.initialisedAt=o.GameTimer.getWindowTime(),this.sendEvent(!1,n.IntegrationCode,apiMapper.type),this.sendEvent(!1,n.GameVersion,t.VERSION,t.gameName),o.DeviceInfo.isCanvasRenderer()&&this.sendEvent(!1,n.IsPixiCanvas,n.IsPixiCanvas),this.awardCapSet&&this.sendAwardCapSetEvent(),o.GameTimer.setWindowTimeout(function(){return e.pulseCheck()},2e4))},t.prototype.setupGtag=function(){var e=genericgame.GenericGame.GA_TID,t=document.createElement("script");t.type="text/javascript",t.src="https://www.googletagmanager.com/gtag/js?id="+e,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),null!=genericgame.GenericGame.GA_SAMPLE_RATE?gtag("config",e,{sample_rate:genericgame.GenericGame.GA_SAMPLE_RATE}):gtag("config",e)},t.prototype.onPlayStarted=function(){this.playStarted||(this.playStarted=!0,this.pulseCheck())},t.prototype.getHeartbeatIntervalMins=function(e){e=(e-this.initialisedAt)/1e3/60;return e<=30?5:e<=60?10:25},t.prototype.pulseCheck=function(){var e=o.GameTimer.getWindowTime(),t=(e-this.lastInteractiveEvent)/1e3/60,e=this.getHeartbeatIntervalMins(e);this.playStarted&&e<=t&&(this.heartbeats++,this.sendEvent(!0,n.Heartbeat,n.Heartbeat))},t.prototype.sendAwardCapSetEvent=function(){this.sendEvent(!1,n.AwardCapSet,n.AwardCapSet,this.getPlatformTypeAndCurrencyLabel(),this.getValueInCents(this.awardCapSet))},t.prototype.sendOneOffEvent=function(e,t){void 0===t&&(t=!1),this.oneOffEvents[e]||(this.oneOffEvents[e]=!0,this.sendEvent(t,e,e))},t.prototype.sendRateLimitedEvent=function(e){this.sampleOneIn(e.oneInN)&&this.sendEvent(e.interactive,e.category,"1in"+e.oneInN,e.label,e.value)},t.prototype.sendEvent=function(e,t,i,n,s){"undefined"==typeof gtag||this.disableAnalytics||(t={event_category:t},null!=n&&(t.event_label=n),null!=s&&(t.value=s),e?this.lastInteractiveEvent=o.GameTimer.getWindowTime():t.non_interaction=!0,gtag("event",i,t))},t);function t(){this.playStartIndicators=[o.STR.PLAY,o.STR.FEATURE_DROP_TRIGGERED,o.STR.FEATURE_PICK],this.oneOffEvents={},this.heartbeats=0,this.setupSignals()}o.BTGAnalytics=e}(utils=utils||{}),function(i){var e=(n.setup=function(){var e,t=this;n.isSetup||(n.isSetup=!0,e=6e4-(1e3*(e=new Date).getSeconds()+e.getMilliseconds()),this.setTime(),i.GameTimer.setWindowTimeout(function(){return t.startTimeDisplay()},e))},n.startTimeDisplay=function(){var e=this;this.setTime(),i.GameTimer.setWindowInterval(function(){return e.setTime()},6e4)},n.setTime=function(){for(var e=new Date,t=e.getMinutes(),i=0,n=this.subscribers;i<n.length;i++)(0,n[i])({time:e.getHours()+":"+(t<10?"0"+t:t)})},n.subscribe=function(e){var t=this;this.setup(),this.subscribers.push(e),this.updatePending||(this.updatePending=!0,i.GameTimer.setImmediate(function(){t.updatePending=!1,t.setTime()}))},n.subscribers=[],n);function n(){}i.Clock=e}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(s){var o,e=(o=PIXI.Container,__extends(n,o),n.prototype.drawDimension=function(t){var i,e=Object.keys(t).filter(function(e){return-1!=n.graphicsKeys.indexOf(e)});e.length&&(this.graphics=new s.GraphicsWrapper,this.addChild(this.graphics),i=JSON.parse(JSON.stringify(n.graphicsDefaults)),e.forEach(function(e){return i[e]=t[e]}),this.graphics.lineStyle(i.lineWidth,i.lineColour,i.lineAlpha),this.graphics.beginFill(i.fillColour,i.fillAlpha),this.graphics.drawRect(0,0,this.dimension.width,this.dimension.height),this.graphics.endFill())},n.prototype.setLayout=function(e){this.setLayoutInternal(e,0,!0)},n.prototype.resetLayout=function(e,t,i){void 0===i&&(i=0),this.id=e,this.setLayoutByIndex(t,i)},n.prototype.setLayoutByIndex=function(e,t){this.setLayoutInternal(e,t,!0)},n.prototype.setLayoutInternal=function(e,t,i){var n=s.Layouts.get();!n||(t=n.getTextureEntry(this.id,e,t))&&(this.x=t.x,this.y=t.y,this.dimension={x:this.x,y:this.y,width:t.width,height:t.height},this.layoutEntry=t,this.name=s.Layouts.getEntryName(t),null!=t.alpha&&(this.alpha=t.alpha))},n.prototype.setDimensions=function(){this.dimension?(this.width=this.dimension.width,this.height=this.dimension.height):(this.layoutEntry&&this.layoutEntry.section,this.layoutEntry&&this.layoutEntry.index)},n.prototype.findChildAt=function(e){return this.getChildAt(e)},n.prototype.findChild=function(e,t){for(var i=0,n=this.children;i<n.length;i++){var s=n[i],o=s.layoutEntry;if(null!=o&&(null==e.section||e.section==o.section)){if(null!=e.id){if(e.id!=o.id)continue;if(null!=e.index&&e.index!=o.index)continue}if((!e.tag||o.tags&&-1!=o.tags.indexOf(e.tag))&&(!t||s instanceof t)&&(!e.type||s instanceof e.type))return s}}return null},n.prototype.findChildren=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=[],n=0,s=this.children;n<s.length;n++){var o=s[n],r=o.layoutEntry;if(null!=r)for(var a=0,l=e;a<l.length;a++){var u=l[a];if(null==u.section||u.section==r.section){if(null!=u.id){if(u.id!=r.id)continue;if(null!=u.index&&u.index!=r.index)continue}if((!u.tag||r.tags&&-1!=r.tags.indexOf(u.tag))&&(!u.type||o instanceof u.type)){i.push(o);break}}}}return i},n.prototype.addChildAtDepth=function(e){for(var t=this.children.length-1;0<=t;t--){var i=this.children[t].layoutEntry;if(i&&i.depth>e.layoutEntry.depth)return void this.addChildAt(e,t+1)}this.addChild(e)},n.prototype.sortChildrenByDepth=function(){for(var e=[],t=0,i=this.children;t<i.length;t++){var n=i[t],s=n.layoutEntry;s&&e.push({depth:s.depth,item:n})}e.sort(function(e,t){return e.depth-t.depth});for(var o=e.length-1;0<=o;--o)this.setChildIndex(e[o].item,this.children.length-1)},n.prototype.addAll=function(e){null==(e=e||{}).section&&(e.section=this.layoutEntry?this.layoutEntry.section:null),s.Layouts.get().addAllToContainer(e.section,this,e)},n.prototype.addAllSprites=function(e){null==(e=e||{}).section&&(e.section=this.layoutEntry?this.layoutEntry.section:null),s.Layouts.get().addAllSpritesToContainer(e.section,this,e)},n.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},n.prototype.setPivotByPixels=function(e,t){var i;null!=e&&this.pivot.x!==e&&(i=e-this.pivot.x,this.pivot.x=e,this.position.x+=i),null!=t&&this.pivot.y!==t&&(i=t-this.pivot.y,this.pivot.y=t,this.position.y+=i)},n.prototype.getChildByName=function(e){return o.prototype.getChildByName.call(this,e)},n.graphicsDefaults={lineWidth:2,lineColour:16711680,lineAlpha:1,fillColour:16776971,fillAlpha:1},n.graphicsKeys=Object.keys(n.graphicsDefaults),n);function n(e,t,i){var n=o.call(this)||this;return n.id=e,null!=n.id&&s.Layouts.get()&&(null!=t?n.setLayoutInternal(t,0,!0):n.setLayoutInternal("Main",0,!1)),i&&i.addAll&&n.addAll("boolean"==typeof i.addAll?null:i.addAll),n.dimension&&i&&n.drawDimension(i),n}s.ContainerWrapper=e}(utils=utils||{}),function(e){var t=(i.setAPIFormattor=function(e){e!==i.APIFormattor&&(i.APIFormattor=e,this.notifyUpdate())},i.getDecimalSymbol=function(){return i.decimalSymbol},i.getThousandsSeperator=function(){return i.thousandsSeparator},i.setDecimalSymbol=function(e){e!==i.decimalSymbol&&(i.decimalSymbol=e,this.notifyUpdate())},i.setDecimalPlaces=function(e){e!==i.decimalPlaces&&(i.decimalPlaces=e,this.notifyUpdate())},i.setThousandsSeperator=function(e){e!==i.thousandsSeparator&&(i.thousandsSeparator=e,this.notifyUpdate())},i.getCurrencyCode=function(){return i.code},i.getCurrencySymbol=function(){return i.prefix},i.setCurrencyCode=function(e){e!==i.code&&(i.code=e,this.notifyUpdate())},i.setPrefix=function(e){e!==i.prefix&&(i.prefix=e,this.notifyUpdate())},i.setSuffix=function(e){e!==i.suffix&&(i.suffix=e,this.notifyUpdate())},i.formatWithNoDecimals=function(e){return e<1?"$"===i.prefix?parseFloat(e).toFixed(2).split(".")[1]+"c":"£"===i.prefix||"£"===i.prefix?parseFloat(e).toFixed(2).split(".")[1]+"p":i.formatNumberForCurrency(e):i.prefix+i.formatNumberForCurrencyNoDecimals(e)+i.suffix},i.format=function(e){return i.APIFormattor?i.APIFormattor(e):i.prefix+i.formatNumberForCurrency(e)+i.suffix},i.formatForCounter=function(e){return-1!=i.format(4.56).indexOf("456")?(100*e).toFixed(0):e.toFixed(2)},i.formatNumberForCurrency=function(e){e=parseFloat(e).toFixed(i.decimalPlaces).split(".");return e[0]=i.numberWithThousandsSeparator(e[0]),e.join(i.decimalSymbol)},i.formatNumberForCurrencyNoDecimals=function(e){e=parseFloat(e).toFixed(i.decimalPlaces).split(".");return i.numberWithThousandsSeparator(e[0])},i.numberWithThousandsSeparator=function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,i.thousandsSeparator)},i.notifyUpdate=function(){i.debounceTimer||(i.debounceTimer=e.GameTimer.setImmediate(function(){return i.notifyUpdateInternal()}))},i.notifyUpdateInternal=function(){i.debounceTimer=null,amplify.publish("CurrencyFormattingChanged")},i.code="",i.prefix="",i.suffix="",i.decimalSymbol=".",i.thousandsSeparator=",",i.decimalPlaces=2,i.currencySubdivisionSymbols={$:"c","£":"p"},i);function i(){}e.Currency=t}(utils=utils||{}),function(i){var e=(n.init=function(){n.get()},n.get=function(){return n.instance||(n.amplifyPublish=amplify.publish,(n.instance=new n).setupSignals()),n.instance},n.prototype.isDevBuild=function(){return-1!==(genericgame.GenericGame.VERSION||"").indexOf("-Dev")},n.prototype.setupSignals=function(){var t=this;amplify.subscribe("LoadFinished",function(){t.isDevBuild()&&(t.setupDebugControls(),t.enableDebugControls())}),amplify.subscribe("EnableSpeedControl",function(e){t.setupSpeedControl(e),t.isSpeedControlEnabled=!0}),amplify.subscribe("DisableSpeedControl",function(){t.gameSpeed=1,t.isSpeedControlEnabled=!1}),amplify.subscribe("EnableAmplifyLogging",function(e){(t.isDevBuild()||null!=e&&e.allowNonDev)&&(t.isDevLoggingEnabled||(t.setupAmplifyLogging(),t.isDevLoggingEnabled=!0))}),amplify.subscribe("DisableAmplifyLogging",function(){t.isDevLoggingEnabled&&(amplify.publish=n.amplifyPublish,t.isDevLoggingEnabled=!1)}),amplify.subscribe("IgnoreAmplifyLoggingTopics",function(e){var t;(t=n.ignoredTopics).push.apply(t,e.topics)}),amplify.subscribe("ToggleAllowNonGameTalkbackText",function(e){t.allowNonGameTalkbackText=null!==(e=null==e?void 0:e.enabled)&&void 0!==e?e:!t.allowNonGameTalkbackText})},n.prototype.setupDebugControls=function(){this.setupSpeedControl()},n.prototype.enableDebugControls=function(){this.isSpeedControlEnabled=!0},n.prototype.setupSpeedControl=function(e){var t=this;if(null!=(null==e?void 0:e.keepAudioAt1X)&&(this.keepAudioAt1X=e.keepAudioAt1X,this.applyNewSpeedControlSettings()),null!=e&&e.ignoreStrictDelays&&(this.ignoreStrictDelays=e.ignoreStrictDelays,this.applyNewSpeedControlSettings()),!this.isSpeedControlSetup){this.speedIncrements=[];for(var i=0,n=[{from:1,to:9,inc:1},{from:10,to:240,inc:10},{from:250,to:500,inc:50},{from:600,to:1e3,inc:100},{from:1500,to:3e3,inc:500},{from:4e3,to:1e4,inc:1e3}];i<n.length;i++)for(var s=n[i],o=s.from;o<=s.to;o+=s.inc)this.speedIncrements.push(o/100);this.speedIndex=this.speedIncrements.indexOf(1),document.addEventListener("keydown",function(e){t.isSpeedControlEnabled&&-1!==["-","+","Enter","*","."].indexOf(e.key)&&t.changeSpeed(e.key)}),this.isSpeedControlSetup=!0}},n.prototype.changeSpeed=function(e){"*"===e?0!==this.gameSpeed?this.gameSpeed=0:this.gameSpeed=this.prevSpeed||1:"Enter"===e?(1!==this.gameSpeed?this.gameSpeed=1:(1===this.speedIncrements[this.speedIndex]&&(this.speedIndex=this.speedIncrements.indexOf(5)),this.gameSpeed=this.speedIncrements[this.speedIndex]),this.prevSpeed=this.gameSpeed):"."!==e||this.gameSpeed?"-"!==e&&"+"!==e||("-"===e?this.speedIndex=Math.max(this.speedIndex-1,0):"+"===e&&(this.speedIndex=Math.min(this.speedIndex+1,this.speedIncrements.length-1)),e=this.speedIncrements[this.speedIndex],this.gameSpeed?this.gameSpeed=this.prevSpeed=e:this.prevSpeed=e,this.publishTalkbackSpeed(e),this.gameSpeed<.5&&this.quickTempNormalSpeed()):this.quickTempNormalSpeed()},n.prototype.quickTempNormalSpeed=function(){var e=this,t=this.gameSpeed;this.gameSpeed=1,i.GameTimer.setImmediate(function(){"undefined"!=typeof gsap&&gsap.ticker.tick(),e.gameSpeed=t})},Object.defineProperty(n.prototype,"gameSpeed",{get:function(){return i.GameTimer.getSpeed()},set:function(e){i.GameTimer.setIgnoreStrictDelays(1!==e&&this.ignoreStrictDelays),i.GameTimer.setSpeed(e),i.SoundWrapper.updateDebugSoundRate(this.keepAudioAt1X?1:e),"undefined"!=typeof gsap&&(0==e?gsap.globalTimeline.paused(!0):(gsap.globalTimeline.paused(!1),gsap.globalTimeline.timeScale(e)))},enumerable:!1,configurable:!0}),n.prototype.applyNewSpeedControlSettings=function(){this.gameSpeed=this.gameSpeed},n.prototype.publishTalkbackSpeed=function(e){this.allowNonGameTalkbackText&&(e=e.toFixed(e<.1?2:e<5?1:0),amplify.publish("SetTalkbackSignal",{text:"Speed x"+e}))},n.prototype.setupAmplifyLogging=function(){amplify.publish=function(e,t){if(-1===n.ignoredTopics.indexOf(e)&&window.console.groupCollapsed&&window.console.groupEnd){t?window.console.groupCollapsed("AMPLIFY: "+e,t):window.console.groupCollapsed("AMPLIFY: "+e);try{window.console.log("stack",(new Error).stack.split("\n").slice(1).join("\n")),window.console.log("snapshot",JSON.stringify(t,function(e,t){return t instanceof PIXI.DisplayObject?"[PIXI.DisplayObject]":t}))}catch(e){}window.console.groupEnd()}return n.amplifyPublish.apply(null,arguments)}},n.ignoredTopics=["UpdateLoader"],n);function n(){this.allowNonGameTalkbackText=!0}(i.DebugUtils=e).init()}(utils=utils||{}),function(e){var t=(i.fullscreenEnabled=function(){return!!document.fullscreenEnabled},i.tryRequestFullscreen=function(e){try{i.tryRequestFullscreenInternal(e)}catch(e){}},i.tryRequestFullscreenInternal=function(e){var t;i.fullscreenEnabled()&&(e&&this.isInFullscreen()?document.exitFullscreen&&(t=document.exitFullscreen())&&t.catch&&t.catch(function(e){}):document.documentElement.requestFullscreen&&(t=document.documentElement.requestFullscreen())&&t.catch&&t.catch(function(e){}))},i.isInFullscreen=function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement},i);function i(){}e.Device=t}(utils=utils||{}),function(e){var t=(i.getIOSVersion=function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||-1},i.onIPad=function(){return-1!=this.getIOSVersion()&&/iPad/i.test(navigator.userAgent)},i.onIPhone=function(){return-1!=this.getIOSVersion()&&/iPhone/i.test(navigator.userAgent)},i.onIPhoneX=function(){return i.onIPhone()&&667===window.screen.height&&375===window.screen.width&&3===window.devicePixelRatio},i.onIE11=function(){return-1!==window.navigator.userAgent.indexOf("Trident/7.0")},i.onAndroid=function(){return/(android)/i.test(navigator.userAgent)},i.onUCBrowser=function(){return/UBrowser/i.test(navigator.userAgent)},i.onPhone=function(){return!!PIXI.utils.isMobile.phone},i.onIOSBrowser=function(){return(i.onIPhone()||i.onIPad())&&/safari/i.test(navigator.userAgent)&&!window.navigator.standalone&&!/crios/i.test(navigator.userAgent)},i.onIOSStandaloneMode=function(){return(i.onIPhone()||i.onIPad())&&window.navigator.standalone},i.isCanvasRenderer=function(){return"undefined"!=typeof renderer&&renderer.type==PIXI.RENDERER_TYPE.CANVAS},i.getWindowSize=function(){var e={w:btg$(window).width(),h:btg$(window).height()};return i.onIPhone()&&i.onIOSBrowser()&&(e.w=Math.min(window.innerWidth,document.documentElement.clientWidth),e.h=Math.min(window.innerHeight,document.documentElement.clientHeight),e.w>e.h&&(e.h=window.innerHeight)),e},i);function i(){}e.DeviceInfo=t}(utils=utils||{}),function(e){var t=(i.prototype.isEitherUndefinedNullOrStringEmpty=function(e){return null==e||""===e.toString()},i.prototype.checkKeyAndPerformAction=function(e,t,i){if(this.isEitherUndefinedNullOrStringEmpty(t))throw new Error(this.undefinedKeyErrorMessage);return e(t,i)},i.prototype.add=function(i,n){var s=this;this.checkKeyAndPerformAction(function(e,t){if(s.containsKey(e))throw new Error("An element with the same key already exists in the dictionary.");s._keys.push(i),s._values.push(n)},i,n)},i.prototype.remove=function(t){var i=this;return this.checkKeyAndPerformAction(function(e){if(!i.containsKey(e))return!1;e=i._keys.indexOf(t);return i._keys.splice(e,1),i._values.splice(e,1),!0},t)},i.prototype.getValue=function(t){var i=this;return this.checkKeyAndPerformAction(function(e){if(!i.containsKey(e))return null;e=i._keys.indexOf(t);return i._values[e]},t)},i.prototype.containsKey=function(e){var t=this;return this.checkKeyAndPerformAction(function(e){return-1!==t._keys.indexOf(e)},e)},i.prototype.changeValueForKey=function(i,n){var s=this;this.checkKeyAndPerformAction(function(e,t){if(!s.containsKey(e))throw new Error("In the dictionary there is no element with the given key.");e=s._keys.indexOf(i);s._values[e]=n},i,n)},i.prototype.keys=function(){return this._keys},i.prototype.values=function(){return this._values},i.prototype.count=function(){return this._values.length},i);function i(){this._keys=[],this._values=[],this.undefinedKeyErrorMessage="Key is either undefined, null or an empty string."}e.Dictionary=t}(utils=utils||{}),function(e){var t=(i.prototype.add=function(e){this.byId[e.id]=e,this.orderedIds.push(e.id)},i.prototype.remove=function(e){delete this.byId[e]},i.prototype.getCallback=function(e){return null===(e=this.byId[e])||void 0===e?void 0:e.callback},i.prototype.process=function(e){for(var t=this.orderedIds.length,i=0;i<t;i++){var n=this.orderedIds[i],s=this.byId[n];s?e-s.lastTime>=s.timeout&&(!this.ignoreNoEarlierThan&&s.noEarlierThan&&s.noEarlierThan>o.getWindowTime()||(s.callback.apply(null,s.args),s.isInterval?s.lastTime=e:(delete this.byId[n],this.orderedIds.splice(i,1),t--,i--))):(this.orderedIds.splice(i,1),t--,i--)}},i);function i(){this.byId={},this.orderedIds=[]}var n=(s.prototype.add=function(e){this.byId[e.id]=e,this.orderedIds.push(e.id)},s.prototype.remove=function(e){delete this.byId[e]},s.prototype.process=function(e,t){var i=this.orderedIds,n=this.byId;this.isInterval||(this.orderedIds=[],this.byId={});for(var s=i.length,o=0;o<s;o++){var r=n[i[o]];r?r.callback(e,t):(i.splice(o,1),s--,o--)}},s);function s(e){this.byId={},this.orderedIds=[],this.isInterval=!1,this.isInterval=e}var o=(r.getCurrentTime=function(){return r.currentTime},r.getWindowTime=function(){return window.performance&&window.performance.now?window.performance.now():r.getCurrentTime()},r.pause=function(){cancelAnimationFrame(r.animationFrameId),r.animationFrameId=0,r.animationPaused=!0},r.resume=function(){!r.animationFrameId&&r.initialised&&r.animationCallFinished&&(r.animationFrameId=requestAnimationFrame(r.animationCallback)),r.animationPaused=!1},r.getSpeed=function(){return this.speed},r.setSpeed=function(e){this.speed=e},r.setIgnoreStrictDelays=function(e){this.ignoreStrictDelays=e,this.timers.ignoreNoEarlierThan=e},r.schedule=function(e,t){return r.setTimeout(e,Math.max(0,t-r.currentTime))},r.setTimeout=function(e,t){void 0===t&&(t=0);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return r.addTimerInstance(e,t,i,!1)},r.setInterval=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return t=Math.max(10,t),r.addTimerInstance(e,t,i,!0)},r.setTimeoutWithStrictMinimum=function(e,t){return r.addTimerInstance(e,t,null,!1,!r.ignoreStrictDelays)},r.clearTimeout=function(e){r.clearTimeoutInternal(e)},r.clearInterval=function(e){r.clearTimeoutInternal(e)},r.getCallback=function(e){return this.timers.getCallback(e)},r.setImmediate=function(e){return r.addTimerInstance(e,0,void 0,!1)},r.addFixedAnimator=function(e){return r.addAnimator(r.fixedAnimators,e)},r.removeFixedAnimator=function(e){r.removeAnimatorInternal(r.fixedAnimators,e)},r.requestAnimationFrame=function(e){return r.addAnimator(r.animationFrameRequests,e)},r.cancelAnimationFrame=function(e){r.removeAnimatorInternal(r.animationFrameRequests,e)},r.addStageRenderer=function(e){return r.addAnimator(r.stageRenderers,e)},r.removeStageRenderer=function(e){r.removeAnimatorInternal(r.stageRenderers,e)},r.setWindowTimeout=function(e,t){return window.setTimeout(e,t)},r.setWindowInterval=function(e,t){return window.setInterval(e,t)},r.setWindowTimeoutToAnimFrame=function(e,t){return r.setWindowTimeout(function(){return r.setImmediate(e)},t)},r.clearWindowTimeout=function(e){window.clearTimeout(e)},r.clearWindowInterval=function(e){window.clearInterval(e)},r.initialise=function(){r.initialised||(r.animationFrameId=requestAnimationFrame(r.animationCallback),r.initialised=!0,"undefined"!=typeof gsap&&(gsap.ticker.fps(60),gsap.ticker.lagSmoothing(r.MaxLag,r.FrameInterval)))},r.animationCallback=function(e){if(r.animationCallFinished=!1,r.lastCalled&&(r.accumulator+=(e-r.lastCalled)*r.speed),r.lastCalled=e,r.FrameInterval<=r.accumulator){r.accumulator>Math.max(r.MaxLag,r.MaxLag*r.speed)&&(r.accumulator=r.FrameInterval);e=r.currentTime;for(r.currentTime+=r.accumulator,r.currentTime-=r.accumulator%r.FrameInterval,PIXI.Ticker.shared.update(r.currentTime),r.timers.process(r.currentTime);r.FrameInterval<=r.accumulator;)r.fixedAnimators.process(r.currentTime-r.accumulator,r.FrameInterval),r.accumulator-=r.FrameInterval;e=r.currentTime-e;r.animationFrameRequests.process(r.currentTime,e),r.stageRenderers.process(r.currentTime,e)}r.animationCallFinished=!0,r.animationPaused||(r.animationFrameId=requestAnimationFrame(r.animationCallback))},r.addTimerInstance=function(e,t,i,n,s){return e&&e.apply?(r.initialise(),r.lastId++,r.timers.add({id:r.lastId,callback:e,lastTime:r.currentTime,timeout:t,noEarlierThan:s?r.getWindowTime()+t:null,args:i,isInterval:n}),r.lastId):0},r.clearTimeoutInternal=function(e){r.timers.remove(e)},r.addAnimator=function(e,t){return t&&t.apply?(r.initialise(),r.lastId++,e.add({id:r.lastId,callback:t}),r.lastId):0},r.removeAnimatorInternal=function(e,t){e.remove(t)},r.MaxLag=15*(r.FrameInterval=1e3/60),r.timers=new t,r.fixedAnimators=new n(!0),r.animationFrameRequests=new n(!1),r.stageRenderers=new n(!0),r.initialised=!1,r.accumulator=r.FrameInterval,r.currentTime=0,r.lastId=0,r.animationCallFinished=!1,r.animationPaused=!1,r.speed=1,r.ignoreStrictDelays=!1,r);function r(){}e.GameTimer=o}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i=(t=PIXI.Graphics,__extends(n,t),n);function n(){return null!==t&&t.apply(this,arguments)||this}e.GraphicsWrapper=i}(utils=utils||{}),function(d){var e=(c.get=function(){return genericgame.GenericGame.textureLoader.TextureLayouts},c.prototype.parseJSONLayout=function(e){this.preprocessEntries(e,e.textEntries),this.preprocessEntries(e,e.textureEntries),this.mergeEntries(e.textEntries,this.textEntries),this.mergeEntries(e.textureEntries,this.textureEntries),this.createSectionTextureEntries()},c.prototype.createSectionTextureEntries=function(){this.sectionTextureEntries=this.createSectionEntries(this.textureEntries),this.sectionTextEntries=this.createSectionEntries(this.textEntries),this.sectionNineSliceEntries=this.createNineSliceEntries(this.textureEntries)},c.prototype.initialise=function(){this.processMetadata(this.textEntries),this.processMetadata(this.textureEntries)},c.prototype.preprocessEntries=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++)for(var s=t[n[i]],o=0,r=Object.keys(s);o<r.length;o++)for(var a=0,l=s[r[o]];a<l.length;a++){var u=l[a];u.layout||(u.layout=e)}},c.prototype.mergeEntries=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i],o=e[s];if(t[s])for(var r=0,a=Object.keys(o);r<a.length;r++){var l=a[r];t[s][l]=o[l]}else t[s]=o}},c.prototype.processMetadata=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++)for(var n=i[t],s=e[n],o=0,r=Object.keys(s);o<r.length;o++)for(var a=r[o],l=s[a],u=0;u<l.length;u++){var h=l[u],p=h;p.id=n,p.section=a,p.index=u,h.metadata&&(h.metadata.zeroPosition&&(h.x=0,h.y=0),h.metadata.tag&&(p.tags=h.metadata.tag.split(",").map(function(e){return e.trim()})));h=p;null==p.processRotateAndMirror&&(h.layout?p.processRotateAndMirror=h.layout.setup.PROCESS_ROTATE_AND_MIRROR:p.processRotateAndMirror=c.PROCESS_ROTATE_AND_MIRROR),null==p.alignTextTop&&(h.layout?p.alignTextTop=h.layout.setup.ALWAYS_ALIGN_TEXT_TOP:p.alignTextTop=c.ALWAYS_ALIGN_TEXT_TOP),delete h.layout}},c.prototype.createSectionEntries=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];if(!e[s+"_NineSlice"])for(var o=0,r=Object.keys(e[s]);o<r.length;o++){var a=r[o];if(a.split("/").pop()!==s){t[a]||(t[a]=[]);for(var l=e[s][a].length,u=0;u<l;u++)t[a][e[s][a][u].depth]={id:s,num:u}}}}return t},c.prototype.createNineSliceEntries=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];if(e[s+"_NineSlice"])for(var o=0,r=Object.keys(e[s]);o<r.length;o++){var a=r[o],l=a.split("/").pop(),u=e[s][a];if(l!==s){t[a]||(t[a]=[]);for(var h=0;h<u.length;h++)t[a][u[h].depth]={id:s,num:h}}}}return t},c.prototype.addAllTextToContainer=function(e,t,i){if(i&&i.section&&e!=i.section)throw new Error("Section mismatch");var n=new d.Dictionary;if(this.sectionTextEntries[e])for(var s=this.sectionTextEntries[e].length-1;0<=s;s--){var o,r=this.sectionTextEntries[e][s];r&&(i&&i.ids&&-1==i.ids.indexOf(r.id)||i&&i.except&&this.sectionEntryHasMatch(r,i.except)||((o=new d.TextWrapper(r.id,t)).setLayoutByIndex(e,r.num),t.addChild(o),r=r.id+(0<r.num?r.num:""),n.add(r,o)))}return i&&i.ignoreEmpty||n.keys().length,n},c.prototype.addAllSpritesToContainer=function(e,t,i){var n,s;if(i&&i.section&&e!=i.section)throw new Error("Section mismatch");for(var o=this.sectionTextureEntries[e]||[],r=new d.Dictionary,a=o.length,l=i&&i.excludeAnimations,u=genericgame.GenericGame.textureLoader,h=a-1;0<=h;h--){var p=o[h];if(p&&!(i&&i.ids&&-1==i.ids.indexOf(p.id)||i&&i.except&&this.sectionEntryHasMatch(p,i.except))){var c=u.getStaticTextureString(p.id,null==i?void 0:i.namespace);if(c){c=genericgame.TextureLoader.createSprite(c);if(l&&null!==(n=null===(s=c.texture)||void 0===s?void 0:s.baseTexture)&&void 0!==n&&n.resource)if(-1!==(null!==(s=c.texture.baseTexture.resource.url)&&void 0!==s?s:"").toLowerCase().indexOf("animation"))continue;c.setLayoutByIndex(e,p.num),t.addChild(c);p=p.id+(0<p.num?p.num:"");r.add(p,c)}}}return i&&i.ignoreEmpty||r.keys().length,r},c.prototype.addAllNineSliceToContainer=function(e,t,i){var n=new d.Dictionary,s=this.sectionNineSliceEntries[e]||[];if(i&&i.section&&e!=i.section)throw new Error("Section mismatch");for(var o=genericgame.GenericGame.textureLoader,r=s.length-1;0<=r;r--){var a,l,u=s[r];u&&(i&&i.ids&&-1==i.ids.indexOf(u.id)||i&&i.except&&this.sectionEntryHasMatch(u,i.except)||(l=void 0,l=(l=(a=o.getStaticTextureString(u.id,null==i?void 0:i.namespace))?genericgame.TextureLoader.getTexture(a):l)||genericgame.TextureLoader.getTexture(u.id),l=new d.NineSlicePlaneWrapper(l),t.addChild(l),l.setLayoutByIndex(e,u.num),n.containsKey(u.id)||n.add(u.id,[]),n.getValue(u.id).unshift(l)))}return i&&i.ignoreEmpty||n.keys().length,n},c.prototype.addAllToContainer=function(e,t,i){(i=i||{}).section=e,i.ignoreEmpty=null==i.ignoreEmpty||i.ignoreEmpty,this.addAllNineSliceToContainer(e,t,i),this.addAllSpritesToContainer(e,t,i),this.addAllTextToContainer(e,t,i),t.sortChildrenByDepth()},c.prototype.sectionEntryHasMatch=function(t,e){return!!d.ArrayUtils.find(e,function(e){return!(null!=e.id&&e.id!==t.id||null!=e.index&&e.index!==t.num)})},c.prototype.hasTextureEntryWithId=function(e){return!!this.textureEntries[e]},c.prototype.hasTextEntryWithId=function(e){return!!this.textEntries[e]},c.prototype.getTextureEntry=function(e,t,i){void 0===i&&(i=0);t=this.getTextureEntries(e,t);return t?t[i]:void 0},c.prototype.getTextureEntries=function(e,t){var i=this.textureEntries;if(null!=e&&i&&i[e]&&i[e][t])return i[e][t]},c.prototype.getTextEntry=function(e,t,i){void 0===i&&(i=0);var n=this.textEntries;if(null!=e&&n&&n[e]&&n[e][t])return n[e][t][i]},c.prototype.getTextureEntriesForSection=function(e){for(var t=[],i=0,n=Object.keys(this.textureEntries);i<n.length;i++){var s=n[i],s=this.textureEntries[s][e];null!=s&&s.length&&t.push.apply(t,s)}return t},c.prototype.getTextEntriesForSection=function(e){for(var t=[],i=0,n=Object.keys(this.textEntries);i<n.length;i++){var s=n[i],s=this.textEntries[s][e];null!=s&&s.length&&t.push.apply(t,s)}return t},c.getEntryName=function(e){return e.id+"_("+e.section+")_["+(e.index||0)+"]"},c.prototype.getEntry=function(e,t,i){return this.getTextureEntry(e,t,i=void 0===i?0:i)||this.getTextEntry(e,t,i)},c.prototype.getCustomValue=function(e,t,i,n){n=this.getEntry(t,i,n=void 0===n?0:n);if(e&&n&&n.metadata&&n.metadata._customFields)return n.metadata._customFields[e.trim().toLowerCase()]},c.prototype.getAbsolutePosition=function(e){var t=this.getEntry(e.id,e.section,e.index);if(!t)throw new Error("Unable to find target item, id: "+t.id+", section: "+t.section);for(var i={x:t.x,y:t.y},n=t.section.split("/"),s=0;s<n.length;s++){var o=n[s],r=n.slice(0,s+1).join("/");o==t.id&&r==t.section||(r=this.getEntry(o,r))&&(i.x+=r.x,i.y+=r.y)}return i},c.prototype.getRelativePosition=function(e,t){var i=this.getEntry(t.id,t.section,t.index),n=this.getEntry(e.id,e.section,e.index);if(!i)throw new Error("Unable to find reference item, id: "+t.id+", section: "+t.section);if(!n)throw new Error("Unable to find target item, id: "+n.id+", section: "+n.section);var s={x:-i.x,y:-i.y},o=i.section.split("/");o.pop();for(var r=o.length-1;0<=r;r--){var a=o[r],l=o.slice(0,r+1).join("/");(h=this.getEntry(a,l))&&(s.x-=h.x,s.y-=h.y)}for(var u=n.section.split("/"),r=0;r<u.length;r++){var h,a=u[r],l=u.slice(0,r+1).join("/");a==n.id&&l==n.section||(h=this.getEntry(a,l))&&(s.x+=h.x,s.y+=h.y)}return s.x+=n.x,s.y+=n.y,s},c.ALWAYS_ALIGN_TEXT_TOP=!1,c.PROCESS_ROTATE_AND_MIRROR=!1,c);function c(){this.textureEntries={},this.textEntries={}}d.Layouts=e}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(n){var e=(t.TRIANGLES=PIXI.DRAW_MODES.TRIANGLES,t);function t(){}n.DRAW_MODE=e;var i,e=(i=PIXI.NineSlicePlane,__extends(s,i),s.prototype.setLayout=function(e){this.setLayoutByIndex(e,0)},s.prototype.setLayoutByIndex=function(e,t){var i=n.Layouts.get();!i||(t=i.getTextureEntry(this.id,e,t))&&(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.layoutEntry=t,this.name=n.Layouts.getEntryName(t))},s.prototype.setLayoutForNineSlice=function(){var e,t,i=n.Layouts.get();i&&(e=this.id+"_NineSlice",e=i.getTextureEntry(e,t="NineSlice/"+e),t=i.getTextureEntry("Slice",t),e&&t&&(this.topHeight=t.y,this.bottomHeight=e.height-(t.y+t.height),this.leftWidth=t.x,this.rightWidth=e.width-(t.x+t.width)))},s);function s(e){var t=i.call(this,e)||this;return e&&(t.id=e.id,t.setLayoutForNineSlice()),n.Layouts.get()&&(t.setLayout("Main"),t.setLayout("")),t}n.NineSlicePlaneWrapper=e}(utils=utils||{}),function(e){var t=(n.init=function(){this.isInitialised||(amplify.subscribe("CurrencyFormattingChanged",function(){amplify.publish("NumberFormattingChanged")}),n.isInitialised=!0)},n.forPays=function(e){n.init();var t=n.getDecimalSeparator();if(!t||","!=t&&"."!=t)return""+e;var i=e.toString(10).split("."),e=i[0]||"0",i=i[1];return i?e+t+i:e},n.getDecimalSeparator=function(){return void 0!==e.Currency?e.Currency.getDecimalSymbol():null},n.isInitialised=!1,n);function n(){}e.NumberFormatting=t}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i=(t=PIXI.Circle,__extends(n,t),n);function n(){return null!==t&&t.apply(this,arguments)||this}e.SpawnCircle=i;var s,i=(s=PIXI.particles.Emitter,__extends(o,s),o);function o(e,t,i){return s.call(this,e,t,i)||this}e.ParticleEmitterWrapper=i}(utils=utils||{}),function(n){var e=(a.randomValue=function(){return a.default.random()},a.randomInt=function(e){return a.default.randomInt(e)},a.randomIntBetween=function(e,t){return a.default.randomIntBetween(e,t)},a.findRandomWeightedIndex=function(e,t){return a.default.findRandomWeightedIndex(e,t)},a.shuffle=function(e){return a.default.shuffle(e)},a.flip=function(e){return a.default.flip(e)},a.randomItem=function(e){return a.default.randomItem(e)},a.prototype.setupUnseededRandom=function(){this.random=Math.random},a.prototype.setupSeededRandom=function(e,t){var i=this;if(0!==t)throw new Error("Unknown v");e=n.StringUtils.getHash(e,{v:0});this.seed=Math.abs(e%2147483646)+1,this.random=function(){return i.seed=16807*i.seed%2147483647,(i.seed-1)/2147483646}},a.prototype.randomInt=function(e){return Math.floor(this.random()*e)},a.prototype.randomIntBetween=function(e,t){return Math.floor(this.random()*(t-e+1))+e},a.prototype.findRandomWeightedIndex=function(e,t){for(var t=t||e.reduce(a.add,0),i=Math.ceil(t*this.random()),n=0,s=0,o=e.length,r=0;r<o&&(s+=e[r])<i;r++)n++;return n},a.add=function(e,t){return e+t},a.prototype.shuffle=function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(this.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},a.prototype.flip=function(e){return this.random()<e},a.prototype.randomItem=function(e){if(e&&0!=e.length)return e[a.default.randomIntBetween(0,e.length-1)]},a.default=new a,a);function a(e){e&&void 0!==e.seed?this.setupSeededRandom(e.seed,e.v):this.setupUnseededRandom()}n.Random=e}(utils=utils||{}),function(n){var e=(t.prototype.add=function(e){this.queue.push(e),this.sendRequest()},t.prototype.sendRequest=function(){var e,t,i=this;this.itemInProgress||(e=this.queue.shift())&&(t=n.GameTimer.getWindowTime(),0<(t=(e.noEarlierThan||0)-t)?(this.itemInProgress=e,n.GameTimer.setTimeoutWithStrictMinimum(function(){i.delayElapsed()},t)):(null!==(t=e.action)&&void 0!==t&&t.call(e),this.sendRequest()))},t.prototype.delayElapsed=function(){var e,t;null!==(t=(e=this.itemInProgress).action)&&void 0!==t&&t.call(e),this.itemInProgress=null,this.sendRequest()},t);function t(){this.queue=[]}n.RequestQueue=e}(utils=utils||{}),function(o){var a=o.GameTimer,e=(u.init=function(){u.isInitialised||(u.audioDisabled=o.DeviceInfo.onIE11(),u.setupStateChangeListener(),this.mute(),a.setTimeout(u.refreshSoundState,50),u.isInitialised=!0)},u.setupStateChangeListener=function(){!u.stateChangeListenerAdded&&Howler.ctx&&Howler.ctx.addEventListener&&(Howler.ctx.addEventListener("statechange",function(){u.onStateChange()}),u.stateChangeListenerAdded=!0)},u.onStateChange=function(){Howler.ctx&&"running"==Howler.ctx.state&&(u.loopFixHackHasBegun||(u.loopFixHackHasBegun=!0,a.setWindowTimeout(function(){for(var e=0,t=Object.keys(u.loopFixHack);e<t.length;e++){var i=t[e];u.loopFixHack[i]()}u.loopFixHack=null},100)))},u.refreshSoundState=function(){u.audioDisabled||!u.getIsSoundOn()?amplify.publish("OnSoundsOffPressed"):amplify.publish("OnSoundsOnPressed")},u.getStorageKey=function(){return void 0===genericgame||void 0===genericgame.GenericGame?"SoundOn":genericgame.GenericGame.gameName+"-SoundOn"},u.getIsSoundOn=function(){var e;try{e=localStorage.getItem(u.getStorageKey())}catch(e){}return null==e||"on"===e},u.getSound=function(e){var t;return u.audioSprite?u.audioSpriteData[e]&&(t=u.audioSprite):t=u.sounds[e],t},u.getInstances=function(e){return u.soundInstances[e]},u.loadSounds=function(e,t){var i;if(u.audioDisabled=o.DeviceInfo.onIE11(),u.playbackRate=t||1,u.setupSignals(),u.audioDisabled)for(var n=0;n<e.length;n++)null!==(i=u.callback)&&void 0!==i&&i.call(u);else{u.refresh();for(n=0;n<e.length;n++){var s=new Howl({src:e[n].src,onload:null===(s=u.callback)||void 0===s?void 0:s.call(u),rate:u.playbackRate});u.sounds[e[n].id]=s}}},u.loadAudioSpriteSounds=function(e,t,i){var n;if(u.audioDisabled=o.DeviceInfo.onIE11(),u.setupSignals(),u.audioDisabled)for(var s=0;s<u.fakeProgressLimit;s++)null!==(n=u.callback)&&void 0!==n&&n.call(u);else{u.playbackRate=i||1,u.refresh(),u.audioSpriteData=u.adjustSpriteDataForPlaybackRate(t);e=new Howl({src:e,onload:function(){return u.audioSpriteOnLoad()},sprite:u.audioSpriteData,rate:u.playbackRate});u.audioSprite=e,u.fakeProgressIntervalID=a.setInterval(function(){u.reportFakeProgress()},u.fakeProgressInterval)}},u.getIsSuspended=function(){return Howler.ctx&&"suspended"===Howler.ctx.state||"suspended"==Howler.state},u.playSound=function(e,t,i,n,s){if(!u.audioDisabled){u.setupStateChangeListener(),void 0===t&&(t=1),i=i||!1,n=n||0;var o=this.getSound(e);if(u.removeStoppedSoundInstances(e,u.getInstances(e)),o){var r=o.play(u.audioSprite?e:void 0);s&&o.pos(s.x,s.y,1,r),o.loop(i,r),o.volume(t,r),1!==this.debugRate&&o.rate(this.playbackRate*this.debugRate,r);t=0!==n?0:o.seek(-1,r);return(0!==n||"number"==typeof t&&!isNaN(t)&&.1<=Math.round(10*t)/10)&&o.seek(n*u.playbackRate,r),u.soundInstances[e]||(u.soundInstances[e]=[]),u.soundInstances[e].push(r),u.loopFixHack&&(i?!u.loopFixHackHasBegun&&u.getIsSuspended()&&(u.loopFixHack[r]=function(){return o.loop(i,r)}):delete u.loopFixHack[r]),r}}},u.getDuration=function(e){if(!u.audioDisabled){var t=this.getSound(e);if(t)return u.audioSprite?u.audioSpriteData[e][1]/1e3/u.playbackRate:t.duration()/u.playbackRate}return 0},u.getSeekPosition=function(e,t){if(u.audioDisabled)return-1;var i=this.getSound(e);if(!i)return-1;var n=u.getInstances(e);if(u.removeStoppedSoundInstances(e,n),-1==n.indexOf(t))return-1;t=i.seek(void 0,t);return"number"==typeof t?u.audioSprite?(t-u.audioSpriteData[e][0]/1e3)/u.playbackRate:t/u.playbackRate:-1},u.pauseSound=function(e){if(!u.audioDisabled){var t=this.getSound(e),i=this.getInstances(e);if(t){if(i)for(var n=0;n<i.length;n++)t.pause(i[n]);delete u.autoPausedSounds[e]}}},u.unpauseSound=function(e){if(!u.audioDisabled){var t=this.getSound(e),i=this.getInstances(e);if(t&&i)for(var n=0;n<i.length;n++)t.play(i[n])}},u.setSoundVolume=function(e,t){if(!u.audioDisabled){var i=this.getSound(e),n=this.getInstances(e);if(i&&n)for(var s=0;s<n.length;s++)i.volume(t,n[s])}},u.fadeSound=function(t,i,n,s){if(!u.audioDisabled){var o=this.getSound(t),r=this.getInstances(t);if(o&&r)for(var e=0;e<r.length;e++)!function(e){o.fade(i,n,s,r[e]),0===n&&(u.fadingSoundsTimeouts[t]=a.setTimeout(function(){u.stopSound(t,r[e])},s))}(e)}},u.stopSound=function(e,t){if(!u.audioDisabled){var i=u.getSound(e);if(i){var n=isNaN(t)?u.getInstances(e):[t];if(n){for(var s=0;s<n.length;s++){i.stop(n[s]),delete u.autoPausedSounds[e];var o=u.fadingSoundsTimeouts[e];o&&(a.clearTimeout(o),delete u.fadingSoundsTimeouts[e])}u.removeStoppedSoundInstances(e,n)}}}},u.updateDebugSoundRate=function(e){if(!u.audioDisabled&&this.debugRate!==e){if(0===e)this.pauseAllSounds();else if(0===this.debugRate&&this.resumeAllPausedSounds(),u.audioSprite)for(var t=0,i=Object.keys(this.soundInstances);t<i.length;t++)for(var n=i[t],s=0,o=this.soundInstances[n];s<o.length;s++){var r=o[s];this.audioSprite.rate(u.playbackRate*e,r)}else for(var a=0,l=Object.keys(this.sounds);a<l.length;a++){r=l[a];this.sounds[r].rate(u.playbackRate*e)}this.debugRate=e}},u.setupSignals=function(){var e=this;amplify.subscribe("OnSoundsOnPressed",function(){try{if(u.audioDisabled)return void a.setTimeout(function(){return amplify.publish("OnSoundsOffPressed")});localStorage.setItem(u.getStorageKey(),"on")}catch(e){}u.unmute()}),amplify.subscribe("OnSoundsOffPressed",function(){try{u.audioDisabled||localStorage.setItem(u.getStorageKey(),"off")}catch(e){}u.mute()}),amplify.subscribe("OnPauseSignal",function(){u.audioDisabled||(u.pauseAllSounds(),u.mute())}),amplify.subscribe("GameBlock",function(){e.audioDisabled=!0,e.mute()}),amplify.subscribe("OnResumeSignal",function(){u.audioDisabled||(u.resumeAllPausedSounds(),u.refreshSoundState())})},u.pauseAllSounds=function(){if(u.autoPausedSounds={},!u.getIsSuspended())for(var e=0,t=Object.keys(u.soundInstances);e<t.length;e++){var i=t[e];u.autoPausedSounds[i]=[];for(var n=this.getSound(i),s=u.soundInstances[i],o=0;o<s.length;o++){var r=s[o];n.playing(r)&&(n.pause(r),u.autoPausedSounds[i].push(r))}}},u.resumeAllPausedSounds=function(){for(var e=0,t=Object.keys(u.autoPausedSounds);e<t.length;e++)for(var i=t[e],n=this.getSound(i),s=0,o=u.autoPausedSounds[i];s<o.length;s++){var r=o[s];n.play(r)}u.autoPausedSounds={}},u.mute=function(){Howler.mute(!0)},u.unmute=function(){Howler.mute(!1)},u.removeStoppedSoundInstances=function(e,t){if(t){var i=this.getSound(e);if(i)for(var n=0;n<t.length;n++)i.playing(t[n])||(t.splice(n,1),n--)}},u.adjustSpriteDataForPlaybackRate=function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=0;i<e[t].length;i++)e[t][i]/=1/u.playbackRate;return e},u.refresh=function(){Howler.unload(),u.sounds={},u.autoPausedSounds={}},u.audioSpriteOnLoad=function(){for(var e,t=u.fakeProgress;t<u.fakeProgressLimit;t++)null!==(e=u.callback)&&void 0!==e&&e.call(u);a.clearInterval(u.fakeProgressIntervalID)},u.reportFakeProgress=function(){var e;u.fakeProgress<u.fakeProgressLimit-1?(u.fakeProgress++,null!==(e=u.callback)&&void 0!==e&&e.call(u)):a.clearInterval(u.fakeProgressIntervalID)},u.soundInstances={},u.audioDisabled=!1,u.isInitialised=!1,u.playbackRate=1,u.fadingSoundsTimeouts={},u.fakeProgress=0,u.fakeProgressLimit=50,u.fakeProgressInterval=600,u.loopFixHack={},u.debugRate=1,u);function u(){}o.SoundWrapper=e}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(i){var n,e=(n=PIXI.spine.Spine,__extends(t,n),t.prototype.setSkinByName=function(e){this.skeleton.setSkin(null),this.skeleton.setSkinByName(e);for(var t=this.skeleton.skin,i=0;i<this.skeleton.slots.length;i++){var n=t.attachments[i];if(n)for(var s=0,o=Object.keys(n);s<o.length;s++){var r=o[s],r=t.getAttachment(i,r).region;r&&this.hackTextureBySlotIndex(i,r.texture)}}},t);function t(e,t){var i=n.call(this,genericgame.GenericGame.textureLoader.getSkeletonData(e))||this;return i.skeletonId=e,t&&t.container&&t.container.addChild(i),i}i.SpineWrapper=e,PIXI.spine.Spine&&(PIXI.spine.Spine.prototype.autoUpdateTransform=function(){var e=i.GameTimer.getCurrentTime();this.lastTime=this.lastTime||e;var t=.001*(e-this.lastTime);this.lastTime=e,this.update(t),PIXI.Container.prototype.updateTransform.call(this)})}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(r){var s=(t.fromString=function(e){switch(e){case"NORMAL":return t.NORMAL;case"ADD":return t.ADD;case"MULTIPLY":return t.MULTIPLY;case"SCREEN":return t.SCREEN;default:return t.NORMAL}},t.NORMAL=PIXI.BLEND_MODES.NORMAL,t.ADD=PIXI.BLEND_MODES.ADD,t.MULTIPLY=PIXI.BLEND_MODES.MULTIPLY,t.SCREEN=PIXI.BLEND_MODES.SCREEN,t);function t(){}r.BLEND_MODE=s;var n,e=(n=PIXI.Sprite,__extends(i,n),i.prototype.resetLayout=function(e,t,i){void 0===i&&(i=0),this.id=e,this.setLayoutInternal(t,i,!0)},i.prototype.setLayout=function(e){this.setLayoutInternal(e,0,!0)},i.prototype.setLayoutByIndex=function(e,t){this.setLayoutInternal(e,t,!0)},i.prototype.setLayoutInternal=function(e,t,i){var n=r.Layouts.get();if(n){t=n.getTextureEntry(this.id,e,t);if(t)return this.layoutEntry=t,this.name=r.Layouts.getEntryName(t),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,null!=t.alpha&&(this.alpha=t.alpha),null!=t.blendMode&&(this.blendMode=s.fromString(t.blendMode)),this.texture&&0<t.height&&0<t.width?this.layoutScale={x:this.layoutEntry.width/this.texture.width,y:this.layoutEntry.height/this.texture.height}:this.layoutScale=null,t.processRotateAndMirror&&(t.mirror||t.rotation)?(this.setPivot(.5,.5),t.mirror&&(this.width*=-1),t.rotation&&(this.rotation=t.rotation/180*Math.PI)):t.metadata&&this.setPivot(t.metadata.pivotX,t.metadata.pivotY),null!=t.tint&&(t=parseInt(t.tint,16),isNaN(t)||(this.tint=t)),!0}return!1},i.prototype.setPivot=function(e,t){var i;null!=e&&this.anchor.x!==e&&(i=(e-this.anchor.x)*this.width,this.anchor.x=e,this.position.x+=i),null!=t&&this.anchor.y!==t&&(i=(t-this.anchor.y)*this.height,this.anchor.y=t,this.position.y+=i)},i.addAllToContainer=function(e,t,i){if(null!=(null==e?void 0:e.id))for(var n=r.Layouts.get().getTextureEntries(e.id,t),s=0;s<n.length;s++){var o=new r.SpriteWrapper(e);o.setLayoutByIndex(t,s),i.addChild(o)}},i);function i(e,t){var i=n.call(this,e)||this;return null!=e&&(i.id=e.id),i.id,r.Layouts.get()&&(null!=t?i.setLayoutInternal(t,0,!0):i.setLayoutInternal("Main",0,!1)||i.setLayoutInternal("",0,!1)),i}r.SpriteWrapper=e}(utils=utils||{}),function(e){var t=(i.PLAY="PLAY",i.CLOSE="CLOSE",i.INIT="INIT",i.ERROR="ERROR",i.FEATURE_DROP_TRIGGERED="FEATURE_DROP_TRIGGERED",i.FEATURE_START="FEATURE_START",i.FEATURE_PLAY="FEATURE_PLAY",i.FEATURE_PICK="FEATURE_PICK",i.FEATURE_END="FEATURE_END",i.FEATURE_HOLD="FEATURE_HOLD",i.FRREJECTED="FRREJECTED",i.FRCONFIRM="FRCONFIRM",i.FRRECALLED="FRRECALLED",i.FRDEFER="FRDEFER",i.GAMBLE_START="GAMBLE_START",i.GAMBLE_PICK="GAMBLE_PICK",i.GAMBLE_END="GAMBLE_END",i.PROGRESSIVE_UPDATE="PROGRESSIVE_UPDATE",i);function i(){}e.STR=t}(utils=utils||{}),function(e){var t=(i.padStart=function(e,t,i){var n=""+e;for(i=i||" ";n.length<t;)n=i+n;return n},i.getHash=function(e,t){if(t&&0!=t.v)throw new Error("unknown v");var i=0;if(0===e.length)return i;for(var n=0;n<e.length;n++){i=(i<<5)-i+e.charCodeAt(n);i|=0}return i},i);function i(){}e.StringUtils=t}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var i,t=(i=PIXI.Texture,__extends(n,i),n.from=function(e){return new n(e,PIXI.Texture.from(e,void 0,!0))},n.EMPTY=PIXI.Texture.EMPTY,n);function n(e,t){t=i.call(this,t.baseTexture,t.frame,t.orig,t.trim,t.rotate)||this,e=e.split("/");return t.id=e[e.length-1],t}e.TextureWrapper=t}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(o){var r,e=(r=PIXI.Text,__extends(a,r),a.create=function(e,t){e=new a(t.textId||t.id||"",e,t.style,t.dimensions);if("Main"!=t.section&&e.layoutEntry&&"Main"==e.layoutEntry.section)throw new Error("Must not rely on default 'Main' section.");return t.id&&t.section&&e.resetLayout(t.id,t.section),t.text&&e.setText(t.text),e},a.prototype.setLayout=function(e){this.setLayoutByIndex(e,0)},a.prototype.resetLayout=function(e,t,i){void 0===i&&(i=0),this.id=e,this.setLayoutByIndex(t,i)},a.prototype.setLayoutByIndex=function(e,t){var i=o.Layouts.get().getTextEntry(this.id,e,t);if(i){if(i.alignTextTop&&(this.verticalAlignment="top"),this.layoutEntry=i,this.name=o.Layouts.getEntryName(i),void 0!==i.alpha&&(this.alpha=i.alpha),void 0!==i.blendMode&&(this.blendMode=o.BLEND_MODE.fromString(i.blendMode)),void 0!==i.alignHorizontal&&(this.style.align=i.alignHorizontal),"center"==this.style.align?(this.dimensions.anchorX=.5,this.anchor.x=.5,"top"!==this.verticalAlignment&&(this.dimensions.anchorY=.5,this.anchor.y=.5)):"right"==this.style.align&&(this.dimensions.anchorX=1,this.anchor.x=1),i.metadata&&i.metadata.alignVertical)switch(i.metadata.alignVertical){case"top":this.dimensions.anchorY=0,this.anchor.y=0,this.verticalAlignment=i.metadata.alignVertical;break;case"middle":this.dimensions.anchorY=.5,this.anchor.y=.5,this.verticalAlignment=i.metadata.alignVertical;break;case"bottom":this.dimensions.anchorY=1,this.anchor.y=1,this.verticalAlignment=i.metadata.alignVertical}var e=i.x,t=i.y;this.x=e+i.width*this.dimensions.anchorX,this.y=t+i.height*this.dimensions.anchorY,this.dimensions||(this.dimensions={x:0,y:0,width:1e3,height:1e3,anchorX:0,anchorY:0}),this.dimensions.x=e+i.width*this.dimensions.anchorX,this.dimensions.y=t+i.height*this.dimensions.anchorY,this.dimensions.width=i.width,this.dimensions.height=i.height,void 0!==i.font&&this.parseFont(i.font),void 0!==i.fill&&(this.style.fill=i.fill,Array.isArray(this.style.fill)&&(this.style.fill=this.style.fill.concat().reverse())),"LINEAR_HORIZONTAL"===i.fillGradientType&&(this.style.fillGradientType=1),i.fillGradientStops&&(this.style.fillGradientStops=i.fillGradientStops.concat().reverse()),(i.wordWrap||i.metadata&&i.metadata.wordWrap)&&(this.style.wordWrap=!0),void 0!==i.wordWrapWidth?this.style.wordWrapWidth=i.wordWrapWidth:void 0!==i.wordWrap&&(this.style.wordWrapWidth=this.dimensions.width),void 0!==i.lineHeight&&(this.style.lineHeight=i.lineHeight),void 0!==i.dropShadow&&(this.style.dropShadow=i.dropShadow),void 0!==i.dropShadowAlpha&&(this.style.dropShadowAlpha=i.dropShadowAlpha),void 0!==i.dropShadowColor&&(this.style.dropShadowColor=i.dropShadowColor),void 0!==i.dropShadowBlur&&(this.style.dropShadowBlur=i.dropShadowBlur),void 0!==i.dropShadowAngle&&(this.style.dropShadowAngle=i.dropShadowAngle),void 0!==i.dropShadowDistance&&(this.style.dropShadowDistance=i.dropShadowDistance),void 0!==i.strokeThickness&&(this.style.strokeThickness=2*i.strokeThickness),void 0!==i.stroke&&(this.style.stroke=i.stroke),void 0!==i.padding&&(this.style.padding=i.padding),void 0!==i.textBaseline&&(this.style.textBaseline=i.textBaseline),void 0!==i.lineJoin&&(this.style.lineJoin=i.lineJoin),void 0!==i.miterLimit?this.style.miterLimit=i.miterLimit:void 0!==i.strokeThickness&&(this.style.miterLimit=5),this.style.breakWords=a.BREAK_WORDS,this.dropShadowDistance=this.style.dropShadowDistance,this.lineHeight=this.style.lineHeight,this.strokeThickness=this.style.strokeThickness,null!==(t=i.metadata)&&void 0!==t&&t.smallestFontSizeGroup&&this.addToFontSizeGroup(""+(null===(t=i.metadata)||void 0===t?void 0:t.smallestFontSizeGroup)),this.drawGuide(),this.setText(this.text)}},a.prototype.setText=function(e){this.text=e="string"!=typeof e?""+e:e,this.newFontSize=this.fontSize,this.style.fontSize=this.fontSize,this.dimensions&&this.checkDimensions(),this.fontSizeGroupId&&this.updateFontSizeGroup()},a.prototype.setMinFontSize=function(e){this.minFontSize!=e&&(this.minFontSize=e,this.setText(this.text))},a.prototype.setDimensions=function(e){this.bounds||this.updateBounds(),this.dimensions=e,void 0===this.dimensions.width&&(this.dimensions.width=this.style.wordWrapWidth),void 0===this.dimensions.height&&(this.dimensions.height=this.bounds.height),void 0===this.dimensions.x&&(this.dimensions.x=0),void 0===this.dimensions.y&&(this.dimensions.y=0),void 0===this.dimensions.anchorX&&(this.dimensions.anchorX=0),void 0===this.dimensions.anchorY&&(this.dimensions.anchorY=0),this.x=this.dimensions.x,this.y=this.dimensions.y,this.anchor.x=this.dimensions.anchorX,this.anchor.y=this.dimensions.anchorY},a.prototype.getDimensions=function(){return this.dimensions},a.prototype.drawGuide=function(){var e,t;this.dimensions&&(this.graphics?this.graphics.clear():(this.graphics=new o.GraphicsWrapper,this.parent&&this.parent.addChild(this.graphics)),e=this.dimensions.x-this.dimensions.anchorX*this.dimensions.width,t=this.dimensions.y-this.dimensions.anchorY*this.dimensions.height,this.graphics.lineStyle(2,16711680,.5),this.graphics.beginFill(16776971,.5),this.graphics.drawRect(e,t,this.dimensions.width,this.dimensions.height),this.graphics.endFill())},a.prototype.updateFontSize=function(e){this.internalUpdateFontSize(e),this.updateVerticalPositionForSpecialCharacters()},a.prototype.checkDimensions=function(){var e=this.style.padding;if(this.newFontSize=this.fontSize,this.style.fontSize=this.fontSize,this.style.lineHeight=this.lineHeight,this.style.strokeThickness=this.strokeThickness,this.style.padding=0,this.style.dropShadowDistance=0,this.updateBounds(),this.style.wordWrap)for(;this.dimensions.height&&this.bounds.height>this.dimensions.height&&this.newFontSize>this.minFontSize;)this.internalUpdateFontSize(this.newFontSize-1);else for(;this.dimensions.width&&this.bounds.width>this.dimensions.width&&this.newFontSize>this.minFontSize;)this.internalUpdateFontSize(this.newFontSize-1);var t=this.fontSize?this.newFontSize/this.fontSize:1;this.style.padding=e,this.style.dropShadowDistance=this.dropShadowDistance&&this.dropShadowDistance*t,this.style=this.style,this.updateVerticalPositionForSpecialCharacters()},a.prototype.updateVerticalPositionForSpecialCharacters=function(){"top"===this.verticalAlignment&&(this.y=this.dimensions.y-.2*this.newFontSize)},a.prototype.updateText=function(e){this.updateTextForLanguage(e),r.prototype.updateText.call(this,e)},a.prototype.updateTextForLanguage=function(e){var t,i;!this.dirty&&e||"HI"===((apiMapper?apiMapper.getLanguageCode():"")||"").toUpperCase()&&(t=!1,/[\u0900-\u097F]/.test(this.text)&&(t=!0,PIXI.TextMetrics.METRICS_STRING=a.DEFAULT_METRICS_STRING+"विऑभुस्पिनें"),e=(i=o.ArrayUtils.insist(this.style.fontFamily)).indexOf("BTG-HI"),t&&-1===e?i.push("BTG-HI"):t||-1===e||i.splice(e,1),this.style.fontFamily=i,PIXI.TextMetrics.measureFont(this.style.toFontString()),PIXI.TextMetrics.METRICS_STRING=a.DEFAULT_METRICS_STRING)},a.prototype.internalUpdateFontSize=function(e){this.newFontSize!==e&&(this.newFontSize=e,e=this.fontSize?this.newFontSize/this.fontSize:1,this.style.fontSize=this.newFontSize,this.lineHeight&&(this.style.lineHeight=this.lineHeight*e),this.strokeThickness&&(this.style.strokeThickness=this.strokeThickness*e),this.updateBounds(),!this.verticalAlignment&&.5!==this.anchor.y&&this.dimensions.height&&this.bounds.height<this.dimensions.height&&(this.y=this.dimensions.y+(this.dimensions.height-this.bounds.height)/2))},a.prototype.updateBounds=function(){this.updateTransform(),this.bounds=this.getLocalBounds(new PIXI.Rectangle)},a.prototype.parseFont=function(e){var t=e.split(" "),i=t[0].split("_"),e=i[0],i=1<i.length?i[1]:i[0];this.fontSize=Number(t[t.length-2].split("px")[0]),this.newFontSize=this.fontSize,this.fontStyle=-1<this.fontStyles.indexOf(e)?e:"normal",this.fontType=t[t.length-1],this.style.fontWeight="black"===i?"900":-1<this.fontWeights.indexOf(i)?i:"normal",this.style.fontFamily=this.fontType,this.style.fontSize=this.fontSize,this.style.fontStyle=this.fontStyle},a.cloneStyle=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},a.prototype.addToFontSizeGroup=function(e){this.fontSizeGroupId&&this.removeFromFontSizeGroup(),this.fontSizeGroupId=e,a.addToFontSizeGroup(this,e,this.fontSize)},a.prototype.removeFromFontSizeGroup=function(){this.fontSizeGroupId&&(a.removeFromFontSizeGroup(this,this.fontSizeGroupId),this.fontSizeGroupId=null)},a.prototype.updateFontSizeGroup=function(){a.updateGroupItemIdealFontSize(this,this.fontSizeGroupId,this.newFontSize)},a.addToFontSizeGroup=function(e,t,i){t&&(a.getFontSizeGroupItems(t).push({text:e,idealFontSize:i}),a.updateFontSizeGroup(t))},a.removeFromFontSizeGroup=function(e,t){if(t){for(var i=a.getFontSizeGroupItems(t),n=0;n<i.length;n++)if(i[n].text===e){i.splice(n,1);break}a.updateFontSizeGroup(t)}},a.updateGroupItemIdealFontSize=function(e,t,i){if(t){for(var n=0,s=a.getFontSizeGroupItems(t);n<s.length;n++){var o=s[n];o.text===e&&(o.idealFontSize=i)}a.updateFontSizeGroup(t)}},a.updateFontSizeGroup=function(e){if(e){for(var e=this.getFontSizeGroupItems(e),t=void 0,i=0,n=e;i<n.length;i++){var s=n[i];(!t||s.idealFontSize<t)&&(t=s.idealFontSize)}for(var o=0,r=e;o<r.length;o++)(s=r[o]).text.updateFontSize(t)}},a.getFontSizeGroupItems=function(e){var t=this.fontSizeGroups[e];return t||(this.fontSizeGroups[e]=t=[]),t},a.BREAK_WORDS=!1,a.GUIDE_ON=!1,a.DEFAULT_METRICS_STRING=PIXI.TextMetrics.METRICS_STRING,a.fontSizeGroups={},a);function a(e,t,i,n,s){s=r.call(this,o.TranslationManager.getString(e)+(null!=s?s:""),a.cloneStyle(i))||this;return s.dimensions={x:0,y:0,width:1e3,height:1e3,anchorX:0,anchorY:0},s.minFontSize=8,s.fontWeights=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],s.fontStyles=["normal","italic","oblique"],s.guideOn=!1,s.id=e,s.style.lineJoin="round",i&&(void 0!==i.font&&s.parseFont(i.font),void 0!==i.fontSize&&(s.fontSize=i.fontSize),void 0!==i.fill&&(s.style.fill=i.fill),void 0!==i.align&&(s.style.align=i.align),void 0!==i.wordWrap&&(s.style.wordWrap=i.wordWrap),void 0!==i.wordWrapWidth&&(s.style.wordWrapWidth=i.wordWrapWidth),void 0!==i.lineHeight&&(s.style.lineHeight=i.lineHeight),void 0!==i.dropShadow&&(s.style.dropShadow=i.dropShadow),void 0!==i.dropShadowAlpha&&(s.style.dropShadowAlpha=i.dropShadowAlpha),void 0!==i.dropShadowColor&&(s.style.dropShadowColor=i.dropShadowColor),void 0!==i.dropShadowBlur&&(s.style.dropShadowBlur=i.dropShadowBlur),void 0!==i.dropShadowAngle&&(s.style.dropShadowAngle=i.dropShadowAngle),void 0!==i.dropShadowDistance&&(s.style.dropShadowDistance=i.dropShadowDistance),void 0!==i.strokeThickness&&(s.style.strokeThickness=i.strokeThickness),void 0!==i.stroke&&(s.style.stroke=i.stroke),void 0!==i.padding&&(s.style.padding=i.padding),void 0!==i.textBaseline&&(s.style.textBaseline=i.textBaseline),void 0!==i.lineJoin&&(s.style.lineJoin=i.lineJoin),void 0!==i.miterLimit?s.style.miterLimit=i.miterLimit:void 0!==i.strokeThickness&&(s.style.miterLimit=1),i.alignTop&&(s.verticalAlignment="top")),s.style.breakWords=a.BREAK_WORDS,s.dropShadowDistance=s.style.dropShadowDistance,s.lineHeight=s.style.lineHeight,s.strokeThickness=s.style.strokeThickness,s.style=s.style,null==s.fontSize&&(s.fontSize=10),t&&t.addChild(s),n&&s.setDimensions(n),s.drawGuide(),s.checkDimensions(),s.graphics.alpha=s.guideOn||a.GUIDE_ON?1:0,o.Layouts.get()&&s.setLayout("Main"),s}o.TextWrapper=e}(utils=utils||{}),function(n){var e=(s.getString=function(e,t){var i=s.specialEntries[e];return null==i&&null==(i=s.translations[e])?s.tryGetSpecialString(e,t):t?s.addSubstitutions(i,t):i},s.isKnownTextId=function(e){return null!=e&&(null!=this.specialEntries[e]||null!=this.translations[e])},s.tryGetSpecialString=function(e,t){var i=this;if("string"==typeof e){if("&#10;"===e)return"\n";if(-1!==e.indexOf("{+ }"))return e.split("{+ }").map(function(e){return i.getString(e,t)}).join(" ");if(-1!==e.indexOf("{+}"))return e.split("{+}").map(function(e){return i.getString(e,t)}).join("");if(-1!==e.indexOf("{~")){var n=e.indexOf("{~");if(-1!==n&&"}"===e[e.length-1]){var s=e.slice(0,n);return e.slice(n+2,e.length-1).split(", ").map(function(e){return i.getString(s+e,t)}).join(" ")}}}return e},s.addSubstitutions=function(e,i){return e.replace(/%d|%c|%s|%f/gi,function(e){var t=i.shift();switch(e){case"%d":t=parseInt(t,10).toString();break;case"%c":t=n.Currency.format(t)}return t})},s.parseTranslationsXML=function(e){s.translations={};var i=apiMapper.getTranslationVars();btg$(e).find(i.node).each(function(e,t){t=btg$(t);s.translations[t.attr(i.key)]=t.attr(i.attrib)}),n.TextWrapper.BREAK_WORDS=s.checkForBreakLanguages(apiMapper.getLanguageCode())},s.loadTranslations=function(){var e=apiMapper.getTranslationURL(),t=genericgame.GenericGame.BUILD_TIMESTAMP;t&&"@@BUILDTIMESTAMP"!==t&&(e+="?h="+encodeURIComponent(t)),btg$.ajax({type:"GET",url:e,dataType:"xml",success:function(e){s.parseTranslationsXML(e),s.callback()},error:function(e,t,i){window.console.error("ERROR loading translations",t,i)},complete:function(){amplify.publish("LoadTranslationsFinished")}})},s.checkForBreakLanguages=function(e){var t=!1;switch(e){case"CN":case"CN-TW":case"JP":case"KR":case"DE":case"IT":case"PT":case"PT-BR":case"FR":case"DK":case"EL":case"FI":case"NL":case"NO":case"RU":case"SE":case"TR":case"VI":case"TH":t=!0}return t},s.specialEntries={BIG_WIN:"BIG WIN!",SUPER_WIN:"SUPER WIN!",MEGA_WIN:"MEGA WIN!",EPIC_WIN:"EPIC WIN!"},s);function s(){}n.TranslationManager=e}(utils=utils||{}),function(e){var t=(i.generate=function(){var i=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)})},i);function i(){}e.UUID=t}(utils=utils||{}),function(e){var t=(Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},set:function(e){this.setValue(e)},enumerable:!1,configurable:!0}),i.number=function(e){var t=e=void 0===e?0:e;return new i(function(){return t},function(e){return t=e})},i);function i(e,t){this.getValue=e,this.setValue=t}e.ValueWrapper=t}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(s){var e,i=(e=s.ContainerWrapper,__extends(t,e),t.prototype.updateTransform=function(){e.prototype.updateTransform.call(this),this.onTransform&&this.onTransform()},t);function t(){return null!==e&&e.apply(this,arguments)||this}s.BlockerContainer=i;var n=(o.prototype.getContainer=function(){return this.container},o.prototype.show=function(){Tweener.removeTween(this.container),this.container.alpha=1},o.prototype.hide=function(){Tweener.removeTween(this.container),this.container.alpha=0},o.prototype.isVisible=function(){return 0!==this.container.alpha},o.prototype.alphaIn=function(e,t){void 0===e&&(e=.5),void 0===t&&(t="easeInQuad"),Tweener.removeTween(this.container),this.hide(),Tweener.addTween(this.container,{alpha:1,transition:t,time:e})},o.prototype.alphaOut=function(e,t){void 0===e&&(e=.5),void 0===t&&(t="easeInQuad"),Tweener.removeTween(this.container),this.show(),Tweener.addTween(this.container,{alpha:0,transition:t,time:e})},o.prototype.setupGraphics=function(){var e=this.config,t=null!==(i=e.color)&&void 0!==i?i:0,i=null!==(n=e.alpha)&&void 0!==n?n:.5,e=null!==(n=e.blendMode)&&void 0!==n?n:s.BLEND_MODE.NORMAL,n=new s.GraphicsWrapper;n.beginFill(t,i),n.drawRect(0,0,20,20),n.endFill(),this.config&&this.config.blockInteraction&&(n.interactive=!0),n.blendMode=e,this.container.addChild(n),this.graphics=n,this.resizeGraphics()},o.prototype.resizeGraphics=function(){var e=this.container.worldTransform,t=-e.tx/e.a-200,i=-e.ty/e.d-200,n=renderer.screen.width/e.a+400,s=renderer.screen.height/e.d+400;t===this.gX&&i===this.gY&&n===this.gWidth&&s===this.gHeight||(e=this.graphics,this.gX=e.x=t,this.gY=e.y=i,this.gWidth=e.width=n,this.gHeight=e.height=s)},o);function o(e){var t=this;this.config=e=void 0===e?{}:e,this.container=new i,e&&e.holder&&e.holder.addChild(this.container),this.setupGraphics(),this.container.onTransform=function(){return t.resizeGraphics()}}s.Blocker=n}(utils=utils||{}),function(e){var t,i,n,s,o;function r(e){this.args=e,this.blocks={},this.container=new i,e.holder.addChild(this.container),this.updateViewAreaPoints(e.rect),this.generateBlockerTexture(),this.setSides(e.sides)}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=utils.SpriteWrapper,s=utils.TextureWrapper,o=utils.GraphicsWrapper,r.prototype.createBlockSprite=function(){var e=new n(r.texture);return this.container.addChild(e),e},r.prototype.generateBlockerTexture=function(){var e;r.texture||((e=new o).beginFill(0,1),e.lineStyle(1,0,1),e.drawRect(0,0,20,20),e.endFill(),r.texture=new s("",renderer.generateTexture(e,PIXI.SCALE_MODES.LINEAR,1)))},r.prototype.updateViewAreaPoints=function(e){this.x1=e.x,this.x2=e.x+e.width,this.y1=e.y,this.y2=e.y+e.height},r.prototype.setSides=function(e){this.sides=e.concat();for(var t=0,i=e;t<i.length;t++){var n=i[t];this.blocks[n]||(this.blocks[n]=this.createBlockSprite())}this.resizeAgain()},r.prototype.resizeAgain=function(){null!=this.lastW&&this.resize(this.lastW,this.lastH)},r.prototype.resize=function(e,t){this.lastW=e,this.lastH=t;var i=new PIXI.Point(-10,-10),n=new PIXI.Point(-10,t+20),s=new PIXI.Point(e+20,-10),t=new PIXI.Point(e+20,t+20),i=this.container.toLocal(i,stage),n=this.container.toLocal(n,stage),s=this.container.toLocal(s,stage),t=this.container.toLocal(t,stage);this.resizeBlock("L",i.x,this.x1,i.y,n.y),this.resizeBlock("R",this.x2,s.x,s.y,t.y),this.resizeBlock("T",i.x,s.x,i.y,this.y1),this.resizeBlock("B",n.x,t.x,this.y2,t.y)},r.prototype.resizeBlock=function(e,t,i,n,s){var o=this.blocks[e];o&&(-1!==this.sides.indexOf(e)&&t<i&&n<s?(o.x=t,o.y=n,o.width=i-t,o.height=s-n,o.visible=!0):o.visible=!1)},e=r,t.EdgeBlocker=e}(genericgame=genericgame||{});var utils,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var s,t=(s=e.Blocker,__extends(i,s),i.prototype.flash=function(e){var t=null!==(i=null==e?void 0:e.time)&&void 0!==i?i:1,i=null!==(n=null==e?void 0:e.alpha)&&void 0!==n?n:1,n=null!==(n=null==e?void 0:e.tint)&&void 0!==n?n:16777215,e=null!==(e=null==e?void 0:e.transition)&&void 0!==e?e:"easeOutCubic";Tweener.removeTween(this.container),this.container.alpha=i,this.graphics.tint=n,Tweener.addTween(this.container,{alpha:0,time:t,transition:e})},i);function i(e){var t=this,i=null==(e=void 0===e?{}:e)?void 0:e.holder,n=null!==(n=null==e?void 0:e.color)&&void 0!==n?n:16777215,e=null!==(e=null==e?void 0:e.alpha)&&void 0!==e?e:1;return(t=s.call(this,{holder:i,color:n,alpha:e})||this).container.alpha=0,t}e.Flasher=t}(utils=utils||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t=(i.prototype.getAssetHash=function(e){return this.assetHashes&&"string"!=typeof this.assetHashes&&this.assetHashes[e]||""},i.prototype.getCombinedSpineFilesToLoad=function(){return this.combinedSpineFiles&&"string"!=typeof this.combinedSpineFiles?this.combinedSpineFiles:[]},i.prototype.setDefaultAssetNamespace=function(e){this.namespace=e},i.prototype.getAssetNamespace=function(e){return this.namespace},i.merge=function(e){return new n(e)},i);function i(){this.assetHashes={"audio/Ambience1.m4a":"68e3164e0b30b0e6046fd5b32543b245","audio/Ambience1.ogg":"d8e0a9bed53ebe42023df2cf4be9e36a","audio/AnticipationB.m4a":"dfb1710b520b03e4dd8a1adccd883c11","audio/AnticipationB.ogg":"618c0d3f792e25c7765b643ad4897047","audio/Bang0.m4a":"432e632cf95a5c8e30da42e7cac3177d","audio/Bang0.ogg":"0af03dea46384e8ce73299ac1bb62401","audio/Bang1.m4a":"77b8ceca0a5c1ec8d1cedcda592d9a75","audio/Bang1.ogg":"30ed060abca30410ba932ef71eb77ae7","audio/Bang10.m4a":"a79e409da37f3de160a7ee697a093fb2","audio/Bang10.ogg":"d267988c2e0fadc5f1918d1fd2bbdd83","audio/Bang2.m4a":"5ebe2fe46db407e6adbc084d123a654d","audio/Bang2.ogg":"bbd2f0342931346903ae60f24ae0c86c","audio/Bang3.m4a":"cd0c0da3c6ce41e0cd65c6f5977aa817","audio/Bang3.ogg":"9091f3f0f294df836bc5fd436e0d8cc7","audio/Bang4.m4a":"a112ed95f031e2cd2d1023c0575a0096","audio/Bang4.ogg":"506f72630a76ccd44215f70eb3e3b632","audio/Bang5.m4a":"ea319ad1c4e1878b47c48115d7defda3","audio/Bang5.ogg":"73f4246349bf076c88e9dfea0c868b2e","audio/Bang6.m4a":"b9319a60c7817a716af9b27856a7042e","audio/Bang6.ogg":"9424499b852a12f4e4a830bc57cb5a53","audio/Bang7.m4a":"00b0e173bd5e2cfa961d4cb5429e2645","audio/Bang7.ogg":"1d2b9699d6a6541ccacf1ac9d6bb428f","audio/Bang8.m4a":"ba6cf8745b66b9bcf6ce6eedc8882e7a","audio/Bang8.ogg":"6a5ad6183072545a1a974623e3b3db4c","audio/Bang9.m4a":"6061f10c39d55ed69a7b1b9473fdf9b4","audio/Bang9.ogg":"6743ebc567e6519aa52ef63d00130e13","audio/BigWin0.m4a":"08e31481b7844f0420283eb7c0b9d3dd","audio/BigWin0.ogg":"701b13a410de95f3a83d6d2c62500ff3","audio/BigWin1.m4a":"4c6f4fe6a82a41a84e8e80c7db4da6b3","audio/BigWin1.ogg":"f3e89c72801d0baba24260f6403a102d","audio/BigWin2.m4a":"1e2c93690e05ade11a88f273fb44f425","audio/BigWin2.ogg":"508b51cbe4d46d77c73569a768fd834f","audio/BigWin3.m4a":"fc6e50bd9f43ebf1a608673e36dadd2c","audio/BigWin3.ogg":"3bf3319df6e16b69212a053a074eed5b","audio/BigWin4.m4a":"e9992f56105920b997172b1d60ee2056","audio/BigWin4.ogg":"3f14ab3be8b5637b3f84646c2de389b7","audio/BigWin5.m4a":"af5ed13df5e98f09931cd2ea7111b2a9","audio/BigWin5.ogg":"57a29bdb35450e59c4cd81178ebaf917","audio/BonanzaFreeSpins.m4a":"2d6c2a366310e93a24461f6f852bf213","audio/BonanzaFreeSpins.ogg":"86a2c63429cf3fc162d0b81e12f3b274","audio/Cart123.m4a":"0e1f2ceae0e07ca07d5cf797bbd6965f","audio/Cart123.ogg":"e73623484c2886b9c4b31daf648219a2","audio/CartMove.m4a":"cb598a6a1b880697f2a69f50e931390f","audio/CartMove.ogg":"3683ab4bf2b1307363f35391c6cd8200","audio/Clacker1.m4a":"1c4cc145101104b2ab7baf3fe9b0f798","audio/Clacker1.ogg":"ae21a91729f7f62be647d75cecd076f7","audio/Clacker2.m4a":"4294403ee329954bd0bcf43860117992","audio/Clacker2.ogg":"ae50b709208abdd8e50e0894f6e64450","audio/Diamond.m4a":"e0d61aa4b5323d9c6d79e8707309d0d7","audio/Diamond.ogg":"1758f38d55f768d7a7435ec17b94b8c7","audio/ExtraSpinDiamond.m4a":"5418d29735b34e4acfaf14090ae0c3bc","audio/ExtraSpinDiamond.ogg":"7e1f9519b491e4d44fca50a576622220","audio/FinalBang.m4a":"6ec6d8187a04867d6779f6d021054f72","audio/FinalBang.ogg":"e46b7f9df9b8bd7b676b8710c22da4a6","audio/GameOver.m4a":"29f32fd6a13a88641681fb716d29c96f","audio/GameOver.ogg":"bc0251211a19950f71fa51d62306b4dd","audio/GetFeature.m4a":"0afc3159addb3c438ecf7b2eab89002c","audio/GetFeature.ogg":"2fed69c07d16cc53701e8fed3c7fc295","audio/GetFeatureDrop.m4a":"6a645eee3b691db44143c953c92270b8","audio/GetFeatureDrop.ogg":"74f71284aacefe79c06ade92b752145b","audio/InTheSlot.m4a":"fefcdce8631b225a3ba72f69dfc7d8cd","audio/InTheSlot.ogg":"a160b296f1c9e5bf754cc6b70d31a434","audio/OneShot0.m4a":"c1ec24169ead3fd66bd78aca6c97b88e","audio/OneShot0.ogg":"9caa4b17cb521118089d3ca195b7412c","audio/OneShot1.m4a":"4b1da6197ecc575a69ed7baffb72e055","audio/OneShot1.ogg":"62bd35e14e6b94b4d47a34d1d33d264a","audio/OneShot2.m4a":"1505f5a9024bae354d63a9d5689b95a4","audio/OneShot2.ogg":"cec2e3cf03ea139639d964e5060d7fbc","audio/OneShot3.m4a":"ebfce6cd2988a8879b354e80765bb25a","audio/OneShot3.ogg":"a096010a4213966bb168f3411f30f6fe","audio/OneShot4.m4a":"a49375307d0cc305f90e27d5bb1c511a","audio/OneShot4.ogg":"0bfbb5bc9dab01b877cec57e8f2bc7a6","audio/OneShot5.m4a":"2c75a1f62a9e71e6388d8552322bc960","audio/OneShot5.ogg":"55900a1caff0439e2519048abaf59bcc","audio/OneShot6.m4a":"2d73857567ce3bb94cbe57523a1908fe","audio/OneShot6.ogg":"88654953e4081d175909ed5e01039997","audio/OneShot7.m4a":"df4a8a6e645854b96a13c67ab739758e","audio/OneShot7.ogg":"77830aedc0edcfb075ca40b1078bbc26","audio/OneShot8.m4a":"5974667d3dedaa5ae10b4c0ac55de37d","audio/OneShot8.ogg":"8a4f87046792384e046ee1233b09ee75","audio/Spin0.m4a":"0c6d2d2a1c05fa0875bc69f16a21b0d1","audio/Spin0.ogg":"9518c212da4193ffecf7148a32b09254","audio/Spin1.m4a":"8e12ebb8ce0c5e4a3f36439d9bad3165","audio/Spin1.ogg":"aaab332ebcbea8a888f80f5e025aae47","audio/Spin2.m4a":"1230ddff3275aa142fa5e295923bb608","audio/Spin2.ogg":"9c924bea7aff47ff8330d6c29b9c427f","audio/Spin3.m4a":"56b53f88515f4bb776472c33655fc241","audio/Spin3.ogg":"e90d1fcfd1f65c700cdb48a7cdb32ab2","audio/Spin4.m4a":"61cdff3f967ebe31fec2781ed3d69f30","audio/Spin4.ogg":"ffb55af582b1d1361bd32006b5fb85c1","audio/Spin5.m4a":"cfa7f4081e7b8cb4843b073bffc687b3","audio/Spin5.ogg":"32aa1513f83cd9e6ce365a98d0c1dc5f","audio/Spin6.m4a":"05cf4d9247d79be8b96e0317810b8c22","audio/Spin6.ogg":"97573536889efbe687b421c213513063","audio/StartSpin.m4a":"88fa842df25e81e6023216830b733ff4","audio/StartSpin.ogg":"ff5df5d3effe1f3b5c2310d3671e9470","audio/Stop.m4a":"8c7a16786332ee9f65ae7b918bee481b","audio/Stop.ogg":"1556f907019738c3c1b62ac4bbdebd4e","audio/UnderStakeWin0.m4a":"297d3ff5b21126794da472fc7b9fd929","audio/UnderStakeWin0.ogg":"bbaa6a898d8f58e4522487076e91b87d","audio/WheelSpin0.m4a":"2e060ab90759f3503fec7fd823332bb8","audio/WheelSpin0.ogg":"6fdded66de9a7fcd18ef6d2295c8a22c","audio/WheelSpin1.m4a":"da61d26b3abdeee1697e22eca74a3763","audio/WheelSpin1.ogg":"577d68d784b82852e1c23850d33b94a7","audio/WheelSpin2.m4a":"73552183c84e0ceea2cb153ea55c030c","audio/WheelSpin2.ogg":"361d0cb8f99505ef4a72a4dcabc369ce","audio/WheelSpin3.m4a":"6c21168ec6250042ca7a3e8dcca6b706","audio/WheelSpin3.ogg":"1ca20d36ae2bf4871a6b0880e4c54907","audio/WheelStart.m4a":"167e816f95fd17da6062f973dc87b359","audio/WheelStart.ogg":"088f5c4e983574673945584906e19fae","audio/WheelWinner0.m4a":"10c3fa8ba43f577401f1aaabbb71462a","audio/WheelWinner0.ogg":"148237e663949aa92a913b934e2e440d","audio/WheelWinner1.m4a":"6716fc1919970773e50a8ac71fded9c3","audio/WheelWinner1.ogg":"1dc2b147b47d3391c8d56573154e7f05","audio/WheelWinner2.m4a":"884544b1de38ab17e6317e7c3104ddf2","audio/WheelWinner2.ogg":"ddae9e91fc203b926dba572808aa5644","audio/WheelWinner3.m4a":"2ddfda3ec2353ca5c7fa44be75d87a86","audio/WheelWinner3.ogg":"e10e0308272f7aec4b8eee5226b390a0","audio/Win0.m4a":"b8c7ec842ad4978dcf8b73f51c6c4447","audio/Win0.ogg":"cc3acb9301af7783389c515c9b7b6aab","audio/Win1.m4a":"f6703e1f3ac6d171ff0d179ad4ec3ea9","audio/Win1.ogg":"eb16021ad480ecc7292ad24537a328e5","audio/Win2.m4a":"127a40c172080e17b151d6e53ef99c0b","audio/Win2.ogg":"21b47fca73fa88c1137227a60dbf056c","audio/Win3.m4a":"bcca39c5d6fb59731228c30da246e6fa","audio/Win3.ogg":"dd47231db338fc5005a00b7b8b443318","audio/Win4.m4a":"a8b9b3789f88beb9fea9e641f55354fe","audio/Win4.ogg":"727dbacd1d5f4522649b9a0648ffc6da","audio/Win5.m4a":"ec22878a11c16500732bbd0345e3341e","audio/Win5.ogg":"09a3a7fd523c721bafbf6b493f211c75","images/Animations0.json":"dc4abcc53e4cca291acc90d1eda250b4","images/Animations0.png":"cd63bbf7d00d562aba4e593d24791d61","images/Animations1.json":"ac598f074b4784f3b9978f3659b961eb","images/Animations1.png":"d3406d5728377998cd807c25adf240fa","images/Animations10.json":"727111fe7858ce64ae56b38d9f854f5a","images/Animations10.png":"d9d2a0b7a5cf9c7e811fafb2be097e59","images/Animations11.json":"08741ff7ae121977939c080e05cc61d3","images/Animations11.png":"05ac4e452c9e57d83c25e185d9a7beb8","images/Animations12.json":"91c3f3e3683c0da658f67c0cfed7273a","images/Animations12.png":"e330a8d738ccf63e4c9631af228236ff","images/Animations2.json":"dfda12fca7b8cd61a9cd49c576273ff7","images/Animations2.png":"16f2ad4988650d2b7e8ca64c0c5ee732","images/Animations3.json":"3415001cf18be716e702bbeca4988323","images/Animations3.png":"8adf1570e701611fc8b5d3b19aa18371","images/Animations4.json":"5c149c42d17826a057c71c5d9aa286ea","images/Animations4.png":"0c4306cba971281c7a314bcc2e9f3581","images/Animations5.json":"595dcfb3f9ca5817475f36453b9b26e2","images/Animations5.png":"bdea186f4fa816f349e2d0ea7b4c9f1e","images/Animations6.json":"359a0da91eedce609a2efa94836a0d84","images/Animations6.png":"ca72591b53ec4f8f7bad243613f29bce","images/Animations7.json":"e7f782b29d86e515f87be61dd4727949","images/Animations7.png":"4f95f66341a0bc907c283b8fcb859fe5","images/Animations8.json":"52e74fd200ba20650b8c36dec8ed36aa","images/Animations8.png":"78b753415f342952280f0512b4732baf","images/Animations9.json":"80aab0c3ab1dc99b100c40a462b944ee","images/Animations9.png":"cccfe70a6bff8256484513396324ce6b","images/Backgrounds0.jpg":"ea73334e4a1c113bd7b7bdd68156d6de","images/Backgrounds0.json":"8346f9077da5c4fc6d97a287c620c7b9","images/Backgrounds1.jpg":"c2993c25dd068ee3d187102fb9952045","images/Backgrounds1.json":"db2079d5be1c2f4c8bd44cd21e35b64b","images/Backgrounds2.jpg":"acab7d3f881a894d3ebf0904c5cb3138","images/Backgrounds2.json":"296d9eff2c9e2ab46c962e7a2e78b054","images/Backgrounds3.jpg":"eea841120a1f37a8309977d83c01845d","images/Backgrounds3.json":"a673c9f3f87893bfa8968612661fb3ce","images/Backgrounds4.jpg":"b6c39770cafeaded4eb14b5c71baff30","images/Backgrounds4.json":"4bb53a62f5edfa43dcae1faaca95e1c2","images/Backgrounds5.jpg":"a082542780910dc9cd64034ea6d4fa93","images/Backgrounds5.json":"4b3ef60add06dd9b9f9ce1eba130b0ca","images/Backgrounds6.jpg":"b94391df3d4668674985ccbde6cee36d","images/Backgrounds6.json":"b7df79599a6702a80113a081235ca0e5","images/Backgrounds7.jpg":"a1f7bfb437245a51b8fa238c46b729a4","images/Backgrounds7.json":"ea4b599c2c534f52cf4493ddc506e076","images/CommonElementsHigh0.json":"e783877f471bfaeec50f4a975d4bd1e8","images/CommonElementsHigh0.png":"6a882c476310eb895b488b0b4bb589c9","images/D891_0.png":"7e3a13b0c2d2eb7b1f094d7b67c8eb5c","images/D891.xml":"7f59670adebe49914c730a49fbd2f79d","images/GameElements0.json":"593f26612c52b8ed40e002b8bf7dd393","images/GameElements0.png":"c47101fdbd40837f665e8a2d1d99f32c","images/GameElements1.json":"bbc085fa8c458d22da0ba7eade90038f","images/GameElements1.png":"bff1e1489d5ca7c12c4c1e3bec0dac34","images/GameElements10.json":"39c2dda4f8fd813a25e32f408a04dd98","images/GameElements10.png":"b91f95413e896843a9f4af17b61cb9af","images/GameElements11.json":"59b4967a88ed74e47d1627c56fdc7204","images/GameElements11.png":"c4fa2dcb9a612f7c4ffa3304f2a2b976","images/GameElements12.json":"240598bbbb43840a8d18df502e3e4569","images/GameElements12.png":"92eea356947da2d4ff934d5c4373c765","images/GameElements13.json":"88c00751371e63a9c128a6ad9d2ead92","images/GameElements13.png":"c1155186f065b2500d58798402e15f6e","images/GameElements2.json":"33bf60e92de2b84e20592e28534f0258","images/GameElements2.png":"aab8274793dce66ba1cc057f89967eca","images/GameElements3.json":"22471bd5dee64baf6c3c76e5c480016a","images/GameElements3.png":"427e085899dee2f932e1ad0e891d2284","images/GameElements4.json":"f847fa5d87aa2ea4cba7709cde2d0b27","images/GameElements4.png":"b3cd81cdd3cad6a237d90c2a3127390f","images/GameElements5.json":"62cbff9bd3a90c70a2f4b7fa24565539","images/GameElements5.png":"90de885aea854647a1223ad41bf80508","images/GameElements6.json":"50545c5e441685209e1d5378c4fb597e","images/GameElements6.png":"6d4667dbf301b36779a4d8ed246acc24","images/GameElements7.json":"149f3610f56ff392d0f74c7eeda3f83c","images/GameElements7.png":"c68c0c492268ea655999eb7c62784bac","images/GameElements8.json":"7fa3e10cff589bff7783975d0ba034c5","images/GameElements8.png":"4c8c4a174792801db39683291d69a916","images/GameElements9.json":"b3515adcfa585442b3b8c224324f0ada","images/GameElements9.png":"77c642106e31e8944843b9cc1ef59cbf","images/GameElementsHigh0.json":"e7458ffc6aadfcd55fdffb31c2a1ea58","images/GameElementsHigh0.png":"40037d62e92a4a401fe167fdae868a74","images/GameElementsHigh1.json":"8fed24987d99a8301cd9e4b4d3a3430a","images/GameElementsHigh1.png":"086c1dd87705308cb4ba900a5e5bce7f","images/GameElementsHigh2.json":"547eab61980394210521e314559fda2e","images/GameElementsHigh2.png":"559605b1c047b6b75d430640c768a112","images/LoaderLogo.png":"b080a9585ef93fe457fdfe558515ed0a","images/Panel_A.png":"d6b86b676862cbc3eef292f7ce490314","layout/Common.json":"57445b6b9785d766da5dcb85e62e7075","layout/ExtraChilliLayouts.json":"4c7c637d7dfb8c5e2af6385e9032da30","spine/CombinedSpine_0.json":"a347110dfc2cd8a8f45c833178919173"},this.combinedSpineFiles=["CombinedSpine_0.json"]}e.GameAssetMetadata=t;var s,n=(__extends(o,s=t),o.prototype.getAssetsToLoad=function(){for(var e=[],t=0,i=this.data;t<i.length;t++)var n=i[t],e=e.concat(n.getAssetsToLoad());return e},o.prototype.getAudioToLoad=function(){for(var e={},t=0,i=this.data;t<i.length;t++)for(var n=i[t].getAudioToLoad(),s=0,o=Object.keys(n);s<o.length;s++){var r=o[s];e[r]=n[r]}return e},o.prototype.getAssetNamespace=function(e){for(var t=0,i=this.data;t<i.length;t++){var n=i[t];if(-1!==n.getAssetsToLoad().indexOf(e))return n.getAssetNamespace(e)}return s.prototype.getAssetNamespace.call(this,e)},o);function o(e){var t=s.call(this)||this;return t.data=e,t}}(genericgame=genericgame||{}),function(s){var o,n=utils.STR,r=utils.TranslationManager,e=utils.SoundWrapper,a=utils.GameTimer,t=utils.ContainerWrapper,l=utils.BTGAnalytics;(i=o=o||{})[i.Nothing=0]="Nothing",i[i.MsgShown_PauseAutoPlay=1]="MsgShown_PauseAutoPlay",i[i.MsgShown_StopAutoPlay=2]="MsgShown_StopAutoPlay",i[i.GamePausedByAPI=3]="GamePausedByAPI";var i=(u.prototype.startLoading=function(){u.GAME_CONNECT_ENABLED&&this.startGameConnect(),"NEXTGEN"==apiMapper.type&&(u.ALLOW_AUTOPLAY_IN_FR=!1),apiMapper.checkState(),this.setupPixi(),apiMapper.usingExternalLoader()||this.setupLoader(),a.setWindowTimeout(function(){u.textureLoader.load(stage)},0)},u.prototype.startGameConnect=function(){var e;u.GAME_CONNECT_ENABLED&&"@@VERSION"!==u.VERSION&&(e={game:u.gameName,provider:apiMapper.type,gameVersion:u.VERSION,gameBuildDate:u.BUILD_DATE,ccVersion:u.CC_VERSION},amplify.publish("GameConnect",e))},u.prototype.registerGsapPlugins=function(){"undefined"!=typeof gsap&&"undefined"!=typeof CustomEase&&gsap.registerPlugin(CustomEase)},u.prototype.setupSignals=function(){var i=this;amplify.subscribe("LoadFinished",function(){i.finishedLoading()}),amplify.subscribe("GameParameters",function(e){u.gameName=e.gameName}),amplify.subscribe("ShowErrorMessageSignal",function(){i.currentlyDisplayingError=!0,i.removeLoaderDisplay(),i.hideIntro(),i.stopGameIdleMessagesCheck(),i.bringWindowToTop(i.messageWindow)}),amplify.subscribe("ShowGameBlockMessage",function(){i.removeLoaderDisplay(),i.stopGameIdleMessagesCheck(),i.bringWindowToTop(i.messageWindow),i.infoButton&&(i.infoButton.visible=!1)}),amplify.subscribe("ErrorDisplayedSignal",function(e){i.getModel().buyingFeatureDrop=!1,i.currentlyDisplayingError=!1,e.critical||(amplify.publish("StopAutoSpinsSignal"),i.closed&&amplify.publish("SetUIEnabled",{enabled:!0}),i.messageCheck())}),amplify.subscribe("FreeRoundsErrorDisplayedSignal",function(){i.checkForRecoveredGame()}),amplify.subscribe("HomeButtonPressed",function(){apiMapper.homeButtonPressed()}),amplify.subscribe("PauseAutoPlay",function(e){i.getModel().autoPlaying&&(i.gamePaused&&!e.paused||(i.autoSpinsPaused=e.paused,i.autoSpinsPaused&&(i.autoSpinID||i.autoSpinStopID)&&(a.clearTimeout(i.autoSpinID),a.clearTimeout(i.autoSpinStopID),i.autoSpinID=i.autoSpinStopID=null,i.autoSpinCheckRequired=!0),!i.autoSpinsPaused&&i.autoSpinCheckRequired&&i.checkAutoSpins()))}),amplify.subscribe("UpdateBalanceFromAPI",function(e){var t;i.getModel().balance=e.value,null!==(t=i.ui)&&void 0!==t&&t.updateBalance(e.value,!0)}),amplify.subscribe("WindowResized",function(){i.resize()}),amplify.subscribe("SetWinTargetSignal",function(e){i.onSetWinTargetSignal(e)}),amplify.subscribe("AbortWinTargetSignal",function(){i.abortWinTarget()}),amplify.subscribe("OnPlayPressed",function(){i.getModel().buyingFeatureDrop=!1,i.startSpinCheck()}),amplify.subscribe("StartAutoSpinsSignal",function(){i.onStartAutoSpinSignal()},20),amplify.subscribe("OnStopAutoPlayPressed",function(){"IGT"===apiMapper.type||amplify.publish("StopAutoSpinsSignal")}),amplify.subscribe("StopAutoSpinsSignal",function(){var e=i.getModel();e.stopAutoPlaying(),a.clearTimeout(i.autoSpinID),a.clearTimeout(i.autoSpinStopID),e=u.USE_GENERIC_WIN_TIMER?i.isRoundOngoing():e.freeSpinsTriggered,i.autoSpinsStopped=!e,i.autoSpinsPaused=!1,!e&&i.closed&&amplify.publish("GameAnimationComplete")}),amplify.subscribe("OnStakePlusPressed",function(){i.stakePlusPressed()}),amplify.subscribe("OnStakeMinusPressed",function(){i.stakeMinusPressed()}),amplify.subscribe("OnStakeManualUpdate",function(e){i.onStakeManualUpdate(e.value)}),amplify.subscribe("OnFeatureDropPressed",function(){i.onFeatureDropPressed()}),amplify.subscribe("FeatureDropStartClicked",function(){i.onFeatureDropStartPressed()}),amplify.subscribe("FeatureDropCancelClicked",function(){i.onFeatureDropCancelPressed()}),amplify.subscribe("ResponseParsed",function(e){i.responseParsed(e.response)}),amplify.subscribe("AcceptedFreeRoundsSignal",function(e){e=e?e.optionSelected:null;i.acceptedFreeRounds(e)}),amplify.subscribe("RejectedFreeRoundsSignal",function(){var e=i.getModel();e.freeRoundOptionSelected=null,e.freeRoundChosenOffer=null,e.freeRound=null,i.checkForRecoveredGame()}),amplify.subscribe("FinishedFreeRoundsSignal",function(){i.publishAbortWins();var e=i.getModel(),t=e.mgsLastRealBet||e.defaultStake;e.setCurrentStake(t),e.updateUI(),e.freeRound=null,i.messageCheck(),i.updateFeatureDropBalance(),amplify.publish("SetUIEnabled",{enabled:!0}),i.closed=!0}),amplify.subscribe("IntroFinishedSignal",function(e){i.introFinishedSignalReceived=!0},-1),amplify.subscribe("IntroFinishedSignal",function(e){i.onIntroFinishedSignal(e&&e.suppressInit)},20),amplify.subscribe("OnDoNotShowAgainPressed",function(){i.showIntro=!i.showIntro;try{localStorage.setItem("ShowIntroScreen",i.showIntro?"Yes":"No")}catch(e){}amplify.publish("setDoNoShowAgainButton",{showTick:!i.showIntro})}),amplify.subscribe("StartRecoveredGameSignal",function(){amplify.publish("SetUIEnabled",{enabled:!1}),i.showRecoveredGame(i.getModel().recoveredResponse),i.stopGameIdleMessagesCheck(),i.getModel().recoveryBalance=null}),amplify.subscribe("OnPauseSignal",function(){i.gamePaused=!0,i.gamePausedAt=i.timestamp(),a.pause()}),amplify.subscribe("OnResumeSignal",function(){i.gamePaused=!1,i.gameBlock||(a.resume(),i.getModel().autoPlaying&&6e5<i.timestamp()-i.gamePausedAt&&amplify.publish("StopAutoSpinsSignal"))}),amplify.subscribe("GameBlock",function(e){i.gameBlock=e}),amplify.subscribe("DiscardFreeRoundsSignal",function(e){i.getModel().mgsRejectedOffer={offerID:e.offerID,instance:e.instance},amplify.publish("SendRequest",{requestType:n.FRREJECTED})}),amplify.subscribe("RealityCheckResetComplete",function(){i.realityCheckMessageVisible=!1,i.skipMessageCheckAfterRealityCheck||!i.messageCheck()&&i.getModel().autoPlaying&&i.autoSpinsPaused&&amplify.publish("PauseAutoPlay",{paused:!1})}),amplify.subscribe("APIGameResumed",function(){var e=i.messageCheckLastResult;e!==o.GamePausedByAPI&&e!==o.Nothing||!i.messageCheck()&&i.getModel().autoPlaying&&i.autoSpinsPaused&&amplify.publish("PauseAutoPlay",{paused:!1})}),amplify.subscribe("ViewResized",function(e){i.infoButton&&i.repositionInfoButton(i.infoButton,e.w,e.h)}),amplify.subscribe("FeatureBuyDisabled",function(){i.featureBuyDisabled=!0}),amplify.subscribe("FeatureDropCapChanged",function(e){var t=i.getModel().featureDrop;null!=t&&e&&(t.maxAllowedBuyPrice=e.fdCap)}),amplify.subscribe("HideInfoButton",function(){i.infoButton&&(i.infoButton.visible=!1)}),amplify.subscribe("SetAwardCap",function(e){i.awardCap=e.value}),amplify.subscribe("AbortWins",function(){i.abortWins()}),amplify.subscribe("MGSStartSpinCheck",function(){i.startSpinCheck()}),amplify.subscribe("IGTStartSpinCheck",function(){i.startSpinCheck()}),amplify.subscribe("IGTQuickRoundEnd",function(){i.isRoundOngoing()||(i.checkRoundIntervalActions(!1),i.getModel().updateUI())}),amplify.subscribe("APIRoundDurationRequirement",function(e){i.requiredMinDuration=null!==(e=e.minimum)&&void 0!==e?e:i.requiredMinDuration}),amplify.subscribe("SetTalkbackSignal",function(e){return null!=(null==e?void 0:e.lock)?(i.talkbackTextLocked=e.lock,!0):!i.talkbackTextLocked},-10),amplify.subscribe("RecoverFromNonCriticalError",function(){var e=i.getModel();e.freeRound&&(e.freeRound.roundsRemaining++,i.updateFreeRounds())})},u.prototype.checkPlayRequest=function(){var e;this.closed&&(this.spinning?(e=this.getModel(),this.sendFeatureDropAutoTrigger?(amplify.publish("SendRequest",{requestType:n.FEATURE_DROP_TRIGGERED}),e.triggeredFeatureDrop=!1,this.sendFeatureDropAutoTrigger=!1):amplify.publish("SendRequest",{requestType:n.PLAY}),this.closed=this.spinning=!1):this.autoSpinsStopped&&!this.checkMegapaysPending()&&amplify.publish("GameAnimationComplete"))},u.prototype.onPlayButtonClicked=function(){this.abortWinTarget();var e=this.isNewRoundForSpinStart();amplify.publish("GameAnimationStarted"),amplify.publish("ClearMegaWinsSignal"),amplify.publish("SpinStartedSignal"),this.roundInProgress=!0;var t,i=this.getModel();i.autoPlaying&&(i.numAutoPlays--,i.updateAutoSpins()),e&&(t=i.balance,i._roundReqNum=0,i.freeRound?(i.freeRound.roundsRemaining--,this.updateFreeRounds()):(t=apiMapper.roundGameCurrency(i.balance-i.currentStake),i.buyingFeatureDrop?(e=i.featureDrop.totals[i.currentStake],t=apiMapper.roundGameCurrency(i.balance-e),amplify.publish("Analytics_BetFeatureBuy",{cost:e})):amplify.publish("Analytics_BetSpin",{stake:i.currentStake}),this.ui.updateBalance(Math.max(0,t))),this.roundStartedAt=a.getWindowTime(),this.initialSetPlayAt=null,this.roundDelayApplied=!1,amplify.publish("GameRoundStarted",{balanceAfterBet:t})),this.autoSpinsStopped=!1},u.prototype.startSpin=function(){this.spinning=!0,this.gameView.startSpin()},u.prototype.onIntroFinishedSignal=function(e){e||(this.heldInitResponse?(e=this.heldInitResponse,this.heldInitResponse=null,this.setInitResponseCore2(e)):apiMapper.shouldInitBeforeIntro()||this.initRequestSentOnIntroFinished||void 0!==this.response||(this.initRequestSentOnIntroFinished=!0,amplify.publish("SendRequest",{requestType:n.INIT})))},u.prototype.setInitResponseCore1=function(e){this.initReceived=!0,this.publishPreInitAPIUpdate(e),apiMapper.shouldInitBeforeIntro()?this.shouldSkipIntro(e)?(this.hideIntro(),this.removeLoaderDisplay(),this.setInitResponseCore2(e)):(this.heldInitResponse=e,"MGS"==apiMapper.type?(apiMapper.usingExternalLoader()||this.removeLoaderDisplay(),amplify.publish("GameReadyToStartIntro")):(this.removeLoaderDisplay(),amplify.publish("StartIntro"))):this.setInitResponseCore2(e)},u.prototype.setInitResponseCore2=function(e){this.setInitResponse(e),amplify.publish("InitResponseComplete"),this.resize()},u.prototype.publishPreInitAPIUpdate=function(e){var t=e.defaultStake;e.isNew||(t=e.stake*e.baseStake);var i=e.balance;e.isNew||null==e.recoveryBalance||(i=e.recoveryBalance),amplify.publish("PreInitAPIUpdate",{stake:t,balance:i})},u.prototype.shouldSkipIntro=function(e){if(!e.isNew)return!0;var t=this.getModel();return!!e.freeRound||e.freeRoundOffers&&!!e.freeRoundOffers.length||t.mgsFeatureDropInitError},u.prototype.setInitResponse=function(e){this.response=e,this.heldInitResponse=null;var t,i,n=this.getModel();n.baseStake=e.baseStake,n.balance=e.balance+e.freeBetsBalance,n.recoveryBalance=e.recoveryBalance,n.stakes=e.stakeIncrements.slice(),n.maxStake=e.maxStake,n.defaultStake=e.defaultStake,n.mgsValidChips=e.mgsValidChips,n.mgsMaxChips=e.mgsMaxChips,n.maxWinnings=e.maxWinnings,n.mgsLastRealBet=e.mgsLastRealBet,n.realityCheck=e.realityCheck,n.playerMessages=(n.playerMessages||[]).concat(e.playerMessages||[]),n.freeRoundOffers=e.freeRoundOffers,n.igtPatternSliderInfo=e.igtPatternSliderInfo,this.response.isNew?n.setCurrentStake(n.defaultStake):(n.setCurrentStake(this.response.stake*n.baseStake),n.mgsChipData=e.mgsChipData),n.updateUI(),n.updateAutoSpins(),n.mgsFeatureDropInitError?this.showMgsFeatureDropInitError():(this.checkForInitialState(),this.checkForProgressives(),(t=e.freeRound)?(n.freeRound=t,i=s.models.FreeRoundVO,!e.isNew&&t.recoveryMessage?t.recoveryMessage==i.SILENT_CONTINUE?amplify.publish("AcceptedFreeRoundsSignal",{}):amplify.publish("DisplayFreeRoundRecoveryMessageSignal",{freeRound:t}):(i=[i.ERROR,i.FINISHED_NO_WINNINGS,i.FINISHED_WITH_WINNINGS,i.OPTIONS],0<t.roundsRemaining||-1<i.indexOf(t.freeRoundMessage)?amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:t}):amplify.publish("AcceptedFreeRoundsSignal",{}))):this.checkForRecoveredGame(),e.isNew&&this.checkRealityCheck(!0),null!=(e=e.featureDrop)&&(n.featureDrop=e,this.updateFeatureDropBalance()),amplify.publish("OnGameInitialised"))},u.prototype.setPlayResponseCore=function(e){var t=this,i=this.getPlayResponseDelay();a.setTimeoutWithStrictMinimum(function(){t.initialSetPlayAt||(t.initialSetPlayAt=a.getWindowTime()),t.setPlayResponse(e)},i)},u.prototype.setPlayResponse=function(e){this.response=e;var t=this.getModel();t.balance=e.balance+e.freeBetsBalance,t.recoveryBalance=e.recoveryBalance,t.win=e.win,t.freeRound=e.freeRound,t.realityCheck=e.realityCheck,t.awardCapHit=e.awardCapHit,t.setLastStake(e.stake?e.stake*t.baseStake:t.currentStake),e.isNew&&(t.playerMessages=(t.playerMessages||[]).concat(e.playerMessages||[])),this.checkForProgressives(),void 0!==(e=this.response).freePlayJSON&&(t.freePlayJSON=e.freePlayJSON)},u.prototype.setGambleBetResponse=function(e){var t=this.getModel();e.freeRoundOffers&&(t.freeRoundOffers=e.freeRoundOffers),e.freeRound&&(t.freeRound=e.freeRound),e.realityCheck&&(t.realityCheck=e.realityCheck)},u.prototype.setGambleEndResponse=function(e){var t=this.getModel();e.freeRoundOffers&&(t.freeRoundOffers=e.freeRoundOffers),e.freeRound&&(t.freeRound=e.freeRound),e.realityCheck&&(t.realityCheck=e.realityCheck)},u.prototype.setProgressiveUpdateResponse=function(e){},u.prototype.setupLoader=function(){this.progressDisplay=new s.views.ProgressDisplay(stage),this.resize()},u.prototype.startSpinCheck=function(){this.abortWinTarget();var e=this.getModel(),t=apiMapper.roundGameCurrency(e.currentStake),i=apiMapper.roundGameCurrency(e.balance);if(this.stopGameIdleMessagesCheck(),this.isNewRoundForSpinStart()){if(this.checkRoundIntervalActions(!0))return;if(!apiMapper.handleInsufficientFunds()&&!e.freeRound)if(e.buyingFeatureDrop){if(e.featureDrop.totals[e.currentStake]>i)return this.showInsufficientFundsMessage(),void(e.buyingFeatureDrop=!1)}else if(i<t)return void this.showInsufficientFundsMessage()}amplify.publish("SetUIEnabled",{enabled:!1}),this.onPlayButtonClicked()},u.prototype.isNewRoundForSpinStart=function(){var e=this.getModel();return u.USE_GENERIC_WIN_TIMER?!this.isRoundOngoing()&&!this.sendFeatureDropAutoTrigger:!e.inFreeSpins&&!e.freeSpins&&!e.triggeredFeatureDrop},u.prototype.isRoundOngoing=function(){return this.roundInProgress&&!this.roundCompletionPending},u.prototype.roundComplete=function(){this.roundInProgress=!1,this.roundCompletionPending=!1;var e=this.getModel();"MGS"==apiMapper.type&&(e.mgsChipData=null),this.response.isNew=!0,amplify.publish("GameRoundComplete",{balanceAfterRound:e.balance})},u.prototype.showInsufficientFundsMessage=function(){u.publishAPIHandleError({error:{errorMsg:r.getString("ERROR_INSUFFICIENTFUNDS"),errorTitle:r.getString("RECOVERED_GAME_TITLE"),errorID:"ERROR_INSUFFICIENTFUNDS",critical:!1},buyingFeatureDrop:this.getModel().buyingFeatureDrop})},u.prototype.updateFreeRounds=function(){var e=this.getModel().freeRound;this.ui.updateFreeRoundWin(e.win),this.ui.updateFreeRounds(e.roundsRemaining,e.totalRounds-e.roundsRemaining)},u.prototype.acceptedFreeRounds=function(e){e?this.publishAbortWins():((e=this.getModel()).setCurrentStake(e.freeRound.betPerLine),e.updateUI(),e.freeRoundChosenOffer=e.freeRound,this.updateFreeRounds(),this.checkForRecoveredGame())},u.prototype.setFreeRoundDefer=function(){"RELAX"==apiMapper.type&&amplify.publish("RejectedFreeRoundsSignal")},u.prototype.setFreeRoundRejected=function(){var e,t,i=this.getModel();"RELAX"==apiMapper.type?amplify.publish("RejectedFreeRoundsSignal"):"MGS"==apiMapper.type&&(e=i.freeRound,t=i.freeRoundChosenOffer,i.freeRoundChosenOffer=null,i.freeRound=null,t&&t.roundsRemaining!=t.totalRounds?(t=s.models.FreeRoundVO,e.freeRoundMessage=e.win?t.FINISHED_WITH_WINNINGS:t.FINISHED_NO_WINNINGS,amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:e})):i.freeRoundOffers.length?amplify.publish("DisplayFreeRoundOffersSignal"):amplify.publish("RejectedFreeRoundsSignal"))},u.prototype.finishedLoading=function(){var e=!apiMapper.shouldInitBeforeIntro();e&&this.removeLoaderDisplay(),this.setupViews(),e&&amplify.publish("StartIntro"),this.isFinishedLoading=!0},u.prototype.removeLoaderDisplay=function(){this.progressDisplay&&(this.progressDisplay.remove(),this.progressDisplay=null)},u.prototype.hideIntro=function(){this.introFinishedSignalReceived||amplify.publish("IntroFinishedSignal",{suppressInit:!0})},u.prototype.setupViews=function(){this.setupGameView(),this.setupMegapays(),this.setupUI(),this.setupFreeRoundWindow(),this.setupRealityCheckWindow(),this.setupMessageWindow(),this.setupHtmlMessageWindow(),stage.setChildIndex(this.getWindowContainer(),stage.children.length-1),this.setupInfoButton(),e.init(),apiMapper.sendGameReady(),this.resize(),this.showIntroScreen(),this.progressDisplay&&this.progressDisplay.bringToTop(),this.startAnimation()},u.prototype.setupFreeRoundWindow=function(){var e;"MGS"===apiMapper.type?(e=this.getGameLogoTexture(),this.freeRoundWindow=new mgs.views.FreeGamesWindow(this.getWindowContainer(),{logoTexture:e})):"RELAX"===apiMapper.type?this.freeRoundWindow=new relax.views.FreeRoundsWindow(this.getWindowContainer()):u.USE_FR2_WINDOW&&(this.freeRoundWindow=new s.views.FreeRoundWindow(this.getWindowContainer()))},u.prototype.setupMessageWindow=function(){var e=s.views.CommonMessageWindow,t=s.views.MessageWindow;void 0===e||void 0!==t&&t.isSetup||(this.messageWindow=new e(this.getWindowContainer()))},u.prototype.setupRealityCheckWindow=function(){"RELAX"===apiMapper.type&&(this.realityCheckWindow=new relax.views.RealityCheckWindow(this.getWindowContainer()))},u.prototype.setupHtmlMessageWindow=function(){this.htmlMessageWindow=new s.views.HtmlMessageWindow(this.getWindowContainer())},u.prototype.shouldGameHaveInfoButton=function(){return"RELAX"==apiMapper.type||"MGS"==apiMapper.type},u.prototype.setupInfoButton=function(){var e,t=this;this.shouldGameHaveInfoButton()&&((e=this.infoButton=s.TextureLoader.createSprite("Info_02")).click=e.tap=function(){return t.onInfoButtonPressed()},e.interactive=!0,stage.addChild(e),this.repositionInfoButton(this.infoButton,renderer.view.width,renderer.view.height))},u.prototype.repositionInfoButton=function(e,t,i){var n=utils.DeviceInfo.onPhone()?.06:.05,s=Math.min(t,i),o=Math.max(t,i),n=Math.min(t*n/e.texture.width,i*n/e.texture.height);e.scale.set(n,n),"MGS"==apiMapper.type?(e.position.x=e.position.y=.085*s,utils.DeviceInfo.onPhone()&&4/3<o/s&&(e.position.x+=.04*s,e.position.y+=.04*s)):(e.position.x=e.position.y=20+.01*s,utils.DeviceInfo.onIPhone()&&(e.position.x+=15,e.position.y+=30))},u.prototype.onInfoButtonPressed=function(){utils.BrowserUtils.openWindow(apiMapper.getInfoButtonHelpUrl())},u.prototype.getWindowContainer=function(){return this.windowContainer||(this.windowContainer=new t,stage.addChild(this.windowContainer)),this.windowContainer},u.prototype.bringWindowToTop=function(e){var t;e&&(t=this.getWindowContainer()).setChildIndex(e.getContainer(),t.children.length-1)},u.prototype.getGameLogoTexture=function(){return s.TextureLoader.getTexture("Logo_01")},u.prototype.showIntroScreen=function(){amplify.publish("showIntroScreenSignal")},u.prototype.responseParsed=function(e){var t=this.getModel();switch(t.buyingFeatureDrop=!1,e.type){case n.INIT:this.setInitResponseCore1(e);break;case n.PLAY:this.setPlayResponseCore(e);break;case n.FEATURE_DROP_TRIGGERED:this.setPlayResponse(e);break;case n.FEATURE_PICK:t.realityCheck=e.realityCheck,e.freeRoundOffers&&(t.freeRoundOffers=e.freeRoundOffers),e.freeRound&&(t.freeRound=e.freeRound);break;case n.CLOSE:this.setCloseResponseCore(e);break;case n.ERROR:this.setErrorResponse(e);break;case n.FRREJECTED:this.setFreeRoundRejected();break;case n.FRDEFER:this.setFreeRoundDefer();break;case n.FRRECALLED:t.freeRound=e.freeRound,amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:e.freeRound});break;case n.FRCONFIRM:t.freeRound=e.freeRound,this.response.type=e.type,this.acceptedFreeRounds(),amplify.publish("ShowFreeRoundsSignal");break;case n.GAMBLE_PICK:this.setGambleBetResponse(e);break;case n.GAMBLE_END:this.setGambleEndResponse(e);break;case n.PROGRESSIVE_UPDATE:this.setProgressiveUpdateResponse(e)}},u.prototype.setErrorResponse=function(e){amplify.publish("ReportError",{errorCode:e.errorID,errorData:e}),amplify.publish("ShowErrorMessageSignal",e)},u.prototype.setCloseResponseCore=function(e){this.roundEndActionsCheckPending&&this.checkRoundIntervalActions(!1),this.setCloseResponse(e)},u.prototype.setCloseResponse=function(e){this.checkForProgressives(),this.autoSpinIfEnabled(),this.closed=!0,this.checkPlayRequest()},u.prototype.onStartAutoSpinSignal=function(){var e=this;this.lastWinForAutoSpinCheck=0,this.getModel().startAutoPlaying(),apiMapper.initAutoPlay?(amplify.publish("SetUIEnabled",{enabled:!1}),apiMapper.initAutoPlay(function(){return e.startAutoSpinCheck()},function(){return amplify.publish("StopAutoSpinsSignal")})):this.startAutoSpinCheck()},u.prototype.startAutoSpinCheck=function(){var e;"MGS"==apiMapper.type&&"TITAN"!=apiMapper.subType?(e=this.getModel(),apiMapper.verifyAutoSpinLimits(e.currentStake,this.lastWinForAutoSpinCheck)?this.startSpinCheck():this.showAutoSpinsLimitMessage()):this.startSpinCheck()},u.prototype.autoSpinIfEnabled=function(){this.getModel().autoPlaying&&(this.autoSpinsPaused||this.gamePaused?this.autoSpinCheckRequired=!0:this.checkAutoSpins())},u.prototype.checkAutoSpins=function(){var e=this;this.autoSpinCheckRequired=!1;var t,i=this.getModel();0<i.numAutoPlays?i.checkAutoSpinLimitsHit()?u.USE_GENERIC_WIN_TIMER?(t=this.winTargetTime+(this.postWinDelay||0)+1e3,this.autoSpinStopID=a.schedule(function(){e.autoSpinStopID=null,e.showAutoSpinsLimitMessage()},t)):this.autoSpinStopID=a.setTimeout(function(){e.autoSpinStopID=null,e.showAutoSpinsLimitMessage()},this.targetTime+1e3):u.USE_GENERIC_WIN_TIMER?(t=this.getNextAutoSpinTime(),this.autoSpinID=a.schedule(function(){e.autoSpinID=null,e.startAutoSpinCheck()},t)):(250<(t=this.findWinDelay(0))&&t<2e3&&(t+=1e3),this.autoSpinID=a.setTimeout(function(){e.autoSpinID=null,e.startAutoSpinCheck()},t)):(amplify.publish("StopAutoSpinsSignal"),amplify.publish("GameAnimationComplete"))},u.prototype.getNextAutoSpinTime=function(){if(!u.USE_GENERIC_WIN_TIMER)return this.findWinTargetEndTime(250);var e=null==this.postWinDelay?250:this.postWinDelay;return this.findWinTargetEndTime(e)},u.prototype.findWinDelay=function(e){return this.targetTime+e+250},u.prototype.findWinTargetEndTime=function(e){return this.winTargetTime+e},u.prototype.showAutoSpinsLimitMessage=function(){var e=this.getModel();this.autoSpinsStopped?amplify.publish("GameAnimationComplete"):"IGT"===apiMapper.type?amplify.publish("StopAutoSpinsSignal"):amplify.publish("ShowAutoSpinsLimitMessageSignal",{lossLimitReached:e.lossLimitReached,winLimitReached:e.winLimitReached})},u.prototype.checkForRecoveredGame=function(){var e=this.getModel();this.response.isNew?(this.closed=!0,amplify.publish("SetUIEnabled",{enabled:!0}),amplify.publish("SetTalkbackSignal",{text:""}),this.featureDropAutoTriggerCheck()||this.messageCheck()):(e.setCurrentStake(this.response.stake*e.baseStake),e.updateUI(),e.recoveredResponse=this.response,e.win=this.response.win,this.roundInProgress=!0,amplify.publish("DisplayRecoveredGameMessageSignal"),amplify.publish("GameAnimationStarted"),amplify.publish("GameRoundStarted",{balanceAfterBet:e.getRecoveryBalance()}),amplify.publish("SetUIEnabled",{enabled:!1}))},u.prototype.showRecoveredGame=function(e){this.gameView.setGameRecovery(),this.setPlayResponse(e)},u.prototype.checkForInitialState=function(){this.response.hasInitialState&&this.showInitialState(this.response)},u.prototype.showInitialState=function(e){var t=this.getModel();t.win=e.win,t.updateUI()},u.prototype.getPixiOptions=function(){return{backgroundColor:0}},u.prototype.setupPixi=function(){var e=this,t=this.getPixiOptions(),i=document.createElement("canvas"),n=PIXI.Ticker.shared;n.autoStart=!1,n.stop(),this.adjustCanvas(i),t.view=i,t.width=i.width,t.height=i.height,renderer=PIXI.autoDetectRenderer(t),document.getElementById(this.elementID).appendChild(renderer.view),stage=new PIXI.Container,a.setTimeout(function(){return e.resize()},500)},u.prototype.resize=function(){var e=renderer.view;this.adjustCanvas(e),renderer.resize(e.width,e.height),this.ui&&(this.ui.resize(e.width,e.height),this.gameView.resize(e.width,e.height)),this.progressDisplay&&this.progressDisplay.resize(e.width,e.height),amplify.publish("ViewResized",{w:e.width,h:e.height})},u.prototype.startAnimation=function(){var i=this;this.animateFrame(a.FrameInterval),this.animateStage(),a.addFixedAnimator(function(e,t){return i.animateFrame(t)}),a.addStageRenderer(function(){return i.animateStage()})},u.prototype.animateFrame=function(e){this.gameView.animate(e)},u.prototype.animateStage=function(){this.gameBlock&&this.isGameLoadedEnoughForGameBlock()&&(amplify.publish("ShowGameBlockMessage",this.gameBlock),amplify.publish("OnSoundsOffPressed"),a.pause()),renderer.render(stage)},u.prototype.isGameLoadedEnoughForGameBlock=function(){return apiMapper.shouldInitBeforeIntro()?this.initReceived:this.isFinishedLoading},u.prototype.timestamp=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},u.prototype.checkForProgressives=function(){var e;void 0!==this.response.progressives&&((e=this.getModel()).progressives=this.response.progressives,amplify.publish("UpdateProgressivesSignal",{progressives:e.progressives}))},u.prototype.stakePlusPressed=function(){this.stakeChangePressed(1)},u.prototype.stakeMinusPressed=function(){this.stakeChangePressed(-1)},u.prototype.stakeChangePressed=function(e){var t;this.checkRoundIntervalActions(!1)||(t=this.getModel(),amplify.publish("SetTalkbackSignal",{text:""}),t.win=0,t.setStake(e),this.updateFeatureDropBalance(),this.publishAbortWins())},u.prototype.onStakeManualUpdate=function(e){var t=this.getModel(),i=t.getStake();i!==e&&(this.checkRoundIntervalActions(!1)?amplify.publish("StakeChanged",{stake:i}):(amplify.publish("SetTalkbackSignal",{text:""}),t.win=0,t.setCurrentStake(e),t.updateUI(),this.updateFeatureDropBalance(),this.publishAbortWins()))},u.prototype.onFeatureDropPressed=function(){var e=this.getModel();if(!e.freeRound){var t=e.featureDrop,e=t.totals[e.currentStake];if(this.featureBuyDisabled||t.maxAllowedBuyPrice<=0){var i=r.getString("INFORMATION_TITLE"),n=r.getString("FEATURE_DROP_BUY_UNAVAILABLE")+"\n\n"+r.getString("FEATURE_DROP_WILL_AUTOTRIGGER");return amplify.publish("ShowMessage",{title:i,message:n}),void amplify.publish("Analytics_BlockedFeatureBuyBecauseDisabled")}if(t.maxAllowedBuyPrice<e){t=utils.Currency.format(t.maxAllowedBuyPrice),i=r.getString("INFORMATION_TITLE"),n=r.getString("FEATURE_DROP_PRICE_LIMIT_IS",[t]);return amplify.publish("ShowMessage",{title:i,message:n}),void amplify.publish("Analytics_BlockedFeatureBuyBecausePriceLimit")}amplify.publish("SetUIEnabled",{enabled:!1}),amplify.publish("ShowFeatureDropWindow",{price:e})}},u.prototype.onFeatureDropStartPressed=function(){amplify.publish("SetUIEnabled",{enabled:!0});var e=this.getModel();e.freeRound||(e.buyingFeatureDrop=!0,this.startSpinCheck())},u.prototype.onFeatureDropCancelPressed=function(){amplify.publish("SetUIEnabled",{enabled:!0})},u.prototype.showMgsFeatureDropInitError=function(){u.publishAPIHandleError({error:{errorMsg:"SERVER_CONFIG_ERROR\nPURCHASEOPTIONS",errorTitle:r.getString("ERROR_TITLE"),errorID:"MGS_FEATURE_DROP_OPTIONS_MISSING",critical:!0}})},u.prototype.adjustCanvas=function(e){var t,i,n,s,o=apiMapper.getWindowSize();apiMapper.usingDeviceWidth()?(e.width=o.w*window.devicePixelRatio,e.height=o.h*window.devicePixelRatio,e.style.width=o.w+"px",e.style.height=o.h+"px"):(t=window.devicePixelRatio,utils.DeviceInfo.onIPhone()&&!utils.DeviceInfo.onIPhoneX()&&(t=2<t?t-1:t),utils.DeviceInfo.onAndroid()?(i=2048,n=o.h*t,(s=o.w*t)<n?i<n&&(s=s/n*i,n=i):i<s&&(n=n/s*i,s=i),e.height=n,e.width=s):(e.height=o.h*t,e.width=o.w*t),e.style.width="100%",e.style.height="100%")},u.resizeModalDialog=function(e,t,i,n,s){i=Math.min(n*i/t.width,s*i/t.height);e.scale.set(i,i),e.position.x=n/2-(t.x+t.width/2)*i,e.position.y=s/2-(t.y+t.height/2)*i},u.prototype.onSetWinTargetSignal=function(t){var e,i=this;this.abortWinTarget(),this.targetTime=t.targetTime,this.winTargetTime=a.getCurrentTime()+t.targetTime,u.USE_GENERIC_WIN_TIMER&&(this.roundCompletionPending=t.isFinalWin||!1,this.postWinDelay=t.postWinDelay,this.lastWinForAutoSpinCheck=t.win,this.winTargetTimer=a.setTimeout(function(){var e;null!==(e=apiMapper.onWinTargetTime)&&void 0!==e&&e.call(apiMapper,t.isFinalWin),i.onWinTargetTime()},t.targetTime),t.isFinalWin&&(this.updateRoundDurationStats(),this.postWinTimer=a.setTimeout(function(){i.finalWinDisplayFinished()},t.targetTime+(this.postWinDelay||0)),this.checkMegapaysFeaturePreStart(),(e=this.getModel()).awardCapHit&&(e.autoPlaying&&amplify.publish("StopAutoSpinsSignal"),this.sendAwardCapHitAnalytics(),this.showAwardCapReachedMessage())))},u.prototype.abortWinTarget=function(){this.winTargetTimer&&(a.clearTimeout(this.winTargetTimer),this.winTargetTimer=null),this.postWinTimer&&(a.clearTimeout(this.postWinTimer),this.postWinTimer=null),this.postWinDelay=null},u.prototype.publishAbortWins=function(){amplify.publish("AbortWins")},u.prototype.abortWins=function(){var e=this.getModel();e.win=0,e.updateUI(),this.abortWinTarget()},u.prototype.onWinTargetTime=function(){var e;this.isRoundOngoing()||(e=this.getModel(),this.ui.updateBalance(e.balance))},u.prototype.finalWinDisplayFinished=function(){this.roundEndActionsCheckPending=!0,this.closed&&this.checkRoundIntervalActions(!1)},u.prototype.checkRoundIntervalActions=function(e){this.roundEndActionsCheckPending=!1;var t=this.getModel();return t.freeRound&&this.updateFreeRounds(),this.ui.updateBalance(t.balance),!!this.featureDropAutoTriggerCheck()||(!!this.checkMegapaysPending()||(this.roundCompletionPending&&this.roundComplete(),!!this.messageCheck(!e)||(!(!e||"IGT"!==apiMapper.type||apiMapper.nextRoundCheck())||!(!e||"TITAN"!==apiMapper.subType||apiMapper.nextRoundCheck()))))},u.prototype.featureDropAutoTriggerCheck=function(){var e=this.getModel();return!!e.triggeredFeatureDrop&&(e.autoPlaying&&amplify.publish("StopAutoSpinsSignal"),this.sendFeatureDropAutoTrigger=!0,amplify.publish("SetUIEnabled",{enabled:!1}),this.onPlayButtonClicked(),!0)},u.prototype.messageCheck=function(e){void 0===e&&(e=!0);var t=this.getModel(),e=this.messageCheckInternal(e);return e===o.MsgShown_PauseAutoPlay?t.autoPlaying&&(amplify.publish("PauseAutoPlay",{paused:!0}),this.autoSpinCheckRequired=!0):e===o.MsgShown_StopAutoPlay&&t.autoPlaying&&amplify.publish("StopAutoSpinsSignal"),(this.messageCheckLastResult=e)!==o.Nothing},u.prototype.messageCheckInternal=function(e){var t=this;if(!u.USE_GENERIC_WIN_TIMER)return o.Nothing;if(this.stopGameIdleMessagesCheck(),this.currentlyDisplayingError)return o.MsgShown_StopAutoPlay;if(apiMapper.isGamePauseRequested())return o.GamePausedByAPI;if(this.checkFreeRoundComplete())return o.MsgShown_StopAutoPlay;if(this.checkFreeRoundExpired())return o.MsgShown_StopAutoPlay;if(this.checkRealityCheck())return o.MsgShown_PauseAutoPlay;if(this.checkPlayerMessages())return o.MsgShown_StopAutoPlay;if(this.checkFreeRoundOffers())return o.MsgShown_StopAutoPlay;var i=this.getModel();if("MGS"==apiMapper.type&&!i.freeRound&&this.checkCoinSize_MGS())return o.MsgShown_StopAutoPlay;var n=this.checkForMiscMessage();if(null!=n)return n;i=i.realityCheck;return e&&i&&i.intervalSeconds&&(this.messageCheckTimer=a.setTimeout(function(){return t.messageCheck()},3e4)),o.Nothing},u.prototype.stopGameIdleMessagesCheck=function(){this.messageCheckTimer&&(a.clearTimeout(this.messageCheckTimer),this.messageCheckTimer=null)},u.prototype.checkFreeRoundOffers=function(){var e=this.getModel();return!(!e.freeRoundOffers||e.freeRoundOffersHaveBeenShown||e.freeRound||(e.freeRoundOffersHaveBeenShown=!0,e.removeExpiredOffers(),!e.freeRoundOffers.length))&&(amplify.publish("DisplayFreeRoundOffersSignal"),!0)},u.prototype.checkFreeRoundComplete=function(){var e=s.models.FreeRoundVO,t=this.getModel(),i=t.freeRound;return!(!i||("NEXTGEN"==apiMapper.type&&i.freeRoundMessage==e.FINAL&&0==i.roundsRemaining&&(i.freeRoundMessage=i.win?e.FINISHED_WITH_WINNINGS:e.FINISHED_NO_WINNINGS,i.freeRoundOperatorMessage=null),i.freeRoundMessage!=e.FINISHED_WITH_WINNINGS&&i.freeRoundMessage!=e.FINISHED_NO_WINNINGS))&&("MGS"==apiMapper.type&&(t.freeRoundChosenOffer=null),amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:i}),!0)},u.prototype.checkFreeRoundExpired=function(){var e=this.getModel(),t=e.freeRound;return!(!t||!e.freeRoundChosenOffer)&&("MGS"===apiMapper.type&&e.freeRoundChosenOffer.endTimeHasPassed()?(t.expired=!0,t.freeRoundMessage=null,amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:t}),!0):!("RELAX"!==apiMapper.type||!e.freeRoundChosenOffer.endTimeHasPassed())&&(t.expired=!0,t.totalRounds=Math.max(t.totalRounds-(t.roundsRemaining||0),0),t.roundsRemaining=0,t.bonusFunds||(e.balance+=t.win,e.updateUI()),this.updateFreeRounds(),amplify.publish("DisplayFreeRoundMessageSignal",{freeRound:t}),!0))},u.prototype.checkCoinSize_MGS=function(){var e=this,t=this.getModel(),i=t.stakes;if(!i||!i.length||-1!=i.indexOf(t.currentStake))return!1;for(var n=i[0],s=i.length-1;0<=s;s--)if(i[s]<t.currentStake){n=i[s];break}return t.win=0,t.updateUI(),amplify.publish("showCoinSizeChangedDialog",{callback:function(){t.setCurrentStake(n),t.updateUI(),e.updateFeatureDropBalance(),e.messageCheck()}}),!1},u.prototype.checkRealityCheck=function(e){if(void 0===e&&(e=!1),this.realityCheckMessageVisible)return!0;var t=this.getModel().realityCheck;return!(!t||!t.isLimitExceeded())&&(this.bringWindowToTop(this.realityCheckWindow),this.realityCheckMessageVisible=!0,this.skipMessageCheckAfterRealityCheck=e,amplify.publish("ShowRealityCheckWindow",{realityCheck:t}),!0)},u.prototype.checkPlayerMessages=function(){var e=this;if("RELAX"!==apiMapper.type)return!1;var t=this.getModel().playerMessages;if(t&&t.length){t=t.shift();return amplify.publish("ShowMessageHtml",{title:t.title,message:t.message,okAction:function(){return e.messageCheck()}}),!0}return!1},u.prototype.queueMiscMessage=function(e){this.messageCheckMiscQueue.push(e),this.roundInProgress||this.messageCheckLastResult!==o.Nothing||this.messageCheck()},u.prototype.checkForMiscMessage=function(){var e=this,t=this.messageCheckMiscQueue.shift();return t?(a.setImmediate(function(){t.start(function(){e.getModel().autoPlaying&&!t.stopAuto&&amplify.publish("PauseAutoPlay",{paused:!1}),e.messageCheck()})}),t.stopAuto?o.MsgShown_StopAutoPlay:o.MsgShown_PauseAutoPlay):null},u.prototype.updateFeatureDropBalance=function(){var e,t=this.getModel();t.featureDrop&&(e=t.featureDrop.totals[t.currentStake],t.triggeredFeatureDrop&&(e=0),amplify.publish("UpdateFeatureDropTotalSignal",{total:e}))},u.prototype.sendAwardCapHitAnalytics=function(){amplify.publish("Analytics_AwardCapHit",{value:this.awardCap})},u.prototype.showAwardCapReachedMessage=function(){var e=this,t=utils.Currency.format(this.awardCap);amplify.publish("SetUIEnabled",{enabled:!1}),amplify.publish("ShowMessageHtml",{title:r.getString("CONGRATULATIONS"),message:"<br>"+r.getString("AWARD_CAP_REACHED_MESSAGE")+"<br><br>"+t,okAction:function(){e.getModel().awardCapHit=!1,amplify.publish("GameAnimationComplete")}})},u.prototype.setupMegapays=function(){},u.prototype.checkMegapaysPending=function(){return!1},u.prototype.checkMegapaysFeaturePreStart=function(){},u.prototype.getPlayResponseDelay=function(){if(this.roundDelayApplied)return 0;if(this.roundDelayApplied=!0,!u.RESULT_DISPLAY_MINIMUM_TIME)return 0;if(!this.roundStartedAt)return 0;var e=a.getWindowTime(),e=this.getPlayResponseDelayForMinimumRequirement(e);return e},u.prototype.getPlayResponseDelayForMinimumRequirement=function(e){if(this.requiredMinDuration){e=Math.max(e-this.roundStartedAt,0),e=this.requiredMinDuration-e-u.RESULT_DISPLAY_MINIMUM_TIME;return Math.max(e,0)}return 0},u.prototype.updateRoundDurationStats=function(){var e,t;this.roundStartedAt&&(t=(e=a.getWindowTime())-this.roundStartedAt,this.initialSetPlayAt,this.roundCountSoFar++,this.roundDurationSoFar+=Math.max(0,t),this.roundStartedAt=null)},u.publishAPIHandleError=function(e){amplify.publish("APIHandleError",e)},u.prototype.getUI=function(){return this.ui},u.prototype.getModel=function(){return s.models.GameModel.get()},u.getModel=function(){return s.models.GameModel.get()},u.get=function(){return u.instance},u.VERSION="v2.38.0-Relax",u.BUILD_DATE="13/04/2021",u.BUILD_TIMESTAMP="1618354222509",u.ERROR_REPORTING_CONFIG="https://fcb95cd518aa49fbb32ccae2dace32d9@sentry.io/1468519",u.CC_VERSION="v4.69.0",u.LIBS_VERSION="",u.GAME_CONNECT_ENABLED=!1,u.HAS_GERMAN_MARKET_HELP_FILES=!0,u.GA_TID="UA-54501830-8",u.GA_TID_FREE="",u.ANALYTICS_BETSPIN_ONEIN=100,u.ANALYTICS_PLAYERSELECT_ONEIN=100,u.ANALYTICS_BETFEATUREBUY_ONEIN=5,u.USE_FR2_WINDOW=!1,u.ALLOW_AUTOPLAY_IN_FR=!1,u.USE_GENERIC_WIN_TIMER=!1,u.PLAYBACK_RATE=1,u);function u(e,t,i){this.spinning=!1,this.targetTime=0,this.winTargetTime=0,this.closed=!1,this.autoSpinsPaused=!1,this.autoSpinCheckRequired=!1,this.gamePaused=!1,this.messageCheckMiscQueue=[],this.realityCheckMessageVisible=!1,this.skipMessageCheckAfterRealityCheck=!1,this.initRequestSentOnIntroFinished=!1,this.introFinishedSignalReceived=!1,this.roundInProgress=!1,this.roundCompletionPending=!1,this.sendFeatureDropAutoTrigger=!1,this.currentlyDisplayingError=!1,this.roundCountSoFar=0,this.roundDurationSoFar=0,u.instance=this,u.path=t,u.gameName=i,this.elementID=e,l.init(),this.registerGsapPlugins(),this.setupSignals()}s.GenericGame=i}(genericgame=genericgame||{}),function(e){(e.models||(e.models={})).FeatureDropSymbolVO=function(e,t,i){this.reel=e,this.row=t,this.amount=i}}(genericgame=genericgame||{}),function(e){var t;function i(e,t){this.symbols=e,this.totals=t}t=e.models||(e.models={}),i.prototype.copy=function(){var e=new i(this.symbols.concat(),this.totals);return e.maxAllowedBuyPrice=this.maxAllowedBuyPrice,e},e=i,t.FeatureDropVO=e}(genericgame=genericgame||{}),function(e){(e.models||(e.models={})).FreeRoundOptionsVO=function(){this.spins=0,this.stake=0}}(genericgame=genericgame||{}),function(e){var t;function i(){this.betPerLine=0,this.roundsRemaining=0,this.totalRounds=0,this.freeRoundMessage="",this.win=0}t=e.models||(e.models={}),i.prototype.endTimeHasPassed=function(){return this.endTime&&this.endTime-(new Date).getTime()<=0},i.INITIAL="INITIAL",i.FINAL="FINAL",i.OPTIONS="OPTIONS",i.FINISHED_NO_WINNINGS="FINISHED_NO_WINNINGS",i.FINISHED_WITH_WINNINGS="FINISHED_WITH_WINNINGS",i.ERROR="ERROR",i.CONTINUE="CONTINUE",i.SILENT_CONTINUE="SILENT_CONTINUE",e=i,t.FreeRoundVO=e}(genericgame=genericgame||{}),function(e){var t;function n(){var i=this;if(this.stakeIndex=0,this.lossLimits=[.2,.4,.6,.8,1],this.lossLimitsIndex=-1,this.lossLimit=0,this.winLimits=[10,50,100,500,1e3],this.winLimitsIndex=2,this.winLimit=0,this.autoPlays=[5,10,25,50,100],this.autoPlaysIndex=-1,this.isNew=!0,this.balance=0,this.win=0,this.freebets=0,this.baseStake=1,this.sequenceNumber=0,this.currentStake=0,this.defaultStake=0,this.lastStake=0,this.maxWinnings=0,this.maxStake=0,this.maxAutoPlays=this.autoPlays[this.autoPlays.length-1],this.numAutoPlays=100,this.minProgressiveStake=0,this.autoPlaying=!1,this.lossLimitReached=!1,this.winLimitReached=!1,this.freeRound=null,this.freeRoundOffersHaveBeenShown=!1,this.relaxRestoreVersion=0,this.relaxGameFinished=!1,this.relaxNextPlayHeld=!1,this._roundReqNum=0,n._instance)throw new Error("Error: Instantiation failed: Use the get() method instead of new.");amplify.subscribe("OnAutoPressed",function(){i.resetAutoSpins(),i.setAutoSpins(),i.setLossLimit(),i.setWinLimit()}),amplify.subscribe("IncrementAutoSpinsSignal",function(){i.incrementAutoSpins(),i.setAutoSpins(),i.setLossLimit()}),amplify.subscribe("DecrementAutoSpinsSignal",function(){i.decrementAutoSpins(),i.setAutoSpins(),i.setLossLimit()}),amplify.subscribe("IncrementLossLimitSignal",function(){i.incrementLossLimit(),i.setLossLimit()}),amplify.subscribe("DecrementLossLimitSignal",function(){i.decrementLossLimit(),i.setLossLimit()}),amplify.subscribe("IncrementWinLimitSignal",function(){i.incrementWinLimit(),i.setWinLimit()}),amplify.subscribe("DecrementWinLimitSignal",function(){i.decrementWinLimit(),i.setWinLimit()}),amplify.subscribe("StakeChanged",function(){var e=i.winLimitsIndex;i.resetAutoSpins(),i.setAutoSpins(),i.setLossLimit(),i.winLimitsIndex=e,i.winLimit=i.winLimits[i.winLimitsIndex]*i.currentStake,i.setWinLimit()}),amplify.subscribe("SetMaxAutoPlay",function(e){for(var t=0;t<i.autoPlays.length;t++)if(i.autoPlays[t]>=e.maxAutoplay){i.autoPlays.splice(t),i.autoPlays.push(e.maxAutoplay),i.maxAutoPlays=e.maxAutoplay;break}}),amplify.subscribe("SetGamblePickLimit",function(e){i.maxGamblePicks=e})}t=e.models||(e.models={}),n.get=function(){return n._instance},n.prototype.startAutoPlaying=function(){this.autoPlaying=!0,this.autoPlayStartBalance=this.balance},n.prototype.stopAutoPlaying=function(){this.autoPlaying=!1,this.winLimitReached=!1,this.lossLimitReached=!1},n.prototype.setLastStake=function(e){this.lastStake=Math.round(100*e)/100},n.prototype.setCurrentStake=function(e){var t=this.currentStake;this.currentStake=parseFloat(""+e),this.currentStake=Math.round(100*this.currentStake)/100,this.stakeIndex=this.stakes.indexOf(this.currentStake),-1===this.stakeIndex&&(this.stakeIndex=0),t!==this.currentStake&&this.onStakeChanged(),this.onSetStake()},n.prototype.setStake=function(e){e=this.stakeIndex+e;-1<e&&e<this.stakes.length&&(this.stakeIndex=e);e=this.currentStake;this.currentStake=this.stakes[this.stakeIndex],e!==this.currentStake&&this.onStakeChanged(),this.onSetStake(),this.updateUI()},n.prototype.onStakeChanged=function(){amplify.publish("StakeChanged",{stake:this.currentStake})},n.prototype.onSetStake=function(){},n.prototype.getStake=function(){return this.currentStake},n.prototype.getRecoveryBalance=function(){var e;return null!==(e=this.recoveryBalance)&&void 0!==e?e:this.balance},n.prototype.updateUI=function(){var e=this.balance;this.isNew||(e=this.getRecoveryBalance()),amplify.publish("UpdateUISignal",{currentStake:this.currentStake,totalStake:this.currentStake,win:this.win,balance:e})},n.prototype.checkAutoSpinLimitsHit=function(){return 0<this.lossLimit&&Math.round(100*(this.autoPlayStartBalance-this.balance+this.currentStake))/100>this.lossLimit&&(this.lossLimitReached=!0),0<this.winLimit&&this.win>=this.winLimit&&(this.winLimitReached=!0),this.lossLimitReached||this.winLimitReached},n.prototype.getAutoPlayLimits=function(){return{lossLimit:this.lossLimit,winLimit:this.winLimit}},n.prototype.updateAutoSpins=function(){this.setAutoSpins(),this.setLossLimit(),this.setWinLimit()},n.prototype.tryGetFreeRoundOffer=function(e){var t=this.freeRoundOffers,i=t[e=Math.min(e,t.length-1)];return i&&i.endTimeHasPassed()?(t.splice(e,1),this.tryGetFreeRoundOffer(e)):{freeRound:i,index:e}},n.prototype.setAutoSpins=function(){amplify.publish("UpdateAutoPlaysSignal",{numAutoPlays:this.numAutoPlays})},n.prototype.decrementWinLimit=function(){0<this.winLimitsIndex&&this.winLimitsIndex--,this.winLimit=this.winLimits[this.winLimitsIndex]*this.currentStake},n.prototype.incrementWinLimit=function(){this.winLimitsIndex<this.winLimits.length-1&&this.winLimitsIndex++,this.winLimit=this.winLimits[this.winLimitsIndex]*this.currentStake},n.prototype.decrementLossLimit=function(){0<this.lossLimitsIndex&&this.lossLimitsIndex--,this.lossLimit=this.lossLimits[this.lossLimitsIndex]*this.currentStake*this.numAutoPlays,this.lossLimit=Math.round(100*this.lossLimit)/100},n.prototype.incrementLossLimit=function(){this.lossLimitsIndex<this.lossLimits.length-1&&this.lossLimitsIndex++,this.lossLimit=this.lossLimits[this.lossLimitsIndex]*this.currentStake*this.numAutoPlays,this.lossLimit=Math.round(100*this.lossLimit)/100},n.prototype.decrementAutoSpins=function(){0<this.autoPlaysIndex&&(this.autoPlaysIndex--,this.resetLossLimit()),this.numAutoPlays=this.autoPlays[this.autoPlaysIndex]},n.prototype.incrementAutoSpins=function(){this.autoPlaysIndex<this.autoPlays.length-1&&(this.autoPlaysIndex++,this.resetLossLimit()),this.numAutoPlays=this.autoPlays[this.autoPlaysIndex]},n.prototype.resetLossLimit=function(){this.lossLimitsIndex=-1,this.lossLimit=this.lossLimits[this.lossLimitsIndex]*this.currentStake},n.prototype.resetAutoSpins=function(){this.autoPlaysIndex=-1,this.numAutoPlays=this.autoPlays[this.autoPlaysIndex],this.winLimitsIndex=2,this.winLimit=this.winLimits[this.winLimitsIndex]*this.currentStake,this.resetLossLimit()},n.prototype.setLossLimit=function(){amplify.publish("UpdateLossLimitSignal",{lossLimit:this.lossLimit})},n.prototype.setWinLimit=function(){amplify.publish("UpdateWinLimitSignal",{winLimit:this.winLimit})},n.prototype.removeExpiredOffers=function(){for(var e=this.freeRoundOffers.length-1;0<=e;e--){var t=this.freeRoundOffers[e];t&&t.endTimeHasPassed()&&this.freeRoundOffers.splice(e,1)}},n.prototype.removeOffers=function(e,t){for(var i=this.freeRoundOffers.length-1;0<=i;i--){var n=this.freeRoundOffers[i];n.id===e&&n.instance===t&&this.freeRoundOffers.splice(i,1)}},e=n,t.GameModel=e}(genericgame=genericgame||{}),function(e){var t;function r(e,t,i){this.payout=e,this.symIndex=t,this.numSyms=i}t=e.models||(e.models={}),r.prototype.copy=function(){return new r(this.payout,this.symIndex,this.numSyms)},r.buildPayouts=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if(n){for(var s=[],o=0;o<n.length;o++)s.push(new r(n[o],i,o));t.push(s)}else t.push(null)}return t},e=r,t.PayoutVO=e}(genericgame=genericgame||{}),function(e){(e.models||(e.models={})).PlayerMessageVO=function(){}}(genericgame=genericgame||{}),function(e){var t;function i(){}t=e.models||(e.models={}),i.prototype.toString=function(){return"Progressive: id: "+this.id+"\n jackpot:"+this.jackpot+"\n winnings:"+this.winnings},e=i,t.ProgressiveVO=e}(genericgame=genericgame||{}),function(e){var t;function i(){}t=e.models||(e.models={}),i.prototype.isLossLimitExceeded=function(){return this.lossLimit&&this.resultSinceReset<-this.lossLimit},i.prototype.isDurationLimitExceeded=function(){var e=60*this.minutesSinceReset+(Date.now()-this.minutesSinceResetTimestamp)/1e3;return this.intervalSeconds&&e>this.intervalSeconds},i.prototype.isLimitExceeded=function(){return this.serverLimitReached||this.isDurationLimitExceeded()||this.isLossLimitExceeded()},e=i,t.RealityCheckVO=e}(genericgame=genericgame||{}),function(e){(e.models||(e.models={})).ResponseVO=function(){this.critical=!1,this.id=0,this.sequenceNumber=0,this.errorMsg="",this.errorID="",this.errorTitle="",this.type="",this.baseStake=1,this.isNew=!0,this.maxWinnings=0,this.stakeIncrements=[],this.minProgressiveStake=0,this.maxStake=0,this.minStake=0,this.defaultStake=0,this.balance=0,this.stake=0,this.win=0,this.freeRound=null,this.freePlayJSON=null,this.freeBetsBalance=0}}(genericgame=genericgame||{}),function(e){var t;function i(e,t,i,n,s,o,r){this.payout=e,this.lines=t,this.winnings=i,this.positions=n,this.numSymsInReels=s,this.wildMultiplers=o,this.reverse=r}t=e.models||(e.models={}),i.prototype.copy=function(){return new i(this.payout,this.lines,this.winnings,this.positions.slice(),this.numSymsInReels,this.wildMultiplers,this.reverse)},e=i,t.WinVO=e}(genericgame=genericgame||{}),function(n){var e,t;function s(){}e=n.services||(n.services={}),s.disable=function(){try{"undefined"!=typeof Raven&&Raven.uninstall(),amplify.unsubscribe("APIHandleError",s.onAPIHandleError),amplify.unsubscribe("ResponseReceived",s.onResponseReceived),amplify.unsubscribe("SendRequestDataCreated",s.onSendRequestDataCreated),amplify.unsubscribe("ReportError",s.onReportError),s.isInitialised=!1}catch(e){}},s.init=function(e,t,i){try{if("undefined"==typeof Raven||!t||"@@ERRORREPORTINGCONFIG"===t)return;s.providerCode=e,s.applyThresholds(e,i),s.isRavenConfigured?(t&&Raven.setDSN(t),Raven.install()):(Raven.config(t).install(),Raven.setTagsContext({buildVersion:n.GenericGame.VERSION,buildDate:n.GenericGame.BUILD_DATE}),Raven.setShouldSendCallback(function(e){return s.getShouldSend(e)}),s.isRavenConfigured=!0),s.isInitialised||(amplify.subscribe("APIHandleError",s.onAPIHandleError,1),amplify.subscribe("ResponseReceived",s.onResponseReceived,1),amplify.subscribe("SendRequestDataCreated",s.onSendRequestDataCreated,1),amplify.subscribe("ReportError",s.onReportError),s.isInitialised=!0)}catch(e){}},s.applyThresholds=function(e,t){var i=(i=s.thresholds)||s.getDefaultThresholds(e);s.thresholds=s.mergeThresholds(i,t)},s.setPauseState=function(e){s.isPaused=e},s.reportError=function(t,i){var n=new Error(t);try{throw n}catch(e){return s.reportRawError(e,t,i),n}},s.reportRawError=function(e,t,i){var n;"undefined"!=typeof Raven&&(n={},t&&(n.fingerprint=[t]),i&&(n.extra=i),Raven.captureException(e,n)),e.btg_errorHandled=!0},s.reportAndThrow=function(e,t){throw s.reportError(e,t)},s.reportAndRethrow=function(e){throw"undefined"!=typeof Raven&&Raven.captureException(e),e.btg_errorHandled=!0,e},s.onReportError=function(e){e.error?s.reportRawError(e.error,e.errorCode,e.errorData):s.reportError(e.errorCode,e.errorData)},s.onAPIHandleError=function(e){var t;e&&!e.skipErrorReport&&null!==(t=e.error)&&void 0!==t&&t.errorID&&(s.isInsufficientFundsError(e.error.errorID)||s.reportError(e.error.errorID,{error:e.error}))},s.onResponseReceived=function(e){try{Raven.captureBreadcrumb({message:"ServerResponse",data:e})}catch(e){}},s.onSendRequestDataCreated=function(e){try{Raven.captureBreadcrumb({message:"ServerRequest",data:e})}catch(e){}},s.isInsufficientFundsError=function(e){for(var t=0,i=["ERROR_INSUFFICIENTFUNDS","INSUFFICIENTFUNDS","INSUFFICIENT_FUNDS","EC_GENERAL_INSUFFICIENT_FUNDS","EC_GAME_GENERAL_BET_EXCEEDS_PLAYER_BALANCE"];t<i.length;t++)if(-1!==(e||"").indexOf(i[t]))return!0;if("RELAX"===s.providerCode)if("506"==e)return!0;return!1},s.getShouldSend=function(e){if(s.isPaused||s.getShouldIgnoreThisUserAgent())return!1;if(!e)return!0;var t=null,i=e.exception;if(i&&i.values&&i.values.length){var n=i.values[0];if(n.btg_errorHandled)return!1;n=n?n.value:null;null!=n&&s.thresholds&&(t=s.thresholds[n])}n=e.fingerprint;return n&&n.length&&s.thresholds&&(n=s.thresholds[n[0]],null!=t&&null!=n?t=Math.max(t,n):null!=n&&(t=n)),t=t||0,e.extra=e.extra||{},e.extra.errorThreshold=t,Math.random()>=t},s.getShouldIgnoreThisUserAgent=function(){var e=(window.navigator.userAgent||"").toLowerCase();return!(!e||-1===e.indexOf("prerender")&&-1===e.indexOf("headless")&&-1===e.indexOf("phantomjs"))},s.getDefaultThresholds=function(e){return this.mergeThresholds(this.getStandardThresholds(),this.getThresholdsForServerType(e))},s.getStandardThresholds=function(){return{ASSET_LOAD_ERROR_1:.95,ASSET_LOAD_ERROR_2:0}},s.getThresholdsForServerType=function(e){switch(e){case"NEXTGEN":return{ERROR_INSUFFICIENTFUNDS:1,ERROR_INVALID_SESSION:1,ERROR_DEFAULT:.95,SERVLET_ERR:.5,ERROR_SERVLET:.5,SERVLET_ERROR:.5,NEXTGEN_GETSIZE_UNAVAILABLE:.99,NEXTGEN_GETSIZE_FAILED:.99,NEXTGEN_GETSIZE_FAILED_X:1,ERROR_INVALID_LB_TOKEN:.99,ERROR_GAMING_LIMITS:.99,ERROR_REALITY_CHECK:.99,ERROR_GEOLOCATION_FAILURE:.99,ERROR_ACCOUNT_BLOCKED:.99};case"GAMESERVER":return{ERROR_INSUFFICIENTFUNDS:1,INSUFFICIENTFUNDS:1,INSUFFICIENT_FUNDS:1,GAME_SESSION_CONFLICT:1,AJAX_ERROR:1};case"MGS":return{"EC_GENERAL_INSUFFICIENT_FUNDS|4|0":1,"EC_GAME_GENERAL_BET_EXCEEDS_PLAYER_BALANCE|503|0":1,"211|211|0":.9,"211|211|0|INIT":.9,"212|212|0":.9,"212|212|0|INIT":.9,"EC_GENERAL_SQL_ERROR|2|0|INIT":.9,"EC_GENERAL_UNKNOWN|0|40":.9,"EC_GENERAL_UNKNOWN|0|40|INIT":.9};case"RELAX":return{AJAX_ERROR:1,101:1,520:1,506:1,522:1,503:1,544:1,105:1,531:1,534:1,559:1};case"IGT":return{IGT_FATAL_ERROR_REPEAT:1};default:return{}}},s.mergeThresholds=function(e,t){if(!t)return e||{};if(!e)return t||{};try{for(var i=JSON.parse(JSON.stringify(e)),n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];i[o]=t[o]}return i}catch(e){return t||{}}},s.isRavenConfigured=!1,s.isInitialised=!1,t=s,e.ErrorReportingService=t}(genericgame=genericgame||{}),function(l){var u,h,e;function p(){}u=l.services||(l.services={}),h=utils.AjaxQueue,p.setupSignals=function(){amplify.subscribe("GameConnect",function(e){p.isInProgress=!0,p.beginConnect(e)})},p.inProgress=function(){return p.isInProgress},p.beginConnect=function(e){p.setup=e,p.beginConnectInternal()},p.beginConnectInternal=function(){p.attemptCount++,p.isInProgress=!0;var e=p.setup;try{var t=p.URL_PROD,i=window.location.href||"";-1<i.indexOf("btggameconnectdev")&&(t=p.URL_DEV);var n={game:e.game,provider:e.provider,gameVersion:e.gameVersion,gameBuildDate:e.gameBuildDate,ccVersion:e.ccVersion,lang:apiMapper.getLanguageCode()};-1<i.indexOf("btggameconnectnogeowhitelist")&&(n.noGeoWhitelist=!0),-1<i.indexOf("btggameconnectforcegeoblock")&&(n.forceGeoblock=!0),btg$.ajax({url:t,data:n,success:p.onSuccess,error:p.onFailure,timeout:2e4})}catch(e){p.isInProgress=!1,amplify.publish("ReportError",{error:e})}},p.onSuccess=function(e){var t,i,n,s;if(void 0!==u.ErrorReportingService&&e&&e.errorReporting&&(t=e.errorReporting,n=p.setup.provider,t.disable?u.ErrorReportingService.disable():(t.ravenDsn&&u.ErrorReportingService.init(n,t.ravenDsn),t.thresholds&&u.ErrorReportingService.applyThresholds(n,t.thresholds))),e&&e.geo&&e.geo.block&&(amplify.publish("GameBlock",{title:"Game Unavailable",message:e.geo.message}),stage.interactive=!1,stage.interactiveChildren=!1),null!=e&&e.analytics&&(i=e.analytics,(n=l.GenericGame).GA_TID=i.ga_tid||n.GA_TID,n.GA_TID_FREE=i.ga_tid_free||n.GA_TID_FREE,n.GA_SAMPLE_RATE=null!==(t=i.ga_sample_rate)&&void 0!==t?t:n.GA_SAMPLE_RATE,n.ANALYTICS_BETSPIN_ONEIN=null!==(t=i.betspin_onein)&&void 0!==t?t:n.ANALYTICS_BETSPIN_ONEIN,n.ANALYTICS_BETFEATUREBUY_ONEIN=null!==(t=i.betfeaturebuy_onein)&&void 0!==t?t:n.ANALYTICS_BETFEATUREBUY_ONEIN,n.ANALYTICS_PLAYERSELECT_ONEIN=null!==(i=i.playerselect_onein)&&void 0!==i?i:n.ANALYTICS_PLAYERSELECT_ONEIN),e&&e.dynamic&&e.dynamic.scripts&&e.dynamic.scripts.length){s=new h({onQueueEmptied:function(){return p.notifyFinished()}});try{for(var o=0,r=e.dynamic.scripts;o<r.length;o++){var a=r[o];s.queueRequest({ajaxArgs:{url:a.url,dataType:"script",timeout:2e4},onSuccess:null,onError:null})}}catch(e){amplify.publish("ReportError",{error:e}),s=null}}s||p.notifyFinished()},p.notifyFinished=function(){p.isInProgress=!1},p.onFailure=function(e,t,i){p.attemptCount<3?p.beginConnectInternal():(p.isInProgress=!1,p.failed=!0)},p.attemptCount=0,p.URL_PROD="https://services.bigtimevegas.com/gameconnect",p.URL_DEV="https://servicesdev.bigtimevegas.com/gameconnect",e=p,(u.GameConnectService=e).setupSignals()}(genericgame=genericgame||{}),function(e){var t,i;function n(){this.setupSignals()}t=e.services||(e.services={}),i=utils.GameTimer,n.prototype.setupSignals=function(){amplify.subscribe("SendRequest",function(e){amplify.publish("SendRequestDataCreated",{request:null,requestType:e.requestType}),i.setTimeout(function(){amplify.publish("ResponseReceived",{type:e.requestType})},500)})},e=n,t.GenericRequestService=e}(genericgame=genericgame||{}),function(t){var e,i,n,s;function o(){var t=this;this.keyPressed=function(e){t.checkTriggers(e)},this.setupSignals()}e=t.services||(t.services={}),i=utils.Currency,n=utils.Random,o.prototype.setupSignals=function(){var t=this;amplify.subscribe("ResponseReceived",function(e){t.onResponseReceived(e)}),document.addEventListener("keydown",this.keyPressed)},o.prototype.checkTriggers=function(e){},o.prototype.onResponseReceived=function(e){switch(this.model=t.GenericGame.getModel(),this.responseObject.type=e.type,0<this.model.currentStake&&(this.responseObject.stake=this.model.currentStake),0<=this.model.balance&&(this.responseObject.balance=this.model.balance),this.responseObject.win=0,this.triggerSignalIndex=0,this.responseObject.type){case utils.STR.INIT:this.createInit();break;case utils.STR.PLAY:this.createPlay();break;case utils.STR.CLOSE:}amplify.publish("ResponseParsed",{response:this.responseObject})},o.prototype.createInit=function(){this.responseObject.stakeIncrements=[.2,.4,1,2,3,5,10],this.responseObject.defaultStake=1,this.responseObject.balance=500,this.responseObject.isNew=!0,i.setPrefix("£")},o.prototype.createPlay=function(){this.responseObject.balance=this.model.balance-this.model.currentStake,this.responseObject.freeBetsBalance=0,this.responseObject.win=0},o.prototype.findRandomWeightedIndex=function(e){return n.findRandomWeightedIndex(e)},o.prototype.add=function(e,t){return e+t},s=o,e.GenericResponseService=s}(genericgame=genericgame||{}),function(_){var n=utils.AnimatedSpriteWrapper,u=utils.GameTimer,h=utils.SpriteWrapper,p=utils.TextureWrapper,s=utils.TranslationManager,e=(o.get=function(){return _.GenericGame.textureLoader},o.prototype.load=function(i){var n=this;this.imageLoader=PIXI.Loader.shared,this.totalToLoad=0,this.loadCommonLayout&&(this.layoutsToLoad.unshift("Common.json"),this.assetsToLoad.push("CommonElementsHigh0.json")),this.totalToLoad+=this.layoutsToLoad.length,this.totalToLoad+=3*this.assetsToLoad.length,this.totalToLoad+=2*this.nineSliceTextures.length,this.totalToLoad+=this.sounds.length,this.totalToLoad+=this.skeletonsToLoad.length,this.totalToLoad+=1,void 0!==_.services&&void 0!==_.services.GameConnectService&&_.services.GameConnectService.inProgress()&&(this.totalToLoad+=1,this.gameConnectStartTime=Date.now());for(var e=0,t=Object.keys(PIXI.utils.TextureCache);e<t.length;e++){t[e];++this.totalToLoad}for(var s=this.assetsToLoad.concat(this.nineSliceTextures),o=this.path,r=0,a=s;r<a.length;r++){var l=a[r],u=-1===l.indexOf("/")?"images/":"",h=this.assetMetadata.getAssetNamespace(l);this.imageLoader.add(l,o+u+l,{metadata:{imageMetadata:{btgAssetNamespace:h}}})}for(var p=0,c=this.skeletonsToLoad;p<c.length;p++){var d=c[p];this.imageLoader.add("spine/"+d.resourceName,o+"spine/"+d.resourceName,{metadata:{spineAtlas:!1}})}for(var m=0,f=this.assetMetadata?this.assetMetadata.getCombinedSpineFilesToLoad():[];m<f.length;m++){d=f[m];this.totalToLoad++,this.imageLoader.add("spine/"+d,o+"spine/"+d)}for(var g=0,y=this.layoutsToLoad;g<y.length;g++){var S=y[g];this.imageLoader.add(S,o+"layout/"+S)}utils.SoundWrapper.callback=function(){return n.onProgressCallback()},this.audioSpriteDataToLoad?(this.totalToLoad+=utils.SoundWrapper.fakeProgressLimit,this.imageLoader.add(this.audioSpriteDataToLoad,o+"audio/"+this.audioSpriteDataToLoad+".json")):this.loadSounds(),this.loadTranslations(),this.imageLoader.pre(function(e,t){return n.preResource(e,t)}),this.imageLoader.onProgress.add(function(){return n.onProgressCallback()}),this.imageLoader.onError.add(function(){return n.loadError=!0}),this.imageLoader.load(function(e,t){return n.onAssetsLoaded(i,t)})},o.prototype.isImageJsonResource=function(e){return"JSON"===e.extension.toUpperCase()&&-1!==e.url.indexOf("images/")},o.prototype.preResource=function(e,t){var i;this.assetMetadata&&e.url.substr(0,this.path.length)===this.path&&(i=e.url.substr(this.path.length),e.url=this.getAssetUrl(i),null!==(i=e.metadata)&&void 0!==i&&i.btgAssetNamespace&&(this.assetUrlToNamespaceMap[e.url]=e.metadata.btgAssetNamespace)),this.isCrossOriginWorkaroundNecessary(e.url)&&(e.crossOrigin="",e.data&&(e.data.crossOrigin=null)),t()},o.prototype.onAssetsLoaded=function(t,i){try{this.primeTextures(t),this.loadTextures(i),this.loadSkeletons(i),this.loadFontTextures(i),this.loadLayout(i),this.audioSpriteDataToLoad&&this.loadAudioData(i),this.checkConnect()}catch(e){window.console.error(e);var n=this.loadError?"ASSET_LOAD_ERROR_1":"ASSET_LOAD_ERROR_2",t=this.loadError?"ERROR_COMMUNICATIONS":"ERROR_UNKNOWN",i="ERROR";this.translationsLoaded&&(t=s.getString(t),i=s.getString("ERROR_TITLE")),amplify.publish("ReportError",{error:e,errorCode:n}),_.GenericGame.publishAPIHandleError({error:{errorID:n,errorTitle:i,errorMsg:t,critical:!0},skipErrorReport:!0})}},o.prototype.loadAudioData=function(e){e=this.parseAudioData(e[this.audioSpriteDataToLoad].data);utils.SoundWrapper.loadAudioSpriteSounds(this.findSoundFromID(e.src,this.sounds).src,e.sprite,_.GenericGame.PLAYBACK_RATE)},o.prototype.loadLayout=function(e){this.TextureLayouts||(this.TextureLayouts=new utils.Layouts);for(var t=0,i=this.layoutsToLoad;t<i.length;t++){var n=i[t];this.TextureLayouts.parseJSONLayout(e[n].data)}this.TextureLayouts.initialise()},o.prototype.loadSkeletons=function(e){if(PIXI.spine){for(var t=new PIXI.spine.core.TextureAtlas,i=0,n=Object.keys(PIXI.utils.TextureCache);i<n.length;i++){var s=n[i];t.addTexture(s,PIXI.utils.TextureCache[s])}for(var o=new PIXI.spine.core.AtlasAttachmentLoader(t),r=new PIXI.spine.core.SkeletonJson(o),a=0,l=this.skeletonsToLoad;a<l.length;a++){var u=l[a];(h=e["spine/"+u.resourceName])&&h.data&&(this.skeletonData[u.id]=r.readSkeletonData(h.data))}o=(this.assetMetadata?this.assetMetadata.getCombinedSpineFilesToLoad():null)||[];if(o.length)for(var h,p=0,c=o;p<c.length;p++)if((h=e["spine/"+c[p]])&&h.data)for(var d=h.data,m=0,f=Object.keys(d);m<f.length;m++){var g=f[m];null!==(s=this.spineIdOverrides[g])&&(s=s||g.substring(0,g.length-".json".length),this.skeletonData[s]=r.readSkeletonData(d[g]))}}},o.prototype.loadFontTextures=function(e){if(this.fontTexturesToLoad.length)for(var t=0,i=this.fontTexturesToLoad;t<i.length;t++){var n=i[t];this.fontTextureData[n.fontId]={};var s=e[n.resourceName];if(s&&s.bitmapFont&&s.bitmapFont.chars)for(var o=0,r=Object.keys(s.bitmapFont.chars);o<r.length;o++){var a=r[o],l=String.fromCharCode(a),a=s.bitmapFont.chars[a].texture;this.fontTextureData[n.fontId][l]=new p("",a)}}},o.prototype.primeTextures=function(t){var e,i=this,n=[],s=PIXI.utils.TextureCache,o=[],r=[];for(e in s){var a=s[e];a.baseTexture&&-1===o.indexOf(a.baseTexture)&&(r.push(a),o.push(a.baseTexture))}var l=function(){for(;0<n.length;)n.pop().destroy(),i.onProgressCallback();var e=r.pop();null!=e&&(e=new h(e),t.addChildAt(e,0),n.push(e)),(0<r.length||0<n.length)&&u.setWindowTimeout(function(){return l()})};l()},o.prototype.setAssetMetadata=function(e){this.assetMetadata=e,this.buildAudioArray(e.getAudioToLoad()),this.assetsToLoad=e.getAssetsToLoad()},o.prototype.loadTextures=function(e){this.loadedFramesTrackerObj={}},o.prototype.loadSounds=function(){utils.SoundWrapper.loadSounds(this.sounds,_.GenericGame.PLAYBACK_RATE)},o.prototype.loadTranslations=function(){var e=this;utils.TranslationManager.callback=function(){e.translationsLoaded=!0,e.onProgressCallback()},utils.TranslationManager.loadTranslations()},o.prototype.checkConnect=function(){var e=this;this.gameConnectStartTime&&(!_.services.GameConnectService.inProgress()||3e4<Date.now()-this.gameConnectStartTime?this.onProgressCallback():u.setWindowTimeout(function(){return e.checkConnect()},500))},o.prototype.onProgressCallback=function(){amplify.publish("UpdateLoader",{percent:this.loaded++/this.totalToLoad}),this.loaded===this.totalToLoad&&amplify.publish("LoadFinished")},o.prototype.getTextureFrame=function(e){return p.from(e)},o.prototype.getTextureImage=function(e){var t,e=this.getAssetUrl(e);return this.isCrossOriginWorkaroundNecessary(e)&&(t=!1),PIXI.Texture.from(e,{resourceOptions:{crossorigin:t}})},o.prototype.isCrossOriginWorkaroundNecessary=function(e){return"GAMESERVER"==apiMapper.type&&this.isSameOrigin(e)},o.prototype.isSameOrigin=function(e){this.tempAnchor||(this.tempAnchor=document.createElement("a"));var t=window.location,i=this.tempAnchor;return i.href=e,i.hostname==t.hostname&&i.port==t.port&&i.protocol==t.protocol},o.prototype.getFontTexture=function(e,t){e=this.fontTextureData[e];return e?e[t]:void 0},o.prototype.getStaticTextureString=function(e,t){return this.layoutToTextureMap[t=(t=void 0===t?"":t)||""]||(this.layoutToTextureMap[t]=this.buildLayoutToTextureMapping(t,"")),this.layoutToTextureMap[t][e]},o.prototype.getAssetUrl=function(e){var t,i=this.path+e,n=[];return!this.assetMetadata||(t=this.assetMetadata.getAssetHash(e))&&n.push("h="+t),"GAMESERVER"!=apiMapper.type||(t=apiMapper.getAssetQueryParams())&&t.length&&n.push.apply(n,t),n.length&&(i+="?"+n.join("&")),i},o.prototype.buildLayoutToTextureMapping=function(e,t){for(var i={},n=utils.Layouts.get(),s=0,o=Object.keys(this.textures);s<o.length;s++){var r=o[s],a=null===(a=null===(a=null===(a=this.textures[r])||void 0===a?void 0:a.baseTexture)||void 0===a?void 0:a.resource)||void 0===a?void 0:a.url;(this.assetUrlToNamespaceMap[a]||t)==e&&(a=(a=r.split("/"))[a.length-1],n.hasTextureEntryWithId(a)&&(i[a]=r))}return i},o.prototype.getTexture=function(e,t){return this.getTextureInternal(e,t)},o.prototype.getTextureInternal=function(e,t){return null!=t&&0<=t?this.textureLists[e].length&&this.textureLists[e][t]?this.textureLists[e][t]:this.textures[e]:this.textures[e]||void 0},o.getTexture=function(e,t,i){var n=_.GenericGame.textureLoader;if(null==t)return n.getTextureInternal(e);if(null==i)return n.getTextureInternal(e,t);i=n.getTextureInternal(e,t)[i];return i},o.createSprite=function(e,t,i,n){n=o.getTexture(e,i,n);return new h(n,t)},o.prototype.getAnimation=function(e,t){return null!=t&&0<=t?this.animationLists[e]&&this.animationLists[e][t]?this.animationLists[e][t]:this.animations[e]:this.animations[e]||void 0},o.createAnimation=function(e,t,i){t=_.GenericGame.textureLoader.getAnimation(e,t);return i?n.create(t,i.id,i.section,i.index):new n(t)},o.prototype.getSkeletonData=function(e){e=this.skeletonData[e];return e},o.prototype.storeTextures=function(){this.loadLegacyTextures&&this.addLegacyTextures();for(var e=0,t=this.texturesToStore.length;e<t;e++)this.textures[this.texturesToStore[e]]=this.getTextureFrame(this.texturesToStore[e])},o.prototype.addLegacyTextures=function(){this.texturesToStore=this.legacyTexturesToLoad.concat(this.texturesToStore)},o.prototype.storeNineSliceTextures=function(){for(var e=0,t=this.nineSliceTextures.length;e<t;e++){var i=this.nineSliceTextures[e].split("."),n=i[0],i=i[1];this.textures[n]=new p(n,this.getTextureImage("images/"+n+"."+i))}},o.prototype.buildAudioArray=function(e){function t(e,t){return e=i.indexOf(e),t=i.indexOf(t),(e=-1==e?10:e)-(t=-1==t?10:t)}var i=[".ogg",".m4a",".mp3",".wav"];null==this.sounds&&(this.sounds=[]);for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n],r={id:o,src:[]},a=e[o];a.sort(t);for(var l=0,u=a;l<u.length;l++){var h=u[l];r.src.push(this.getAssetUrl(this.audioFolder+o+h))}this.sounds.push(r)}},o.prototype.buildArray=function(e,t,i){for(var n=0,s=t;n<s.length;n++){var o=s[n];if(null!=o.min)for(var r=o.min;r<=o.max;r++)e.push((o.prefix||"")+((i&&r<10?"0":"")+r)+(o.suffix||""));else e.push(o.prefix+o.suffix)}},o.prototype.generateTexturesToStore=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var s=e[n[i]];if(this.isImageJsonResource(s)&&s.data.frames)for(var o=0,r=Object.keys(s.data.frames);o<r.length;o++){var a=r[o];this.loadedFramesTrackerObj[a]||t.push(a)}}this.texturesToStore=this.texturesToStore.concat(t)},o.prototype.buildAnimations=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t],s=e[n];if(null!=s.length){this.animationLists[n]=[];for(var o=0,r=s;o<r.length;o++){var a=r[o];this.animationLists[n].push(a?this.buildTextureArray(a):null)}}else{s=e[n];this.animations[n]=this.buildTextureArray(s)}}},o.prototype.buildTextureArray=function(e){var t=e.max,i=e.list;if(null==e.min||null==e.max)t=i.reduce(function(e,t){return Math.max(e,t)},0);else for(var i=[],n=e.min;n<=e.max;n++)i.push(n);e.pong&&(i=i.concat(i.concat().reverse()));for(var s="",o=(""+t).length,n=0;n<o;n++)s+="0";for(var r=[],a=0,l=i;a<l.length;a++){n=l[a];r.push(this.getTextureFrame(e.prefix+(s+n).slice(-o)))}return r},o.prototype.parseAudioData=function(e){var t={};return t.src=e.urls[0].split(".")[0],t.sprite=e.sprite,t},o.prototype.findSoundFromID=function(e,t){for(var i=0,n=t;i<n.length;i++){var s=n[i];if(s.id===e)return s}return null},o.MessageWindow_BG_01="FreeSpinWindow/MessageWindow_BG_01",o.WIN_ANIMATIONS="WIN_ANIMATIONS",o.GOD_RAY_ANIM="GOD_RAY_ANIM",o.FEATURE_DROP_COIN_SPIN_ANIM="FEATURE_DROP_COIN_SPIN_ANIM",o.FEATURE_DROP_SMOKE_ANIM="FEATURE_DROP_SMOKE_ANIM",o.FEATURE_DROP_SYMBOL_ANIM="FEATURE_DROP_SYMBOL_ANIM",o.FEATURE_DROP_COIN_DISAPPEAR_ANIM="FEATURE_DROP_COIN_DISAPPEAR_ANIM",o.UI_BottomBar_BG=0,o.UI_BUT_A=1,o.UI_BUT_A_BG_01=2,o.UI_BUT_A_BG_02=3,o.UI_BUT_A_BG_03=4,o.UI_BUT_A_BG_03_Pressed=5,o.UI_BUT_A_BG_04=6,o.UI_BUT_A_Spin=7,o.UI_BUT_B=8,o.UI_BUT_B_BG_01=9,o.UI_BUT_C=10,o.UI_BUT_D=11,o.UI_BUT_D_Autoplay=12,o.UI_BUT_D_BG_01=13,o.UI_BUT_D_BG_03=14,o.UI_BUT_D_BG_03_Pressed=15,o.UI_BUT_D_BG_04=16,o.UI_BUT_D_BG_04_Pressed=17,o.UI_BUT_D_Paytable=18,o.UI_BUT_E=19,o.UI_BUT_E_BG_01=20,o.UI_Arrow_01=21,o.UI_BUT_A_Stop=22,o.UI_BUT_A_BG_05=23,o.UI_BUT_A_BG_05_Pressed=24,o.UI_BUT_H=25,o.UI_BUT_H_BG_01=26,o.UI_BUT_C_BG_01=27,o.UI_BUT_D_Bank=28,o.UI_BUT_J=29,o.UI_BUT_J_BG_01=30,o.Feature_Drop_Button=31,o.Feature_Drop_Button_BG_Bottom=32,o.Feature_Drop_Button_BG_Top=33,o.UI_BUT_D_Prize=34,o.NUM="DB_Numbers_01/",o.DOT="dot",o.NUM_0="DB_Numbers_01/0",o.NUM_1="DB_Numbers_01/1",o.NUM_2="DB_Numbers_01/2",o.NUM_3="DB_Numbers_01/3",o.NUM_4="DB_Numbers_01/4",o.NUM_5="DB_Numbers_01/5",o.NUM_6="DB_Numbers_01/6",o.NUM_7="DB_Numbers_01/7",o.NUM_8="DB_Numbers_01/8",o.NUM_9="DB_Numbers_01/9",o.NUM_X="DB_Numbers_01/x",o.NUM_DOT="DB_Numbers_01/dot",o.Bullet_01="Menu/Bullet_01",o.Bullet_01_Pressed="Menu/Bullet_01_Pressed",o.BUT_CloseMenu_01="Menu/BUT_CloseMenu_01",o.BUT_Home_01="Menu/BUT_Home_01",o.BUT_Minus_01="Menu/BUT_Minus_01",o.BUT_Minus_01_Pressed="Menu/BUT_Minus_01_Pressed",o.BUT_Next_01="Menu/BUT_Next_01",o.BUT_Next_01_Pressed="Menu/BUT_Next_01_Pressed",o.BUT_Ok_01="Menu/BUT_Ok_01",o.BUT_Ok_01_Pressed="Menu/BUT_Ok_01_Pressed",o.BUT_Ok_01_BG_01="Menu/BUT_Ok_01_BG_01",o.BUT_Ok_01_BG_02="Menu/BUT_Ok_01_BG_02",o.BUT_Ok_01_BG_02_Pressed="Menu/BUT_Ok_01_BG_02_Pressed",o.BUT_Ok_01_Tick_01="Menu/BUT_Ok_01_Tick_01",o.BUT_Ok_01_X_01="Menu/BUT_Ok_01_X_01",o.BUT_Plus_01="Menu/BUT_Plus_01",o.BUT_Plus_01_Pressed="Menu/BUT_Plus_01_Pressed",o.BUT_Radio_01="Menu/BUT_Radio_01",o.BUT_Radio_01_Pressed="Menu/BUT_Radio_01_Pressed",o.Panel_02="Menu/Panel_02",o.Panel_03="Menu/Panel_03",o.Panel_04="Menu/Panel_04",o.Menu_BG_01="Menu/Menu_BG_01",o.TAB_Menu_01="Menu/TAB_Menu_01",o.TAB_Menu_01_Pressed="Menu/TAB_Menu_01_Pressed",o.TAB_Menu_02_Pressed="Menu/TAB_Menu_02_Pressed",o.TAB_Menu_03_Pressed="Menu/TAB_Menu_03_Pressed",o.TAB_Menu_04_Pressed="Menu/TAB_Menu_04_Pressed",o.STAR_PARTICLE="star",o.FDMenu_BG_01="FeatureDrop/Prompt/FDMenu_BG_01",o.FDBUT_CANCEL_01="FeatureDrop/Prompt/BUT_CANCEL_01",o.FDBUT_CANCEL_02="FeatureDrop/Prompt/BUT_CANCEL_02",o.FDBUT_START_01="FeatureDrop/Prompt/BUT_START_01",o.FDBUT_START_02="FeatureDrop/Prompt/BUT_START_02",o.FDCoin="FeatureDrop/FDCoin",o.FDStar_01="FeatureDrop/FDStar_01",o.ButtonGreen_01="ButtonGreen_01",o.FSW_Losange_02="FSW_Losange_02",o.FSW_Losange_01="FSW_Losange_01",o.FSW_Losange_01_Pressed="FSW_Losange_01_Pressed",o.UI="UI",o);function o(){this.loaded=0,this.totalToLoad=0,this.path=_.GenericGame.path,this.audioFolder="audio/",this.skeletonData={},this.textures={},this.texturesToStore=[],this.textureLists={},this.animations={},this.animationLists={},this.nineSliceTextures=[],this.assetsToLoad=[],this.skeletonsToLoad=[],this.spineIdOverrides={},this.sounds=[],this.audioPath=this.path+this.audioFolder,this.fontTexturesToLoad=[],this.fontTextureData={},this.loadLegacyTextures=!0,this.layoutsToLoad=[],this.assetUrlToNamespaceMap={},this.layoutToTextureMap={},this.legacyTexturesToLoad=[o.Bullet_01,o.Bullet_01_Pressed,o.BUT_CloseMenu_01,o.BUT_Home_01,o.BUT_Minus_01,o.BUT_Minus_01_Pressed,o.BUT_Next_01,o.BUT_Next_01_Pressed,o.BUT_Ok_01,o.BUT_Ok_01_BG_01,o.BUT_Ok_01_BG_02,o.BUT_Ok_01_BG_02_Pressed,o.BUT_Ok_01_Tick_01,o.BUT_Ok_01_X_01,o.BUT_Plus_01,o.BUT_Plus_01_Pressed,o.BUT_Radio_01,o.BUT_Radio_01_Pressed,o.Panel_02,o.Panel_03,o.Panel_04,o.Menu_BG_01,o.TAB_Menu_01,o.TAB_Menu_01_Pressed,o.MessageWindow_BG_01,o.NUM_0,o.NUM_1,o.NUM_2,o.NUM_3,o.NUM_4,o.NUM_5,o.NUM_6,o.NUM_7,o.NUM_8,o.NUM_9,o.NUM_DOT]}_.TextureLoader=e}(genericgame=genericgame||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(S){!function(e){var a=utils.ContainerWrapper,i=utils.TextWrapper,c=utils.TranslationManager,t=utils.GameTimer,d=S.TextureLoader,n=(s.prototype.setupSiganls=function(){var t=this;amplify.subscribe("IncrementLossLimitSignal",function(){t.playsSet||t.flashAutoPlay()}),amplify.subscribe("DecrementLossLimitSignal",function(){t.playsSet||t.flashAutoPlay()}),amplify.subscribe("UpdateAutoPlaysSignal",function(e){isNaN(e.numAutoPlays)?(t.playsSet=!1,t.spinLimitValue.setText(c.getString("LOSS_AMOUNT_DEFAULT"))):(t.playsSet=!0,t.spinLimitValue.setText(e.numAutoPlays))}),amplify.subscribe("UpdateLossLimitSignal",function(e){isNaN(e.lossLimit)?(t.stopFlashStartButton(),t.limitSet=!1,t.lossLimitValue.setText(c.getString("LOSS_AMOUNT_DEFAULT"))):(t.limitSet||t.startFlashStartButton(),t.limitSet=!0,t.lossLimitValue.setText(utils.Currency.format(e.lossLimit)))}),amplify.subscribe("UpdateWinLimitSignal",function(e){t.winLimitValue.setText(utils.Currency.format(e.winLimit))})},s.prototype.addBackground=function(){},s.prototype.setLocation=function(e,t){},s.prototype.setSize=function(e,t){},s.prototype.isOpen=function(){return 1===this.container.alpha},s.prototype.hide=function(){this.container.alpha=0,this.stopFlashStartButton(),this.autoPlaysSelection.minus.interactive=this.autoPlaysSelection.plus.interactive=!1,this.lossLimitSelection.minus.interactive=this.lossLimitSelection.plus.interactive=!1,this.winLimitSelection.minus.interactive=this.winLimitSelection.plus.interactive=!1,this.startButton.interactive=!1,amplify.publish("OnAutoClosed")},s.prototype.show=function(){this.container.alpha=1,this.autoPlaysSelection.minus.interactive=this.autoPlaysSelection.plus.interactive=!0,this.lossLimitSelection.minus.interactive=this.lossLimitSelection.plus.interactive=!0,this.winLimitSelection.minus.interactive=this.winLimitSelection.plus.interactive=!0,this.startButton.interactive=!0,amplify.publish("OnAutoOpened")},s.prototype.createHighlightText=function(e){var t=new i(e.id,this.container);return t.setText(e.text),t.setLayoutByIndex("Menu/Auto",e.layoutEntry.index),t.alpha=0,t.style.fill=16747520,t},s.prototype.setupAutoPlays=function(){var e,t=this,i=[function(){return amplify.publish("DecrementAutoSpinsSignal")},function(){return amplify.publish("IncrementAutoSpinsSignal")}],n=[function(){return amplify.publish("DecrementLossLimitSignal")},function(){return amplify.publish("IncrementLossLimitSignal")}],s=[function(){return amplify.publish("DecrementWinLimitSignal")},function(){return amplify.publish("IncrementWinLimitSignal")}];if(1==this.v){for(var o=0,r=["Panel_02","Panel_03"];o<r.length;o++)for(var a=r[o],l=0,u=["A","B","C"];l<u.length;l++){var h=u[l],p=d.createSprite("Menu/"+a);p.resetLayout(a+"_"+h,"Menu/Auto"),this.container.addChild(p)}utils.Layouts.get().addAllTextToContainer("Menu/Auto",this.container),e=new m}else{if(2!=this.v)throw new Error("Unknown AutoPlay layout version.");utils.Layouts.get().addAllToContainer("Menu/Auto",this.container),e=new g}this.spinLimitValue=this.container.findChild({id:"SPIN_LIMIT_VALUE"}),this.lossLimitValue=this.container.findChild({id:"LOSS_LIMIT_VALUE"}),this.winLimitValue=this.container.findChild({id:"WIN_LIMIT_VALUE"}),this.spinLimitValue.style.wordWrap=!1,this.lossLimitValue.style.wordWrap=!1,this.winLimitValue.style.wordWrap=!1,this.spinLimitValue.setText(c.getString("LOSS_LIMIT_DEFAULT")),this.lossLimitValue.setText(c.getString("LOSS_LIMIT_DEFAULT")),this.winLimitValue.setText(c.getString("WIN_LIMIT_DEFAULT")),this.autoPlaysSelection=e.createSelectionButton(this.container,"A",i),this.lossLimitSelection=e.createSelectionButton(this.container,"B",n),this.winLimitSelection=e.createSelectionButton(this.container,"C",s),this.startButton=e.createStartButton(function(){return t.startButtonClicked()},this.startButtonConfig),this.container.addChild(this.startButton),this.spinLimitHighlight=this.createHighlightText(this.spinLimitValue),this.winLimitHighlight=this.createHighlightText(this.winLimitValue),this.lossLimitHighlight=this.createHighlightText(this.lossLimitValue)},s.prototype.startButtonClicked=function(){this.limitSet&&this.playsSet?amplify.publish("StartAutoSpinsSignal"):this.playsSet?this.flashLossLimit():this.flashAutoPlay()},s.prototype.getStartButton=function(){return this.startButton},s.prototype.startFlashStartButton=function(){var e=this;t.clearInterval(this.flashID),this.flashID=t.setInterval(function(){return e.flashStartButton()},1e3),this.flashStartButton()},s.prototype.stopFlashStartButton=function(){t.clearInterval(this.flashID);var e=this.getStartButton();Tweener.removeTween(e.bgPressed),e.bgPressed.alpha=0},s.prototype.flashStartButton=function(){var e=this.getStartButton(),t=e.bgPressed.alpha?0:1;Tweener.addTween(e.bgPressed,{alpha:t,time:.5})},s.prototype.flashLossLimit=function(){this.highlightText(this.lossLimitValue,this.lossLimitHighlight)},s.prototype.flashAutoPlay=function(){this.highlightText(this.spinLimitValue,this.spinLimitHighlight)},s.prototype.highlightText=function(e,t){Tweener.removeTween(e),Tweener.removeTween(t),t.setText(e.text),t.alpha=1,e.alpha=0,Tweener.addTween(t,{alpha:0,time:.5,delay:.25}),Tweener.addTween(e,{alpha:1,time:.25,delay:.25})},s);function s(e,t){this.limitSet=!1,this.playsSet=!1,this.flashID=0,this.container=new a,e.addChild(this.container),this.startButtonConfig=null==t?void 0:t.startButtonConfig,this.v=t?t.v:1,this.setupSiganls(),this.addBackground(),this.setupAutoPlays()}e.AutoPlay=n;var o,r=(__extends(l,o=a),l);function l(){return null!==o&&o.apply(this,arguments)||this}var u,h=(__extends(p,u=a),p);function p(){return null!==u&&u.apply(this,arguments)||this}e.AutoStartButton=h;var m=(f.prototype.createSelectionButton=function(e,t,i){var n=new r;return n.minus=this.createButton(d.BUT_Minus_01,d.BUT_Minus_01_Pressed,t,i[0]),n.plus=this.createButton(d.BUT_Plus_01,d.BUT_Plus_01_Pressed,t,i[1]),n.addChild(n.minus,n.plus),e.addChild(n),n},f.prototype.createButton=function(e,t,i,n){var s=new a,e=d.createSprite(e),o=d.createSprite(t);return e.resetLayout(e.id+"_"+i,"Menu/Auto"),o.resetLayout(e.id,"Menu/Auto"),o.alpha=0,s.addChild(e,o),s.mousedown=s.touchstart=function(){return o.alpha=1},s.mouseup=s.touchend=function(){return o.alpha=0},s.click=s.tap=function(){utils.SoundWrapper.playSound("Clicker"),n()},s.interactive=s.handCurser=!0,s},f.prototype.createStartButton=function(e,t){var i=d.createSprite(d.BUT_Ok_01_BG_02),n=d.createSprite(d.BUT_Ok_01_BG_02_Pressed),s=d.createSprite(d.BUT_Ok_01,"Menu/Auto");i.resetLayout("BUT_Ok_01","Menu/Auto"),n.resetLayout("BUT_Ok_01","Menu/Auto"),n.alpha=0;var o=new a("BUT_Ok_01","Menu/Auto"),r=(new utils.TextWrapper("START",o,{font:"bold 30px Arial",fill:16777215},{width:o.width,x:o.dimension.width/2,y:o.dimension.height/2,anchorX:.5,anchorY:.5}),new h);return r.addChild(i,n,s,o),r.bgPressed=n,r.mousedown=r.touchstart=function(){return n.alpha=1},r.mouseup=r.touchend=function(){return n.alpha=0},r.click=r.tap=function(){utils.SoundWrapper.playSound("Clicker"),e()},r.interactive=r.handCurser=!0,r},f);function f(){}var g=(y.prototype.createSelectionButton=function(e,t,i){var n=new r;return n.minus=this.createButton("BUT_Minus_01_"+t,d.BUT_Minus_01,d.BUT_Minus_01_Pressed,i[0]),n.plus=this.createButton("BUT_Plus_01_"+t,d.BUT_Plus_01,d.BUT_Plus_01_Pressed,i[1]),n.addChild(n.minus,n.plus),e.addChild(n),n},y.prototype.createButton=function(e,t,i,n){var s="Menu/Auto/"+e,t=d.createSprite(t,s),o=d.createSprite(i);o.resetLayout(t.id,s),o.alpha=0;s=new a(e,s);return s.addChild(t,o),s.mousedown=s.touchstart=function(){return o.alpha=1},s.mouseup=s.touchend=function(){return o.alpha=0},s.click=s.tap=function(){utils.SoundWrapper.playSound("Clicker"),n()},s.interactive=s.handCurser=!0,s},y.prototype.createStartButton=function(e,t){var i=t?t.textureLayoutId:"BUT_Ok_01",n=t?t.section:"Menu/Auto/BUT_OK_01",s=t?t.id:"BUT_OK_01",o=t?t.bg:d.BUT_Ok_01,t=t?t.bgPressed:d.BUT_Ok_01_Pressed,s=new h(s,n),o=d.createSprite(o),r=d.createSprite(t);return o.resetLayout(i,n),r.resetLayout(i,n),r.alpha=0,s.addChild(o,r),new utils.TextWrapper("START",s).resetLayout("START",n),s.bgPressed=r,s.mousedown=s.touchstart=function(){return r.alpha=1},s.mouseup=s.touchend=function(){return r.alpha=0},s.click=s.tap=function(){utils.SoundWrapper.playSound("Clicker"),e()},s.interactive=s.handCurser=!0,s},y);function y(){}e.AutoPlayButtonSetupV2=g}(S.views||(S.views={}))}(genericgame=genericgame||{}),function(o){var e,i,n,t,r,s;function a(e){var t=this;this.limitSet=!1,this.playsSet=!1,this.flashID=0,this.container=new PIXI.Container,e.addChild(this.container),amplify.subscribe("IncrementLossLimitSignal",function(){t.playsSet||t.flashAutoPlay()}),amplify.subscribe("DecrementLossLimitSignal",function(){t.playsSet||t.flashAutoPlay()}),amplify.subscribe("UpdateAutoPlaysSignal",function(e){isNaN(e.numAutoPlays)?(t.playsSet=!1,t.autoPlaysSelection.amount.setText(i.getString("LOSS_AMOUNT_DEFAULT"))):(t.playsSet=!0,t.autoPlaysSelection.amount.setText(e.numAutoPlays))}),amplify.subscribe("UpdateLossLimitSignal",function(e){isNaN(e.lossLimit)?(t.stopFlashStartButton(),t.limitSet=!1,t.lossLimitSelection.amount.setText(i.getString("LOSS_AMOUNT_DEFAULT"))):(t.limitSet||t.startFlashStartButton(),t.limitSet=!0,t.lossLimitSelection.amount.setText(utils.Currency.format(e.lossLimit)))}),amplify.subscribe("UpdateWinLimitSignal",function(e){t.winLimitSelection.amount.setText(utils.Currency.format(e.winLimit))}),this.setupAutoPlays()}e=o.views||(o.views={}),i=utils.TranslationManager,n=utils.GraphicsWrapper,t=utils.GameTimer,r=o.TextureLoader,a.prototype.setLocation=function(e,t){this.container.position.x=e,this.container.position.y=t},a.prototype.setSize=function(e,t){this.container.width=e,this.container.height=t},a.prototype.isOpen=function(){return 1===this.container.alpha},a.prototype.hide=function(){this.container.alpha=0,this.stopFlashStartButton(),this.autoPlaysSelection.minus.interactive=this.autoPlaysSelection.plus.interactive=!1,this.lossLimitSelection.minus.interactive=this.lossLimitSelection.plus.interactive=!1,this.winLimitSelection.minus.interactive=this.winLimitSelection.plus.interactive=!1,this.startButton.interactive=!1,amplify.publish("OnAutoClosed")},a.prototype.show=function(){this.container.alpha=1,this.autoPlaysSelection.minus.interactive=this.autoPlaysSelection.plus.interactive=!0,this.lossLimitSelection.minus.interactive=this.lossLimitSelection.plus.interactive=!0,this.winLimitSelection.minus.interactive=this.winLimitSelection.plus.interactive=!0,this.startButton.interactive=!0,amplify.publish("OnAutoOpened")},a.prototype.setupAutoPlays=function(){var e=this,t=r.createSprite(r.Panel_04);t.height=345,this.container.addChild(t),this.autoPlaysSelection=this.addSelectionButton({bgTextureID:o.TextureLoader.Panel_02,text:i.getString("SPIN_LIMIT_LABEL"),fontSize:25,defaultAmount:5,onClickFunctions:[function(){return amplify.publish("DecrementAutoSpinsSignal")},function(){return amplify.publish("IncrementAutoSpinsSignal")}]}),this.firstBlurb=this.addBlurb(i.getString("CONTROLS_INFO_0"),55,638),this.firstBlurb.position.y=this.autoPlaysSelection.position.y+this.autoPlaysSelection.height,this.lossLimitSelection=this.addSelectionButton({bgTextureID:o.TextureLoader.Panel_02,text:i.getString("LOSS_LIMIT_LABEL"),defaultAmount:i.getString("LOSS_AMOUNT_DEFAULT"),fontSize:25,onClickFunctions:[function(){amplify.publish("DecrementLossLimitSignal")},function(){amplify.publish("IncrementLossLimitSignal")}]}),this.lossLimitSelection.position.y=this.firstBlurb.position.y+this.firstBlurb.height+10,this.winLimitSelection=this.addSelectionButton({bgTextureID:o.TextureLoader.Panel_02,text:i.getString("WIN_LIMIT_LABEL"),defaultAmount:i.getString("NO_LIMIT"),fontSize:25,onClickFunctions:[function(){amplify.publish("DecrementWinLimitSignal")},function(){amplify.publish("IncrementWinLimitSignal")}]}),this.winLimitSelection.position.y=this.lossLimitSelection.position.y+this.lossLimitSelection.height,this.secondBlurb=this.addBlurb(i.getString("CONTROLS_INFO_1"),80,490),this.secondBlurb.position.y=this.winLimitSelection.position.y+this.winLimitSelection.height,this.startButton=this.addButton({bgTextureID:o.TextureLoader.BUT_Ok_01_BG_02,textureID:o.TextureLoader.BUT_Ok_01,bgTexturePressedID:o.TextureLoader.BUT_Ok_01_BG_02_Pressed,text:i.getString("START"),fontSize:25,colorTints:[16777215,2293538],onClickFunction:function(){return e.startButtonClicked()}}),this.startButton.position.y=this.container.height-this.startButton.height,this.startButton.position.x=this.container.width-this.startButton.width,this.container.addChild(this.startButton)},a.prototype.startButtonClicked=function(){this.limitSet&&this.playsSet?amplify.publish("StartAutoSpinsSignal"):this.playsSet?this.flashLossLimit():this.flashAutoPlay()},a.prototype.stopFlashStartButton=function(){t.clearInterval(this.flashID),Tweener.removeTween(this.startButton.bgPressed),this.startButton.flash=!1,this.startButton.bgPressed.alpha=0},a.prototype.startFlashStartButton=function(){var e=this;t.clearInterval(this.flashID),this.flashID=t.setInterval(function(){return e.flashStartButton()},1e3),this.startButton.flash=!0,this.flashStartButton()},a.prototype.flashStartButton=function(){this.startButton.flash?(Tweener.addTween(this.startButton.bgPressed,{alpha:1,time:.5}),this.startButton.flash=!1):(Tweener.addTween(this.startButton.bgPressed,{alpha:0,time:.5}),this.startButton.flash=!0)},a.prototype.flashLossLimit=function(){Tweener.removeTween(this.lossLimitSelection),this.lossLimitSelection.flash.alpha=1,Tweener.addTween(this.lossLimitSelection.flash,{alpha:0,time:.5,delay:.25})},a.prototype.flashAutoPlay=function(){Tweener.removeTween(this.autoPlaysSelection),this.autoPlaysSelection.flash.alpha=1,Tweener.addTween(this.autoPlaysSelection.flash,{alpha:0,time:.5,delay:.25})},a.prototype.addBlurb=function(e,t,i){var n=new PIXI.Container;this.container.addChild(n);new utils.TextWrapper(e,n,{font:"bold 16px Arial",fill:16777215,wordWrap:!0,wordWrapWidth:i},{height:t,x:10,y:5});return n},a.prototype.addSelectionButton=function(e){var t=new PIXI.Container;this.container.addChild(t);var i=r.createSprite(e.bgTextureID);t.addChild(i);var n=new utils.TextWrapper(e.text,t,{font:"bold "+e.fontSize+"px Arial",fill:16777215},{width:250,anchorY:.5,x:10,y:i.height/2});t.text=n;var s=this.addDisplay({bgTextureID:o.TextureLoader.Panel_03,initial:e.defaultAmount,amountFontSize:"25"},t);s.position.x=i.width/7*4+i.width/7*3/2-s.width/2,s.position.y=n.y-s.height/2,t.amount=s.amount,t.flash=s.flash;n=this.addButton({bgTextureID:o.TextureLoader.BUT_Minus_01,bgTexturePressedID:o.TextureLoader.BUT_Minus_01_Pressed,onClickFunction:e.onClickFunctions[0]});n.position.x=s.position.x-n.width/5*4,n.position.y=s.position.y,t.minus=n,t.addChild(n);e=this.addButton({bgTextureID:o.TextureLoader.BUT_Plus_01,bgTexturePressedID:o.TextureLoader.BUT_Plus_01_Pressed,onClickFunction:e.onClickFunctions[1]});return e.position.x=s.position.x+s.width-n.width/5,e.position.y=s.position.y,t.plus=e,t.addChild(e),t},a.prototype.addDisplay=function(e,t){var i=new PIXI.Container;t.addChild(i);t=r.createSprite(e.bgTextureID);t.scale.set(1.5,1),i.addChild(t),i.bg=t;t=new utils.TextWrapper(e.initial,i,{font:"bold "+e.amountFontSize+"px Arial",fill:16777215},{width:150,anchorX:.5,anchorY:.5,x:t.width/2,y:t.height/2});i.amount=t;t=new n;return t.beginFill(16748544),t.lineStyle(1,16711680,0),t.moveTo(0,5),t.lineTo(180,0),t.lineTo(180,35),t.lineTo(0,35),t.lineTo(0,0),t.endFill(),t.blendMode=PIXI.BLEND_MODES.MULTIPLY,t.alpha=0,i.addChild(t),i.flash=t,i},a.prototype.addButton=function(e){var t,i,n=new PIXI.Container,s=r.createSprite(e.bgTextureID);return n.addChild(s),n.bg=s,void 0!==e.bgTexturePressedID&&((t=r.createSprite(e.bgTexturePressedID)).alpha=0,n.addChild(t),n.bgPressed=t,n.mousedown=n.touchstart=function(){t.alpha=1},n.mouseup=n.touchend=function(){t.alpha=0}),void 0!==e.textureID&&(i=r.createSprite(e.textureID),n.addChild(i)),n.onClick=e.onClickFunction,n.click=n.tap=function(){utils.SoundWrapper.playSound("Clicker"),n.onClick()},n.interactive=n.handCurser=!0,void 0!==e.text&&(i=new utils.TextWrapper(e.text,n,{font:"bold "+e.fontSize+"px Arial",fill:16777215},{width:.75*i.width,x:i.width/2,y:i.height/2,anchorX:.5,anchorY:.5}),n.text=i),n},s=a,e.AutoPlayLegacy=s}(genericgame=genericgame||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i;function n(e){void 0===e&&(e={});var t=i.call(this)||this;return(t.config=e)&&(e.holder&&e.holder.addChild(t),e.layoutID&&(t.id=e.layoutID,e.section&&(t.setLayout(e.section),utils.Layouts.get().addAllToContainer(e.section,t,{namespace:e.namespace}))),e.hoverStart&&(t.mouseover=function(){return t.config.hoverStart({button:t})}),e.hoverEnd&&(t.mouseout=function(){return t.config.hoverEnd({button:t})}),(e.clickEvent||e.clickFunc)&&(t.clickEvent=e.clickEvent,t.clickFunc=e.clickFunc,t.click=t.tap=function(){return t.onClickEventTrigger()},t.clickData=e.clickData,t.interactive=!0)),t}t=e.views||(e.views={}),e=utils.ContainerWrapper,__extends(n,i=e),n.prototype.onClickEventTrigger=function(){this.clickEvent&&amplify.publish(this.clickEvent,{clickData:this.clickData,button:this}),this.clickFunc&&this.clickFunc({clickData:this.clickData,button:this})},n.prototype.hide=function(){this.interactive=this.visible=!1},n.prototype.show=function(){this.interactive=this.visible=!0},e=n,t.Button=e}(genericgame=genericgame||{}),function(i){var n,s,o,e,r,a,t;function l(e){this.container=new r,e.addChild(this.container),this.setupBlockers(),this.setupMessageWindow(),this.hide(),this.setupSignals()}n=i.views||(i.views={}),s=utils.TextWrapper,o=utils.TranslationManager,e=utils.Blocker,r=utils.ContainerWrapper,a=i.TextureLoader,l.prototype.setupSignals=function(){var t=this;amplify.subscribe("ViewResized",function(e){t.resize(e.w,e.h)}),amplify.subscribe("ShowAutoSpinsLimitMessageSignal",function(e){t.displayAutoSpinsLimitMessage(e.lossLimitReached,e.winLimitReached)}),amplify.subscribe("DisplayRecoveredGameMessageSignal",function(){apiMapper.showInGameRecoveryMessage()&&t.displayRecoveredGameMessage()}),amplify.subscribe("ShowErrorMessageSignal",function(e){t.show({type:"ERROR",title:e.errorTitle,message:e.errorMsg,errorID:e.errorID,critical:e.critical,buttonText:e.buttonText})}),amplify.subscribe("ShowGameBlockMessage",function(e){t.show({type:"GAMEBLOCK",title:e.title,message:e.message})}),amplify.subscribe("ShowMessage",function(e){t.show({type:"MESSAGE",title:e.title,message:e.message,okAction:e.okAction,buttonText:e.buttonText})}),amplify.subscribe("CommonWindowMessageButtonClicked",function(){t.buttonClicked()})},l.prototype.resize=function(e,t){i.GenericGame.resizeModalDialog(this.container,this.layoutEntry,.55,e,t)},l.prototype.displayAutoSpinsLimitMessage=function(e,t){this.show({type:"AUTO_PLAY",title:o.getString("AUTO_PLAY_INFO_TITLE"),message:o.getString("AUTO_PLAY_INFO_STOPPED")+(e?o.getString("AUTO_PLAY_INFO_LOSS_LIMIT"):"")+(t?o.getString("AUTO_PLAY_INFO_WIN_LIMIT"):"")+""})},l.prototype.displayRecoveredGameMessage=function(){this.show({type:"RECOVERED_GAME",title:o.getString("RECOVERED_GAME_TITLE"),message:o.getString("RECOVERED_GAME_INFO_0")})},l.prototype.setupMessageWindow=function(){var e=a.createSprite("MessageWindow_BG_01","MessageWindow");this.layoutEntry=e.layoutEntry,this.container.addChild(e),this.messageWindow=new r("MessageWindow1","MessageWindow/MessageWindow1"),this.container.addChild(this.messageWindow);var t=new r;this.messageWindow.addChild(t);e=new s("MESSAGE_WINDOW1_TITLE",t);e.setLayout("MessageWindow/MessageWindow1"),this.heading=e;e=new s("MESSAGE_WINDOW1_INFO_0",t);e.setLayout("MessageWindow/MessageWindow1"),this.message=e,this.button=new n.Button({layoutID:"BUT_OK",section:"MessageWindow/MessageWindow1/BUT_OK",clickEvent:"CommonWindowMessageButtonClicked"}),this.button.interactive=!0,this.buttonText=this.button.findChild({id:"OK"}),t.addChild(this.button)},l.prototype.setupBlockers=function(){this.blockerSemi=new e({holder:this.container,blockInteraction:!0}),this.blockerFull=new e({holder:this.container,blockInteraction:!0,alpha:1,color:0}),this.blockerFull.hide()},l.prototype.buttonClicked=function(){var e,t,i;switch(this.hide(),null===(e=this.messageDisplayed)||void 0===e?void 0:e.type){case"ERROR":amplify.publish("ErrorDisplayedSignal",{errorID:this.messageDisplayed.errorID,critical:this.messageDisplayed.critical});break;case"AUTO_PLAY":amplify.publish("StopAutoSpinsSignal"),amplify.publish("SetUIEnabled",{enabled:!0});break;case"RECOVERED_GAME":amplify.publish("StartRecoveredGameSignal");break;case"MESSAGE":null!==(i=(t=this.messageDisplayed).okAction)&&void 0!==i&&i.call(t)}},l.prototype.hide=function(){this.container.visible=!1},l.prototype.show=function(e){this.freeze||(this.messageDisplayed=e,this.heading.setText(e.title||""),this.message.setText(e.message||""),this.buttonText.setText(e.buttonText||o.getString("OK")),this.container.visible=!0,this.button.visible=!0,"GAMEBLOCK"===e.type&&(this.button.visible=!1,this.blockerFull.show(),this.freeze=!0))},l.prototype.getContainer=function(){return this.container},t=l,n.CommonMessageWindow=t}(genericgame=genericgame||{}),function(a){var e,l,i,t;function n(e,t,i,n,s,o){var r=this;this.DOT_INDEX=10,this.layout="WinCounter",this.texturePath=a.TextureLoader.NUM,this.reset=function(){for(var e=0;e<r.chars.length;e++)r.container.removeChild(r.chars[e]);r.chars=[]},this.container=new l,e.addChild(this.container),this.container.position.x=t+20,this.container.position.y=i,this.container.scale.set(n),this.container.alpha=0,this.chars=[],this.charTextures=[],this.hideDecimals=s,o&&(void 0!==o.charWidth&&(this.charWidth=o.charWidth),void 0!==o.layout&&(this.layout=o.layout),void 0!==o.texturePath&&(this.texturePath=o.texturePath),void 0!==o.fontId&&(this.fontId=o.fontId)),this.setupChars()}e=a.views||(a.views={}),l=utils.ContainerWrapper,i=a.TextureLoader,n.prototype.setScale=function(e){this.container.scale.set(e)},n.prototype.scale=function(){return this.container.scale.x},n.prototype.updateCount=function(e){this.container.alpha=1,this.displayAmount(e)},n.prototype.clear=function(e){e?Tweener.addTween(this.container,{alpha:0,transition:"easeInQuad",time:1,onComplete:this.reset}):(this.container.alpha=0,this.reset())},n.prototype.setPosX=function(e){this.container.position.x=e},n.prototype.getWidth=function(){return this.container.width},n.prototype.getContainer=function(){return this.container},n.prototype.getHeight=function(){return this.container.height},n.prototype.setThousandsSeparator=function(e){this.thousandsSeparator=e},n.prototype.displayAmount=function(e){e=(e=e.split("").reverse().join("")).split(".").join("");for(var t=0;t<e.length;t++)""!==e[t]&&(this.chars.length<=t&&(this.addChar(),this.setPositions()),this.chars[t].texture=this.charTextures[this.parseChar(e[t])])},n.prototype.setupChars=function(){var e=a.GenericGame.textureLoader;if(this.fontId)for(var t=0;t<10;t++)this.charTextures.push(e.getFontTexture(this.fontId,""+t));else for(t=0;t<10;t++)this.charTextures.push(i.getTexture(this.texturePath+t));this.hideDecimals||(this.fontId?this.charTextures.push(e.getFontTexture(this.fontId,".")):this.charTextures.push(i.getTexture(this.texturePath+a.TextureLoader.DOT)),this.dot=new utils.SpriteWrapper(this.charTextures[this.DOT_INDEX]),this.fontId?this.dot.anchor.set(1,0):this.dot.anchor.set(.5,.5),this.dot.setLayout(this.layout),this.container.addChild(this.dot))},n.prototype.parseChar=function(e){return"."===e?10:parseInt(e,10)},n.prototype.addChar=function(){var e=new utils.SpriteWrapper(this.charTextures[0]);this.chars.push(e),e.anchor.set(.5,.5),e.setLayout(this.layout),this.container.addChild(e),this.hideDecimals||this.container.swapChildren(e,this.dot),void 0===this.charWidth&&(this.charWidth=e.width)},n.prototype.setPositions=function(){this.chars.length%2==0?this.setEvenPositions():this.setOddPositions(),this.hideDecimals||this.setDotPosition()},n.prototype.setDotPosition=function(){2<this.chars.length&&(this.dot.position.x=this.chars[1].position.x-.6*this.dot.width)},n.prototype.setOddPositions=function(){for(var e=Math.floor(this.chars.length/2)*this.charWidth,t=" "==this.thousandsSeparator?2:-1,i=0;i<this.chars.length;i++)this.chars[i].position.x=e,e-=1!==i||this.hideDecimals?this.charWidth:1.25*this.charWidth,i==t&&(e-=.5*this.charWidth)},n.prototype.setEvenPositions=function(){for(var e=(this.chars.length/2-.5)*this.charWidth,t=" "==this.thousandsSeparator?2:-1,i=0;i<this.chars.length;i++)this.chars[i].position.x=e,e-=1!==i||this.hideDecimals?this.charWidth:1.25*this.charWidth,i==t&&(e-=.3*this.charWidth)},t=n,e.Counter=t}(genericgame=genericgame||{}),function(r){!function(e){var n=utils.ContainerWrapper,c=utils.TextureWrapper,d=utils.SpriteWrapper,a=r.TextureLoader,t=(Object.defineProperty(i.prototype,"scale",{get:function(){return this.scalePoint},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.container.alpha},set:function(e){this.container.alpha=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{set:function(e){for(var t=0,i=this.sprites;t<i.length;t++)i[t].tint=e},enumerable:!1,configurable:!0}),i.prototype.setText=function(e){var t=this.scale.x,i=this.scale.y;if(this.scale.set(1,1),this.text!=e){for(var n=this.container.dimension?this.container.dimension.height/this.templateEntry.height:1,s=this.sprites.length;s<e.length;s++){var o=new d(c.EMPTY);this.sprites.push(o),this.container.addChild(o)}for(s=0;s<this.sprites.length;s++)this.sprites[s].visible=s<e.length;for(var r=0,a=0,s=0;s<e.length;s++){var l,u=e[s],h=this.getCharCode(u),p=this.chars[h];"space"!=h&&(l=r+p.posEntry.x*n,u=0+p.posEntry.y*n,(h=this.sprites[s]).texture=p.texture,h.position.set(l,u),h.width=p.posEntry.width*n,h.height=p.posEntry.height*n),r+=p.kerningEntry.width*n,a=Math.max(p.kerningEntry.height*n,a)}this.text=e,this.maxX=r,this.maxY=a,this.updateAlignment(),this.scale.set(t,i),this.options.tint&&(this.tint=this.options.tint)}},i.prototype.updateAlignment=function(){var e=this.container,t=e.layoutEntry;switch(this.options.hAlign){case"left":e.x=t.x;break;case"right":e.x=t.x+t.width-this.maxX;break;case"center":default:e.x=t.x+t.width/2-this.maxX/2}switch(this.options.vAlign){case"bottom":e.y=t.y+t.height-this.maxY;break;case"top":e.y=t.y;break;case"center":default:e.y=t.y+t.height/2-this.maxY/2}},i.prototype.getCharCode=function(e){switch(e){case".":return"dot";case",":return"comma";case" ":return"space";case"$":return"dollar";case"€":return"euro";case"£":return"pound";case"#":return"hash";default:return e}},i.prototype.setupChars=function(){if(this.options.extraChars)for(var e=0,t=this.options.extraChars;e<t.length;e++){var i=t[e];this.setupChar(i)}if(this.options.chars)for(var n=0,s=this.options.chars;n<s.length;n++){i=s[n];this.setupChar(i)}},i.prototype.setupChar=function(e){var t=this.getCharCode(e);if(!this.chars[t]){var i=utils.Layouts.get(),n=this.options,s=t[0].toUpperCase()+t.slice(1)+"_Digit",o=n.section+"/"+s,o=i.getTextureEntry(s,o);if(o||-1==="0123456789".indexOf(e)||(r=n.section+"/"+(e="Numbers_Digit"),o=i.getTextureEntry(e,r)),!o)throw new Error("DigitDisplay kerning entry for digit '"+t+"' not found.");if("space"!=t){var r=i.getTextureEntry(t,o.section);if(!(r=!r&&n.charPrefix?i.getTextureEntry(n.charPrefix+t,o.section):r))throw new Error("DigitDisplay pos entry for digit '"+t+"' not found.");n=a.getTexture(n.texturePath+t+n.textureSuffix);if(!n)throw new Error("DigitDisplay texture for digit '"+t+" not found.");this.chars[t]={texture:n,kerningEntry:o,posEntry:r}}else this.chars[t]={texture:null,kerningEntry:o,posEntry:null}}},i);function i(e,t){var i;this.chars={},this.sprites=[],this.text="",this.maxX=0,this.maxY=0,this.options=t=JSON.parse(JSON.stringify(t)),t.section=null!==(i=t.section)&&void 0!==i?i:t.id,t.layoutId=null!==(i=t.layoutId)&&void 0!==i?i:t.id+"_Marker",t.texturePath=null!==(i=t.texturePath)&&void 0!==i?i:"DB_Numbers_01/",t.textureSuffix=null!==(i=t.textureSuffix)&&void 0!==i?i:"",t.chars=null!==(i=t.chars)&&void 0!==i?i:"0123456789"+(t.noDecimal?"":"."),t.vAlign=null!==(i=t.vAlign)&&void 0!==i?i:"center",t.hAlign=null!==(i=t.hAlign)&&void 0!==i?i:"center",this.container=new n(t.layoutId,t.layoutSection),this.templateEntry=utils.Layouts.get().getEntry(t.id,t.section),e.addChild(this.container),this.setupChars(),this.scalePoint=new s(this.container,t),this.scale.set(1,1)}e.DigitDisplay=t;var s=(Object.defineProperty(o.prototype,"x",{get:function(){return this.owner.scale.x},set:function(e){var t=(e-this.owner.scale.x)/this.owner.scale.x;"center"===this.options.hAlign&&(t=this.owner.width*t,this.owner.position.x-=t/2,this.owner.scale.x=e)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.owner.scale.y},set:function(e){var t=(e-this.owner.scale.y)/this.owner.scale.y;"center"===this.options.vAlign&&(t=this.owner.height*t,this.owner.position.y-=t/2,this.owner.scale.y=e)},enumerable:!1,configurable:!0}),o.prototype.set=function(e,t){null!=t?(this.x=e,this.y=t):(this.x=e,this.y=e)},o);function o(e,t){this.owner=e,this.options=t}}(r.views||(r.views={}))}(genericgame=genericgame||{}),function(e){var t,i,l,u,n,s,o;function r(e,t,i,n,s,o,r,a){this.time=1,this.totalTime=0,this.yRadius=15,this.finished=!0,this.particleContainer=new u,e.addChild(this.particleContainer),this.container=new u,e.addChild(this.container),this.reelIndex=t,this.symWidth=i,this.symHeight=n,this.size=s,this.start=o,this.end=r,this.end.x=this.end.x,a||(this.totalTime=this.time),this.addSymbolAnimations(),l.playSound("FDCoinPop")}t=e.views||(e.views={}),i=e.TextureLoader,l=utils.SoundWrapper,u=utils.ContainerWrapper,n=utils.BLEND_MODE,s=utils.ParticleEmitterWrapper,r.prototype.addSymbolAnimations=function(){var e=this;this.symbolAnimatonContainer=new u("Symbol"+this.size,"MainReel/Symbol"+this.size),this.container.addChild(this.symbolAnimatonContainer),this.symbolAnimation=i.createAnimation(i.FEATURE_DROP_SYMBOL_ANIM,this.size),this.symbolAnimatonContainer.addChild(this.symbolAnimation),this.symbolAnimation.animationSpeed=.1,this.symbolAnimation.anchor.set(.5),this.symbolAnimation.loop=!1,this.symbolAnimatonContainer.setDimensions(),this.symbolAnimatonContainer.position.x=this.start.x+this.symWidth/2,this.symbolAnimatonContainer.position.y=this.start.y+this.symHeight/2,this.coin=i.createSprite(i.FDCoin),this.coin.resetLayout("FDCoin_0"+this.size,"MainReel/Symbol"+this.size),this.coin.anchor.set(.5),this.coin.position.x=this.start.x+this.symWidth/2,this.coin.position.y=this.start.y+this.symHeight/2;var t=this.coin.scale.x;Tweener.addTween(this.coin.scale,{x:1.5*t,y:1.5*t,time:.1,transition:"linear"}),Tweener.addTween(this.coin.scale,{delay:.1,x:t,y:t,time:.1,transition:"linear",onComplete:function(){return e.addCoinSpinAnimations()}}),this.container.addChild(this.coin)},r.prototype.addCoinSpinAnimations=function(){this.coin.visible=!1,this.finished=!1,this.addSparkleParticleEffect();var e=i.createSprite(i.FDStar_01);e.anchor.set(.5),e.blendMode=n.ADD,this.symbolAnimatonContainer.addChild(e),Tweener.addTween(e.scale,{x:2,y:2,time:.2,transition:"linear"}),Tweener.addTween(e.scale,{delay:.2,x:0,y:0,time:.3,transition:"linear"}),this.symbolAnimation.play();e=this.symbolAnimation.scale.x;Tweener.addTween(this.symbolAnimation.scale,{x:1.5*e,y:1.5*e,time:.2,transition:"linear"}),Tweener.addTween(this.symbolAnimation.scale,{delay:.2,x:0,y:0,time:.2,transition:"linear"}),this.coinSpinAnimation=i.createAnimation(i.FEATURE_DROP_COIN_SPIN_ANIM),this.container.addChild(this.coinSpinAnimation),this.coinSpinAnimation.animationSpeed=.2,this.coinSpinAnimation.anchor.set(.5),this.coinSpinAnimation.position.x=this.start.x+this.symWidth/2,this.coinSpinAnimation.position.y=this.start.y+this.symHeight/2,this.coinSpinAnimation.play(),Tweener.addTween(this.coinSpinAnimation.scale,{x:2,y:2,time:.5,transition:"easeInCubic"}),Tweener.addTween(this.coinSpinAnimation.scale,{delay:.5,x:.5,y:.5,time:.5,transition:"easeInCubic"}),this.start.x=this.coinSpinAnimation.position.x,this.start.y=this.coinSpinAnimation.position.y,this.addTrailParticleEffect()},r.prototype.remove=function(){this.trailEmitter.destroy(),this.sparkleEmitter.destroy(),this.container.removeChildren(),this.container.parent.removeChild(this.container)},r.prototype.getSymbolSprite=function(){return this.container},r.prototype.positionY=function(e){this.container.position.y=e},r.prototype.positionX=function(e){this.container.position.x=e},r.prototype.setVisible=function(e){this.container.visible=e},r.prototype.animate=function(e){var t,i;this.finished||(this.totalTime+=.001*e,this.totalTime>this.time?(this.finished=!0,amplify.publish("ShowFeatureDropUICoinAnimation",{reelIndex:this.reelIndex}),this.container.removeChildren(),this.trailEmitter&&(this.trailEmitter.emit=!1)):(t=this.start.x,i=this.start.y,t=t+this.totalTime/this.time*(this.end.x-t),i=i+this.totalTime/this.time*(this.end.y-i),this.coinSpinAnimation.position.set(t,i),this.coinSpinAnimation.rotation+=.003*e,this.trailEmitter&&this.trailEmitter.updateSpawnPos(this.coinSpinAnimation.position.x,this.coinSpinAnimation.position.y))),this.trailEmitter&&this.trailEmitter.update(.001*e),this.sparkleEmitter&&this.sparkleEmitter.update(.001*e)},r.prototype.addTrailParticleEffect=function(){this.trailEmitter=new s(this.particleContainer,[i.getTexture(e.TextureLoader.FDStar_01)],{alpha:{start:1,end:.1},scale:{start:.15,end:.005,minimumScaleMultiplier:1},color:{start:"#ffffe3",end:"#f5ff40"},speed:{start:10,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:10},maxSpeed:0,startRotation:{min:90,max:90},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:3},blendMode:"add",frequency:.01,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:75}}),this.trailEmitter.emit=!0},r.prototype.addSparkleParticleEffect=function(){this.sparkleEmitter=new s(this.particleContainer,[i.getTexture(e.TextureLoader.FDStar_01)],{alpha:{start:1,end:0},scale:{start:.2,end:.2,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:40,end:5,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1.5},blendMode:"add",frequency:1e-4,emitterLifetime:.3,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:this.start.x,y:this.start.y,w:this.symbolAnimatonContainer.dimension.width,h:this.symbolAnimatonContainer.dimension.height}}),this.sparkleEmitter.emit=!0},o=r,t.FeatureDropSymbol=o}(genericgame=genericgame||{}),function(e){var t,i,o,r,n,s,a;function l(e){this.container=new r("FDMenu","FDMenu"),e.addChild(this.container),this.setupSignals(),this.setupBlocker(),this.setupWindow(),this.hide()}t=e.views||(e.views={}),i=e.TextureLoader,o=utils.TextWrapper,r=utils.ContainerWrapper,n=utils.Currency,s=utils.Blocker,a=e.TextureLoader,l.prototype.setupBlocker=function(){this.blocker=new s({holder:this.container})},l.prototype.setupWindow=function(){utils.Layouts.get().addAllSpritesToContainer("FDMenu",this.container);var e=utils.Layouts.get().addAllTextToContainer("FDMenu",this.container);this.priceDisplay=e.getValue("FD_PRICEDISPLAY"),this.startButton=this.addButton("FeatureDropStartClicked",i.FDBUT_START_01,"FD_BUT_START_LABEL","FDMenuStart"),this.cancelButton=this.addButton("FeatureDropCancelClicked",i.FDBUT_CANCEL_01,"FD_BUT_CANCEL_LABEL","FDMenuCancel"),this.container.addChild(this.startButton),this.container.addChild(this.cancelButton)},l.prototype.setupSignals=function(){var t=this;amplify.subscribe("ShowFeatureDropWindow",function(e){t.show(e.price)}),amplify.subscribe("FeatureDropStartClicked",function(){t.hide()}),amplify.subscribe("FeatureDropCancelClicked",function(){t.hide()})},l.prototype.show=function(e){0<e&&(this.priceDisplay.text=n.format(e),this.startButton.interactive=this.startButton.handCurser=!0,this.cancelButton.interactive=this.cancelButton.handCurser=!0,this.container.alpha=1)},l.prototype.hide=function(){this.container.alpha=0,this.startButton.interactive=this.startButton.handCurser=!1,this.cancelButton.interactive=this.cancelButton.handCurser=!1},l.prototype.addButton=function(e,t,i,n){var s=new r(n,"FDMenu/"+n),t=a.createSprite(t);return t.setLayout("FDMenu/"+n),s.addChild(t),s.click=s.tap=function(){amplify.publish(e)},new o(i,s).setLayout("FDMenu/"+n),s},e=l,t.FeatureDropWindow=e}(genericgame=genericgame||{});var genericgame,relax,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i,n;function s(e){var t=i.call(this,e)||this;return t.optionConfig=e,t.findChild({id:"PRIZE_NUMBER"}).setText(""+e.spins),t.findChild({id:"PRIZE_VALUE"}).setText(n.format(e.stake)),t.isSelected(!1),t}t=e.views||(e.views={}),n=utils.Currency,i=t.Button,__extends(s,i),s.prototype.isSelected=function(e){this.findChild({id:"FSW_Losange_01_Pressed"}).visible=e},e=s,t.FreeRoundOptionButton=e}(genericgame=genericgame||{}),function(e){var l,n,t,s,i,o;function r(e){this.messages={},this.texts={},this.sprites={},this.buttons={},this.container=new s,e.addChild(this.container),this.setupBlocker(),this.setupWindows(),this.setupSignals(),this.hideAll()}l=e.views||(e.views={}),n=e.GenericGame,t=utils.Blocker,s=utils.ContainerWrapper,i=e.models.FreeRoundVO,o=utils.TranslationManager,r.prototype.setupSignals=function(){var t=this;amplify.subscribe("ViewResized",function(e){t.resize(e.w,e.h)}),amplify.subscribe("DisplayFreeRoundMessageSignal",function(e){e.freeRound.freeRoundOperatorMessage?(t.freeRoundData=e.freeRound,t.displayFreeRoundOperatorMessage(t.freeRoundData)):t.displayFreeRounds(e.freeRound)}),amplify.subscribe("FreeRoundOperatorURLClicked",function(){amplify.publish("FreeRoundMessageURLClicked",{URL:t.freeRoundData.hyperlinkURL})}),amplify.subscribe("FreeRoundOperatorMessageOKClicked",function(){t.hideAll(),t.displayFreeRounds(t.freeRoundData),t.hyperLinkHitArea.interactive=!1}),amplify.subscribe("FreeRoundMessageOKClicked",function(){!t.optionSelected&&t.currentFreRoundMessage==i.OPTIONS||(amplify.publish("SetUIEnabled",{enabled:!1}),amplify.publish("SendFreeRoundsAcceptedSignal",{optionSelected:t.optionSelected}),t.hideAll())}),amplify.subscribe("FreeRoundMessageNoClicked",function(){amplify.publish("RejectedFreeRoundsSignal"),t.hideAll()}),amplify.subscribe("FreeRoundMessageFinishedClicked",function(){amplify.publish("FinishedFreeRoundsSignal"),t.hideAll()}),amplify.subscribe("OptionClicked",function(e){t.optionSelected=e.clickData,t.setAllOptionsOff(),e.button.isSelected(!0)})},r.prototype.resize=function(e,t){n.resizeModalDialog(this.container,this.layoutEntry,.55,e,t)},r.prototype.displayFreeRounds=function(e){switch(this.currentFreRoundMessage=e.freeRoundMessage,e.freeRoundMessage){case i.OPTIONS:this.setMessageText(r.OPTIONS_MESSAGE,"FREE_ROUNDS4_INFO_0","FREE_ROUNDS4_INFO_0"),e.freeRoundExpiryMessage?this.setMessageText(r.OPTIONS_MESSAGE,"EXPIRY","EXPIRY",[""+e.freeRoundExpiryMessage]):this.setMessageText(r.OPTIONS_MESSAGE,"EXPIRY",""),this.setConfirmationOptions(e.freeRoundConfirmation,r.OPTIONS_MESSAGE),this.addOptions(e.options),this.show(r.OPTIONS_MESSAGE);break;case i.INITIAL:this.setMessageText(r.CHOICE_MESSAGE,"FREE_ROUNDS2_INFO_0","CONGRATULATIONS"),this.setMessageText(r.CHOICE_MESSAGE,"FREE_ROUNDS2_INFO_1","FREE_ROUNDS2_INFO_1",[""+e.roundsRemaining]),e.freeRoundExpiryMessage?this.setMessageText(r.CHOICE_MESSAGE,"EXPIRY","EXPIRY",[""+e.freeRoundExpiryMessage]):this.setMessageText(r.CHOICE_MESSAGE,"EXPIRY",""),this.setConfirmationOptions(e.freeRoundConfirmation,r.CHOICE_MESSAGE),this.show(r.CHOICE_MESSAGE);break;case i.FINAL:this.setMessageText(r.NO_CHOICE_MESSAGE,"FREE_ROUNDS1_INFO_0","CONGRATULATIONS"),this.setMessageText(r.NO_CHOICE_MESSAGE,"FREE_ROUNDS1_INFO_1","FREE_ROUNDS1_INFO_1",[""+e.roundsRemaining]),this.show(r.NO_CHOICE_MESSAGE);break;case i.FINISHED_NO_WINNINGS:this.setMessageText(r.FINISHED_MESSAGE,"FREE_ROUNDS3_INFO_0","FREE_ROUND_FINISHED_NO_WINNINGS"),this.show(r.FINISHED_MESSAGE);break;case i.FINISHED_WITH_WINNINGS:this.setMessageText(r.FINISHED_MESSAGE,"FREE_ROUNDS3_INFO_0","FREE_ROUND_FINISHED_WITH_WINNINGS",[""+e.win]),this.show(r.FINISHED_MESSAGE);break;case i.ERROR:this.setMessageText(r.FINISHED_MESSAGE,"FREE_ROUNDS3_INFO_0","FREE_ROUND_ERROR"),this.show(r.FINISHED_MESSAGE)}},r.prototype.displayFreeRoundOperatorMessage=function(e){var t=this;this.setMessageText(r.OPERATOR_MESSAGE,"FREE_ROUNDS0_INFO_0",e.freeRoundOperatorMessage),e.hyperlinkURL?(this.setMessageText(r.OPERATOR_MESSAGE,"FREE_ROUNDS0_INFO_1",e.hyperlinkMessage),this.hyperLinkHitArea.interactive=!0,this.hyperLinkHitArea.click=this.hyperLinkHitArea.tap=function(){amplify.publish("FreeRoundOperatorURLClicked",{URL:t.freeRoundData.hyperlinkURL})}):this.setMessageText(r.OPERATOR_MESSAGE,"FREE_ROUNDS0_INFO_1",""),this.show(r.OPERATOR_MESSAGE)},r.prototype.setMessageText=function(e,t,i,n){this.texts[e].getValue(t).setText(o.getString(i,n))},r.prototype.setupWindows=function(){var e=utils.Layouts.get().addAllSpritesToContainer("FreeRoundsWindow",this.container,{ignoreEmpty:!0});this.layoutEntry=e.getValue("MessageWindow_BG_01").layoutEntry,this.setupFreeRoundOperatorMessage(),this.setupFreeRoundMessage(),this.setupFreeRoundChoiceMessage(),this.setupFreeRoundFinishedMessage(),this.setupFreeRoundOptionsMessage()},r.prototype.setupFreeRoundOperatorMessage=function(){var e=this.setupMessage("FreeRounds0",r.OPERATOR_MESSAGE);this.hyperLinkHitArea=this.sprites[r.OPERATOR_MESSAGE].getValue("FSW_Losange_02"),this.setupButtons(r.OPERATOR_MESSAGE,e,[{layoutID:"BUT_OK",section:"FreeRoundsWindow/FreeRounds1/BUT_OK",clickEvent:"FreeRoundOperatorMessageOKClicked"}])},r.prototype.setupFreeRoundMessage=function(){var e=this.setupMessage("FreeRounds1",r.NO_CHOICE_MESSAGE);this.setupButtons(r.NO_CHOICE_MESSAGE,e,[{layoutID:"BUT_OK",section:"FreeRoundsWindow/FreeRounds1/BUT_OK",clickEvent:"FreeRoundMessageOKClicked"}])},r.prototype.setupFreeRoundChoiceMessage=function(){var e=this.setupMessage("FreeRounds2",r.CHOICE_MESSAGE);this.setupButtons(r.CHOICE_MESSAGE,e,[{layoutID:"BUT_OK",section:"FreeRoundsWindow/FreeRounds1/BUT_OK",clickEvent:"FreeRoundMessageOKClicked"},{layoutID:"BUT_USENOW",section:"FreeRoundsWindow/FreeRounds2/BUT_USENOW",clickEvent:"FreeRoundMessageOKClicked"},{layoutID:"BUT_USELATER",section:"FreeRoundsWindow/FreeRounds2/BUT_USELATER",clickEvent:"FreeRoundMessageNoClicked"}]),e.visible=!1,this.messages[r.CHOICE_MESSAGE]=e},r.prototype.setupFreeRoundFinishedMessage=function(){var e=this.setupMessage("FreeRounds3",r.FINISHED_MESSAGE);this.setupButtons(r.NO_CHOICE_MESSAGE,e,[{layoutID:"BUT_OK",section:"FreeRoundsWindow/FreeRounds3/BUT_OK",clickEvent:"FreeRoundMessageFinishedClicked"}])},r.prototype.setupFreeRoundOptionsMessage=function(){var e=this.setupMessage("FreeRounds4",r.OPTIONS_MESSAGE);this.options=new s("Prizes","FreeRoundsWindow/FreeRounds4/Prizes"),e.addChild(this.options),this.setupButtons(r.OPTIONS_MESSAGE,e,[{layoutID:"BUT_OK",section:"FreeRoundsWindow/FreeRounds4/BUT_OK",clickEvent:"FreeRoundMessageOKClicked"},{layoutID:"BUT_USENOW",section:"FreeRoundsWindow/FreeRounds4/BUT_USENOW",clickEvent:"FreeRoundMessageOKClicked"},{layoutID:"BUT_USELATER",section:"FreeRoundsWindow/FreeRounds4/BUT_USELATER",clickEvent:"FreeRoundMessageNoClicked"}])},r.prototype.setupButtons=function(e,t,i){for(var n=new utils.Dictionary,s=0,o=i;s<o.length;s++){var r=o[s],a=new l.Button(r);n.add(r.layoutID,a),t.addChild(a)}this.buttons[e]=n},r.prototype.setupMessage=function(e,t){var i="FreeRoundsWindow/"+e,e=new s(e,i);return this.container.addChild(e),this.sprites[t]=n.textureLoader.TextureLayouts.addAllSpritesToContainer(i,e,{ignoreEmpty:!0}),this.texts[t]=n.textureLoader.TextureLayouts.addAllTextToContainer(i,e),this.messages[t]=e},r.prototype.setupBlocker=function(){this.blocker=new t({holder:this.container,blockInteraction:!0})},r.prototype.setConfirmationOptions=function(e,t){var i=this.buttons[t].getValue("BUT_OK"),n=this.buttons[t].getValue("BUT_USENOW"),t=this.buttons[t].getValue("BUT_USELATER");i.visible=i.interactive=!1,n.visible=n.interactive=!1,t.visible=t.interactive=!1,e?(n.visible=n.interactive=!0,t.visible=t.interactive=!0):i.visible=i.interactive=!0},r.prototype.addOptions=function(e){this.removeAllOptions();for(var t=0,i=e;t<i.length;t++){var n=i[t];this.addOption(n)}this.spaceOptions()},r.prototype.addOption=function(e){this.options.addChild(new l.FreeRoundOptionButton({clickEvent:"OptionClicked",clickData:e.raw,layoutID:"PrizeLosange",section:"FreeRoundsWindow/FreeRounds4/Prizes/PrizeLosange",spins:e.spins,stake:e.stake}))},r.prototype.spaceOptions=function(){for(var e=this.options.children.length,t=this.options.dimension.width/4,i=t/2*(4-e),n=0;n<e;n++)this.options.getChildAt(n).position.x=i+t*n},r.prototype.show=function(e){this.messages[e].visible=!0,this.container.visible=!0},r.prototype.hideAll=function(){this.messages[r.CHOICE_MESSAGE].visible=!1,this.messages[r.NO_CHOICE_MESSAGE].visible=!1,this.messages[r.OPERATOR_MESSAGE].visible=!1,this.messages[r.OPTIONS_MESSAGE].visible=!1,this.messages[r.FINISHED_MESSAGE].visible=!1,this.container.visible=!1},r.prototype.setAllOptionsOff=function(){for(var e=0,t=this.options.children;e<t.length;e++)t[e].isSelected(!1)},r.prototype.removeAllOptions=function(){this.options.removeChildren()},r.OPERATOR_MESSAGE="OPERATOR_MESSAGE",r.NO_CHOICE_MESSAGE="NO_CHOICE_MESSAGE",r.CHOICE_MESSAGE="CHOICE_MESSAGE",r.FINISHED_MESSAGE="FINISHED_MESSAGE",r.OPTIONS_MESSAGE="OPTIONS_MESSAGE",e=r,l.FreeRoundWindow=e}(genericgame=genericgame||{}),function(e){(e.views||(e.views={})).GameView=function(){}}(genericgame=genericgame||{}),function(s){var e,c,o,r,a,i,n,d,t;function m(e,t){this.pages=[],this.specialPages=[],this.infoRTP=[],this.infoCharity=[],this.infoFeatureBuy=[],this.infoAwardCap=[],this.infoGermany=[],this.autoplayPages=[],this.pageIndex=0,this.container=new c,e.addChild(this.container),this.helpContainer=new c("Help","Menu/Help"),this.container.addChild(this.helpContainer),n.get().addAllToContainer("Menu/Help",this.helpContainer,{ignoreEmpty:!0}),this.setupTextStyles(),this.setupPages(t),this.addButtons(),this.setupPageDots(),this.setupSignals(),this.pages[0].alpha=1}e=s.views||(s.views={}),c=utils.ContainerWrapper,o=utils.SpriteWrapper,r=utils.TextWrapper,a=s.TextureLoader,i=utils.SoundWrapper,n=utils.Layouts,d=utils.TranslationManager,m.prototype.setupSignals=function(){var o=this;amplify.subscribe("ShowRTP",function(e){for(var t=0,i=o.infoRTP;t<i.length;t++){var n=i[t];n.visible=e.visible,o.updatePageInfoPositioning(n.parent)}o.checkFeatureBuyText()}),amplify.subscribe("HideCharityInfoInHelp",function(){for(var e=0,t=o.infoCharity;e<t.length;e++){var i=t[e];i.visible=!1,o.updatePageInfoPositioning(i.parent)}}),amplify.subscribe("FeatureBuyDisabled",function(){o.featureBuyDisabled=!0,o.checkFeatureBuyText()}),amplify.subscribe("HideAutoPlay",function(){for(var e=0,t=o.autoplayPages;e<t.length;e++){var i=t[e];i.alpha=0;i=o.pages.indexOf(i);-1!==i&&o.pages.splice(i,1)}o.setupPageDots()}),amplify.subscribe("HideHelp",function(){o.dots.visible=!1,o.left.visible=!1,o.right.visible=!1,o.pageIndex=o.pages.length-1,o.updateCurrentPage()}),amplify.subscribe("SetAwardCap",function(e){for(var t=utils.Currency.format(e.value),i=0,n=o.infoAwardCap;i<n.length;i++){var s=n[i];s.visible=!0,s.setText(d.getString(s.id,[t])),o.updatePageInfoPositioning(s.parent)}}),amplify.subscribe("ShowGermanMarketHelpInGame",function(){if(s.GenericGame.HAS_GERMAN_MARKET_HELP_FILES)for(var e=0,t=o.infoGermany;e<t.length;e++){var i=t[e];i.visible=!0,o.updatePageInfoPositioning(i.parent)}})},m.prototype.checkFeatureBuyText=function(){if(this.featureBuyDisabled)for(var e=0,t=this.infoFeatureBuy;e<t.length;e++){var i=t[e];i.visible=!1,this.updatePageInfoPositioning(i.parent)}},m.prototype.isOpen=function(){return 1===this.container.alpha},m.prototype.hide=function(){this.container.alpha=0,this.left.interactive=!1,this.right.interactive=!1},m.prototype.show=function(){this.container.alpha=1,this.left.interactive=!0,this.right.interactive=!0,this.updatePageDots()},m.prototype.setupTextStyles=function(){this.headingGuide=this.helpContainer.removeChild(this.helpContainer.findChild({id:"Text_Title"})),this.bodyGuide=this.helpContainer.removeChild(this.helpContainer.findChild({id:"Text_Body"}))},m.prototype.setupPages=function(e){var t="string"==typeof e.pages?JSON.parse(e.pages):e.pages;if(t)for(var i=0;i<t.length;i++)this.setupPage(e,t[i]);this.setupAboutPage()},m.prototype.setupPage=function(e,t){var i=new c;this.helpContainer.addChild(i);var n=apiMapper.getLanguageCode(),s=this.createHeading(t.titleId,i),o=s,s=this.createBodyText({text:t.infoId.map(function(e){return d.getString(e)}).join("\n\n"),y:s.position.y+s.height+m.SPACING_Y,height:this.helpContainer.dimension.height-(s.position.y+s.height+m.SPACING_Y+20),container:i}),r=s.style.fontSize;s.destroy(),m.isAutoplayPage(t.titleId)&&this.autoplayPages.push(i);for(var a=0,l=0,u=t.infoId;l<u.length;l++){var h,p=u[l];m.isInfoExcluded(p,t,n)||e.recoveryInfoIds&&-1!==e.recoveryInfoIds.indexOf(p)&&!apiMapper.showRecoveryInfo()||((h=this.createBodyText({id:p,y:o.position.y+o.height+m.SPACING_Y,height:this.helpContainer.dimension.height-(o.position.y+o.height+m.SPACING_Y+20),container:i})).style.fontSize=r,m.isRtpInfo(p,t,e)?this.infoRTP.push(h):e.charityInfoIds&&-1!==e.charityInfoIds.indexOf(p)&&this.infoCharity.push(h),m.isFeatureBuyInfo(p,t,e)&&this.infoFeatureBuy.push(h),m.isGermanyInfo(p,t)?(this.infoGermany.push(h),h.visible=!1):m.isAwardCapInfo(p,t)?(this.infoAwardCap.push(h),h.visible=!1):o=h,a++)}a&&this.pages.push(i),i.alpha=0},m.isInfoExcluded=function(e,t,i){if(t.exclude)for(var n=0,s=Object.keys(t.exclude);n<s.length;n++){var o=s[n],o=t.exclude[o];if(this.hasId(o.infoIds,e)&&(!o.languages||this.hasId(o.languages,i)))return!0}return!1},m.isAutoplayPage=function(e){return"AUTO_PLAY_TITLE"===e},m.isRtpInfo=function(e,t,i){return this.hasId(i.rtpInfoIds,e)||this.hasId(null===(t=t.special)||void 0===t?void 0:t.rtpIds,e)},m.isFeatureBuyInfo=function(e,t,i){return this.hasId(i.featureBuyIds,e)||this.hasId(null===(t=t.special)||void 0===t?void 0:t.featureBuyIds,e)},m.isGermanyInfo=function(e,t){return this.hasId(null===(t=t.special)||void 0===t?void 0:t.germanyIds,e)},m.isAwardCapInfo=function(e,t){return this.hasId(null===(t=t.special)||void 0===t?void 0:t.awardCapIds,e)},m.hasId=function(e,t){return-1!==(null!==(t=null==e?void 0:e.indexOf(t))&&void 0!==t?t:-1)},m.prototype.updatePageInfoPositioning=function(e){if(-1!==this.pages.indexOf(e)&&-1===this.specialPages.indexOf(e))for(var t=e.children.filter(function(e){return e instanceof r}),i=t[0],n=1;n<t.length;n++){var s=t[n];s.visible&&(s.y=i.y+i.height+m.SPACING_Y,i=s)}},m.prototype.setupAboutPage=function(){var e=new c;this.helpContainer.addChild(e);var t=this.createHeading("ABOUT",e),i=a.createSprite("Paytable/BTG_Logo_01"),n=1.5*this.headingGuide.layoutEntry.height/i.height;i.scale.set(n),i.position.x=this.bodyGuide.getDimensions().x,i.position.y=t.position.y+1.5*t.height+m.SPACING_Y,e.addChild(i),this.createBodyText({text:"© BIG TIME GAMING\n"+s.GenericGame.VERSION+"\n"+s.GenericGame.BUILD_DATE,y:i.position.y+i.height+4*m.SPACING_Y,height:100,container:e}),this.pages.push(e),this.specialPages.push(e),e.alpha=0},m.prototype.setupPageDots=function(){this.dots&&this.dots.destroy(),this.dots=new c,this.offDotTexture=a.getTexture(a.Bullet_01),this.onDotTexture=a.getTexture(a.Bullet_01_Pressed);for(var e=utils.Layouts.get().getTextureEntry("BulletMarker","Menu"),t=utils.Layouts.get().getTextureEntry("Bullet_01","Menu/Bullet"),i=0;i<this.pages.length;i++){var n=new o(this.offDotTexture);n.width=t.width,n.height=t.height,n.position.set(i*t.width*1.5,0),this.dots.addChild(n)}var s=this.pages.length*t.width*1.5;this.dots.x=e.x-s/2,this.dots.y=e.y-t.height/2,this.container.addChild(this.dots),this.updatePageDots()},m.prototype.updatePageDots=function(){for(var e=0;e<this.pages.length;e++)this.dots.findChildAt(e).texture=this.offDotTexture;this.dots.findChildAt(this.pageIndex).texture=this.onDotTexture},m.prototype.createHeading=function(e,t){var i=this.headingGuide.getDimensions(),i={x:i.x,y:i.y,width:i.width};return new r(e,t,this.headingGuide.style,i)},m.prototype.createBodyText=function(e){var t=this.bodyGuide.getDimensions(),i=this.bodyGuide.style,t={x:t.x,y:e.y,height:e.height,width:t.width};return r.create(e.container,{id:e.id,text:e.text,style:i,dimensions:t})},m.prototype.onLeftButtonPressed=function(){this.pageIndex--,this.pageIndex<0&&(this.pageIndex=this.pages.length-1),this.updateCurrentPage()},m.prototype.onRightButtonPressed=function(){this.pageIndex=(this.pageIndex+1)%this.pages.length,this.updateCurrentPage()},m.prototype.updateCurrentPage=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].alpha=0;this.pages[this.pageIndex].alpha=1,this.updatePageDots()},m.prototype.addButtons=function(){var e,t=this;this.left=a.createSprite(a.BUT_Next_01),this.left.setLayoutByIndex("Menu",0),this.left.click=this.left.tap=function(){i.playSound("Clicker"),t.onLeftButtonPressed()},null!==(e=this.left.layoutEntry)&&void 0!==e&&e.processRotateAndMirror||(this.left.anchor.set(.5),this.left.position.x+=this.left.width/2,this.left.position.y+=this.left.height/2,this.left.scale.x*=-1),this.container.addChild(this.left),this.right=a.createSprite(a.BUT_Next_01),this.right.setLayoutByIndex("Menu",1),this.right.click=this.right.tap=function(){i.playSound("Clicker"),t.onRightButtonPressed()},this.container.addChild(this.right)},m.SPACING_Y=10,t=m,e.Help=t}(genericgame=genericgame||{}),function(e){var t,n,i,s;function o(e){this.container=new s,e.addChild(this.container),this.setupBlocker(),this.setupSignals(),this.hide()}t=e.views||(e.views={}),n=utils.TranslationManager,i=utils.Blocker,s=utils.ContainerWrapper,o.prototype.setupSignals=function(){var i=this;amplify.subscribe("ShowMessageHtml",function(e){var t=n.getString("OK");i.hide(),btg$("head").append(o.css),btg$("head").append(o.getSizeCss()),btg$("body").append(o.getHtml(e.title,e.message,t)),i.okAction=e.okAction,i.show()}),amplify.subscribe("HtmlMessageWindowOkClicked",function(){i.buttonClicked()}),amplify.subscribe("WindowResized",function(){i.container.visible&&utils.DeviceInfo.onIOSBrowser()&&(btg$("#btg-msg-style2").remove(),btg$("head").append(o.getSizeCss()))})},o.prototype.setupBlocker=function(){this.blocker=new i({holder:this.container,blockInteraction:!0})},o.prototype.buttonClicked=function(){this.hide(),this.okAction&&(this.okAction(),this.okAction=null)},o.prototype.hide=function(){this.container.visible=!1,btg$("#btg-msg-container").remove(),btg$("#btg-msg-style1").remove(),btg$("#btg-msg-style2").remove()},o.prototype.show=function(){this.container.visible=!0},o.getHtml=function(e,t,i){return"\n<div id='btg-msg-container'>\n    <div class='btg-msg-title'>"+e+"</div>\n    <div class='btg-msg-body'>"+t+"</div>\n    <div class='btg-msg-buttoncontainer'><div class='btg-msg-button' onclick='amplify.publish(\"HtmlMessageWindowOkClicked\");'>"+i+"</div></div>\n</div>"},o.getSizeCss=function(){if(utils.DeviceInfo.onIOSBrowser()){var e=apiMapper.getWindowSize(),t=e.w/100*75,i=Math.min(e.h,e.w)/100*65,n=e.h/100*120,s=e.w/100*45;return"\n<style id='btg-msg-style2'>\n#btg-msg-container {\n    width: "+t+"px;\n    height: "+i+"px;\n    max-width: "+n+"px;\n    max-height: "+s+"px;\n    position: fixed;\n    left: "+(e.w-Math.min(t,n))/2+"px;\n    top: "+(e.h-Math.min(i,s))/2+"px;\n}\n</style>"}return"\n<style id='btg-msg-style2'>\n#btg-msg-container {\n    width: 75vw;\n    height: 65vmin;\n    max-width: 120vh;\n    max-height: 45vw;\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n}\n</style>\n"},o.css="\n<style id='btg-msg-style1'>\n#btg-msg-container {\n    background-color: #303030;\n    border-style: solid;\n    border-width: 1px;\n    border-color: #262626;\n    user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n}\n.btg-msg-title {\n    width: 100%;\n    text-align: center;\n    font-size: 5vmin;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: bold;\n    color: white;\n    margin-top: 2%;\n    white-space: nowrap\n}\n.btg-msg-body {\n    text-align: center;\n    font-size: 3.5vmin;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: bold;\n    color: #DFDFDF;\n    overflow-y: auto;\n    bottom: 15%;\n    top: 15%;\n    width: 100%;\n    position: absolute;\n    padding: 5px;\n}\n.btg-msg-button {\n    padding-top: 1%;\n    padding-bottom: 1%;\n    width: 25%;\n    text-align: center;\n    font-size: 3.5vmin;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: bold;\n    color: #DFDFDF;\n    margin-left: auto;\n    margin-right: auto;\n    border-style: solid;\n    border-width: 1px;\n    border-color: #808080;\n    cursor: pointer;\n}\n.btg-msg-buttoncontainer {\n    position: absolute;\n    width: 100%;\n    height: 12.5%;\n    bottom: 0;\n}\n.btg-msg-body a {\n    color: #4286f4;\n}\n</style>\n",e=o,t.HtmlMessageWindow=e}(genericgame=genericgame||{}),function(e){var t,i,n;function s(e){this.container=new i,e.addChild(this.container),this.setupSignals(),this.setup()}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=PIXI.Rectangle,s.prototype.setupSignals=function(){var e=this;amplify.subscribe("showIntroScreenSignal",function(){e.onShowIntroScreenSignal()}),amplify.subscribe("StartIntro",function(){e.onStartIntro()}),amplify.subscribe("IntroFinishedSignal",function(){e.introFinishedSignalReceived=!0,e.isFinished||e.setFinished()}),amplify.subscribe("ViewResized",function(){e.onResize()})},s.prototype.setup=function(){var e=this;this.container.visible=!1,this.container.click=this.container.tap=function(){e.onClick()},this.resizeHitArea()},s.prototype.onResize=function(){this.resizeHitArea()},s.prototype.resizeHitArea=function(){var e=this.container.toLocal(new PIXI.Point(0,0),stage),t=this.container.toLocal(new PIXI.Point(stage.width,stage.height),stage);this.container.hitArea=new n(e.x,e.y,t.x,t.y)},s.prototype.onShowIntroScreenSignal=function(){this.container.interactive=!0,this.container.visible=!0},s.prototype.onStartIntro=function(){},s.prototype.onClick=function(){this.setFinished()},s.prototype.onFinished=function(){},s.prototype.setFinished=function(){this.isFinished||(this.isFinished=!0,this.onFinished(),this.remove(),this.introFinishedSignalReceived||amplify.publish("IntroFinishedSignal"))},s.prototype.remove=function(){this.container.removeChildren(),this.container.removeFromParent(),this.container.interactive=!1},e=s,t.Intro=e}(genericgame=genericgame||{}),function(n){var e,s,t,o,r,a,l,i;function u(e,t){var i=this;this.hideAutoplay=!1,this.container=new r("Menu","Menu"),e.addChild(this.container),this.addBackground(),this.addHomeButton(),this.addCloseButton(),t&&1<t.v?this.addTabButtons2():this.addTabButtons(),this.setupOptions(),this.setupPaytable(),this.setupAuto(),this.setupHelp(),this.closeMenu(),amplify.subscribe("StartAutoSpinsSignal",function(){i.closeMenu()}),amplify.subscribe("AcceptedFreeRoundsSignal",function(){n.GenericGame.ALLOW_AUTOPLAY_IN_FR||(i.autoButton.visible=!1)}),amplify.subscribe("ShowFreeRoundsSignal",function(){n.GenericGame.ALLOW_AUTOPLAY_IN_FR||(i.autoButton.visible=!1)}),amplify.subscribe("FinishedFreeRoundsSignal",function(){i.hideAutoplay||(i.autoButton.visible=!0)}),amplify.subscribe("ShowOptionsTab",function(e){i.optionsButton.visible=e.visible}),amplify.subscribe("HideAutoPlay",function(){i.hideAutoplay=!0,i.autoButton.visible=!1}),amplify.subscribe("OnPlayPressed",function(){i.closeMenu()}),amplify.subscribe("OnPaysPressed",function(e){var t;i.enabled&&(e=null!==(t=null==e?void 0:e.action)&&void 0!==t?t:"toggle",t=i.container.visible&&i.pays.isOpen(),"hide"==e||"toggle"==e&&t?i.closeMenu():"show"!=e&&"toggle"!=e||t||(i.openMenu(),i.displayPays()))}),amplify.subscribe("OnHelpPressed",function(e){var t;i.enabled&&(e=null!==(t=null==e?void 0:e.action)&&void 0!==t?t:"toggle",t=i.container.visible&&i.help.isOpen(),"hide"==e||"toggle"==e&&t?i.closeMenu():"show"!=e&&"toggle"!=e||t||(i.openMenu(),i.displayHelp()))}),amplify.subscribe("OnOptionsPressed",function(){i.enabled&&(i.container.visible&&i.options.isOpen()?i.closeMenu():(i.openMenu(),i.displayOptions()))}),amplify.subscribe("OnAutoPressed",function(){i.enabled&&(i.container.visible&&i.auto.isOpen()?i.closeMenu():(i.openMenu(),i.displayAuto()))}),amplify.subscribe("ShowHomeButton",function(e){i.setHomeVisible(e.visible)}),amplify.subscribe("SetUIEnabled",function(e){i.enabled=e.enabled,i.container.interactiveChildren=e.enabled}),amplify.subscribe("OnFeatureDropPressed",function(){i.closeMenu()}),amplify.subscribe("HideHelp",function(){i.helpButton.text.setText(l.getString("ABOUT").toUpperCase())}),this.options.checkIfOptionsTabShouldBeVisible()}e=n.views||(n.views={}),s=utils.SpriteWrapper,t=utils.SoundWrapper,o=utils.TextWrapper,r=utils.ContainerWrapper,a=n.TextureLoader,l=utils.TranslationManager,u.prototype.resizeToMarker=function(e){var t=this.container.layoutEntry,i=utils.Layouts.get().getEntry(e,""),n=Math.min(i.width/t.width,i.height/t.height),e=i.x+i.width/2,i=i.y+i.height/2;this.container.position.set(e-t.width*n/2,i-t.height*n/2),this.container.scale.set(n)},u.prototype.setupHelp=function(){this.help=new n.views.Help(this.container,this.getHelpConfig())},u.prototype.getHelpConfig=function(){return{pages:JSON.parse('[{"titleId":"INTRO_GAME_TITLE","infoId":["INTRO_GAME_INFO_0"]},{"titleId":"HOW_TO_PLAY_TITLE","infoId":["HOW_TO_PLAY_INFO_0","HOW_TO_PLAY_INFO_1"]},{"titleId":"AUTO_PLAY_TITLE","infoId":["AUTO_PLAY_INFO_0","AUTO_PLAY_INFO_1","AUTO_PLAY_INFO_2"]},{"titleId":"FEATURE_DROP","infoId":["FEATURE_DROP_HELP_INFO_0","FEATURE_DROP_HELP_INFO_1","FEATURE_DROP_HELP_INFO_2","FEATURE_DROP_PRICE_LIMIT_INFO_0"]},{"titleId":"START_THE_SPIN_TITLE","infoId":["START_THE_SPIN_INFO_0","START_THE_SPIN_INFO_1"]},{"titleId":"EXTRA_REEL","infoId":["EXTRA_REEL_INFO_0"]},{"titleId":"REACTIONS_INFO_TITLE","infoId":["REACTIONS_INFO_0"]},{"titleId":"SYMBOL_WINS_TITLE","infoId":["SYMBOL_WINS_INFO_0","SYMBOL_WINS_INFO_1"]},{"titleId":"WILD","infoId":["WILD_PAY_INFO_01","WILD_ICON_INFO_1"]},{"titleId":"SCATTER","infoId":["SCATTER_ICON_INFO_0","SCATTER_ICON_INFO_1"]},{"titleId":"FREE_SPINS_GAMBLE","infoId":["FREE_SPINS_GAMBLE_INFO_0"]},{"titleId":"FREE_SPINS_FEATURE_TITLE","infoId":["FREE_SPINS_FEATURE_INFO_0","FREE_SPINS_FEATURE_INFO_1","FREE_SPINS_FEATURE_INFO_2"]},{"titleId":"BONUS_SCATTER_INFO_TITLE","infoId":["FREE_SPIN_FEATURE_SCATTER_INFO_0","FREE_SPIN_FEATURE_SCATTER_INFO_1"]},{"special":{"featureBuyIds":["GENERAL_INFO_0B"],"rtpIds":["GENERAL_INFO_0A","GENERAL_INFO_0B"]},"titleId":"GENERAL_INFO_TITLE","infoId":["GENERAL_INFO_0A","GENERAL_INFO_0B","STRATEGY_INFO_0","GENERAL_INFO_1","GENERAL_INFO_2_RELAX","GENERAL_INFO_3"]}]')}},u.prototype.setupAuto=function(){this.auto=new e.AutoPlayLegacy(this.container),this.auto.hide()},u.prototype.setupOptions=function(){this.options=new e.Options(this.container),this.options.hide()},u.prototype.setHomeVisible=function(e){this.homeButton.visible=e},u.prototype.addBackground=function(){this.container.addChild(a.createSprite(a.Menu_BG_01,"Menu"))},u.prototype.addCloseButton=function(){var e=this;this.closeButton=a.createSprite(a.BUT_CloseMenu_01,"Menu"),this.closeButton.click=this.closeButton.tap=function(){t.playSound("Clicker"),e.closeMenu()},this.closeButton.interactive=this.closeButton.handCurser=!0,this.container.addChild(this.closeButton)},u.prototype.addHomeButton=function(){this.homeButton=a.createSprite(a.BUT_Home_01,"Menu"),this.homeButton.click=this.homeButton.tap=function(){t.playSound("Clicker"),amplify.publish("HomeButtonPressed")},this.homeButton.interactive=this.homeButton.handCurser=!0,this.container.addChild(this.homeButton)},u.prototype.displayAuto=function(){this.updateButtonBG(this.paysButton,!1),this.updateButtonBG(this.autoButton,!0),this.updateButtonBG(this.optionsButton,!1),this.updateButtonBG(this.helpButton,!1),this.options.hide(),this.pays.hide(),this.auto.show(),this.help.hide()},u.prototype.displayOptions=function(){this.updateButtonBG(this.paysButton,!1),this.updateButtonBG(this.autoButton,!1),this.updateButtonBG(this.optionsButton,!0),this.updateButtonBG(this.helpButton,!1),this.options.show(),this.pays.hide(),this.auto.hide(),this.help.hide()},u.prototype.displayPays=function(){this.updateButtonBG(this.paysButton,!0),this.updateButtonBG(this.autoButton,!1),this.updateButtonBG(this.optionsButton,!1),this.updateButtonBG(this.helpButton,!1),this.options.hide(),this.auto.hide(),this.pays.show(),this.help.hide(),amplify.publish("Analytics_ShowPays")},u.prototype.displayHelp=function(){this.updateButtonBG(this.paysButton,!1),this.updateButtonBG(this.autoButton,!1),this.updateButtonBG(this.optionsButton,!1),this.updateButtonBG(this.helpButton,!0),this.options.hide(),this.pays.hide(),this.auto.hide(),this.help.show(),amplify.publish("Analytics_ShowHelp")},u.prototype.updateButtonBG=function(e,t){var i=e.bg.width,n=e.bg.height;e.bg.texture=t?e.activeTexture:e.inactiveTexture,e.bg.width=i,e.bg.height=n},u.prototype.closeMenu=function(){this.container.visible=!1,this.options.hide(),this.pays.hide(),this.auto.hide(),this.help.hide(),amplify.publish("MenuClosing")},u.prototype.openMenu=function(){this.container.visible=!0,amplify.publish("MenuOpening")},u.prototype.addTabButtons=function(){this.tabContainer=new r("TabContainer","Menu"),this.container.addChild(this.tabContainer),this.paysButton=this.addTabButton({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:"PAYS",fontSize:25,onClickFunction:function(){amplify.publish("OnPaysPressed")}}),this.tabContainer.addChild(this.paysButton),this.autoButton=this.addTabButton({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:"AUTO",fontSize:25,onClickFunction:function(){amplify.publish("OnAutoPressed")}}),this.tabContainer.addChild(this.autoButton),this.autoButton.position.x=this.paysButton.position.x+this.paysButton.bg.width,this.optionsButton=this.addTabButton({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:"OPTIONS",fontSize:25,onClickFunction:function(){amplify.publish("OnOptionsPressed")}}),this.tabContainer.addChild(this.optionsButton),this.optionsButton.position.x=this.autoButton.position.x+this.autoButton.bg.width,this.helpButton=this.addTabButton({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:"HELP",fontSize:25,onClickFunction:function(){amplify.publish("OnHelpPressed")}}),this.tabContainer.addChild(this.helpButton),this.helpButton.position.x=this.optionsButton.position.x+this.optionsButton.bg.width},u.prototype.addTabButton=function(e){var t=new r,i=a.getTexture(e.bgTextureID),n=new s(i);return n.setLayout("Menu"),t.addChild(n),t.bg=n,t.activeTexture=a.getTexture(e.bgTexturePressedID),t.inactiveTexture=i,t.onClick=e.onClickFunction,t.click=t.tap=function(){utils.SoundWrapper.playSound("Clicker"),t.onClick()},t.interactive=t.handCurser=!0,void 0!==e.text&&((e=new o(e.text,t)).setLayout("Menu"),t.text=e),t},u.prototype.addTabButtons2=function(){this.tabContainer=new r("TAB_Menu","Menu/TAB_Menu"),this.container.addChild(this.tabContainer),this.paysButton=this.addTabButton2({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:l.getString("PAYS"),fontSize:25,onClickFunction:function(){amplify.publish("OnPaysPressed")}}),this.tabContainer.addChild(this.paysButton),this.autoButton=this.addTabButton2({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:l.getString("AUTO"),fontSize:25,onClickFunction:function(){amplify.publish("OnAutoPressed")}}),this.tabContainer.addChild(this.autoButton),this.autoButton.position.x=this.paysButton.position.x+this.paysButton.bg.width,this.optionsButton=this.addTabButton2({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:l.getString("OPTIONS"),fontSize:25,onClickFunction:function(){amplify.publish("OnOptionsPressed")}}),this.tabContainer.addChild(this.optionsButton),this.optionsButton.position.x=this.autoButton.position.x+this.autoButton.bg.width,this.helpButton=this.addTabButton2({bgTextureID:a.TAB_Menu_01,bgTexturePressedID:a.TAB_Menu_01_Pressed,text:l.getString("HELP"),fontSize:25,onClickFunction:function(){amplify.publish("OnHelpPressed")}}),this.tabContainer.addChild(this.helpButton),this.helpButton.position.x=this.optionsButton.position.x+this.optionsButton.bg.width},u.prototype.addTabButton2=function(e){var t=new r("TAB_Button","Menu/TAB_Menu/TAB_Button");t.activeTexture=a.getTexture(e.bgTexturePressedID),t.inactiveTexture=a.getTexture(e.bgTextureID);var i=new s(t.inactiveTexture);return i.setLayout("Menu/TAB_Menu/TAB_Button"),t.addChild(i),t.bg=i,t.click=t.tap=function(){amplify.publish("PlayClicker"),e.onClickFunction.call(t)},t.interactive=!0,null!=e.text&&((i=new o("TAB_TEXT",t)).setText(e.text),i.setLayout("Menu/TAB_Menu/TAB_Button"),t.text=i),t},i=u,e.Menu=i}(genericgame=genericgame||{}),function(e){var t,i,s,o,n,r,a,l,u;function h(e){this.container=new a,e.addChild(this.container),this.setupBlocker(),this.setupMessageWindow(),this.hide(),this.setupSignals(),h.windowIsSetup=!0}t=e.views||(e.views={}),i=e.GenericGame,s=utils.TextWrapper,o=utils.TranslationManager,n=e.models.FreeRoundVO,r=utils.Blocker,a=utils.ContainerWrapper,l=utils.GraphicsWrapper,u=e.TextureLoader,Object.defineProperty(h,"isSetup",{get:function(){return h.windowIsSetup},enumerable:!1,configurable:!0}),h.prototype.setupSignals=function(){var t=this;amplify.subscribe("ShowAutoSpinsLimitMessageSignal",function(e){t.freeze||t.displayAutoSpinsLimitMessage(e.lossLimitReached,e.winLimitReached)}),amplify.subscribe("DisplayFreeRoundMessageSignal",function(e){t.freeze||i.USE_FR2_WINDOW||(e.freeRound.freeRoundOperatorMessage?(t.displayFreeRoundOperatorMessage(e.freeRound),t.freeRoundData=e.freeRound):t.displayFreeRounds(e.freeRound))}),amplify.subscribe("DisplayRecoveredGameMessageSignal",function(){t.freeze||apiMapper.showInGameRecoveryMessage()&&t.displayRecoveredGameMessage()}),amplify.subscribe("ShowErrorMessageSignal",function(e){t.freeze||(t.messageDisplayed="ERROR",t.errorID=e.errorID,t.critical=e.critical,t.displayError(e.errorTitle,e.errorMsg))}),amplify.subscribe("ShowGameBlockMessage",function(e){t.freeze||(t.messageDisplayed=t.errorID="GAMEBLOCK",t.messageWindow.heading.setText(e.title||""),t.messageWindow.message.setText(e.message||""),t.showNonInteractive(),t.blockerFull.show(),t.freeze=!0)})},h.prototype.displayAutoSpinsLimitMessage=function(e,t){this.messageDisplayed="AUTO_PLAY",this.messageWindow.heading.setText(o.getString("AUTO_PLAY_INFO_TITLE")),this.messageWindow.message.setText(o.getString("AUTO_PLAY_INFO_STOPPED")+(e?o.getString("AUTO_PLAY_INFO_LOSS_LIMIT"):"")+(t?o.getString("AUTO_PLAY_INFO_WIN_LIMIT"):"")+""),this.showOKButton(),this.show()},h.prototype.displayRecoveredGameMessage=function(){this.messageDisplayed="RECOVERED_GAME",this.messageWindow.heading.setText(o.getString("RECOVERED_GAME_TITLE")),this.messageWindow.message.setText(o.getString("RECOVERED_GAME_INFO_0")),this.showOKButton(),this.show()},h.prototype.displayError=function(e,t){this.messageWindow.heading.setText(e),this.messageWindow.message.setText(t),this.showOKButton(),this.show()},h.prototype.resize=function(e,t){var i=this.windowBg,n=Math.min(.55*e/i.width,.55*t/i.height);this.container.scale.set(n,n),this.container.position.x=e/2-i.width/2*n,this.container.position.y=t/2-i.height/2*n},h.prototype.displayFreeRoundOperatorMessage=function(e){this.messageDisplayed="FREE_ROUND_OPERATOR_MESSAGE",this.messageWindow.message.style.align="center",this.messageWindow.heading.setText(o.getString("FREE_ROUND_TITLE")),this.messageWindow.message.setText(o.getString(e.freeRoundOperatorMessage)),e.hyperlinkURL&&(this.freeRoundOperatorMessageURL=e.hyperlinkURL,this.addClickArea()),this.showOKButton(),this.show()},h.prototype.displayFreeRounds=function(e){this.messageWindow.heading.setText(o.getString("FREE_ROUND_TITLE"));var t="";switch(e.freeRoundMessage){case n.INITIAL:this.showYesNoButtons(),t=o.getString("FREE_ROUND_INITIAL",[""+e.roundsRemaining]),this.messageDisplayed="FREE_ROUNDS_STARTED";break;case n.FINAL:this.showOKButton(),t=o.getString("FREE_ROUND_FINAL",[""+e.roundsRemaining]),this.messageDisplayed="FREE_ROUNDS_STARTED";break;case n.FINISHED_NO_WINNINGS:this.showOKButton(),t=o.getString("FREE_ROUND_FINISHED_NO_WINNINGS"),this.messageDisplayed="FREE_ROUNDS_FINISHED";break;case n.FINISHED_WITH_WINNINGS:this.showOKButton(),t=o.getString("FREE_ROUND_FINISHED_WITH_WINNINGS",[""+e.win]),this.messageDisplayed="FREE_ROUNDS_FINISHED";break;case n.ERROR:this.showOKButton(),t=o.getString("FREE_ROUND_ERROR"),this.messageDisplayed="FREE_ROUND_ERROR"}this.messageWindow.message.setText(t),this.show()},h.prototype.setupMessageWindow=function(){var e=this,t=new a;this.messageWindow=t,this.container.addChild(t);var i=u.createSprite(u.MessageWindow_BG_01);this.windowBg=i,this.messageWindow.addChild(i);var n=new s("heading",this.messageWindow,{font:"bold 50px Arial",fill:13421772,dropShadow:!0},{width:.8*i.width,x:i.width/2,y:30,anchorX:.5});this.messageWindow.heading=n;t=new s("message",this.messageWindow,{font:"bold 30px Arial",fill:13421772,dropShadow:!0,wordWrap:!0,wordWrapWidth:i.width-70,align:"left"},{height:.5*i.height,x:i.width/2,y:n.height+n.y+10,anchorX:.5});this.messageWindow.message=t;n=this.addButton({bgTextureID:u.BUT_Ok_01_BG_02,textureID:u.BUT_Ok_01,text:o.getString("OK"),fontSize:25,colorTints:[16777215,2293538],onClickFunction:function(){return e.okButtonClicked()}});n.position.y=i.position.y+i.height-n.height-20,n.position.x=i.width/4*3-n.width/2,this.messageWindow.OKButton=n,this.messageWindow.addChild(n);t=this.addButton({bgTextureID:u.BUT_Ok_01_BG_02,textureID:u.BUT_Ok_01,text:o.getString("NO"),fontSize:25,colorTints:[16777215,2293538],onClickFunction:function(){return e.noButtonClicked()}});t.position.y=n.position.y,t.position.x=i.width/4-n.width/2,this.messageWindow.NOButton=t,this.messageWindow.addChild(t)},h.prototype.addButton=function(e){var t=new a,i=u.getTexture(e.bgTextureID),n=new utils.SpriteWrapper(i);t.addChild(n),t.bg=n;var s,o=void 0!==e.bgTexturePressedID?u.getTexture(e.bgTexturePressedID):void 0;return void 0!==e.textureID&&(s=u.createSprite(e.textureID),t.addChild(s)),t.mousedown=t.touchstart=function(){o&&(n.texture=o),e.colorTints&&(t.bg.tint=e.colorTints[1])},t.mouseup=t.touchend=function(){o&&(n.texture=i),e.colorTints&&(t.bg.tint=e.colorTints[0])},t.onClick=e.onClickFunction,t.click=t.tap=function(){t.onClick()},t.interactive=t.handCurser=!0,void 0!==e.text&&(s=new utils.TextWrapper(e.text,t,{font:"bold "+e.fontSize+"px Arial",fill:16777215},{x:s.width/2,y:s.height/2,anchorX:.5,anchorY:.5}),t.text=s),t},h.prototype.setupBlocker=function(){this.blockerSemi=new r({holder:this.container,blockInteraction:!0}),this.blockerFull=new r({holder:this.container,blockInteraction:!0,alpha:1,color:0}),this.blockerFull.hide()},h.prototype.noButtonClicked=function(){this.hide(),amplify.publish("RejectedFreeRoundsSignal")},h.prototype.okButtonClicked=function(){switch(this.hide(),this.messageDisplayed){case"ERROR":amplify.publish("ErrorDisplayedSignal",{errorID:this.errorID,critical:this.critical});break;case"AUTO_PLAY":amplify.publish("StopAutoSpinsSignal"),amplify.publish("SetUIEnabled",{enabled:!0});break;case"FREE_ROUNDS_STARTED":amplify.publish("AcceptedFreeRoundsSignal",{});break;case"FREE_ROUNDS_FINISHED":amplify.publish("FinishedFreeRoundsSignal");break;case"RECOVERED_GAME":amplify.publish("StartRecoveredGameSignal");break;case"FREE_ROUND_ERROR":amplify.publish("FreeRoundsErrorDisplayedSignal");break;case"FREE_ROUND_OPERATOR_MESSAGE":this.messageWindow.message.style.align="left",this.messageWindow.removeChild(this.hyperLinkHitArea),this.displayFreeRounds(this.freeRoundData)}},h.prototype.hide=function(){this.container.visible=!1,this.messageWindow.OKButton.interactive=this.messageWindow.NOButton.interactive=!1},h.prototype.show=function(){this.container.visible=!0,this.messageWindow.OKButton.interactive=!0},h.prototype.showNonInteractive=function(){this.messageWindow.OKButton.visible=!1,this.messageWindow.OKButton.interactive=!1,this.messageWindow.NOButton.visible=!1,this.messageWindow.NOButton.interactive=!1,this.container.visible=!0},h.prototype.showYesNoButtons=function(){this.messageWindow.OKButton.text.setText(o.getString("YES")),this.messageWindow.OKButton.visible=!0,this.messageWindow.NOButton.interactive=!0,this.messageWindow.NOButton.visible=!0},h.prototype.showOKButton=function(){this.messageWindow.OKButton.text.setText(o.getString("OK")),this.messageWindow.OKButton.visible=!0,this.messageWindow.NOButton.interactive=!1,this.messageWindow.NOButton.visible=!1},h.prototype.addClickArea=function(){var e=this;this.hyperLinkHitArea=new l,this.hyperLinkHitArea.beginFill(255,0);var t=this.messageWindow.message.position;this.hyperLinkHitArea.drawRect(t.x-this.messageWindow.message.width/2,t.y,this.messageWindow.message.width,this.messageWindow.message.height),this.hyperLinkHitArea.interactive=!0,this.hyperLinkHitArea.click=this.hyperLinkHitArea.tap=function(){amplify.publish("FreeRoundMessageURLClicked",{URL:e.freeRoundOperatorMessageURL})},this.messageWindow.addChild(this.hyperLinkHitArea)},h.windowIsSetup=!1,e=h,t.MessageWindow=e}(genericgame=genericgame||{}),function(h){!function(e){var i,o=h.TextureLoader,r=utils.ContainerWrapper,a=utils.SoundWrapper,l=utils.SpriteWrapper,u=utils.TextWrapper;(t=i=i||{})[t.SoundControls=0]="SoundControls",t[t.ResponsibleGaming=1]="ResponsibleGaming",t[t.ReplayButton=2]="ReplayButton",t[t.FullscreenButton=3]="FullscreenButton";var t=(n.prototype.setLocation=function(e,t){this.container.position.x=e,this.container.position.y=t},n.prototype.isOpen=function(){return 1===this.container.alpha},n.prototype.addBackground=function(){},n.prototype.addOnOffControl=function(e){var t=new r,i=o.createSprite(e.bgTextureID,"Menu/Options");t.addChild(i),null!=e.text&&((s=new u(e.text,t)).setLayout("Menu/Options"),t.text=s);var n=this.addOnOffButton({bgTextureID:h.TextureLoader.BUT_Radio_01,bgTexturePressedID:h.TextureLoader.BUT_Radio_01_Pressed,onClickFunction:e.onClickFunctions[0]});n.setLayoutByIndex("Menu/Options",0),n.dimension&&(n.width=n.dimension.width,n.height=n.dimension.height),t.addChild(n);i=this.addOnOffButton({bgTextureID:h.TextureLoader.BUT_Radio_01,bgTexturePressedID:h.TextureLoader.BUT_Radio_01_Pressed,onClickFunction:e.onClickFunctions[1]});i.setLayoutByIndex("Menu/Options",1),i.dimension&&(i.width=i.dimension.width,i.height=i.dimension.height),t.addChild(i);var s=new u("ON",t),e=new u("OFF",t);return s.setLayout("Menu/Options"),e.setLayout("Menu/Options"),t.onButton=n,t.offButton=i,t},n.prototype.addOnOffButton=function(e){var t,i=new r("BUT_Radio_01"),n=o.getTexture(e.bgTextureID),s=new l(n);return i.addChild(s),i.bg=s,void 0!==e.bgTexturePressedID&&(t=o.getTexture(e.bgTexturePressedID)),i.activeTexture=t,i.inactiveTexture=n,i.onClick=e.onClickFunction,i.click=i.tap=function(){a.playSound("Clicker"),i.onClick()},i.interactive=i.handCurser=!0,i},n.prototype.hide=function(){this.container.alpha=0,this.container.interactiveChildren=!1},n.prototype.show=function(){this.container.alpha=1,this.container.interactiveChildren=!0},n.prototype.setupMiscButtons=function(){var e=utils.Layouts.get().getEntry("MiscButtonsArea_Marker","Menu/Options");if(!e)return this.createResponsibleGamingLink_Deprecated(),void("RELAX"===apiMapper.type&&(this.createReplayLink_Deprecated(),this.setupFullscreenButton_Deprecated()));this.miscButtonsArea=new r,this.container.addChild(this.miscButtonsArea),this.miscButtonsArea.resetLayout(e.id,e.section),this.responsibleGamingLink=this.createMiscButton({controlType:i.ResponsibleGaming,section:"BUT_ResponsibleGambling",topic:"OnResponsibleGamingPressed",visible:!1}),this.relaxReplayLink=this.createMiscButton({controlType:i.ReplayButton,section:"BUT_Replay",topic:"OnReplayPressed",visible:"RELAX"==apiMapper.type}),this.fullscreenButton=this.createMiscButton({controlType:i.FullscreenButton,section:"BUT_ToggleFullScreen",topic:"FullscreenButtonPressed",visible:!1}),this.updateMiscButtonPositions()},n.prototype.createMiscButton=function(e){var t=new r;return t.addAll({section:e.section}),t.interactive=!0,t.click=t.tap=function(){a.playSound("Clicker"),amplify.publish(e.topic)},this.miscButtonsArea.addChild(t),this.updateButtonVisibility(t,e.controlType,e.visible),t},n.prototype.updateMiscButtonPositions=function(){var e=this.miscButtonsArea;if(e){var t=0,i=!0,n=e.children[0].width,s=(e.layoutEntry.width-2*n)/4,o=s<0;o&&(s=(e.layoutEntry.width-n)/2);for(var r=0;r<e.children.length;r++){var a=e.children[r];a.visible&&(a.y=t,a.x=i?s:e.layoutEntry.width-a.width-s,o?t+=1.25*a.height:(t+=i?0:1.25*a.height,i=!i))}}},n.prototype.updateButtonVisibility=function(e,t,i){e&&(e.visible=i,this.visibleControls[t]=i,this.updateMiscButtonPositions(),this.checkIfOptionsTabShouldBeVisible())},n.prototype.checkIfOptionsTabShouldBeVisible=function(){var e;!this.isSetup||(e=0<this.visibleControls.reduce(function(e,t){return e+(t?1:0)},0))!==this.isVisible&&(this.isVisible=e,amplify.publish("ShowOptionsTab",{visible:e}))},n.prototype.createResponsibleGamingLink_Deprecated=function(){var e=utils.Layouts.get(),t="BUT_ResponsibleGambling_Marker";e.hasTextEntryWithId("RESPONSIBLEGAMBLING")&&e.getEntry(t,"Menu/Options")&&(t=new r(t,"Menu/Options"),this.container.addChild(t),this.responsibleGamingLink=t,e.addAllToContainer("BUT_ResponsibleGambling",t),t.click=t.tap=function(){a.playSound("Clicker"),amplify.publish("OnResponsibleGamingPressed")},t.interactive=!0,this.updateButtonVisibility(t,i.ResponsibleGaming,!1))},n.prototype.createReplayLink_Deprecated=function(){this.relaxReplayLink=new e.Button({holder:this.container,layoutID:"BUT_Replay",section:"BUT_Replay",clickFunc:function(){a.playSound("Clicker"),amplify.publish("OnReplayPressed")}}),this.updateButtonVisibility(this.relaxReplayLink,i.ReplayButton,!0),this.relaxReplayLink.resetLayout("BUT_Replay_Marker","Menu/Options")},n.prototype.setupFullscreenButton_Deprecated=function(){utils.Layouts.get().getEntry("BUT_ToggleFullScreen_Marker","Menu/Options")&&(this.fullscreenButton=new e.Button({holder:this.container,layoutID:"BUT_ToggleFullScreen",section:"BUT_ToggleFullScreen",clickFunc:function(){a.playSound("Clicker"),amplify.publish("FullscreenButtonPressed")}}),this.fullscreenButton.resetLayout("BUT_ToggleFullScreen_Marker","Menu/Options"),this.updateButtonVisibility(this.fullscreenButton,i.FullscreenButton,!1))},n);function n(e){var t=this;this.isSetup=!1,this.isVisible=!0,this.visibleControls=[],this.container=new r,e.addChild(this.container),this.addBackground(),this.soundsOption=this.addOnOffControl({bgTextureID:o.Panel_02,text:"SOUNDS",fontSize:25,onClickFunctions:[function(){return amplify.publish("OnSoundsOnPressed")},function(){return amplify.publish("OnSoundsOffPressed")}]}),this.updateButtonVisibility(this.soundsOption,i.SoundControls,!0),this.container.addChild(this.soundsOption),this.setupMiscButtons(),amplify.subscribe("ShowSoundControls",function(e){t.updateButtonVisibility(t.soundsOption,i.SoundControls,e.visible)}),amplify.subscribe("OnSoundsOnPressed",function(){t.soundsOption.onButton.bg.texture=t.soundsOption.onButton.activeTexture,t.soundsOption.offButton.bg.texture=t.soundsOption.offButton.inactiveTexture}),amplify.subscribe("OnSoundsOffPressed",function(){t.soundsOption.offButton.bg.texture=t.soundsOption.offButton.activeTexture,t.soundsOption.onButton.bg.texture=t.soundsOption.onButton.inactiveTexture}),amplify.subscribe("ShowResponsibleGamingLink",function(e){t.updateButtonVisibility(t.responsibleGamingLink,i.ResponsibleGaming,e.visible)}),amplify.subscribe("ShowFullscreenButton",function(e){t.updateButtonVisibility(t.fullscreenButton,i.FullscreenButton,e.visible)}),amplify.subscribe("ShowReplayButton",function(e){t.updateButtonVisibility(t.relaxReplayLink,i.ReplayButton,e.visible)}),a.init(),this.isSetup=!0}e.Options=t}(h.views||(h.views={}))}(genericgame=genericgame||{}),function(i){var e,s,t,n;function o(e){var t=this;this.loadPercent=0,this.startColor=16711680,this.endColor=15924992,this.startRed=this.startColor>>16&255,this.startGreen=this.startColor>>8&255,this.startBlue=255&this.startColor,this.endRed=this.endColor>>16&255,this.endGreen=this.endColor>>8&255,this.endBlue=255&this.endColor,this.steps=50,this.container=new PIXI.Container,e.addChild(this.container),this.background=this.setupBackground(),this.container.addChild(this.background),this.logo=this.setupLogo(),this.container.addChild(this.logo),this.loaderBarContainer=new PIXI.Container,this.logo.addChild(this.loaderBarContainer),this.loaderBar=this.setupLoaderBar(),this.loaderBarContainer.addChild(this.loaderBar),this.loaderBarBubbles=this.setupLoaderBarBubbles(),this.loaderBarContainer.addChild(this.loaderBarBubbles),this.container.interactive=!0,amplify.subscribe("UpdateLoader",function(e){t.onUpdate(e)})}e=i.views||(i.views={}),s=utils.GraphicsWrapper,t=utils.GameTimer,o.prototype.bringToTop=function(){stage.setChildIndex(this.container,stage.children.length-1)},o.prototype.onUpdate=function(e){this.loadPercent=100*e.percent,this.updateLoader()},o.prototype.resize=function(e,t){this.resizeBackground(e,t),this.resizeLogo(e,t)},o.prototype.remove=function(){this.stopAnimating(),amplify.unsubscribe("UpdateLoader",this.onUpdate),stage.removeChild(this.container)},o.prototype.setupLogo=function(){var e=this,t=new PIXI.Sprite(i.TextureLoader.get().getTextureImage("images/LoaderLogo.png"));return t.anchor.set(.5,.5),this.container.addChild(t),t.texture.baseTexture.valid?this.startAnimating():t.texture.baseTexture.on("loaded",function(){e.startAnimating()}),t},o.prototype.resizeLogo=function(e,t){this.logo.position.x=e/2,this.logo.position.y=t/2;e/=3,t/=5;this.logo.scale.set(e/300<t/141?e/300:t/141)},o.prototype.updateLoader=function(){this.loaderBar.scale.x=(100-this.loadPercent)/100,this.loaderBarBubbles.position.x=this.loaderBar.position.x-this.loaderBar.width+1},o.prototype.resizeBackground=function(e,t){this.background.width=e,this.background.height=t},o.prototype.setupBackground=function(){var e=new s;return e.clear(),e.beginFill(65536,1),e.drawRect(0,0,100,100),e.endFill(),e},o.prototype.setupLoaderBar=function(){var e=new s;e.lineStyle(2,16777215,0),e.beginFill(0,1),e.drawRect(-384,-6,384,12),e.endFill();var t=new PIXI.Container;return t.addChild(e),t.position.y=134,t.position.x=193,t},o.prototype.startAnimating=function(){var e=this;this.animatorId=t.addFixedAnimator(function(){return e.animateFixed()}),this.rendererId=t.addStageRenderer(function(){return renderer.render(stage)}),amplify.publish("ProgressDisplayAnimationStarted")},o.prototype.stopAnimating=function(){t.removeFixedAnimator(this.animatorId),t.removeStageRenderer(this.rendererId)},o.prototype.animateFixed=function(){this.addBubble(),this.fadeBubbles()},o.prototype.addBubble=function(){for(var e=0;e<2;e++){var t=new s,i=Math.random()*Math.random()*(this.steps>100-this.loadPercent?100-this.loadPercent:this.steps),n=Math.max(.01,Math.random()*(2-i/this.steps*1.5));t.beginFill(this.colours[Math.round(i)],1),t.drawCircle(i,10*Math.random()-5,n),t.endFill(),this.loaderBarBubbles.addChild(t)}for(e=0;e<2;e++)100<this.loaderBarBubbles.children.length&&this.loaderBarBubbles.removeChildAt(0)},o.prototype.setupLoaderBarBubbles=function(){var e=new PIXI.Container;e.position.y=this.loaderBar.position.y,e.position.x=this.loaderBar.position.x-this.loaderBar.width,e.alpha=.5,this.colours=[];for(var t=0;t<this.steps;t++){var i=((this.steps-1-t)*this.startRed+t*this.endRed)/(this.steps-1),n=((this.steps-1-t)*this.startGreen+t*this.endGreen)/(this.steps-1),s=((this.steps-1-t)*this.startBlue+t*this.endBlue)/(this.steps-1);this.colours.push(i<<16|n<<8|s)}return e},o.prototype.fadeBubbles=function(){for(var e=0;e<this.loaderBarBubbles.children.length;e++){var t=this.loaderBarBubbles.getChildAt(e);0<t.alpha?t.alpha-=.03:t.alpha=0}},n=o,e.ProgressDisplay=n}(genericgame=genericgame||{}),function(e){var t,i;function n(e,t){this.sprite=new i(e),this.container=t,this.container.addChild(this.sprite)}t=e.views||(e.views={}),i=utils.SpriteWrapper,n.prototype.remove=function(){this.container.removeChild(this.sprite)},n.prototype.getWidth=function(){return this.sprite.width},n.prototype.getHeight=function(){return this.sprite.height},n.prototype.getSprite=function(){return this.sprite},n.prototype.positionY=function(e){this.sprite.position.y=e},n.prototype.positionX=function(e){this.sprite.position.x=e},n.prototype.setVisible=function(e){this.sprite.visible=e},e=n,t.Symbol=e}(genericgame=genericgame||{}),function(e){!function(e){var t,i=utils.Currency,n=utils.TranslationManager;(s=t=e.UIState||(e.UIState={}))[s.Normal=0]="Normal",s[s.FreeRounds=1]="FreeRounds",s[s.FreeSpins=2]="FreeSpins";var s=(o.prototype.setupBaseSignals=function(){var i=this;amplify.subscribe("UpdateUISignal",function(e){i.onSetStake(e.totalStake),i.onSetWin(e.win),i.onSetBalance(e.balance)}),amplify.subscribe("SetTalkbackSignal",function(e){var t;null!==(t=i._fields)&&void 0!==t&&t.talkback.setText(e.text)}),amplify.subscribe("UpdateAutoPlaysSignal",function(e){var t;isNaN(e.numAutoPlays)||null!==(t=i._fields)&&void 0!==t&&t.stopButtonLabel.setText(""+e.numAutoPlays)})},o.prototype.registerTextFields=function(e){this._fields=e},o.prototype.onStateChange=function(e){this._state=e,this.getIsInIgtFreeRounds()&&this.setBalanceText(this.getIgtFreeRoundsBalanceText())},o.prototype.onSetStake=function(e){this.setStakeText(i.format(e),i.format(e),this.getFreeRoundStakeAmountText(e))},o.prototype.setStakeText=function(e,t,i){var n;null!==(n=this._fields)&&void 0!==n&&n.stake.setText(e),null!==(e=this._fields)&&void 0!==e&&e.freeSpinStake.setText(t),null!==(t=this._fields)&&void 0!==t&&t.freeRoundStake.setText(i)},o.prototype.updateBalance=function(e,t){this.onSetBalance(e,t)},o.prototype.onSetBalance=function(e,t){this.getIsInIgtFreeRounds()?this.setBalanceText(this.getIgtFreeRoundsBalanceText()):!t&&this.getShouldOnlyUseBalanceFromAPI()||(this.setBalanceText(n.getString("BALANCE")+": "+i.format(e)),amplify.publish("UpdatedBalance",{amount:e}))},o.prototype.setBalanceText=function(e){var t;null!==(t=this._fields)&&void 0!==t&&t.balance.setText(e)},o.prototype.updateWin=function(e){this.onSetWin(e)},o.prototype.onSetWin=function(e){this.setWinText(n.getString("WIN")+": "+i.format(e)),amplify.publish("UpdatedWin",{amount:e})},o.prototype.setWinText=function(e){var t;null!==(t=this._fields)&&void 0!==t&&t.win.setText(e)},o.prototype.updateFreeSpins=function(e,t){this.setFreeSpinsText(""+e,""+t)},o.prototype.setFreeSpinsText=function(e,t){var i;null!==(i=this._fields)&&void 0!==i&&i.freeSpinsRemaining.setText(e),null!==(e=this._fields)&&void 0!==e&&e.freeSpinsPlayed.setText(t)},o.prototype.updateFreeSpinWin=function(e){this.setFreeSpinWinText(i.format(e))},o.prototype.setFreeSpinWinText=function(e){var t;null!==(t=this._fields)&&void 0!==t&&t.freeSpinWin.setText(e)},o.prototype.updateFreeRounds=function(e,t){this.setFreeRoundsText(""+e,""+t)},o.prototype.setFreeRoundsText=function(e,t){var i;null!==(i=this._fields)&&void 0!==i&&i.freeRoundsRemaining.setText(e),null!==(e=this._fields)&&void 0!==e&&e.freeRoundsPlayed.setText(t)},o.prototype.updateFreeRoundWin=function(e){this.setFreeRoundWinText(i.format(e))},o.prototype.setFreeRoundWinText=function(e){var t;null!==(t=this._fields)&&void 0!==t&&t.freeRoundWin.setText(e)},o.prototype.setupBalanceDisplayInteraction=function(e){"MGS"==apiMapper.type&&(e.interactive=!0,e.mouseover=function(e){amplify.publish("BalanceMouseOver",{pos:e.data.global})},e.mouseout=function(e){amplify.publish("BalanceMouseOut",{pos:e.data.global})})},o.prototype.getFreeRoundTitleText=function(){return("MGS"==apiMapper.type?n.getString("FREE_GAMES"):n.getString("FREE_ROUND_TITLE")).toUpperCase()},o.prototype.getFreeRoundStakeAmountText=function(e){return"MGS"==apiMapper.type?n.getString("FREE"):i.format(e)},o.prototype.isDiscardFreeGamesButtonApplicable=function(){return"MGS"==apiMapper.type},o.prototype.getIsInIgtFreeRounds=function(){return"IGT"===apiMapper.type&&apiMapper.getIsInIgtFreeRounds()},o.prototype.getIgtFreeRoundsBalanceText=function(){if(this._state===t.FreeSpins)return n.getString("FREE_SPINS");var e=apiMapper.getIgtFreeRoundsRemaining();return n.getString("FREE_SPINS")+": "+e},o.prototype.getShouldOnlyUseBalanceFromAPI=function(){return"IGT"===apiMapper.type},o.prototype.getBottomBarArea=function(){return null},o);function o(){this.setupBaseSignals()}e.UI=s}(e.views||(e.views={}))}(genericgame=genericgame||{}),function(e){var r,n,l,u,h,o,a;function p(){var t=this;this.type="RELAX",this.ajaxQueue=new l;var e=Date.now();genericgame.services.ErrorReportingService.init("RELAX",genericgame.GenericGame.ERROR_REPORTING_CONFIG),genericgame.GenericGame.GAME_CONNECT_ENABLED=!0,null!==(a=this.getFEIM())&&void 0!==a&&a.send.gameLoadStarted();var i=this.getUrlParam("partnerid"),n=this.getUrlParam("lang"),s=this.toNormalisedLocale(n)||"en_us",o=this.getUrlParam("rcshowresult"),r=this.getUrlParam("fullscreen"),a=this.getUrlParam("hidehome");this.config={g:p.gameRef,rawLang:n,lang:s,internalLanguageCode:this.getInternalLanguageCode(s),ticket:this.getUrlParam("ticket"),partnerid:null!=i?+i:1,clientid:this.getUrlParam("clientid"),currency:this.getUrlParam("currency"),homeurl:this.getUrlParam("homeurl"),hidehome:"true"===a||"1"===a,rcinterval:+this.getUrlParam("rcinterval"),rcelapsed:+this.getUrlParam("rcelapsed"),rchistoryurl:this.getUrlParam("rchistoryurl"),rcshowresult:"true"===o||"1"===o,rciframeurl:this.getUrlParam("rciframeurl"),moneymode:this.getUrlParam("moneymode"),fullscreenDisabled:"false"===r||"0"===r,channel:null!==(r=this.getUrlParam("channel"))&&void 0!==r?r:"mobile",jurisdiction:this.getUrlParam("jurisdiction"),configurl:this.getUrlParam("configurl"),startTime:e};e=this.getFEIM();e&&e.configure({handleRgPostMessageAPI:!0,handleFeaturePause:!1,showErrorMessageCallback:function(e){return t.feim_showErrorMessageCallback(e)}}),this.loadRemoteConfig_Stage1(),btg$(window).on("resize",function(){t.handleResize()}),!this.config.fullscreenDisabled&&u.fullscreenEnabled()&&h.onAndroid()&&this.setupFullscreenGestureListener(),this.setupSignals()}r=e.apimappers||(e.apimappers={}),n=genericgame.GenericGame,l=utils.AjaxQueue,u=utils.Device,h=utils.DeviceInfo,o=utils.GameTimer,a=utils.STR,p.prototype.setupSignals=function(){var s=this;amplify.subscribe("UpdateLoader",function(e){var t;null!==(t=s.getFEIM())&&void 0!==t&&t.send.gameLoadProgress(Math.round(100*e.percent))}),amplify.subscribe("UpdatedBalance",function(e){var t;s.lastBalanceValue!=e.amount&&(s.lastBalanceValue=e.amount,null!==(t=s.getFEIM())&&void 0!==t&&t.send.balanceUpdate(s.toServerCurrencyUnits(e.amount)))}),amplify.subscribe("UpdatedWin",function(e){var t;s.lastWinValue!=e.amount&&(s.lastWinValue=e.amount,null!==(t=s.getFEIM())&&void 0!==t&&t.send.winUpdate({win:s.toServerCurrencyUnits(e.amount)}))}),amplify.subscribe("StakeChanged",function(e){var t;s.lastStakeValue!=e.stake&&(s.lastStakeValue=e.stake,null!==(t=s.getFEIM())&&void 0!==t&&t.send.betUpdate(s.toServerCurrencyUnits(e.stake)))}),amplify.subscribe("GameRoundStarted",function(e){var t;s.gameInProgress||(s.gameInProgress=!0,t=s.toServerCurrencyUnits(e.balanceAfterBet),null!==(e=s.getFEIM())&&void 0!==e&&e.send.roundStarted({balance:t}))}),amplify.subscribe("GameAnimationComplete",function(){s.getModel().autoPlaying||amplify.publish("SetUIEnabled",{enabled:!0})}),amplify.subscribe("GameRoundComplete",function(e){var t,i;s.gameInProgress&&(s.gameInProgress=!1,t=s.toServerCurrencyUnits(e.balanceAfterRound),(i=s.getFEIM())&&(e=s.toServerCurrencyUnits(null!==(e=s.lastWinValue)&&void 0!==e?e:0),i.send.roundFinished({}),i.send.winUpdate({win:e}),i.send.balanceUpdate(t)),s.balanceUpdatePending&&s.handleAPIBalanceUpdateRequest()),s.feim_freezeInProgress&&(s.feim_freezeInProgress=!1,s.gamePaused=!0,amplify.publish("SetUIEnabled",{enabled:!1}))}),amplify.subscribe("APIHandleError",function(e){var t,i,n=s.getModel();n._roundReqNum<=1&&(n.win=0,null!==(t=genericgame.GenericGame.get().getUI())&&void 0!==t&&t.updateWin(0)),(null===(t=e.relaxErrorResponse)||void 0===t?void 0:t.errorCode)===r.RelaxErrorCode.Error538_JackpotWon?(i={response:e.relaxErrorResponse,type:utils.STR.PROGRESSIVE_UPDATE},amplify.publish("ResponseReceived",i)):null!==(i=null===(i=s.getFEIM())||void 0===i?void 0:i.getConfiguration())&&void 0!==i&&i.operatorHandlesErrors?s.feim_showError(e):(null===(i=e.relaxErrorResponse)||void 0===i?void 0:i.errorCode)===r.RelaxErrorCode.Error559_CustomError?(i=s.getShowErrorMessageDataFor559(e.relaxErrorResponse,e.error.critical),amplify.publish("ShowErrorMessageSignal",i)):amplify.publish("ShowErrorMessageSignal",e.error),s.getModel().autoPlaying&&amplify.publish("StopAutoSpinsSignal"),e.error.critical||(e.relaxErrorResponse&&e.relaxErrorResponse.stats?(e=s.toGameCurrencyUnits(e.relaxErrorResponse.stats.b),amplify.publish("UpdateBalanceFromAPI",{value:e})):amplify.publish("UpdateBalanceFromAPI",{value:s.getModel().balance}),amplify.publish("RecoverFromNonCriticalError"))}),amplify.subscribe("ErrorDisplayedSignal",function(e){var t,i;e.errorID==r.RelaxErrorCode.Error520_SessionMovedToOtherBrowser?(amplify.publish("SetUIEnabled",{enabled:!1}),s.homeButtonPressed()):e.errorID==r.RelaxErrorCode.Error506_InsufficientFunds?null!==(t=s.getFEIM())&&void 0!==t&&t.send.openQuickDeposit():e.critical&&(amplify.publish("SetUIEnabled",{enabled:!1}),s.getFEIM()||"home"==(null===(i=s.remoteConfig)||void 0===i?void 0:i.onCriticalError)?s.homeButtonPressed():window.location.reload()),null!==(i=s.feim_errorDisplayedResolveCb)&&void 0!==i&&i.call(s),s.feim_errorDisplayedResolveCb=null}),amplify.subscribe("AcceptedFreeRoundsSignal",function(e){e&&e.optionSelected&&(s.getModel().freeRoundOptionSelected=e.optionSelected,amplify.publish("SendRequest",{requestType:a.FRCONFIRM}))}),amplify.subscribe("RealityCheckShowHistory",function(){var e=s.getFEIM();e?e.send.showHistory():window.open(s.config.rchistoryurl,"_blank")}),amplify.subscribe("RealityCheckExitGame",function(){s.config.homeurl?s.homeButtonPressed():window.close()}),amplify.subscribe("RealityCheckReset",function(e){s.resetRealityCheck(e.resetLoss,e.resetDuration)}),amplify.subscribe("OnResumeSignal",function(){s.pingCheck()}),amplify.subscribe("OnReplayPressed",function(){s.replayPressed()}),amplify.subscribe("FullscreenButtonPressed",function(){s.requestFullscreen(!0)}),amplify.subscribe("OnSoundsOnPressed",function(){s.soundOn=!0,s.reportSettings()}),amplify.subscribe("OnSoundsOffPressed",function(){s.soundOn=!1,s.reportSettings()}),amplify.subscribe("LoadTranslationsFinished",function(){s.translationLoadFinished=!0,s.pendingError&&s.handleErrorIfReady(s.pendingError)}),amplify.subscribe("StartAutoSpinsSignal",function(){var e;s.autoPlaying=!0,null!==(e=s.getFEIM())&&void 0!==e&&e.send.autoPlayStarted()}),amplify.subscribe("StopAutoSpinsSignal",function(){var e;s.autoPlaying&&(s.autoPlaying=!1,null!==(e=s.getFEIM())&&void 0!==e&&e.send.autoPlayFinished())})},p.prototype.getUrlParam=function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},p.prototype.checkState=function(){},p.prototype.getLanguageCode=function(){return this.config.internalLanguageCode},p.prototype.tryGetTranslation=function(t,e,i){try{return utils.TranslationManager.getString(t,e)}catch(e){return null!=i?i:t}},p.prototype.shouldInitBeforeIntro=function(){return!0},p.prototype.sendGameReady=function(){this.gameReadyHasBeenCalled=!0,this.checkFeatureDropStatus(),this.pendingError?this.handleErrorIfReady(this.pendingError):this.checkStartInitProcessing()},p.prototype.checkFeatureDropStatus=function(){-1<genericgame.GenericGame.gameName.indexOf("_NoFeatureDrop")&&amplify.publish("RemoveFeatureDrop")},p.prototype.sendInitRequest=function(){amplify.publish("SendRequest",{requestType:a.INIT})},p.prototype.checkStartInitProcessing=function(){var e=this;this.gameReadyHasBeenCalled&&this.loginResponse&&!this.initProcessStarted&&(this.initProcessStarted=!0,o.setImmediate(function(){e.startInitProcessing()}))},p.prototype.startInitProcessing=function(){var e,t,i;this.pendingError?this.publishAPIHandleError(this.pendingError):this.criticalErrorPublished||(this.remoteConfig.autoplayDisable?amplify.publish("HideAutoPlay"):null!==(i=this.remoteConfig.autoplayRounds)&&void 0!==i&&i.length&&(e=Math.max.apply(Math,this.remoteConfig.autoplayRounds),amplify.publish("SetMaxAutoPlay",{maxAutoplay:e})),this.remoteConfig.hideGameRules&&amplify.publish("HideHelp"),(this.remoteConfig.hideGameRules||this.remoteConfig.hideInfoButton)&&amplify.publish("HideInfoButton"),this.remoteConfig.disableShowHistory&&amplify.publish("ShowReplayButton",{visible:!1}),this.remoteConfig.disableBuyFeature&&amplify.publish("FeatureBuyDisabled"),this.config.hidehome&&amplify.publish("ShowHomeButton",{visible:!1}),this.remoteConfig.disableAnalytics&&"FI"===this.config.jurisdiction&&amplify.publish("SetAnalyticsState",{enabled:!1}),(t=+this.remoteConfig.minSpinTime||0)&&amplify.publish("APIRoundDurationRequirement",{minimum:t}),!this.config.fullscreenDisabled&&u.fullscreenEnabled()&&amplify.publish("ShowFullscreenButton",{visible:!0}),e=(i=this.loginResponse).stats,(t=this.getFEIM())&&(t.configure({loginResponse:i}),t.send.gameLoadProgress(100),t.send.gameLoadCompleted()),null!=e&&e.currency&&this.setupCurrencyFormatter(this.config.lang,e.currency),i={response:i,type:a.INIT},amplify.publish("ResponseReceived",i))},p.prototype.assertConfigPresent=function(e,t){if(t)return!0;e="CONFIG_NOT_FOUND-"+e;return this.handleErrorIfReady({errorId:e,errorMsgTextId:"MISC_ERROR",errorMsgTextSubs:[e]}),!1},p.prototype.loadRemoteConfig_Stage1=function(){var t=this,i=this.config.configurl;i?this.loadRemoteConfig_Stage2(i):btg$.ajax({url:location.protocol+"//"+location.host+"/casino/cdnconfig.json",dataType:"json"}).done(function(e){(i=null==e?void 0:e.clientconfigurl)?t.loadRemoteConfig_Stage2(i):t.loadRemoteConfig_Failed("1A")}).fail(function(){t.loadRemoteConfig_Failed("1B")})},p.prototype.loadRemoteConfig_Stage2=function(e){var t=this,i={gameref:this.config.g,partnerid:this.config.partnerid,channel:this.config.channel,versionstring:genericgame.GenericGame.VERSION,clientversion:genericgame.GenericGame.VERSION};this.config.jurisdiction&&(i.jurisdiction=this.config.jurisdiction),btg$.ajax({type:"POST",url:e,dataType:"json",data:JSON.stringify(i),contentType:"application/json; charset=utf-8"}).done(function(e){e?e.errorCode==r.RelaxErrorCode.Error524_GameDisabled?t.handleErrorIfReady({errorId:r.RelaxErrorCode.Error524_GameDisabled,errorMsgTextId:"RG_ERROR_524"}):t.loadRemoteConfig_Stage3(e):t.loadRemoteConfig_Failed("2A")}).fail(function(){t.loadRemoteConfig_Failed("2B")})},p.prototype.loadRemoteConfig_Stage3=function(e){var t,i=JSON.parse(JSON.stringify(e));i.immediatePayouts=null!==(t=i.immediatePayouts)&&void 0!==t&&t,i.pingIntervalSeconds=null!==(t=i.pingIntervalSeconds)&&void 0!==t?t:180,i.customCurrencyFormats=null!==(t=i.customCurrencyFormats)&&void 0!==t?t:[],i.hideGameRules=null!==(t=i.hideGameRules)&&void 0!==t&&t,i.hideInfoButton=null!==(t=i.hideInfoButton)&&void 0!==t&&t,i.disableShowHistory=null!==(t=i.disableShowHistory)&&void 0!==t&&t,i.disableAnalytics=null!==(t=i.disableAnalytics)&&void 0!==t&&t,"home"!=i.onCriticalError&&"reload"!=i.onCriticalError&&(i.onCriticalError="home"),this.remoteConfig=i,this.feim_SetupApi(e);e="fun"!=(this.config.moneymode||"real")?this.config.ticket:null;e?this.sendTokenRequest(e,this.remoteConfig.tokenApi):this.sendInitRequest()},p.prototype.loadRemoteConfig_Failed=function(e){e="REMOTE_CONFIG_LOAD_FAIL_"+e;this.handleErrorIfReady({errorId:e,errorMsgTextId:"MISC_ERROR",errorMsgTextSubs:[e]})},p.prototype.getModel=function(){return genericgame.GenericGame.getModel()},p.prototype.reportSettings=function(){var e;null!==(e=this.getFEIM())&&void 0!==e&&e.send.updateSettings({sounds:this.soundOn})},p.prototype.handleAPIBalanceUpdateRequest=function(){var t=this;this.gameInProgress?this.balanceUpdatePending=!0:(this.balanceUpdatePending=!1,this.queueRequest({url:this.remoteConfig.gameServerApi+"/getbalance",data:{sid:this.sid},onSuccess:function(e){o.setImmediate(function(){t.gameInProgress?t.balanceUpdatePending=!0:e.b&&amplify.publish("UpdateBalanceFromAPI",{value:t.toGameCurrencyUnits(e.b)})})},onError:null,nonCritical:!0}))},p.prototype.handleSetSound=function(e){e?amplify.publish("OnSoundsOnPressed"):amplify.publish("OnSoundsOffPressed")},p.prototype.getFEIM=function(){return"undefined"==typeof FEIM?null:FEIM},p.prototype.feim_SetupApi=function(e){var t=this,i=this.getFEIM();i&&(i.configure({clientConfig:e}),i.on.refreshBalance(function(){return t.feim_onRefreshBalance()}),i.on.pauseAutoPlay(function(){return t.feim_onPauseAutoPlay()}),i.on.freeze(function(){return t.feim_onFreeze()}),i.on.unfreeze(function(){return t.feim_onUnfreeze()}),i.on.updateSettings(function(e){return t.feim_onUpdateSettings(e)}),i.on.toggleGameHelp(function(){return t.feim_onToggleGameHelp()}),i.on.togglePaytable(function(){return t.feim_onTogglePaytable()}),this.reportSettings())},p.prototype.feim_showError=function(e){var t=this,i=e.relaxErrorResponse||{errorCode:isNaN(+e.error.errorID)?void 0:+e.error.errorID,errorMessage:e.error.errorMsg,message:e.error.errorMsg};this.feim_showErrorData=e,this.getFEIM().showError(i).finally(function(){t.feim_showErrorData=null})},p.prototype.feim_showErrorMessageCallback=function(e){var t,i,n=this,s=new Promise(function(e,t){n.feim_errorDisplayedResolveCb=e}),o=null===(i=null===(o=null===(i=this.feim_showErrorData)||void 0===i?void 0:i.error)||void 0===o?void 0:o.critical)||void 0===i||i;return e.errorCode==r.RelaxErrorCode.Error559_CustomError?(t=this.getShowErrorMessageDataFor559(e,o),amplify.publish("ShowErrorMessageSignal",t)):(i=void 0,i=null!==(t=this.feim_showErrorData)&&void 0!==t&&t.error&&!e.errorCode?this.feim_showErrorData.error:this.parseErrorObject(e,o),amplify.publish("ShowErrorMessageSignal",i)),this.getModel().autoPlaying&&amplify.publish("StopAutoSpinsSignal"),s},p.prototype.feim_onRefreshBalance=function(){this.handleAPIBalanceUpdateRequest()},p.prototype.feim_onPauseAutoPlay=function(){this.getModel().autoPlaying&&amplify.publish("StopAutoSpinsSignal")},p.prototype.feim_onFreeze=function(){this.feim_freezeInProgress=!0,this.getModel().autoPlaying&&amplify.publish("PauseAutoPlay",{paused:!0}),this.gameInProgress||(amplify.publish("SetUIEnabled",{enabled:!1}),this.feim_freezeInProgress=!1,this.gamePaused=!0)},p.prototype.feim_onUnfreeze=function(){this.feim_freezeInProgress=!1;var e=this.getModel();this.gamePaused?(this.gamePaused=!1,amplify.publish("APIGameResumed"),e.autoPlaying||amplify.publish("SetUIEnabled",{enabled:!0})):e.autoPlaying&&amplify.publish("PauseAutoPlay",{paused:!1})},p.prototype.feim_onUpdateSettings=function(e){void 0!==e.sounds&&this.handleSetSound(e.sounds)},p.prototype.feim_onTogglePaytable=function(e){this.gameInProgress||(e=null!==(e=null==e?void 0:e.type)&&void 0!==e?e:"toggle",amplify.publish("OnPaysPressed",{action:e}))},p.prototype.feim_onToggleGameHelp=function(e){this.gameInProgress||(e=null!==(e=null==e?void 0:e.type)&&void 0!==e?e:"toggle",amplify.publish("OnHelpPressed",{action:e}))},p.prototype.sendTokenRequest=function(e,t){var i=this;this.assertConfigPresent("tokenApi",!!t)&&(e={partnerid:this.config.partnerid,ticket:e,gameref:this.config.g,clientversion:genericgame.GenericGame.VERSION},this.config.channel&&(e.channel=this.config.channel),this.config.clientid&&(e.clientid=this.config.clientid),this.config.currency&&(e.currency=this.config.currency),this.queueRequest({url:t,data:e,onSending:function(){return i.tokenRequestSentAt=Date.now()},onSuccess:function(e){"error"==e.status?i.handleErrorResponseIfReady(e):(i.serverOffsetMilliseconds=1e3*e.response.servertime-i.tokenRequestSentAt,i.tokenData=e.response,i.sendInitRequest())},onError:function(){return i.handleNetworkError()}}))},p.prototype.getServerTimeOffset=function(){return this.serverOffsetMilliseconds},p.prototype.usingExternalLoader=function(){return!1},p.prototype.usingDeviceWidth=function(){return!1},p.prototype.handleInsufficientFunds=function(){return!0},p.prototype.sendGameCompleteWhenAutoPlaying=function(){return!0},p.prototype.showRecoveryInfo=function(){return!0},p.prototype.showInGameRecoveryMessage=function(){return!0},p.prototype.hasPlayPerReaction=function(){return!1},p.prototype.getTranslationURL=function(){return genericgame.GenericGame.path+"translations/"+genericgame.GenericGame.gameName+"-translations-"+this.config.internalLanguageCode+".xml"},p.prototype.getTranslationVars=function(){return{node:"textvalue",key:"id",attrib:"text"}},p.prototype.isRgActionString=function(e){return e&&0===e.indexOf("action:")},p.prototype.homeButtonPressed=function(){var e;null!==(e=this.getFEIM())&&void 0!==e&&e.send.exitGame()||(this.config&&this.config.homeurl?(e=this.getFEIM())?e.send.navigate(this.config.homeurl):this.isRgActionString(this.config.homeurl)?window.history.back():window.location.href=this.config.homeurl:window.history.back())},p.prototype.replayPressed=function(){var e=["replaytoken="+(this.tokenData?this.tokenData.replaytoken:null),"gameid="+this.config.g,"lang="+this.config.lang],e=this.remoteConfig.replayApi+"?"+e.join("&");window.open(e,"_blank")},p.prototype.getInfoButtonHelpUrl=function(){var e=genericgame.GenericGame,t=this.config.jurisdiction,i=this.getLanguageCode();return"DE"===t&&e.HAS_GERMAN_MARKET_HELP_FILES&&-1!==["EN","DE"].indexOf(i)?this.getHelpUrlForFlavour("relax_germany",i):null!==(e=this.remoteConfig)&&void 0!==e&&e.autoplayDisable?this.getHelpUrlForFlavour("relax_noauto",i):this.getHelpUrlForFlavour("relax",i)},p.prototype.getHelpUrlForFlavour=function(e,t){var i=genericgame.GenericGame;return i.path+"help/"+e+"/"+i.gameName+"-Help-"+t+".html"},p.prototype.handleResize=function(){var e=this;this.doResizeKludges(),amplify.publish("WindowResized"),(h.onIPhone()||h.onIPad())&&(this.pendingResize&&o.clearTimeout(this.pendingResize),this.pendingResize=o.setTimeout(function(){e.doResizeKludges(),amplify.publish("WindowResized"),e.pendingResize=null},500))},p.prototype.doResizeKludges=function(){var e;h.onIPhone()&&h.onIOSBrowser()&&null!==(e=btg$("#main").get(0))&&void 0!==e&&e.scrollIntoView()},p.prototype.getWindowSize=function(){return h.getWindowSize()},p.prototype.isGamePauseRequested=function(){return this.feim_freezeInProgress||this.gamePaused},p.prototype.sendRequest=function(e){var t,i,n,s=this;this.assertConfigPresent("gameServerApi",!(null===(n=this.remoteConfig)||void 0===n||!n.gameServerApi))&&(t=e.request,n="",(i=e.type)==a.INIT?(t.g=this.config.g,t.includeConfig=!1,t.partnerid=this.config.partnerid,t.clientversion=genericgame.GenericGame.VERSION,"fun"!=this.config.moneymode||this.config.currency?this.tokenData?(n="/rmlogin/",t.token=this.tokenData.token,t.userid=this.tokenData.userid,null!=(e=this.remoteConfig.immediatePayouts)&&(t.immediatePayouts="true"===e||!0===e),this.config.clientid&&(t.clientid=this.config.clientid)):(n="/demormlogin/",t.currency=this.config.currency,this.config.jurisdiction&&(t.jurisdiction=this.config.jurisdiction)):(n="/funmoneylogin/",this.config.jurisdiction&&(t.jurisdiction=this.config.jurisdiction)),this.config.channel&&(t.channel=this.config.channel)):i==a.FRREJECTED||i==a.FRDEFER?(n="/freespins/",t.sid=this.sid):i==a.PROGRESSIVE_UPDATE?(n="/getjackpot",t.sid=this.sid,t.g=this.config.g):(n="/play",t.g=this.config.g,t.sid=this.sid),amplify.publish("SendRequestDataCreated",{request:t,requestType:i,api:n}),this.queueRequest({url:this.remoteConfig.gameServerApi+n,data:t,onSuccess:function(e){var t;if(i==a.INIT){if(null!=e.errorCode)return s.handleErrorResponseIfReady(e);s.loginResponse=e,s.sid=s.loginResponse.sid,0<s.remoteConfig.pingIntervalSeconds&&o.setInterval(function(){return s.pingCheck()},6e4),null!==(t=s.loginResponse.stats)&&void 0!==t&&t.realityCheck&&(s.config.rcinterval||s.config.rcelapsed)&&s.setRealityCheckLimits(s.sid,s.config.rcinterval,s.config.rcelapsed),s.checkStartInitProcessing()}else{if(null!=e.errorCode)return s.handleErrorResponse(e,i);amplify.publish("ResponseReceived",{response:e,type:i})}},onError:function(){return s.handleNetworkError()}}),this.lastRequestTimestamp=Date.now())},p.prototype.getInitialRealityCheckVars=function(){return{elapsedSeconds:this.config.rcelapsed,intervalSeconds:this.config.rcinterval,startTime:this.config.startTime}},p.prototype.isOperatorResponsibleForRealityCheck=function(){return!!this.config.rciframeurl},p.prototype.getRealityCheckLatestSessionResult=function(t,i){var n=this;this.config.rcshowresult?this.queueRequest({url:this.remoteConfig.gameServerApi+"/getsessionresult",data:{sid:this.sid},onSuccess:function(e){t.sessionBetSum=n.toGameCurrencyUnits(e.betamount),t.sessionWinSum=n.toGameCurrencyUnits(e.winamount),t.sessionResult=t.sessionWinSum-t.sessionBetSum,i()},onError:function(){return n.handleNetworkError()}}):i()},p.prototype.pingCheck=function(){var e;null!==(e=this.remoteConfig)&&void 0!==e&&e.pingIntervalSeconds&&this.lastRequestTimestamp&&this.sid&&Date.now()-this.lastRequestTimestamp>1e3*(null===(e=this.remoteConfig)||void 0===e?void 0:e.pingIntervalSeconds)&&(this.queueRequest({url:this.remoteConfig.gameServerApi+"/ping/",data:{sid:this.sid},onSuccess:null,onError:null,nonCritical:!0}),this.lastRequestTimestamp=Date.now())},p.prototype.setRealityCheckLimits=function(e,t,i){e={sid:e};t&&(e.sessionLimitSeconds=t),i&&(e.sessionElapsedSeconds=i),this.queueRequest({url:this.remoteConfig.gameServerApi+"/setrealitychecklimits/",data:e,onSuccess:null,onError:null})},p.prototype.resetRealityCheck=function(e,t){this.queueRequest({url:this.remoteConfig.gameServerApi+"/resetrealitycheck",data:{sid:this.sid,loss:e,sessionLength:t},onSuccess:null,onError:null});var i=this.getModel().realityCheck;i&&(i.serverLimitReached=!1,t&&(i.minutesSinceReset=0,i.minutesSinceResetTimestamp=Date.now()),e&&(i.resultSinceReset=0)),amplify.publish("RealityCheckResetComplete")},p.prototype.setRestoreState=function(e,t){this.queueRequest({url:this.remoteConfig.gameServerApi+"/setrestorestate/",data:{sid:this.sid,g:this.config.g,restoreState:e,restoreVersion:t},onSuccess:null,onError:null,nonCritical:!0})},p.prototype.setGameFinished=function(e){this.queueRequest({url:this.remoteConfig.gameServerApi+"/gamefinished/",data:{sid:this.sid,g:this.config.g,restoreVersion:e},onSuccess:null,onError:null,nonCritical:!0})},p.prototype.queueRequest=function(e){this.ajaxQueue.queueRequest({ajaxArgs:{type:"POST",url:e.url,data:JSON.stringify(e.data),contentType:"application/json; charset=utf-8",dataType:"json"},onSending:e.onSending,onSuccess:e.onSuccess,onError:e.onError,nonCritical:e.nonCritical})},p.prototype.isReadyToHandleErrors=function(){var e;return!!this.translationLoadFinished&&((null===(e=this.getFEIM())||void 0===e?void 0:e.getConfiguration().operatorHandlesErrors)||this.gameReadyHasBeenCalled)},p.prototype.handleErrorResponseIfReady=function(e){this.handleErrorIfReady({relaxErrorResponse:e,errorId:null,errorMsgTextId:null})},p.prototype.handleErrorIfReady=function(e){e=this.pendingError||e;this.isReadyToHandleErrors()?this.publishAPIHandleError(e):this.pendingError=e},p.prototype.publishAPIHandleError=function(e){var t=this;this.criticalErrorPublished||(this.criticalErrorPublished=!0,o.setImmediate(function(){e.relaxErrorResponse?n.publishAPIHandleError({error:t.parseErrorObject(e.relaxErrorResponse,!0),relaxErrorResponse:e.relaxErrorResponse}):n.publishAPIHandleError({error:{errorID:""+e.errorId,errorMsg:t.tryGetTranslation(e.errorMsgTextId,e.errorMsgTextSubs,""+e.errorId),critical:!0,errorTitle:t.tryGetTranslation("ERROR_TITLE",null,"ERROR")}})}))},p.prototype.handleNetworkError=function(){this.handleErrorIfReady({errorId:"AJAX_ERROR",errorMsgTextId:"ERROR_DEFAULT"})},p.prototype.handleErrorResponse=function(e,t){var i=this.getModel(),i=t!==a.PLAY||1<i._roundReqNum;n.publishAPIHandleError({error:this.parseErrorObject(e,i),relaxErrorResponse:e})},p.prototype.parseErrorObject=function(e,t){t=t||p.getIsCriticalServerErrorCode(e.errorCode);return{errorID:""+e.errorCode,errorMsg:this.getServerErrorMessage(e),errorTitle:this.tryGetTranslation(t?"ERROR_TITLE":"INFORMATION_TITLE",null,"ERROR"),critical:t}},p.prototype.getServerErrorMessage=function(e){var t=e.errorCode;if(t==r.RelaxErrorCode.Error506_InsufficientFunds)return this.tryGetTranslation("ERROR_INSUFFICIENTFUNDS");if(t==r.RelaxErrorCode.Error559_CustomError)return null===(i=e.errorDetails)||void 0===i?void 0:i.message;var e="RG_ERROR_"+(p.relaxErrorMap[t]||t),i=this.tryGetTranslation(e);return i!==e?i:this.tryGetTranslation("MISC_ERROR",[""+t],""+t)},p.getIsCriticalServerErrorCode=function(e){return-1===[r.RelaxErrorCode.Error506_InsufficientFunds,r.RelaxErrorCode.Error559_CustomError,r.RelaxErrorCode.Error538_JackpotWon,r.RelaxErrorCode.Error554_BlockedDaily,r.RelaxErrorCode.Error555_BlockedWeekly,r.RelaxErrorCode.Error556_BlockedMonthly].indexOf(e)},p.prototype.getShowErrorMessageDataFor559=function(e,t){var i=e.errorDetails;return{errorTitle:i.title,errorMsg:i.message,buttonText:i.buttontext,critical:t,errorID:""+e.errorCode}},p.prototype.getInternalLanguageCode=function(e){var t={zh_cn:"CN",zh_hans:"CN",zh_tw:"CN-TW",zh_hant:"CN-TW",de_de:"DE",da_dk:"DK",en_us:"EN",es_es:"ES",fi_fi:"FI",fr_fr:"FR",fr_ca:"FR-CA",el_gr:"GR",hr_hr:"HR",it_it:"IT",ja_jp:"JP",ko_kr:"KR",lv_lv:"LV",nl_nl:"NL",no_no:"NO",nb_no:"NO",nn_no:"NO",pl_pl:"PL",pt_pt:"PT",pt_br:"PT-BR",ro_ro:"RO",ru_ru:"RU",sv_se:"SE",tr_tr:"TR",hi_hi:"HI",bn_bn:"BN",vi_vn:"VI",th_th:"TH"},e=t[this.toNormalisedLocale(e)];return e||t.en_us},p.prototype.setupCurrencyFormatter=function(e,t){var i=this,n=this.findMatchingCustomFormat(e,t);if(!n)try{var s=this.toBcpLocale(e);-1<["GBP","EUR","JPY"].indexOf(t)?this.intlCurrencyFormatter=new Intl.NumberFormat(s,{style:"currency",currency:t}):this.intlCurrencyFormatter=new Intl.NumberFormat(s,{style:"currency",currency:t,currencyDisplay:"code"})}catch(e){}utils.Currency.setCurrencyCode(t),this.intlCurrencyFormatter?utils.Currency.setAPIFormattor(function(e){return i.formatCurrency(e)}):(null!=(n=n||this.findFallbackCustomFormat(e,t)).prefix&&utils.Currency.setPrefix(n.prefix),null!=n.suffix&&utils.Currency.setSuffix(n.suffix),null!=n.decimalPlaces&&utils.Currency.setDecimalPlaces(n.decimalPlaces||0),null!=n.decimalSep&&utils.Currency.setDecimalSymbol(n.decimalSep),null!=n.groupSep&&utils.Currency.setThousandsSeperator(n.groupSep))},p.prototype.toBcpLocale=function(e){return(e||"").toLowerCase().split("_").join("-")},p.prototype.toNormalisedLocale=function(e){return(e||"").toLowerCase().split("-").join("_")},p.prototype.findMatchingCustomFormat=function(e,t){var i;if(null===(i=this.remoteConfig.customCurrencyFormats)||void 0===i||!i.length)return null;for(var n=null,s=0,o=this.remoteConfig.customCurrencyFormats;s<o.length;s++){var r=o[s];if(r.matchCurrency==t){if(this.toNormalisedLocale(r.matchLocale)==e)return r;r.matchLocale||n||(n=r)}}return n},p.prototype.findFallbackCustomFormat=function(e,t){var i;if(null!==(i=this.remoteConfig.customCurrencyFormats)&&void 0!==i&&i.length)for(var n=0,s=this.remoteConfig.customCurrencyFormats;n<s.length;n++){var o=s[n];if(!o.matchLocale&&!o.matchCurrency)return o}return{matchLocale:e,matchCurrency:t,decimalPlaces:2,decimalSep:".",groupSep:",",prefix:"",suffix:t}},p.prototype.formatCurrency=function(e){return this.intlCurrencyFormatter.format(e)},p.prototype.toGameCurrencyUnits=function(e){return this.roundTo2DP(e/100)},p.prototype.toServerCurrencyUnits=function(e){return Math.round(100*e)},p.prototype.roundGameCurrency=function(e){return this.roundTo2DP(e)},p.prototype.roundTo2DP=function(e){return Math.round(100*e)/100},p.prototype.setupFullscreenGestureListener=function(){var t=this;btg$(document).on("touchend.btgFullscreen",function(e){e.cancelable&&(btg$(document).off("touchend.btgFullscreen"),t.requestFullscreen(!1))})},p.prototype.requestFullscreen=function(e){this.config.fullscreenDisabled||utils.Device.tryRequestFullscreen(e)},p.relaxErrorMap={101:521,104:531,105:534},p.gameRef="extrachilli",e=p,r.RelaxAPIMapper=e}(relax=relax||{}),function(e){(e=(e=e.apimappers||(e.apimappers={})).RelaxErrorCode||(e.RelaxErrorCode={}))[e.Error506_InsufficientFunds=506]="Error506_InsufficientFunds",e[e.Error520_SessionMovedToOtherBrowser=520]="Error520_SessionMovedToOtherBrowser",e[e.Error524_GameDisabled=524]="Error524_GameDisabled",e[e.Error538_JackpotWon=538]="Error538_JackpotWon",e[e.Error559_CustomError=559]="Error559_CustomError",e[e.Error554_BlockedDaily=554]="Error554_BlockedDaily",e[e.Error555_BlockedWeekly=555]="Error555_BlockedWeekly",e[e.Error556_BlockedMonthly=556]="Error556_BlockedMonthly"}(relax=relax||{}),function(e){var t,r,a,l,i;function n(){this.MINIMUM_TIME=3e3,this.queue=new i,this.setupSignals()}t=e.services||(e.services={}),r=utils.STR,a=genericgame.GenericGame,l=utils.GameTimer,i=utils.RequestQueue,n.prototype.setupSignals=function(){var t=this;amplify.subscribe("SendRequest",function(e){t.sendRequest(e.requestType)})},n.prototype.sendRequest=function(e){var t=this;this.requestType=e,this.createRequest();var i=this.request,n=this.isNoOpRequest(e),s=e==r.PLAY&&!this.firstPlaySentAt,o=0;e==r.CLOSE&&this.firstPlaySentAt&&(o=this.firstPlaySentAt+this.MINIMUM_TIME,this.firstPlaySentAt=null),this.requestType=null,this.request=null,e!=r.PROGRESSIVE_UPDATE&&a.getModel()._roundReqNum++,this.queue.add({noEarlierThan:o,action:function(){n?(i&&i.restoreState&&i.restoreVersion&&apiMapper.setRestoreState(i.restoreState,i.restoreVersion),t.publishResponseReceivedForNoOp({type:e,noOp:!0,response:null})):apiMapper.sendRequest({request:i,type:e}),s&&(t.firstPlaySentAt=l.getWindowTime())}})},n.prototype.isNoOpRequest=function(e){return e==r.CLOSE||e==r.FRCONFIRM||e==r.FEATURE_START||e==r.FEATURE_END||e==r.FEATURE_DROP_TRIGGERED||e==r.PLAY&&a.getModel().relaxNextPlayHeld},n.prototype.publishResponseReceivedForNoOp=function(e){l.setImmediate(function(){amplify.publish("ResponseReceived",e)})},n.prototype.createRequest=function(){var e=a.getModel();switch(this.requestType){case r.INIT:this.request={};break;case r.PLAY:this.request=this.createPlay();break;case r.FEATURE_PICK:this.request=this.createFeaturePick();break;case r.FEATURE_DROP_TRIGGERED:this.request=this.createFeatureDropTriggered();break;case r.FRREJECTED:this.request=this.createFreeRoundReject(!1);break;case r.FRDEFER:this.request=this.createFreeRoundReject(!0);break;case r.FRCONFIRM:this.request={};break;case r.GAMBLE_PICK:this.request=this.createGamblePick();break;case r.GAMBLE_END:this.request=this.createGambleEnd();break;case r.PROGRESSIVE_UPDATE:this.request=this.createProgressiveUpdate();break;case r.CLOSE:e.relaxGameFinished&&(apiMapper.setGameFinished(++e.relaxRestoreVersion),e.relaxGameFinished=!1)}},n.prototype.createPlay=function(){var e={ga:"spin",ba:apiMapper.toServerCurrencyUnits(this.getCurrentStake())},t=a.getModel();return t.relaxRestoreState?e.restoreState=JSON.stringify(t.relaxRestoreState):e.restoreState=JSON.stringify({default:!0}),e.restoreVersion=++t.relaxRestoreVersion,t.buyingFeatureDrop&&(e.buyFeature=!0),e},n.prototype.createFeaturePick=function(){return null},n.prototype.createFeatureDropTriggered=function(){var e=a.getModel();return e.relaxRestoreState?{ga:null,restoreState:JSON.stringify(e.relaxRestoreState),restoreVersion:++e.relaxRestoreVersion}:null},n.prototype.createFreeRoundReject=function(e){return e?{action:"skip"}:{action:"delete"}},n.prototype.getCurrentStake=function(){return a.getModel().currentStake},n.prototype.createGamblePick=function(){return null},n.prototype.createGambleEnd=function(){return null},n.prototype.createProgressiveUpdate=function(){return{}},e=n,t.RelaxRequestService=e}(relax=relax||{}),function(e){var t,r,i,u,s,h,a,n,o,l,p;function c(){this.setupSignals()}t=e.services||(e.services={}),r=genericgame.GenericGame,i=genericgame.models.FeatureDropSymbolVO,u=genericgame.models.FeatureDropVO,s=genericgame.models.FreeRoundOptionsVO,h=genericgame.models.FreeRoundVO,a=genericgame.models.PlayerMessageVO,n=genericgame.models.RealityCheckVO,o=utils.STR,l=utils.TranslationManager,p=utils.GameTimer,c.prototype.setupSignals=function(){var e=this;amplify.subscribe("ResponseReceived",function(t){try{e.onResponseReceived(t)}catch(e){var i=!e.btgKnown,t={errorID:i?"RESPONSE_SERVICE_ERROR-"+e.name:e.name,errorMsg:l.getString("MISC_ERROR",[e.name]),critical:!0,errorTitle:l.getString("ERROR_TITLE")};i&&amplify.publish("ReportError",{error:e}),r.publishAPIHandleError({error:t,skipErrorReport:i})}})},c.prototype.onResponseReceived=function(e){switch(this.responseObject.type=e.type,this.chainingRequest=!1,this.responseObject.type){case o.INIT:this.isInInit=!0,this.parseInitResponse(e.response);break;case o.PLAY:this.parsePlayResponse(e.response,e.noOp);break;case o.FEATURE_DROP_TRIGGERED:this.parseFeatureDropTriggeredResponse(e.response,e.noOp);break;case o.FEATURE_PICK:this.parseFeaturePickResponse(e.response,e.noOp);break;case o.FEATURE_END:this.parseFeatureEndResponse();break;case o.GAMBLE_PICK:this.parseGambleResponse(e.response,e.noOp);break;case o.GAMBLE_END:this.parseGambleEndResponse(e.response,e.noOp);break;case o.PROGRESSIVE_UPDATE:this.parseProgressiveUpdate(e.response);break;case o.FRREJECTED:case o.FRDEFER:break;case o.FRCONFIRM:var t=r.getModel(),i=new h,n=JSON.parse(t.freeRoundOptionSelected);i.betPerLine=n.stake,i.totalRounds=i.roundsRemaining=n.spins,i.endTime=n.endTime,this.responseObject.baseStake=t.baseStake,this.responseObject.freeRound=i;break;case o.CLOSE:}this.chainingRequest||(this.onResponseParsedCore(e,this.responseObject),this.isInInit=!1)},c.prototype.onResponseParsedCore=function(e,t){e=this.getArtificialResponseDelay(e,t);e?p.setTimeout(function(){return amplify.publish("ResponseParsed",{response:t})},e):amplify.publish("ResponseParsed",{response:t})},c.prototype.getArtificialResponseDelay=function(e,t){return 0},c.prototype.inInit=function(){return this.isInInit},c.prototype.parseInitResponse=function(e){var t=this,i=this.responseObject,n=r.getModel();e.limits?(i.defaultStake=this.toGameCurrencyUnits(e.limits.defaultBet),i.stakeIncrements=e.limits.legalBets.map(function(e){return t.toGameCurrencyUnits(e)}),i.baseStake=1,i.maxStake=Math.max.apply(Math,i.stakeIncrements),i.minStake=Math.min.apply(Math,i.stakeIncrements),null!=e.limits.maxFeaturePurchasePrice&&(this.featureDropMaxPurchasePrice=this.toGameCurrencyUnits(e.limits.maxFeaturePurchasePrice),0==this.featureDropMaxPurchasePrice&&amplify.publish("FeatureBuyDisabled"))):this.throwError("INIT_LIMITS_MISSING"),e.stats?i.balance=this.toGameCurrencyUnits(e.stats.b):this.throwError("INIT_STATS_MISSING"),e.stats.realityCheck&&this.parseRealityCheck(e.stats.realityCheck),e.messages&&this.parseMessages(e.messages),e.refresh&&this.parseRefresh(e);var s=e.stats.freespins;s&&(this.parseFreeRounds(s,e.refresh,n.relaxGameFinished),null==s.autoplay||s.autoplay||(r.ALLOW_AUTOPLAY_IN_FR=!1)),i.isNew||this.parseRecoveryBalance(e)},c.prototype.throwError=function(e){var t=new Error(e);throw t.btgKnown=!0,t.name=e,t},c.prototype.parseFreeRounds=function(e,t,i){var n,s=this.responseObject,o=new h;if(e.expires&&(o.endTime=1e3*e.expires-(null!==(n=apiMapper.getServerTimeOffset())&&void 0!==n?n:0),o.endTime-=250),o.options=[],e.betSizeOptions&&e.betSizeOptions.length)for(var r=0,a=e.betSizeOptions;r<a.length;r++){var l=a[r];o.options.push(this.createFreeRoundOption(l.spins,l.ba,o.endTime))}else o.options.push(this.createFreeRoundOption(e.spins,e.ba,o.endTime));o.bonusFunds="money"!=e.type,o.betPerLine=this.toGameCurrencyUnits(e.ba),o.totalRounds=e.spins+e.spinsPlayed,o.roundsRemaining=e.spins,t&&t.win&&t.ended&&!s.isNew&&!i?o.win=this.toGameCurrencyUnits(Math.max(0,e.win-t.win)):o.win=this.toGameCurrencyUnits(e.win);t=h;e.spinsended?(o.freeRoundMessage=e.win?t.FINISHED_WITH_WINNINGS:t.FINISHED_NO_WINNINGS,s.isNew||(o.recoveryMessage=t.SILENT_CONTINUE)):e.spinsPlayed?o.freeRoundMessage=t.CONTINUE:o.freeRoundMessage=t.OPTIONS,o.freeRoundMessage==t.OPTIONS?o.endTimeHasPassed()||(s.freeRoundOffers=[o]):s.freeRound=o},c.prototype.parseRealityCheck=function(e){var t;apiMapper.isOperatorResponsibleForRealityCheck()||((t=new n).serverLimitReached="error"==e.status,t.minutesSinceResetTimestamp=Date.now(),t.intervalSeconds=e.sessionLimitSeconds,t.sessionMinutes=e.totalSessionMinutes,t.lossLimit=this.toGameCurrencyUnits(e.lossLimit),t.sessionWinSum=this.toGameCurrencyUnits(e.winSum),t.sessionBetSum=this.toGameCurrencyUnits(e.betSum),t.sessionResult=this.toGameCurrencyUnits(e.result),t.minutesSinceReset=e.sessionMinutes,t.resultSinceReset=this.toGameCurrencyUnits(e.resetedResult),this.responseObject.type===o.INIT&&(e=apiMapper.getInitialRealityCheckVars(),t.intervalSeconds=e.intervalSeconds||0,t.minutesSinceResetTimestamp=e.startTime,e.intervalSeconds&&e.elapsedSeconds&&(t.minutesSinceReset=e.elapsedSeconds%e.intervalSeconds/60)),this.responseObject.realityCheck=t)},c.prototype.createFreeRoundOption=function(e,t,i){var n=new s;n.stake=this.toGameCurrencyUnits(t),n.spins=e;i={spins:n.spins,stake:n.stake,endTime:i};return n.raw=JSON.stringify(i),n},c.prototype.parsePlayResponse=function(e,t){var i,n,s,o=this.responseObject;t?(i=this.latestPlayData,n=this.latestStats):(n=(i=e).stats,s=e.messages),e=null,i||this.throwError("PLAY_DATA_MISSING"),this.parsePlayDataCore(i,n,t);e=r.getModel();t?o.realityCheck=e.realityCheck:(this.parseMessages(s),n.realityCheck&&this.parseRealityCheck(n.realityCheck)),n.freespins?!e.freeRound&&"normal"===i.roundType&&n.freespins.spinsended||this.parseFreeRounds(n.freespins,null,e.relaxGameFinished):(e=e.freeRound)&&0===e.roundsRemaining&&"freerounds"===i.roundType?(e.win=(e.win||0)+i.win,e.freeRoundMessage=e.win?h.FINISHED_WITH_WINNINGS:h.FINISHED_NO_WINNINGS,o.freeRound=e):e&&"normal"===i.roundType&&(e.freeRoundMessage=e.win?h.FINISHED_WITH_WINNINGS:h.FINISHED_NO_WINNINGS,e.totalRounds=Math.max(e.totalRounds-e.roundsRemaining,0),e.roundsRemaining=0,o.freeRound=e)},c.prototype.parseRefresh=function(e){var t,i=this.responseObject;i.isNew=e.refresh.ended&&!e.refresh.restoreState,null!=e.refresh.ba&&(t=this.toGameCurrencyUnits(e.refresh.ba),-1!=i.stakeIncrements.indexOf(t)&&(i.defaultStake=t)),this.parseFeatureDropTotals(e.refresh,i.stakeIncrements),i.isNew||this.parsePlayDataCore(e.refresh,e.stats,!1,e.refresh.restoreState)},c.prototype.parseBalance=function(e,t,i){var n=this.responseObject,s=t.freespins,t=t.b;i||(s?s.spinsended&&s.win&&(t-=s.win):e.win&&e.ended&&(t-=e.win)),n.balance=this.toGameCurrencyUnits(Math.max(0,t))},c.prototype.parseRecoveryBalance=function(e){var t=this.responseObject,i=e.stats.freespins,n=e.refresh,e=e.stats.b;i?i.spinsended&&i.win&&(e-=i.win):n&&n.ended&&n.win&&(e-=n.win),t.recoveryBalance=this.toGameCurrencyUnits(Math.max(0,e))},c.prototype.parseRestoreState=function(e,t){void 0===t&&(t=null);try{return JSON.parse(e)}catch(e){return t}},c.prototype.parsePlayDataCore=function(e,t,i,n){e&&t||this.throwError("PLAY_STATS_MISSING"),this.latestPlayData=e,this.latestStats=t;var s=r.getModel();s.relaxGameFinished=!1,this.parsePlayData(e,t,i,n),this.parseBalance(e,t,s.relaxGameFinished)},c.prototype.parsePlayData=function(e,t,i,n){var s=this.responseObject;s.stake=this.toGameCurrencyUnits(e.ba),s.type!==o.INIT&&this.parseFeatureDropTotals(e,r.getModel().stakes)},c.prototype.parseFeaturePickResponse=function(e,t){this.parsePlayResponse(e,t)},c.prototype.parseFeatureEndResponse=function(){},c.prototype.parseFeatureDropTriggeredResponse=function(e,t){this.parsePlayResponse(null,t)},c.prototype.getFeatureDropCostFactor=function(){return null},c.prototype.getFeatureDropRawTotals=function(e){return null},c.prototype.parseFeatureDropTotals=function(e,t){var i=this.getFeatureDropCostFactor();if(i){for(var n=this.getFeatureDropRawTotals(e)||{},s={},o=0,r=t;o<r.length;o++){var a=r[o],l=n[this.toServerCurrencyUnits(a)];s[a]=null==l?a*i:Math.max(0,this.toGameCurrencyUnits(l))}t=new u([],s);t.maxAllowedBuyPrice=this.featureDropMaxPurchasePrice,this.responseObject.featureDrop=t}},c.prototype.parseFeatureDropSymbols=function(e){var t=this;return(e.featureDropTokens||[]).map(function(e){return new i(e.x-1,e.y-1,t.toGameCurrencyUnits(e.coinValue))})},c.prototype.parseMessages=function(e){if(e&&e.length){var t=this.responseObject;t.playerMessages=[];for(var i=0,n=e;i<n.length;i++){var s=n[i],o=new a;o.message=this.unescapeUnicode(s.message),o.title=this.unescapeUnicode(s.title),t.playerMessages.push(o)}}},c.prototype.unescapeUnicode=function(e){return JSON.parse(JSON.stringify(e).replace("\\\\u","\\u"))},c.prototype.toGameCurrencyUnits=function(e){return apiMapper.toGameCurrencyUnits(e)},c.prototype.roundTo2DP=function(e){return Math.round(100*e)/100},c.prototype.toServerCurrencyUnits=function(e){return apiMapper.toServerCurrencyUnits(e)},c.prototype.parseGambleResponse=function(e,t){this.parsePlayResponse(e,t)},c.prototype.parseGambleEndResponse=function(e,t){this.parsePlayResponse(e,t)},c.prototype.parseProgressiveUpdate=function(e){},e=c,t.RelaxResponseService=e}(relax=relax||{}),function(e){!function(e){var i=genericgame.GenericGame,n=utils.Blocker,s=utils.ContainerWrapper,o=genericgame.models.FreeRoundVO,r=utils.TranslationManager,a=utils.TextWrapper,l=genericgame.views.Button,u=utils.Currency,h=genericgame.TextureLoader,t=utils.STR,p=(c.prototype.setupSignals=function(){var t=this;amplify.subscribe("ViewResized",function(e){t.resize(e.w,e.h)}),amplify.subscribe("DisplayFreeRoundOffersSignal",function(){t.handleDisplayFreeRoundOffersSignal(i.getModel().freeRoundOffers[0])}),amplify.subscribe("DisplayFreeRoundMessageSignal",function(e){t.handleDisplayFreeRoundMessageSignal(e.freeRound)}),amplify.subscribe("OptionClicked",function(e){e.button.isSelected(!0)}),amplify.subscribe("RejectedFreeRoundsSignal",function(){t.hide(),t.clear(),amplify.publish("FinishedFreeRoundsSignal")})},c.prototype.handleDisplayFreeRoundOffersSignal=function(e){this.optionsPanel.clear(),this.optionsPanel.addOptions(e.options),this.textChooseBelow.visible=1<e.options.length;e=u.format(e.betPerLine*e.totalRounds);this.textTotalValue.setText(r.getString("TOTAL_VALUE",[e])),this.show()},c.prototype.handleDisplayFreeRoundMessageSignal=function(e){var t=e.freeRoundMessage;e.expired&&(t=e.win?o.FINISHED_WITH_WINNINGS:o.FINISHED_NO_WINNINGS);var i=r.getString(e.expired?"FREE_ROUND_EXPIRED":"FREE_ROUND_TITLE");if(t==o.CONTINUE){var n=r.getString("FREE_ROUND_FINAL",[""+e.roundsRemaining]),s=function(){return amplify.publish("AcceptedFreeRoundsSignal",{})};amplify.publish("ShowMessage",{title:i,message:n,okAction:s})}else if(t==o.FINISHED_WITH_WINNINGS){n=r.getString("FREE_ROUND_FINISHED_WITH_WINNINGS",[""+e.win]),s=function(){return amplify.publish("FinishedFreeRoundsSignal")};amplify.publish("ShowMessage",{title:i,message:n,okAction:s})}else{if(t!=o.FINISHED_NO_WINNINGS)throw new Error("Unknown freeRoundMessage type");n=r.getString("FREE_ROUND_FINISHED_NO_WINNINGS"),s=function(){return amplify.publish("FinishedFreeRoundsSignal")};amplify.publish("ShowMessage",{title:i,message:n,okAction:s})}},c.prototype.hide=function(){this.container.visible=!1},c.prototype.show=function(){this.container.visible=!0},c.prototype.clear=function(){this.optionsPanel.clear()},c.prototype.onClickPlayLater=function(){amplify.publish("SendRequest",{requestType:t.FRDEFER})},c.prototype.onClickPlayNow=function(){var e=this.optionsPanel.getSelectedOption();e&&(amplify.publish("AcceptedFreeRoundsSignal",{optionSelected:e.option.raw}),this.hide())},c.prototype.onClickNoThanks=function(){amplify.publish("SendRequest",{requestType:t.FRREJECTED})},c.prototype.resize=function(e,t){i.resizeModalDialog(this.container,this.bg.layoutEntry,.55,e,t)},c);function c(e){var t=this;this.container=new s,e.addChild(this.container);e="FreeRoundsRelax";this.blocker=new n({holder:this.container,blockInteraction:!0}),this.bg=h.createSprite("MessageWindow_BG_01",e),this.container.addChild(this.bg),this.topContainer=new s,this.optionsContainer=new s,this.container.addChild(this.optionsContainer,this.topContainer),this.optionsPanel=new d(this,this.optionsContainer),a.create(this.topContainer,{id:"FREE_ROUND_RELAX_TITLE",section:e,textId:"CONGRATULATIONS"}),this.textYouHave=a.create(this.topContainer,{id:"FREE_ROUND_RELAX_INFO_0",section:e,textId:"YOU_HAVE_FREE_SPINS"}),this.textChooseBelow=a.create(this.topContainer,{id:"FREE_ROUND_RELAX_INFO_1",section:e,textId:"PLEASE_CHOOSE_BELOW"}),this.textTotalValue=a.create(this.topContainer,{id:"FREE_ROUND_RELAX_INFO_2",section:e});new l({holder:this.topContainer,clickFunc:function(){return t.onClickPlayNow()},layoutID:"BUT_PLAYNOW",section:"FreeRoundsRelax/BUT_PLAYNOW"}),new l({holder:this.topContainer,clickFunc:function(){return t.onClickPlayLater()},layoutID:"BUT_PLAYLATER",section:"FreeRoundsRelax/BUT_PLAYLATER"}),new l({holder:this.topContainer,clickFunc:function(){return t.onClickNoThanks()},layoutID:"BUT_NOTHANKS",section:"FreeRoundsRelax/BUT_NOTHANKS"});this.hide(),this.setupSignals()}e.FreeRoundsWindow=p;var d=(m.prototype.clear=function(){this.optionContainer.removeChildren(),this.betOptions.length=0},m.prototype.addOptions=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.betOptions.push(new f(this,this.optionContainer,n))}this.registerSelection(this.betOptions[0]),this.showPage(0),this.buttonNext.visible=this.buttonPrev.visible=1<this.getNumPages()},m.prototype.getNumPages=function(){return Math.ceil(this.betOptions.length/m.OPTIONS_PER_PAGE)},m.prototype.getSelectedOption=function(){return this.selectedOption},m.prototype.registerSelection=function(e){this.betOptions.forEach(function(e){e.isSelected=!1}),e.isSelected=!0,this.selectedOption=e},m.prototype.nextPage=function(){this.getNumPages()>this.currentPage+1&&this.showPage(this.currentPage+1)},m.prototype.prevPage=function(){0<this.currentPage&&this.showPage(this.currentPage-1)},m.prototype.showPage=function(e){this.currentPage=e,this.betOptions.forEach(function(e){e.isSelected=!1,e.isVisible=!1});for(var e=m.OPTIONS_PER_PAGE*e,t=this.betOptions.slice(e,e+m.OPTIONS_PER_PAGE),i=0;i<t.length;i++){var n=t[i];this.positionOption(n,i,t.length),n.isVisible=!0}this.registerSelection(t[0])},m.prototype.positionOption=function(e,t,i){t=(this.pageWidth-this.optionWidth*i)/2+this.optionWidth*t;e.setPosition(t,0)},m.OPTIONS_PER_PAGE=3,m);function m(e,t){var i=this;this.betOptions=[];var n=utils.Layouts.get();this.container=new s("SpinsOffer","FreeRoundsRelax/SpinsOffer"),this.frWindow=e,t.addChild(this.container),this.optionContainer=new s,this.container.addChild(this.optionContainer),this.buttonPrev=h.createSprite("BUT_Prev_01","FreeRoundsRelax/SpinsOffer"),this.buttonPrev.click=this.buttonPrev.tap=function(){return i.prevPage()},this.buttonPrev.interactive=!0,this.buttonPrev.visible=!1,this.buttonNext=h.createSprite("BUT_Next_01","FreeRoundsRelax/SpinsOffer"),this.buttonNext.click=this.buttonNext.tap=function(){return i.nextPage()},this.buttonNext.interactive=!0,this.buttonNext.visible=!1,this.container.addChild(this.buttonPrev,this.buttonNext),this.pageWidth=this.container.layoutEntry.width,this.optionWidth=n.getEntry("SpinsOfferLosange","FreeRoundsRelax/SpinsOffer/SpinsOfferLosange").width}var f=(Object.defineProperty(g.prototype,"isSelected",{get:function(){return this.highLight.visible},set:function(e){this.highLight.visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isVisible",{get:function(){return this.container.visible},set:function(e){this.container.visible=e},enumerable:!1,configurable:!0}),g.prototype.setPosition=function(e,t){this.container.position.set(e,t)},g);function g(e,t,i){var n=this;this.parent=e,this.container=new s,this.option=i,t.addChild(this.container);t="FreeRoundsRelax/SpinsOffer/SpinsOfferLosange";utils.Layouts.get().addAllSpritesToContainer(t,this.container),this.highLight=this.container.findChild({id:"FSW_Losange_01_Pressed"}),this.highLight.visible=!1,a.create(this.container,{id:"SPINS_NUMBER",section:t,text:""+i.spins}),a.create(this.container,{id:"SPINS",section:t,textId:"PRIZE_SPINS"}),a.create(this.container,{id:"PRIZE_X",section:t,textId:"PRIZE_X"}),a.create(this.container,{id:"SPINS_VALUE",section:t,text:u.format(i.stake)}),this.container.interactive=!0,this.container.click=this.container.tap=function(){n.parent.registerSelection(n)}}}(e.views||(e.views={}))}(relax=relax||{}),function(e){var t,i,n,s,o,r,a,l,u;function h(e){var t=this;this.container=new i,e.addChild(this.container);e="RealityCheckRelax";this.blocker=new l({holder:this.container,blockInteraction:!0,alpha:.75}),this.bg=n.createSprite("MessageWindow_BG_01",e),this.container.addChild(this.bg),this.txtPlayingFor=o.create(this.container,{id:"REALITY_CHECK_TITLE",section:e}),this.txtWagered=o.create(this.container,{id:"REALITY_CHECK_INFO_0",section:e}),this.txtWon=o.create(this.container,{id:"REALITY_CHECK_INFO_1",section:e}),this.txtResult=o.create(this.container,{id:"REALITY_CHECK_INFO_2",section:e}),this.butContinue=this.setupButton(this.container,function(){return t.onClickContinue()},"BUT_ContinuePlaying"),this.butExitGame=this.setupButton(this.container,function(){return t.onClickExitGame()},"BUT_ExitGame"),this.butShowHistory=this.setupButton(this.container,function(){return t.onClickShowHistory()},"BUT_ShowHistory"),this.hide(),this.setupSignals()}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=genericgame.TextureLoader,s=genericgame.views.Button,o=utils.TextWrapper,r=genericgame.GenericGame,a=utils.TranslationManager,l=utils.Blocker,u=utils.GameTimer,h.prototype.getContainer=function(){return this.container},h.prototype.setupSignals=function(){var t=this;amplify.subscribe("ViewResized",function(e){t.resize(e.w,e.h)}),amplify.subscribe("ShowRealityCheckWindow",function(e){t.show(e.realityCheck)})},h.prototype.setupButton=function(e,t,i){return new s({holder:e,clickFunc:t,layoutID:i,section:"RealityCheckRelax/"+i})},h.prototype.hide=function(){this.container.visible=!1,this.realityCheckData=null},h.prototype.show=function(e){var t=this;this.realityCheckData=e,this.txtPlayingFor.setText(a.getString("PLAYING_FOR_MINUTES",[""+e.sessionMinutes])),this.txtWagered.setText(a.getString("YOU_HAVE_WAGERED",["..."])),this.txtWon.setText(a.getString("YOU_HAVE_WON",["..."])),this.txtResult.setText(a.getString("RESULT",["..."])),this.container.visible=!0,this.clickEnabled=!1,this.clickEnabledTimer=u.setTimeout(function(){t.sessionResultReceived&&(t.clickEnabled=!0),t.clickEnabledTimer=null},500),apiMapper.getRealityCheckLatestSessionResult(e,function(){t.txtWagered.setText(a.getString("YOU_HAVE_WAGERED",[t.formatCurrency(e.sessionBetSum)])),t.txtWon.setText(a.getString("YOU_HAVE_WON",[t.formatCurrency(e.sessionWinSum)])),t.txtResult.setText(a.getString("RESULT",[t.formatCurrency(e.sessionResult)])),t.sessionResultReceived=!0,t.clickEnabledTimer||(t.clickEnabled=!0)})},h.prototype.formatCurrency=function(e){return utils.Currency.format(e)},h.prototype.onClickContinue=function(){var e,t;this.clickEnabled&&(t=this.realityCheckData,this.hide(),e=t.isLossLimitExceeded(),t=t.isDurationLimitExceeded()||!e,amplify.publish("RealityCheckReset",{resetLoss:e,resetDuration:t}))},h.prototype.onClickExitGame=function(){this.clickEnabled&&amplify.publish("RealityCheckExitGame")},h.prototype.onClickShowHistory=function(){this.clickEnabled&&amplify.publish("RealityCheckShowHistory")},h.prototype.resize=function(e,t){r.resizeModalDialog(this.container,this.bg.layoutEntry,.55,e,t)},e=h,t.RealityCheckWindow=e}(relax=relax||{}),function(e){var t=genericgame.models.PayoutVO,t=(i.getPayout=function(e,t){return this.payouts[e][t]},i.SCATTER_SYMBOL=11,i.NUM_REELS=6,i.MIN_SCATTERS_TO_TRIGGER=3,i.freeSpinReTriggerAwards=[0,0,0,4,8],i.MAX_DENSITY=7,i.MAX_GAMBLE_SPINS=24,i.FD_COST_FACTOR=50,i.CART_REELS=[1,2,3,4],i.payouts=t.buildPayouts([[0,0,0,0,0,0,0],[0,0,200,500,1e3,2500,5e3],[0,0,0,100,200,250,750],[0,0,0,25,100,150,200],[0,0,0,25,50,75,200],[0,0,0,20,40,60,175],[0,0,0,20,40,60,175],[0,0,0,20,25,60,100],[0,0,0,15,25,50,100],[0,0,0,15,25,50,90],[0,0,0,10,20,40,80],[0,0,0,0,0,0,0]]),i.featureDropSymbolPriceReductions=[0,0,2,1,.5,.4,.3,.2],i);function i(){}e.ExtraChilliGameData=t}(extrachilli=extrachilli||{});var whiterabbit,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(t){var W,i=genericgame.TextureLoader,U=utils.TextureWrapper,e=(W=genericgame.TextureLoader,__extends(H,W),H.prototype.loadTextures=function(e){W.prototype.loadTextures.call(this,e),this.storeNineSliceTextures(),this.storeSymbols(),this.storeSymbolShadows(),this.storeBaseSymbolBGs(),this.storeFreeSpinSymbolBGs(),this.storeScatterSymbols(),this.storeAnimations(),this.storeUI(),this.generateTexturesToStore(e),this.storeTextures()},H.prototype.storeSymbols=function(){var e=[],t=[],i=[],n=[],s=[],o=[],r=[],a=[];t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),i.push(null),i.push(W.prototype.getTextureFrame.call(this,"Scroll_2")),i.push(W.prototype.getTextureFrame.call(this,"FireGem_2")),i.push(W.prototype.getTextureFrame.call(this,"IceGem_2")),i.push(W.prototype.getTextureFrame.call(this,"Emblem_2")),i.push(W.prototype.getTextureFrame.call(this,"Ace_2")),i.push(W.prototype.getTextureFrame.call(this,"King_2")),i.push(W.prototype.getTextureFrame.call(this,"Queen_2")),i.push(W.prototype.getTextureFrame.call(this,"Jack_2")),i.push(W.prototype.getTextureFrame.call(this,"Ten_2")),i.push(W.prototype.getTextureFrame.call(this,"Nine_2")),i.push(null),i.push(null),i.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_02")),n.push(W.prototype.getTextureFrame.call(this,"Wild_3")),n.push(W.prototype.getTextureFrame.call(this,"Scroll_3")),n.push(W.prototype.getTextureFrame.call(this,"FireGem_3")),n.push(W.prototype.getTextureFrame.call(this,"IceGem_3")),n.push(W.prototype.getTextureFrame.call(this,"Emblem_3")),n.push(W.prototype.getTextureFrame.call(this,"Ace_3")),n.push(W.prototype.getTextureFrame.call(this,"King_3")),n.push(W.prototype.getTextureFrame.call(this,"Queen_3")),n.push(W.prototype.getTextureFrame.call(this,"Jack_3")),n.push(W.prototype.getTextureFrame.call(this,"Ten_3")),n.push(W.prototype.getTextureFrame.call(this,"Nine_3")),n.push(W.prototype.getTextureFrame.call(this,"Scatter_Feature_3")),n.push(null),n.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_03")),s.push(null),s.push(W.prototype.getTextureFrame.call(this,"Scroll_4")),s.push(W.prototype.getTextureFrame.call(this,"FireGem_4")),s.push(W.prototype.getTextureFrame.call(this,"IceGem_4")),s.push(W.prototype.getTextureFrame.call(this,"Emblem_4")),s.push(W.prototype.getTextureFrame.call(this,"Ace_4")),s.push(W.prototype.getTextureFrame.call(this,"King_4")),s.push(W.prototype.getTextureFrame.call(this,"Queen_4")),s.push(W.prototype.getTextureFrame.call(this,"Jack_4")),s.push(W.prototype.getTextureFrame.call(this,"Ten_4")),s.push(W.prototype.getTextureFrame.call(this,"Nine_4")),s.push(null),s.push(null),s.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_04")),o.push(null),o.push(W.prototype.getTextureFrame.call(this,"Scroll_5")),o.push(W.prototype.getTextureFrame.call(this,"FireGem_5")),o.push(W.prototype.getTextureFrame.call(this,"IceGem_5")),o.push(W.prototype.getTextureFrame.call(this,"Emblem_5")),o.push(W.prototype.getTextureFrame.call(this,"Ace_5")),o.push(W.prototype.getTextureFrame.call(this,"King_5")),o.push(W.prototype.getTextureFrame.call(this,"Queen_5")),o.push(W.prototype.getTextureFrame.call(this,"Jack_5")),o.push(W.prototype.getTextureFrame.call(this,"Ten_5")),o.push(W.prototype.getTextureFrame.call(this,"Nine_5")),o.push(null),o.push(null),o.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_05")),r.push(null),r.push(W.prototype.getTextureFrame.call(this,"Scroll_6")),r.push(W.prototype.getTextureFrame.call(this,"FireGem_6")),r.push(W.prototype.getTextureFrame.call(this,"IceGem_6")),r.push(W.prototype.getTextureFrame.call(this,"Emblem_6")),r.push(W.prototype.getTextureFrame.call(this,"Ace_6")),r.push(W.prototype.getTextureFrame.call(this,"King_6")),r.push(W.prototype.getTextureFrame.call(this,"Queen_6")),r.push(W.prototype.getTextureFrame.call(this,"Jack_6")),r.push(W.prototype.getTextureFrame.call(this,"Ten_6")),r.push(W.prototype.getTextureFrame.call(this,"Nine_6")),r.push(null),r.push(null),r.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_06")),a.push(null),a.push(W.prototype.getTextureFrame.call(this,"Scroll_7")),a.push(W.prototype.getTextureFrame.call(this,"FireGem_7")),a.push(W.prototype.getTextureFrame.call(this,"IceGem_7")),a.push(W.prototype.getTextureFrame.call(this,"Emblem_7")),a.push(W.prototype.getTextureFrame.call(this,"Ace_7")),a.push(W.prototype.getTextureFrame.call(this,"King_7")),a.push(W.prototype.getTextureFrame.call(this,"Queen_7")),a.push(W.prototype.getTextureFrame.call(this,"Jack_7")),a.push(W.prototype.getTextureFrame.call(this,"Ten_7")),a.push(W.prototype.getTextureFrame.call(this,"Nine_7")),a.push(null),a.push(null),a.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDSymbol_07")),e.push(null),e.push(t),e.push(i),e.push(n),e.push(s),e.push(o),e.push(r),e.push(a),this.textureLists[H.SYMBOLS]=e},H.prototype.storeBaseSymbolBGs=function(){var e=[],t=[],i=[],n=[],s=[],o=[],r=[],a=[];t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),i.push(null),i.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_2")),i.push(null),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_3")),n.push(null),s.push(null),s.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_4")),s.push(null),o.push(null),o.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_5")),o.push(null),r.push(null),r.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_6")),r.push(null),a.push(null),a.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_7")),a.push(null),e.push(null),e.push(t),e.push(i),e.push(n),e.push(s),e.push(o),e.push(r),e.push(a),this.textureLists[H.SYMBOL_BACKGROUNDS]=e},H.prototype.storeFreeSpinSymbolBGs=function(){var e=[],t=[],i=[],n=[],s=[],o=[],r=[],a=[];t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),t.push(null),i.push(null),i.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"SYM_BG_2")),i.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_2")),i.push(null),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"SYM_BG_3")),n.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_3")),n.push(null),s.push(null),s.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"SYM_BG_4")),s.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_4")),s.push(null),o.push(null),o.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"SYM_BG_5")),o.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_5")),o.push(null),r.push(null),r.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"SYM_BG_6")),r.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_6")),r.push(null),a.push(null),a.push(W.prototype.getTextureFrame.call(this,"Scroll_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"SYM_BG_7")),a.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_7")),a.push(null),e.push(null),e.push(t),e.push(i),e.push(n),e.push(s),e.push(o),e.push(r),e.push(a),this.textureLists[H.SYMBOL_FREESPINS_BACKGROUNDS]=e},H.prototype.storeScatterSymbols=function(){var e=[];e.push(W.prototype.getTextureFrame.call(this,"Scatter_H")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_O")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_T")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),e.push(W.prototype.getTextureFrame.call(this,"Scatter_Plus4")),this.textureLists[H.SCATTER_SYMBOLS]=e},H.prototype.storeAnimations=function(){var e=[],t=[],i=[],n=[],s=[],o=[],r=[],a=[],l=[],u=[],h=[],p=[],c=[],d=[],m=[],f=[],g=[],y=[],S=[],_=[],b=[],T=[],x=[],v=[],E=[],I=[],w=[],C=[],R=[],B=[],F=[],A=[],M=[],P=[],G=[],D=[],L=[],O=[],k=[];M.push(null),M.push(null);for(var N=0;N<5;N++)P.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_02/FDBed_02_000"+(N<10?"0"+N:N)));M.push(P);for(N=0;N<5;N++)G.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_03/FDBed_03_000"+(N<10?"0"+N:N)));M.push(G);for(N=0;N<5;N++)D.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_04/FDBed_04_000"+(N<10?"0"+N:N)));M.push(D);for(N=0;N<5;N++)L.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_05/FDBed_05_000"+(N<10?"0"+N:N)));M.push(L);for(N=0;N<5;N++)O.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_06/FDBed_06_000"+(N<10?"0"+N:N)));M.push(O);for(N=0;N<5;N++)k.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FeatureDrop_Symbols/FDBed_07/FDBed_07_000"+(N<10?"0"+N:N)));M.push(k),this.animationLists[H.FEATURE_DROP_SYMBOL_ANIM]=M;for(N=0;N<8;N++)A.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FDCoin Dissapear/FDCoin Dissapear_000"+(N<10?"0"+N:N)));A.push(U.EMPTY),this.animations[H.FEATURE_DROP_COIN_DISAPPEAR_ANIM]=A;for(N=0;N<10;N++)F.push(W.prototype.getTextureFrame.call(this,"FeatureDrop/FD_CoinSpin/FD_CoinSpin_000"+(N<10?"0"+N:N)));this.animations[H.FEATURE_DROP_COIN_SPIN_ANIM]=F;for(N=0;N<13;N++)l.push(W.prototype.getTextureFrame.call(this,"Explosion_01/Explosion_01_000"+(N<10?"0"+N:N)));this.animations[H.EXPLOSION_ANIM]=l;for(N=0;N<13;N++)u.push(W.prototype.getTextureFrame.call(this,"DB_ExtraSpin_02/DB_ExtraSpin_02_000"+(N<10?"0"+N:N)));this.animations[H.EXTRA_SPIN_POP_ANIM]=u;for(N=0;N<14;N++)a.push(W.prototype.getTextureFrame.call(this,"GodRays_01/Godrays_01_000"+(N<10?"0"+N:N)));this.animations[H.GOD_RAY_ANIM]=a;for(N=0;N<14;N++)r.push(W.prototype.getTextureFrame.call(this,"Sparkles_01/Sparkles_01_000"+(N<10?"0"+N:N)));this.animations[H.SPARKLES_ANIM]=r;for(N=0;N<10;N++)p.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_2_Glow/Scatter_BG_2_Glow_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)c.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_3_Glow/Scatter_BG_3_Glow_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)d.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_4_Glow/Scatter_BG_4_Glow_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)m.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_5_Glow/Scatter_BG_5_Glow_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)f.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_6_Glow/Scatter_BG_6_Glow_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)g.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_7_Glow/Scatter_BG_7_Glow_000"+(N<10?"0"+N:N)));this.animationLists[H.SCATTER_GLOW_ANIM]=[null,null,p,c,d,m,f,g];for(N=0;N<10;N++)y.push(W.prototype.getTextureFrame.call(this,"Scatter_BG_4_Cart_Glow/Scatter_BG_4_Cart_Glow_000"+(N<10?"0"+N:N)));this.animations[H.SCATTER_CART_GLOW_ANIM]=y;for(N=0;N<10;N++)S.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2_Reaction/SYM_Main_BG_2_Reaction_000"+(N<10?"0"+N:N)));for(S=S.concat(S.reverse()),N=0;N<10;N++)_.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3_Reaction/SYM_Main_BG_3_Reaction_000"+(N<10?"0"+N:N)));for(_=_.concat(_.reverse()),N=0;N<10;N++)b.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4_Reaction/SYM_Main_BG_4_Reaction_000"+(N<10?"0"+N:N)));for(b=b.concat(b.reverse()),N=0;N<10;N++)T.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5_Reaction/SYM_Main_BG_5_Reaction_000"+(N<10?"0"+N:N)));for(T=T.concat(T.reverse()),N=0;N<10;N++)x.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6_Reaction/SYM_Main_BG_6_Reaction_000"+(N<10?"0"+N:N)));for(x=x.concat(x.reverse()),N=0;N<10;N++)v.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7_Reaction/SYM_Main_BG_7_Reaction_000"+(N<10?"0"+N:N)));v=v.concat(v.reverse()),this.animationLists[H.SYMBOL_WIN_ANIMS]=[null,null,S,_,b,T,x,v];for(N=0;N<10;N++)E.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2_Reaction/SYM_Main_BG_2_Reaction_000"+(N<10?"0"+N:N)));for(E=(E=E.concat(E.reverse())).concat(E),N=10;N<40;N++)E.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_2_Reaction/SYM_Main_BG_2_Reaction_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)I.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3_Reaction/SYM_Main_BG_3_Reaction_000"+(N<10?"0"+N:N)));for(I=(I=I.concat(I.reverse())).concat(I),N=10;N<40;N++)I.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_3_Reaction/SYM_Main_BG_3_Reaction_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)w.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4_Reaction/SYM_Main_BG_4_Reaction_000"+(N<10?"0"+N:N)));for(w=(w=w.concat(w.reverse())).concat(w),N=10;N<40;N++)w.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_4_Reaction/SYM_Main_BG_4_Reaction_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)C.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5_Reaction/SYM_Main_BG_5_Reaction_000"+(N<10?"0"+N:N)));for(C=(C=C.concat(C.reverse())).concat(C),N=10;N<40;N++)C.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_5_Reaction/SYM_Main_BG_5_Reaction_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)R.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6_Reaction/SYM_Main_BG_6_Reaction_000"+(N<10?"0"+N:N)));for(R=(R=R.concat(R.reverse())).concat(R),N=10;N<40;N++)R.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_6_Reaction/SYM_Main_BG_6_Reaction_000"+(N<10?"0"+N:N)));for(N=0;N<10;N++)B.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7_Reaction/SYM_Main_BG_7_Reaction_000"+(N<10?"0"+N:N)));for(B=(B=B.concat(B.reverse())).concat(B),N=10;N<40;N++)B.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_7_Reaction/SYM_Main_BG_7_Reaction_000"+(N<10?"0"+N:N)));this.animationLists[H.SYMBOL_WIN_FREE_SPIN_ANIMS]=[null,null,E,I,w,C,R,B];for(N=0;N<20;N++)h.push(W.prototype.getTextureFrame.call(this,"VQ_Sparkles_01/VQ_Sparkles_01_000"+(N<10?"0"+N:N)));this.animations[H.SPARKLE_WIN_ANIM]=h;for(N=0;N<10;N++)t.push(W.prototype.getTextureFrame.call(this,"DB_Coin_Spin_02_AE/DB_Coin_Spin_02_AE_000"+(N<10?"0"+N:N)));e[0]=t;for(N=0;N<10;N++)i.push(W.prototype.getTextureFrame.call(this,"DB_Coin_Spin_01_AE/DB_Coin_Spin_01_AE_000"+(N<10?"0"+N:N)));e[1]=i;for(N=0;N<20;N++)n.push(W.prototype.getTextureFrame.call(this,"DB_Gem_Spin_01_AE/DB_Gem_Spin_01_AE_000"+(N<10?"0"+N:N)));e[2]=n;for(N=0;N<20;N++)s.push(W.prototype.getTextureFrame.call(this,"DB_Gem_Spin_02_AE/DB_Gem_Spin_02_AE_000"+(N<10?"0"+N:N)));e[3]=s;for(N=0;N<20;N++)o.push(W.prototype.getTextureFrame.call(this,"DB_Gem_Spin_03_AE/DB_Gem_Spin_03_AE_000"+(N<10?"0"+N:N)));e[4]=o,this.animationLists[H.WIN_ANIMATIONS]=e},H.prototype.storeUI=function(){var e=[];e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BottomBar_BG")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_02")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_03")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_03_Pressed")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_04")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_Spin")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_B")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_B_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_C")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_Autoplay")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_BG_03")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_BG_03_Pressed")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_BG_04")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_BG_04_Pressed")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_Paytable")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_E")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_E_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_Arrow_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_Stop")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_05")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_A_BG_05_Pressed")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_H")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_H_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_C_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_D_Bank")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_J")),e.push(W.prototype.getTextureFrame.call(this,"UI/UI_BUT_J_BG_01")),e.push(W.prototype.getTextureFrame.call(this,"UI/FeatureDrop/FDButton")),e.push(W.prototype.getTextureFrame.call(this,"UI/FeatureDrop/FDFrame_Bottom")),e.push(W.prototype.getTextureFrame.call(this,"UI/FeatureDrop/FDFrame_Top")),e.push(W.prototype.getTextureFrame.call(this,"UI_BUT_D_Prize_High")),this.textureLists[i.UI]=e},H.prototype.storeSymbolShadows=function(){var e=[];e.push(null),e.push(null),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_2")),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_3")),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_4")),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_5")),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_6")),e.push(W.prototype.getTextureFrame.call(this,"SYM_Main_BG_S_7")),this.textureLists[H.SYMBOL_SHADOWS]=e},H.SYMBOLS="SYMBOLS",H.SYMBOL_SHADOWS="SYMBOL_SHADOWS",H.SCATTER_SYMBOLS="SCATTER_SYMBOLS",H.SYMBOL_BACKGROUNDS="SYMBOL_BACKGROUNDS",H.SYMBOL_FREESPINS_BACKGROUNDS="SYMBOL_FREESPINS_BACKGROUNDS",H.WIN_ANIMATIONS="WIN_ANIMATIONS",H.SPARKLES_ANIM="SPARKLES_ANIM",H.GOD_RAY_ANIM="GOD_RAY_ANIM",H.SYMBOL_WIN_ANIMS="SYMBOL_WIN_ANIMS",H.SYMBOL_WIN_FREE_SPIN_ANIMS="SYMBOL_WIN_FREE_SPIN_ANIMS",H.SCATTER_GLOW_ANIM="SCATTER_GLOW_ANIM",H.EXPLOSION_ANIM="EXPLOSION_ANIM",H.SPARKLE_WIN_ANIM="SPARKLE_WIN_ANIM",H.EXTRA_SPIN_POP_ANIM="EXTRA_SPIN_POP_ANIM",H.SCATTER_CART_GLOW_ANIM="SCATTER_CART_GLOW_ANIM",H.IntroPanel_01="Intro/IntroPanel_01",H.IntroPanel_02="Intro/IntroPanel_02",H.IntroPanel_03="Intro/IntroPanel_03",H.DB_Logo_01="DB_Logo_01",H.BTG_Logo_01="Paytable/BTG_Logo_01",H.Wheel_Right_01="Wheel_Right_01",H.Wheel_Right_02="Wheel_Right_02",H.Wheel_Right_03="Wheel_Right_03",H.Wheel_Left_01="Wheel_Left_01",H.Wheel_Left_02="Wheel_Left_02",H.Wheel_Left_03="Wheel_Left_03",H.Cart="Cart",H.Cart_Bonus="Cart_Bonus",H.Cart_Gold="Cart_Gold",H.Cart_Jackpot="Cart_Jackpot",H.Cart_Jackpot_Bonus="Cart_Jackpot_Bonus",H.SplinterDay_06="Splinters/SplinterDay_06",H.SplinterDay_05="Splinters/SplinterDay_05",H.SplinterDay_04="Splinters/SplinterDay_04",H.SplinterDay_03="Splinters/SplinterDay_03",H.SplinterDay_02="Splinters/SplinterDay_02",H.SplinterDay_01="Splinters/SplinterDay_01",H.P_GemPurple_01="P_GemPurple_01",H.P_GemRed_01="P_GemRed_01",H.P_GemGreen_01="P_GemGreen_01",H.P_GemBlue_01="P_GemBlue_01",H.SplinterNight_06="Splinters/SplinterNight_06",H.SplinterNight_05="Splinters/SplinterNight_05",H.SplinterNight_04="Splinters/SplinterNight_04",H.SplinterNight_03="Splinters/SplinterNight_03",H.SplinterNight_02="Splinters/SplinterNight_02",H.SplinterNight_01="Splinters/SplinterNight_01",H.BGDay_01_06="BGDay_01_06",H.BGDay_01_05="BGDay_01_05",H.BGDay_01_04="BGDay_01_04",H.BGDay_01_03="BGDay_01_03",H.BGDay_01_02="BGDay_01_02",H.BGDay_01_01="BGDay_01_01",H.BGDusk_01_06="BGDusk_01_06",H.BGDusk_01_05="BGDusk_01_05",H.BGDusk_01_04="BGDusk_01_04",H.BGDusk_01_03="BGDusk_01_03",H.BGDusk_01_02="BGDusk_01_02",H.BGDusk_01_01="BGDusk_01_01",H.DB_Cabinet_01="DB_Cabinet_01",H.DB_Cabinet_02="DB_Cabinet_02",H.SYM_Main_Extra_BG_3="SYM_Main_Extra_BG_3",H.Scroll_Extra_BG_3="Scroll_Extra_BG_3",H.SYM_Extra_BG_3="SYM_Extra_BG_3",H.MessageWindow_BG_01="FreeSpinWindow/MessageWindow_BG_01",H.BUT_StartFreeSpin_01="FreeSpinWindow/BUT_StartFreeSpin_01",H.BUT_StartFreeSpin_01_BG_01="FreeSpinWindow/BUT_StartFreeSpin_01_BG_01",H.FreeSpinWindow_BG_01="FreeSpinWindow/FreeSpinWindow_BG_01",H.FreeSpinWindow_BG_02="FreeSpinWindow/FreeSpinWindow_BG_02",H.Panel_A="Panel_A",H.PT_Panel_01="Paytable/PT_Panel_01",H.PT_Panel_02="Paytable/PT_Panel_02",H.PT_Megaways_01="Paytable/PT_Megaways_01",H.PT_Image_01="Paytable/PT_Image_01",H.PT_Image_03="Paytable/PT_Image_03",H.PT_Image_04="Paytable/PT_Image_04",H.PT_Image_05="Paytable/PT_Image_05",H.PT_HowToPlay_01="Paytable/PT_HowToPlay_01",H.PT_HowToPlay_02="Paytable/PT_HowToPlay_02",H.ECS_Panel_01="ExtraChilliScreen/ECS_Panel_01",H.ECS_Panel_02="ExtraChilliScreen/ECS_Panel_02",H.ECS_Panel_03="ExtraChilliScreen/ECS_Panel_03",H.ECS_WhelGoldCenter="ExtraChilliScreen/ECS_WhelGoldCenter",H.ECS_WhelGoldBG="ExtraChilliScreen/ECS_WhelGoldBG",H.ECS_X_01="ExtraChilliScreen/ECS_X_01",H.GlassLosange_01="ExtraChilliScreen/GlassLosange_01",H.ECS_Button_A="ExtraChilliScreen/ECS_Button_A",H.ECS_Button_A_Pressed="ExtraChilliScreen/ECS_Button_A_Pressed",H.GambleSlot_Black="ExtraChilliScreen/GambleSlot_Black",H.GambleSlot_Black_Active="ExtraChilliScreen/GambleSlot_Black_Active",H.GambleSlot_Blue="ExtraChilliScreen/GambleSlot_Blue",H.GambleSlot_Blue_Active="ExtraChilliScreen/GambleSlot_Blue_Active",H.GambleSlot_Green="ExtraChilliScreen/GambleSlot_Green",H.GambleSlot_Green_Active="ExtraChilliScreen/GambleSlot_Green_Active",H.GambleSlot_Purple="ExtraChilliScreen/GambleSlot_Purple",H.GambleSlot_Purple_Active="ExtraChilliScreen/GambleSlot_Purple_Active",H.GambleSlot_Red="ExtraChilliScreen/GambleSlot_Red",H.GambleSlot_Red_Active="ExtraChilliScreen/GambleSlot_Red_Active",H.NUM_Purple_28="ExtraChilliScreen/NUM_Purple_28",H.NUM_Purple_24="ExtraChilliScreen/NUM_Purple_24",H.NUM_Red_20="ExtraChilliScreen/NUM_Red_20",H.NUM_Blue_16="ExtraChilliScreen/NUM_Blue_16",H.NUM_Green_12="ExtraChilliScreen/NUM_Green_12",H.NUM_Black_12="ExtraChilliScreen/NUM_Black_12",H.NUM_Green_8="ExtraChilliScreen/NUM_Green_8",H.NUM_Black_8="ExtraChilliScreen/NUM_Black_8",H.NUM_Black_0="ExtraChilliScreen/NUM_Black_0",H.Wheel_01="ExtraChilliScreen/Wheel_01",H.Wheel_02="ExtraChilliScreen/Wheel_02",H.Wheel_03="ExtraChilliScreen/Wheel_03",H.Wheel_04="ExtraChilliScreen/Wheel_04",H.Clacker="ExtraChilliScreen/Clacker",H.FireWork_Particle_01="FireWork_Particle_01",H.FireWork_Particle_02="FireWork_Particle_02",H);function H(){var e=W.call(this)||this;return e.loadCommonLayout=!0,e.layoutsToLoad=["ExtraChilliLayouts.json"],e.setAssetMetadata(new t.ExtraChilliAssetMetadata),e.nineSliceTextures=[H.Panel_A+".png"],e.texturesToStore=e.texturesToStore.concat([H.FireWork_Particle_01,H.FireWork_Particle_02,i.STAR_PARTICLE,i.FDMenu_BG_01,i.FDCoin,i.FDBUT_CANCEL_01,i.FDBUT_START_01,i.FDStar_01,H.BGDusk_01_06,H.BGDusk_01_05,H.BGDusk_01_04,H.BGDusk_01_03,H.BGDusk_01_02,H.BGDusk_01_01,H.BGDay_01_06,H.BGDay_01_05,H.BGDay_01_04,H.BGDay_01_03,H.BGDay_01_02,H.BGDay_01_01,H.DB_Cabinet_01,H.DB_Cabinet_02,H.FreeSpinWindow_BG_01,H.FreeSpinWindow_BG_02,H.MessageWindow_BG_01,H.BUT_StartFreeSpin_01_BG_01,H.BUT_StartFreeSpin_01,H.DB_Logo_01,H.IntroPanel_01,H.IntroPanel_02,H.IntroPanel_03,H.SplinterDay_01,H.SplinterDay_02,H.SplinterDay_03,H.SplinterDay_04,H.SplinterDay_05,H.SplinterDay_06,H.P_GemBlue_01,H.P_GemGreen_01,H.P_GemPurple_01,H.P_GemRed_01,H.SplinterNight_01,H.SplinterNight_02,H.SplinterNight_03,H.SplinterNight_04,H.SplinterNight_05,H.SplinterNight_06,H.PT_Megaways_01,H.PT_Panel_01,H.PT_Panel_02,H.PT_Image_01,H.PT_Image_03,H.PT_Image_04,H.PT_Image_05,H.PT_HowToPlay_01,H.PT_HowToPlay_02,H.BTG_Logo_01,H.NUM_X,H.ECS_Panel_01,H.ECS_Panel_02,H.ECS_Panel_03,H.ECS_WhelGoldCenter,H.ECS_WhelGoldBG,H.ECS_X_01,H.GlassLosange_01,H.ECS_Button_A,H.ECS_Button_A_Pressed,H.GambleSlot_Black,H.GambleSlot_Black_Active,H.GambleSlot_Blue,H.GambleSlot_Blue_Active,H.GambleSlot_Green,H.GambleSlot_Green_Active,H.GambleSlot_Purple,H.GambleSlot_Purple_Active,H.GambleSlot_Red,H.GambleSlot_Red_Active,H.NUM_Purple_24,H.NUM_Red_20,H.NUM_Blue_16,H.NUM_Green_12,H.NUM_Black_12,H.NUM_Green_8,H.NUM_Black_8,H.NUM_Black_0,H.Wheel_01,H.Wheel_02,H.Wheel_03,H.Wheel_04,H.SYM_Extra_BG_3,H.SYM_Main_Extra_BG_3,H.Scroll_Extra_BG_3,H.Clacker]),e}t.ExtraChilliTextureLoader=e}(extrachilli=extrachilli||{}),function(e){(e.models||(e.models={})).ExtraChilliExtraSymbolVO=function(e,t,i,n){this.reel=t,this.row=i,this.symbols=e,this.newSymbolCount=n}}(whiterabbit=whiterabbit||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i;function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.freeSpinWin=0,e.freeSpinWinMultiplier=1,e.inDrop=!1,e.numScatters=0,e}t=e.models||(e.models={}),i=genericgame.models.GameModel,__extends(n,i),n.get=function(){return genericgame.models.GameModel._instance||(genericgame.models.GameModel._instance=new n),genericgame.models.GameModel._instance},e=n,t.ExtraChilliModel=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i;function n(){var e=null!==i&&i.apply(this,arguments)||this;return e.spins=[],e.numFreeSpins=0,e.totalFreeSpins=0,e.freeSpinsTriggered=!1,e.inFreeSpins=!1,e.freeSpinWin=0,e.freeSpinWinMultiplier=1,e.freeSpinsRetriggered=!1,e.freeSpinsRetriggerAmount=0,e}t=e.models||(e.models={}),i=genericgame.models.ResponseVO,__extends(n,i),e=n,t.ExtraChilliResponseVO=e}(extrachilli=extrachilli||{}),function(e){(e.models||(e.models={})).ExtraChilliScatterWinVO=function(e,t,i){this.count=e,this.positions=t,this.extraSymbolsWinPositions=i}}(extrachilli=extrachilli||{}),function(e){(e.models||(e.models={})).ExtraChilliSpinVO=function(){this.win=0,this.symbols=[[]],this.wins=[],this.wilds=[],this.numSyms=[],this.freeSpinWinMultiplier=1,this.scatterOrder=[[]],this.numScatters=0,this.remainingSymbols=[],this.remainingScatterOrder=[]}}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,r;function i(e,t,i,n,s,o){s=r.call(this,e,t,i,n,s)||this;return s.extraSymbolsWinPositions=o,s}t=e.models||(e.models={}),r=genericgame.models.WinVO,__extends(i,r),e=i,t.ExtraChilliWinVO=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.services||(e.services={}),n=e.models.ExtraChilliModel,i=relax.services.RelaxRequestService,__extends(s,i),s.prototype.createFeaturePick=function(){var e=this.createPlay();return e.ga=n.get().collectingGamble?"startFeature":"gamble",e},e=s,t.ExtraChilliRelaxRequestService=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(s){!function(e){var o,c=s.ExtraChilliGameData,r=s.models.ExtraChilliWinVO,t=s.models.ExtraChilliResponseVO,d=s.models.ExtraChilliSpinVO,h=s.models.ExtraChilliModel,m=utils.ArrayUtils,p=utils.STR,a=s.models.ExtraChilliScatterWinVO;(i=o=o||{})[i.WinningsType=0]="WinningsType",i[i.Payline=1]="Payline",i[i.WinValue=2]="WinValue",i[i.WinPositions=3]="WinPositions",i[i.WinningSymbol=4]="WinningSymbol",i[i.WinMultiplier=5]="WinMultiplier",i[i.NumWays=6]="NumWays";var f,i=(f=relax.services.RelaxResponseService,__extends(n,f),n.prototype.onResponseReceived=function(e){this.responseObject=new t,f.prototype.onResponseReceived.call(this,e)},n.prototype.getArtificialResponseDelay=function(e,t){return e.type==p.PLAY&&e.noOp?1e3:0},n.prototype.getFeatureDropCostFactor=function(){return c.FD_COST_FACTOR},n.prototype.parseFeatureEndResponse=function(){this.responseObject.totalFreeSpins=this.responseObject.numFreeSpins=h.get().numFreeSpins},n.prototype.parsePlayData=function(e,t,i,n){f.prototype.parsePlayData.call(this,e,t,i,n);var s=h.get(),o=this.responseObject;o.stake=this.toGameCurrencyUnits(e.correspondingBa||e.ba);var r,a,l,u,t=!o.isNew,i=e.forcedBoughtFeatureDrop;t&&(e.freespins||i)?(l=this.parseRestoreState(n)||{},i&&(a=i.freespinsCountHistory,(l.inForcedBoughtFeatureDrop||i.freespins||a&&1<a.length||a&&a.length&&e.ended)&&(this.inForceBoughtFeatureDrop=!0)),a=(this.inForceBoughtFeatureDrop?i:e).freespins,null!=l.freeSpinIndex&&(a?(l.freeSpinIndex=Math.min(a.length-1,l.freeSpinIndex),s.relaxNextPlayHeld=!0):delete l.freeSpinIndex),s.relaxRestoreState=l):o.type==p.FEATURE_DROP_TRIGGERED?(this.inForceBoughtFeatureDrop=!0,o.type=p.PLAY):this.inForceBoughtFeatureDrop&&(e.forcedBoughtFeatureDrop||(this.inForceBoughtFeatureDrop=!1)),this.inForceBoughtFeatureDrop?(i||this.throwError("PLAY_FEATURE_DROP_TRIGGERED_DATA_MISSING"),r=i,s.relaxRestoreState=s.relaxRestoreState||{},s.relaxRestoreState.inForcedBoughtFeatureDrop=!0):(r=e,s.relaxRestoreState&&s.relaxRestoreState.inForcedBoughtFeatureDrop&&delete s.relaxRestoreState.inForcedBoughtFeatureDrop,i&&(s.triggeredFeatureDrop=!0)),s.relaxNextPlayHeld?(u=r.freespins[s.relaxRestoreState.freeSpinIndex],o.inFreeSpins=!0,o.totalFreeSpins=u.spinsLeft+u.spinsPlayed,o.numFreeSpins=u.spinsLeft,o.spins=this.parseSpins(u,!0),o.win=this.getTotalSpinsWin(o.spins),o.scatterWin=this.findScatterWin(m.last(o.spins)),o.freeSpinsRetriggered=o.scatterWin&&o.scatterWin.count>=c.MIN_SCATTERS_TO_TRIGGER,o.freeSpinsRetriggered&&(o.freeSpinsRetriggerAmount=c.freeSpinReTriggerAwards[o.scatterWin.count]),o.freeSpinWin=this.toGameCurrencyUnits(u.runningTotal)+o.win,s.relaxRestoreState.freeSpinIndex++,s.relaxRestoreState.freeSpinIndex>=r.freespins.length&&(s.relaxNextPlayHeld=!1,!this.inForceBoughtFeatureDrop&&i?s.relaxRestoreState={inForcedBoughtFeatureDrop:!0}:(this.inForceBoughtFeatureDrop=!1,s.relaxRestoreState=null,s.relaxGameFinished=!0))):(a=!0,r.freespinsCountHistory&&(l=m.last(r.freespinsCountHistory),u=m.penultimate(r.freespinsCountHistory),o.numFreeSpins=l,o.totalFreeSpins=l,e.ended||!this.inForceBoughtFeatureDrop&&i?u?(l<u?o.gambleSuccess=!1:l>=c.MAX_GAMBLE_SPINS?o.gambleSuccess=!0:s.collectingGamble=!0,o.previousGambleAward=u):l<c.MAX_GAMBLE_SPINS&&(s.collectingGamble=!0):u&&(o.previousGambleAward=u,o.gambleSuccess=!0),o.inGambleFeature=!!u||s.collectingGamble,e.ended||(a=!1)),r.freespins&&(s.relaxNextPlayHeld=!(a=!1),s.relaxRestoreState=s.relaxRestoreState||{},s.relaxRestoreState.freeSpinIndex=0,r.freespinsCountHistory||(o.totalFreeSpins=o.numFreeSpins=r.freespins[0].spinsLeft+1)),!this.inForceBoughtFeatureDrop&&i&&(a=!1),o.inGambleFeature||(o.spins=this.parseSpins(r,!1),o.win=this.getTotalSpinsWin(o.spins),o.scatterWin=this.findScatterWin(m.last(o.spins)),o.freeSpinsTriggered=o.scatterWin&&o.scatterWin.count>=c.MIN_SCATTERS_TO_TRIGGER,!o.featureDrop||this.inForceBoughtFeatureDrop||this.inInit()||(o.featureDrop.symbols=this.parseFeatureDropSymbols(e))),r.freespins&&r.freespins.length?o.freeSpinWin=this.toGameCurrencyUnits(r.freespins[0].runningTotal):r.freespinsCountHistory&&(o.freeSpinWin=o.win),a&&(s.relaxGameFinished=!0,this.inForceBoughtFeatureDrop=!1,s.relaxRestoreState&&delete s.relaxRestoreState.inForcedBoughtFeatureDrop))},n.prototype.getFeatureDropRawTotals=function(e){return e.machineStateAfter},n.prototype.parseSpins=function(e,t){for(var i=[],n=0,s=[[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1]],o=[e].concat(e.respins||[]),r=0;r<o.length;r++){var a,l=o[r],u=new d;u.symbols=this.parseMainSymbols(l.symbols),u.extraSymbols=this.parseRawSymbols(l.secondaryReel,!1),u.wins=this.parseWins(l.winnings,l.reelHeights),u.win=u.wins.map(function(e){return e.winnings}).reduce(function(e,t){return e+t},0),t&&(a=r<o.length-1,u.freeSpinWinMultiplier=(l.multiplier||1)+(a?1:0));for(var h=0;h<c.NUM_REELS;h++)for(var p=0;p<u.symbols[h].length;p++)u.symbols[h][p]==c.SCATTER_SYMBOL&&-1==s[h][p]&&(s[h][p]=n++);u.numScatters=n,u.scatterOrder=m.copy2D(s),i.push(u),this.adjustScatterPositions(u.wins,s)}return i},n.prototype.getTotalSpinsWin=function(e){return e.reduce(function(e,t){return e+t.win},0)},n.prototype.findScatterWin=function(e){for(var t=[],i=e.symbols,n=e.extraSymbols,s=0;s<i.length;s++)for(var o=0;o<i[s].length;o++)i[s][o]===c.SCATTER_SYMBOL&&t.push({x:s,y:o});for(var r=[],s=0;s<n.length;s++)n[s]===c.SCATTER_SYMBOL&&r.push(s);if(t.length||r.length)return new a(t.length||r.length,t,r)},n.prototype.parseRawSymbols=function(e,t){for(var i=[],n=0;n<e.length-(t?1:0);n++){var s=this.symbolMap[e[n]];if(null==s)throw new Error("symbol not found");i.push(s)}return i},n.prototype.parseMainSymbols=function(e){for(var t=[],i=0;i<c.NUM_REELS;i++)t.push(this.parseRawSymbols(e[i],0<i&&i<5));return t},n.prototype.parseWins=function(e,t){for(var i=[],n=0,s=e;n<s.length;n++){var o=s[n];i.push(this.parseWin(o,t))}return i},n.prototype.parseWin=function(e,t){var i=e[o.WinPositions].map(this.parsePosition),n=this.parseMainSymbolWinPositions(t,i),s=Math.max.apply(Math,i.map(function(e){return e.x}))+1,i=this.findExtraReelWinPositions(t,i);return new r(c.getPayout(this.symbolMap[e[o.WinningSymbol]],s),e[o.NumWays],this.toGameCurrencyUnits(e[o.WinValue]),n,t,i)},n.prototype.parsePosition=function(e){return{x:e.x-1,y:e.y-1}},n.prototype.parseMainSymbolWinPositions=function(e,t){for(var i=[],n=0,s=t;n<s.length;n++){var o=s[n],r=o.x,o=o.y;(-1==c.CART_REELS.indexOf(r)||o<e[r])&&i.push({x:r,y:o})}return i},n.prototype.findExtraReelWinPositions=function(e,t){for(var i=[],n=0,s=t;n<s.length;n++){var o=s[n],r=o.x,o=o.y;-1!=c.CART_REELS.indexOf(r)&&o>=e[r]&&i.push(r-1)}return i},n.prototype.adjustScatterPositions=function(e,t){for(var i=0,n=e;i<n.length;i++)for(var s=n[i],o=0;o<s.positions.length;o++){var r=s.positions[o];t[r.x][r.y]=-2}for(var a=0,l=t;a<l.length;a++)for(var u=l[a],o=0;o<u.length;o++)-2===u[o]&&(u.splice(o,1),u.unshift(-1))},n);function n(){var e=null!==f&&f.apply(this,arguments)||this;return e.symbolMap={WR:0,S1:1,S2:2,S3:3,S4:4,A:5,K:6,Q:7,J:8,T:9,N:10,SC:11},e}e.ExtraChilliRelaxResponseService=i}(s.services||(s.services={}))}(extrachilli=extrachilli||{}),function(e){var t,i,n,s,o;function r(e){this.container=new i,e.addChild(this.container),this.baseGameContainer=new i,this.container.addChild(this.baseGameContainer),this.freeGameContainer=new i,this.container.addChild(this.freeGameContainer),this.addBaseGameBackgroundAssets(),this.setupTime(),this.setupCopyRight(),this.setupSignals()}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=utils.TextWrapper,s=utils.GameTimer,o=e.ExtraChilliTextureLoader,r.prototype.setupCopyRight=function(){var e=new n("Text_BTG",this.container);e.setText("© Big Time Gaming"),e.setLayout("BG")},r.prototype.setupTime=function(){var e=this;this.timeText=new n("Text_Time",this.container),this.timeText.setLayout("BG");var t=new Date,t=6e4-(1e3*t.getSeconds()+t.getMilliseconds());this.setTime(),s.setTimeout(function(){return e.startTimeDisplay()},t)},r.prototype.startTimeDisplay=function(){var e=this;this.setTime(),s.setInterval(function(){return e.setTime()},6e4)},r.prototype.setTime=function(){var e=new Date,t=e.getMinutes();this.timeText.setText(e.getHours()+":"+(t<10?"0"+t:t))},r.prototype.setupSignals=function(){var i=this;amplify.subscribe("RecoveredFreeSpinsSignal",function(){i.showFreeSpinBackground()}),amplify.subscribe("StartFreeSpinsSignal",function(){i.showFreeSpinBackground()}),amplify.subscribe("StopFreeSpinsSignal",function(){i.showBaseGameBackground()}),amplify.subscribe("GetBackgroundTopPosGlobal",function(e){var t=i.topOfBGPos,t=i.baseGameContainer.toGlobal(new PIXI.Point(t.x,t.y));e.cb(t)})},r.prototype.addBaseGameBackgroundAssets=function(){var e=o.createSprite("BGDay_01_01","BG");this.baseGameContainer.addChild(e),this.baseGameContainer.addChild(o.createSprite("BGDay_01_02","BG")),this.baseGameContainer.addChild(o.createSprite("BGDay_01_03","BG")),this.baseGameContainer.addChild(o.createSprite("BGDay_01_04","BG")),this.baseGameContainer.addChild(o.createSprite("BGDay_01_05","BG")),this.baseGameContainer.addChild(o.createSprite("BGDay_01_06","BG")),this.topOfBGPos={x:e.x,y:e.y}},r.prototype.addFreeGameBackgroundAssets=function(){this.freeGameContainer.addChild(o.createSprite("BGDusk_01_01","BG")),this.freeGameContainer.addChild(o.createSprite("BGDusk_01_02","BG")),this.freeGameContainer.addChild(o.createSprite("BGDusk_01_03","BG")),this.freeGameContainer.addChild(o.createSprite("BGDusk_01_04","BG")),this.freeGameContainer.addChild(o.createSprite("BGDusk_01_05","BG")),this.freeGameContainer.addChild(o.createSprite("BGDusk_01_06","BG"))},r.prototype.showFreeSpinBackground=function(){var e=this;this.addFreeGameBackgroundAssets(),this.freeGameContainer.alpha=0,Tweener.addTween(this.freeGameContainer,{alpha:1,transition:"easeInExpo",time:.4,onComplete:function(){return e.removeBaseGameBackground()}})},r.prototype.showBaseGameBackground=function(){this.freeGameContainer.removeChildren(),this.addBaseGameBackgroundAssets()},r.prototype.removeBaseGameBackground=function(){this.baseGameContainer.removeChildren()},e=r,t.Background=e}(extrachilli=extrachilli||{}),function(e){var t,i,n,s,o;function r(e){this.directionX=[1,-1,-1,1],this.directionY=[-1,-1,1,1],this.container=new i,e.addChild(this.container),this.baseGameContainer=new i,this.container.addChild(this.baseGameContainer),this.freeGameContainer=new i,this.container.addChild(this.freeGameContainer),this.setupSignals(),this.setupSpineAssets(),this.showBaseGameCabinet()}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=utils.GraphicsWrapper,s=utils.SpineWrapper,o=e.ExtraChilliTextureLoader,r.prototype.setupSpineAssets=function(){this.spineContainer=new i("FlagsContainer",""),this.container.addChild(this.spineContainer),this.flagsD=new s("FlagsD",{container:this.spineContainer}),this.flagsC=new s("FlagsC",{container:this.spineContainer}),this.flagsB=new s("FlagsB",{container:this.spineContainer}),this.flagsA=new s("FlagsA",{container:this.spineContainer}),this.flagsA.stateData.setMix("Flags_Soft","Flags_Strong",1),this.flagsA.stateData.setMix("Flags_Strong","Flags_Soft",1),this.flagsB.stateData.setMix("Flags_Soft","Flags_Strong",1),this.flagsB.stateData.setMix("Flags_Strong","Flags_Soft",1),this.flagsA.state.timeScale=.7,this.flagsB.state.timeScale=.3,this.flagsC.state.timeScale=.7,this.flagsD.state.timeScale=.3,this.flagsA.state.setAnimation(0,"Flags_Soft",!0),this.flagsB.state.setAnimation(0,"Flags_Soft",!0),this.flagsC.state.setAnimation(0,"Flags_Soft",!0),this.flagsD.state.setAnimation(0,"Flags_Soft",!0),this.flagsD.x+=7},r.prototype.setupSignals=function(){var t=this;amplify.subscribe("UpdateFreeSpinMultiplier",function(e){t.shake(e.multiplier)}),amplify.subscribe("RecoveredFreeSpinsSignal",function(){t.showFreeSpinCabinet()}),amplify.subscribe("StartFreeSpinsSignal",function(){t.showFreeSpinCabinet()}),amplify.subscribe("StopFreeSpinsSignal",function(){t.showBaseGameCabinet()}),amplify.subscribe("BigWinsStartedSignal",function(){t.switchToStrongAnimation()})},r.prototype.flash=function(){var e=this;this.flasher=new n,this.flasher.lineStyle(2,16777215,1),this.flasher.beginFill(16777215,1),this.flasher.drawRect(0,0,10,10),this.flasher.endFill(),this.flasher.position.x=-1e3,this.flasher.position.y=-500,this.flasher.width=4e3,this.flasher.height=2e3,this.container.addChild(this.flasher),Tweener.addTween(this.flasher,{alpha:0,time:2,transition:"easeOutCubic",onComplete:function(){return e.removeFlash()}})},r.prototype.addBaseGameCabinet=function(){var e=o.createSprite(o.DB_Cabinet_01);e.setLayout("Cabinets"),this.baseGameContainer.addChild(e)},r.prototype.addFreeGameCabinet=function(){var e=o.createSprite(o.DB_Cabinet_02);e.setLayout("Cabinets"),this.freeGameContainer.addChild(e)},r.prototype.showFreeSpinCabinet=function(){var e=this;this.flash(),this.addFreeGameCabinet(),this.flagsA.visible=!1,this.flagsB.visible=!1,this.flagsC.visible=!1,this.flagsD.visible=!1,this.freeGameContainer.alpha=0,Tweener.addTween(this.freeGameContainer,{alpha:1,transition:"easeInExpo",time:.4,onComplete:function(){return e.removeBaseGameBackground()}})},r.prototype.showBaseGameCabinet=function(){this.flash(),this.flagsA.visible=!0,this.flagsB.visible=!0,this.flagsC.visible=!0,this.flagsD.visible=!0,this.freeGameContainer.removeChildren(),this.baseGameContainer.removeChildren(),this.addBaseGameCabinet()},r.prototype.removeBaseGameBackground=function(){this.baseGameContainer.removeChildren()},r.prototype.hide=function(){this.container.visible=!1},r.prototype.show=function(){this.container.visible=!0},r.prototype.shake=function(e){this.quakeMagnitudeX=e*this.directionX[e%4],this.quakeMagnitudeY=e*this.directionY[e%4],this.quakeLength=5,this.totalTime=0},r.prototype.animate=function(e){var t;this.totalTime+=e/100,this.totalTime<this.quakeLength&&(t=5*this.totalTime+Math.PI,e=1-this.totalTime/this.quakeLength,this.container.position.x=Math.sin(t)*(this.quakeMagnitudeX*e),this.container.position.y=Math.sin(t)*(this.quakeMagnitudeY*e))},r.prototype.removeFlash=function(){this.container.removeChild(this.flasher)},r.prototype.switchToStrongAnimation=function(){this.flagsA.state.setAnimation(0,"Flags_Strong",!1),this.flagsA.state.addAnimation(0,"Flags_Soft",!0,0),this.flagsB.state.setAnimation(0,"Flags_Strong",!1),this.flagsB.state.addAnimation(0,"Flags_Soft",!0,0),this.flagsC.state.setAnimation(0,"Flags_Strong",!1),this.flagsC.state.addAnimation(0,"Flags_Soft",!0,0),this.flagsD.state.setAnimation(0,"Flags_Strong",!1),this.flagsD.state.addAnimation(0,"Flags_Soft",!0,0)},e=r,t.Cabinet=e}(extrachilli=extrachilli||{}),function(s){var e,o,r,a,l,t;function i(e,t,i,n){this.container=new o,t.addChildAt(this.container,0);i=this.findCartTexture(i,n);this.shadow=new r(l.getTexture(l.SYMBOL_SHADOWS,3)),this.shadow.setLayout("MainReel/Symbol3"),this.container.addChild(this.shadow),this.cart=new r(i),this.cart.setLayout("MainReel/Symbol3"),this.container.addChild(this.cart),this.spriteContainer=new o("Symbol3Marker","ExtraReel"),this.container.addChild(this.spriteContainer),this.sprite=new r(e),11===n?this.sprite.setLayout("MainReel/Symbol3/Scatter3"):this.sprite.setLayout("MainReel/Symbol3"),this.spriteContainer.addChild(this.sprite),11===n&&(this.glowContainer=new o("Scatter_BG_3_Glow_00000","MainReel/Symbol3/Scatter3"),(e=new a(s.ExtraChilliGame.textureLoader.getAnimation(s.ExtraChilliTextureLoader.SCATTER_CART_GLOW_ANIM))).blendMode=PIXI.BLEND_MODES.ADD,e.animationSpeed=.5,e.gotoAndPlay(Math.ceil(10*Math.random())),this.glowContainer.addChild(e),this.glowContainer.setDimensions(),this.container.addChild(this.glowContainer),this.glowContainer.alpha=0),this.symIndex=n}e=s.views||(s.views={}),o=utils.ContainerWrapper,r=utils.SpriteWrapper,a=utils.AnimatedSpriteWrapper,l=s.ExtraChilliTextureLoader,i.prototype.showGlow=function(){Tweener.removeTween(this.glowContainer),this.glowContainer.alpha=1},i.prototype.fadeOutGlow=function(){Tweener.addTween(this.glowContainer,{alpha:0,time:2,transition:"easeOutSine"})},i.prototype.remove=function(){this.container.removeChildren()},i.prototype.getSymIndex=function(){return this.symIndex},i.prototype.getSprite=function(){return this.container},i.prototype.positionY=function(e){this.container.position.y=e},i.prototype.positionX=function(e){this.container.position.x=e},i.prototype.setVisible=function(e){this.container.visible=e},i.prototype.setSymbolVisible=function(e){this.sprite.visible=e},i.prototype.findCartTexture=function(e,t){return e?1!==t?l.getTexture("SYM_Extra_BG_3"):l.getTexture("Scroll_Extra_BG_3"):1!==t?l.getTexture("SYM_Main_Extra_BG_3"):l.getTexture("Scroll_Extra_BG_3")},t=i,e.CartSymbol=t}(extrachilli=extrachilli||{}),function(e){var t,n,s,i,o;function r(e,t){var i=this;this.headEmitters=[],this.delay=1,this.xPos=0,this.yPos=0,this.texture=s.STAR_PARTICLE,this.scaleMultiplier=1,this.startSpeed=100,this.container=new n,e.addChild(this.container),this.fireworkHeadContainer=new n,this.container.addChild(this.fireworkHeadContainer),this.fireworkTrailContainer=new n,this.container.addChild(this.fireworkTrailContainer),void 0!==t&&(void 0!==t.delay&&(this.delay=t.delay),void 0!==t.xPos&&(this.xPos=t.xPos),void 0!==t.yPos&&(this.yPos=t.yPos),void 0!==t.texture&&(this.texture=t.texture),void 0!==t.texture&&(this.texture=t.texture),void 0!==t.startTrailColour&&(this.startTrailColour=t.startTrailColour),void 0!==t.endTrailColour&&(this.endTrailColour=t.endTrailColour),void 0!==t.startHeadColour&&(this.startHeadColour=t.startHeadColour),void 0!==t.endHeadColour&&(this.endHeadColour=t.endHeadColour),void 0!==t.scaleMultiplier&&(this.scaleMultiplier=t.scaleMultiplier),void 0!==t.startSpeed&&(this.startSpeed=t.startSpeed)),o.setTimeout(function(){return i.createFireworkEmitters()},this.delay)}t=e.views||(e.views={}),n=utils.ContainerWrapper,s=e.ExtraChilliTextureLoader,i=utils.ParticleEmitterWrapper,o=utils.GameTimer,r.prototype.createFireworkEmitters=function(){this.createFireworkHeadEmitter(this.fireworkHeadContainer)},r.prototype.animate=function(e){for(var t=0,i=this.headEmitters;t<i.length;t++){var n=i[t];n.update(e),void 0!==n.linkedEmitter&&(0<n.parent.children.length?n.linkedEmitter.updateSpawnPos(n.parent.getChildAt(0).position.x,n.parent.getChildAt(0).position.y):n.linkedEmitter.emit=!1,n.linkedEmitter.update(e))}},r.prototype.destroy=function(){},r.prototype.createFireworkHeadEmitter=function(e){var t=1+Math.random(),t=new i(e,[s.getTexture(s.STAR_PARTICLE)],{alpha:{start:1,end:0},scale:{start:.5,end:.2,minimumScaleMultiplier:this.scaleMultiplier},color:{start:this.startHeadColour,end:this.endHeadColour},speed:{start:this.startSpeed+300*Math.random(),end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:500},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:t,max:t},blendMode:"add",frequency:.1,emitterLifetime:.2,maxParticles:1,pos:{x:this.xPos,y:this.yPos},addAtBack:!1,spawnType:"point"});this.headEmitters.push(t),this.createFireworkTrail(t)},r.prototype.createFireworkTrail=function(e){var t=new i(this.fireworkTrailContainer,[s.getTexture(s.FireWork_Particle_02)],{alpha:{start:1,end:0},scale:{start:.1,end:.005,minimumScaleMultiplier:1},color:{start:this.startTrailColour,end:this.endTrailColour},speed:{start:0,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:50},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"add",frequency:.01,emitterLifetime:e.maxLifetime-.2,maxParticles:75,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"});e.linkedEmitter=t},e=r,t.CompoundFirework=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i=genericgame.views.Menu,n=utils.ContainerWrapper,s=utils.TextWrapper,o=utils.SpriteWrapper,r=e.ExtraChilliTextureLoader,a=utils.TranslationManager,i=(__extends(l,t=i),l.prototype.setupPaytable=function(){this.pays=new e.views.Paytable(this.container),this.pays.hide()},l.prototype.addTabButtons=function(){this.tabContainer=new n("TAB_Menu","Menu/TAB_Menu"),this.container.addChild(this.tabContainer),this.paysButton=this.addTabButton({bgTextureID:r.TAB_Menu_01,bgTexturePressedID:r.TAB_Menu_01_Pressed,text:a.getString("PAYS"),fontSize:25,onClickFunction:function(){amplify.publish("OnPaysPressed")}}),this.tabContainer.addChild(this.paysButton),this.autoButton=this.addTabButton({bgTextureID:r.TAB_Menu_01,bgTexturePressedID:r.TAB_Menu_01_Pressed,text:a.getString("AUTO"),fontSize:25,onClickFunction:function(){amplify.publish("OnAutoPressed")}}),this.tabContainer.addChild(this.autoButton),this.autoButton.position.x=this.paysButton.position.x+this.paysButton.bg.width,this.optionsButton=this.addTabButton({bgTextureID:r.TAB_Menu_01,bgTexturePressedID:r.TAB_Menu_01_Pressed,text:a.getString("OPTIONS"),fontSize:25,onClickFunction:function(){amplify.publish("OnOptionsPressed")}}),this.tabContainer.addChild(this.optionsButton),this.optionsButton.position.x=this.autoButton.position.x+this.autoButton.bg.width,this.helpButton=this.addTabButton({bgTextureID:r.TAB_Menu_01,bgTexturePressedID:r.TAB_Menu_01_Pressed,text:a.getString("HELP"),fontSize:25,onClickFunction:function(){amplify.publish("OnHelpPressed")}}),this.tabContainer.addChild(this.helpButton),this.helpButton.position.x=this.optionsButton.position.x+this.optionsButton.bg.width},l.prototype.addTabButton=function(e){var t=new n("TAB_Button","Menu/TAB_Menu/TAB_Button");t.activeTexture=r.getTexture(e.bgTexturePressedID),t.inactiveTexture=r.getTexture(e.bgTextureID);var i=new o(t.inactiveTexture);return i.setLayout("Menu/TAB_Menu/TAB_Button"),t.addChild(i),t.bg=i,t.click=t.tap=function(){utils.SoundWrapper.playSound("Clicker"),e.onClickFunction()},t.interactive=!0,void 0!==e.text&&((i=new s("TAB_TEXT",t)).setText(e.text),i.setLayout("Menu/TAB_Menu/TAB_Button"),t.text=i),t},l);function l(e){e=t.call(this,e)||this;return e.auto.setLocation(73,168),e.auto.setSize(859,454),e}e.ExtraChilliMenu=i}(extrachilli=extrachilli||{}),function(e){var n,i,t,s,o,r;function a(e){this.symbols=[],this.NUM_EXTRA_SYMBOLS=4,this.cartsCleared=!1,this.numScatters=0,this.container=new t("ExtraReel","ExtraReel"),e.addChild(this.container),this.setupSignals(),this.setupMask(),this.symbolGroup=new t,this.container.addChild(this.symbolGroup),this.symbolSpacing=this.container.dimension.width/this.NUM_EXTRA_SYMBOLS,this.quickSetResult([1,2,3,4],!1)}n=e.views||(e.views={}),i=utils.SoundWrapper,t=utils.ContainerWrapper,s=utils.GraphicsWrapper,o=utils.GameTimer,r=e.ExtraChilliTextureLoader,a.prototype.setupMask=function(){var e=new t("ExtraReelMaskContainer","ExtraReel").dimension;this.masker=new s,this.container.addChild(this.masker),this.masker.beginFill(16711680,1),this.masker.drawRect(e.x,e.y,e.width,e.height),this.container.mask=this.masker},a.prototype.startSpin=function(){this.numScatters=0,this.rollOutCarts()},a.prototype.setResult=function(e,t){var i=this;this.cartsCleared?(this.cartsCleared=!1,this.addSymbolsAndRollIn(e,t)):o.setTimeout(function(){return i.setResult(e,t)},400)},a.prototype.quickSetResult=function(e,t){this.removeSymbolsTimer&&this.removeSymbols();for(var i=0;i<this.NUM_EXTRA_SYMBOLS;i++)this.removeSymbol(i);this.symbols=[];for(i=0;i<this.NUM_EXTRA_SYMBOLS;i++)e&&0===e[i]?this.symbol=new n.WildCartSymbol(r.getTexture(r.SYMBOLS,3,0),this.symbolGroup,this.inFreeSpins):e&&(this.symbol=new n.CartSymbol(r.getTexture(r.SYMBOLS,3,e[i]),this.symbolGroup,this.inFreeSpins,e[i])),this.symbol.positionY(0),this.symbol.positionX(i*this.symbolSpacing),this.symbols.push(this.symbol);t&&amplify.publish("reelStoppedSignal"),this.cartsCleared=!1},a.prototype.removeWinningSymbols=function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.extraSymbolsWinPositions.length;n++)this.removeSymbol(i.extraSymbolsWinPositions[n]);this.cartsCleared=!0},a.prototype.hideWinningSymbols=function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.extraSymbolsWinPositions.length;n++)this.hideSymbol(i.extraSymbolsWinPositions[n])},a.prototype.hideSymbol=function(e){this.symbol=this.symbols[e],null!=this.symbol&&this.symbol.setSymbolVisible(!1)},a.prototype.removeSymbol=function(e){this.symbol=this.symbols[e],null!=this.symbol&&(this.symbol.setVisible(!1),this.symbols[e]=null)},a.prototype.addSymbolsAndRollIn=function(e,t){this.addSymbols(e),this.rollInCarts(t)},a.prototype.addSymbols=function(e){for(var t=this.symbols.length;t<this.NUM_EXTRA_SYMBOLS;t++)0===e[t]?this.symbol=new n.WildCartSymbol(r.getTexture(r.SYMBOLS,3,0),this.symbolGroup,this.inFreeSpins):this.symbol=new n.CartSymbol(r.getTexture(r.SYMBOLS,3,e[t]),this.symbolGroup,this.inFreeSpins,e[t]),this.symbol.positionY(0),this.symbol.positionX(700),this.symbols.push(this.symbol)},a.prototype.removeSymbols=function(){this.removeSymbolsTimer&&(o.clearTimeout(this.removeSymbolsTimer),this.removeSymbolsTimer=null),this.symbolGroup.removeChildren(),this.symbols=[],this.symbol=null,this.cartsCleared=!0,i.fadeSound("CartMove",1,0,1e3)},a.prototype.collapse=function(){for(var e=0;e<this.symbols.length;)null!=this.symbols[e]?e++:this.symbols.splice(e,1)},a.prototype.rollOutCarts=function(){for(var e=this,t=0;t<this.NUM_EXTRA_SYMBOLS;t++)this.symbols[t]&&Tweener.addTween(this.symbols[t].getSprite(),{x:-300,delay:0,time:.4-.005*t,transition:"easeInBack"});i.playSound("CartMove"),this.removeSymbolsTimer=o.setTimeout(function(){return e.removeSymbols()},400)},a.prototype.rollInCarts=function(n){for(var s=this,o=this,e=0;e<this.NUM_EXTRA_SYMBOLS;e++)!function(e){var t,i;o.symbols[e]&&(t=o.symbols[e],i=(n?0:1.5)+.03*e,Tweener.addTween(o.symbols[e].getSprite(),{x:e*o.symbolSpacing,delay:i,time:.4,transition:"easeOutBack",onComplete:function(){return s.playCartHitSound(e,!n)}}),11!==t.getSymIndex()||t.rolledIn||(t.showGlow(),t.fadeOutGlow(),t.rolledIn=!0))}(e)},a.prototype.playCartHitSound=function(e,t){1===e?i.playSound("Cart123",.5):3===e&&t&&amplify.publish("reelStoppedSignal")},a.prototype.setupSignals=function(){var i=this;amplify.subscribe("RecoveredFreeSpinsSignal",function(){i.inFreeSpins=!0}),amplify.subscribe("FreeSpinsRetriggered",function(){for(var e=0;e<i.NUM_EXTRA_SYMBOLS;e++){var t=i.symbols[e];11===t.getSymIndex()&&t.showGlow()}}),amplify.subscribe("StartFreeSpinsSignal",function(){i.inFreeSpins=!0}),amplify.subscribe("StopFreeSpinsSignal",function(){i.inFreeSpins=!1})},e=a,n.ExtraReel=e}(extrachilli=extrachilli||{}),function(e){var t,s,o,i,n,r,a;function l(e){this.freeSpinsAwarded=[8,12,16,20,24],this.currentFreeSpinsAwarded=0,this.currentIndex=0,this.container=new o,e.addChild(this.container),this.setup(),this.hide()}t=e.views||(e.views={}),s=genericgame.GenericGame,o=utils.ContainerWrapper,i=utils.SoundWrapper,n=utils.GameTimer,r=e.ExtraChilliTextureLoader,a=utils.TextWrapper,l.prototype.hide=function(){this.container.visible=!1},l.prototype.show=function(e){this.container.visible=!0;for(var t=this.freeSpinsAwarded.indexOf(e),i=0;i<this.xMarks.length;i++)this.xMarks[i].visible=i<t;this.wheel.displayWheel(t),this.gambleArea.displayGamble(t)},l.prototype.setup=function(){this.setupSignals(),this.gambleScreenContainer=new o("ExtraChilliScreen","ExtraChilliScreen"),this.container.addChild(this.gambleScreenContainer),s.textureLoader.TextureLayouts.addAllSpritesToContainer("ExtraChilliScreen",this.gambleScreenContainer),this.gambleScreenContainer.findChild({id:"ECS_X_01"}).visible=!1,s.textureLoader.TextureLayouts.addAllTextToContainer("ExtraChilliScreen",this.gambleScreenContainer);var e=this.gambleScreenContainer.findChild({id:"FREE_SPINS_GAMBLE"},a);e.style.wordWrap=!1,e.setText(e.text.toUpperCase()),this.xMarks=[];for(var t=0;t<4;t++){var i=new o("XMarker"+(t+1),"ExtraChilliScreen");this.gambleScreenContainer.addChild(i);var n=r.createSprite(r.ECS_X_01,"ExtraChilliScreen");i.addChild(n),i.visible=!1,this.xMarks.push(i)}this.setupWheel(),this.setupClacker(),this.setupGambleArea()},l.prototype.setupSignals=function(){var t=this;amplify.subscribe("ShowGambleFeature",function(e){e.freeSpinsAwarded<24?t.show(e.freeSpinsAwarded):24===e.freeSpinsAwarded&&amplify.publish("FeatureGambleComplete"),e.starting&&t.gambleArea.setOff()}),amplify.subscribe("StartGambleFeature",function(){t.gambleArea.setActive()}),amplify.subscribe("GambleSucceeded",function(e){t.gambleSuccess=!0,t.currentFreeSpinsAwarded=e.freeSpinsAwarded,t.wheel.setResult(!0)}),amplify.subscribe("GambleFailed",function(e){t.gambleSuccess=!1,t.currentFreeSpinsAwarded=e.freeSpinsAwarded,t.wheel.setResult(!1)}),amplify.subscribe("FeatureCollectClicked",function(){t.gambleArea.setOff()}),amplify.subscribe("FeatureGambleClicked",function(){t.showGamble(),t.currentIndex++,t.wheel.spinWheel()}),amplify.subscribe("RecoveredFeatureGamble",function(){t.showGamble(),t.currentIndex++,t.wheel.spinWheel()}),amplify.subscribe("FeatureGambleFinished",function(){t.hide()}),amplify.subscribe("GambleWheelFinished",function(){t.wheelFinished()}),amplify.subscribe("SetGambleWinBGOn",function(){t.setGambleWinBGOn()}),amplify.subscribe("SetGambleWinBGOff",function(){t.setGambleWinBGOff()}),amplify.subscribe("ClackerHit",function(){t.clackerHit()})},l.prototype.gambleFailed=function(){amplify.publish("FeatureGambleComplete")},l.prototype.animate=function(e){this.wheel.animate(e)},l.prototype.setupWheel=function(){this.wheel=new t.GambleWheel(this.gambleScreenContainer)},l.prototype.wheelFinished=function(){var e=this;this.gambleSuccess?this.currentFreeSpinsAwarded===this.freeSpinsAwarded[this.freeSpinsAwarded.length-1]?n.setTimeout(function(){amplify.publish("FeatureGambleComplete")},2e3):this.show(this.currentFreeSpinsAwarded):0===this.currentFreeSpinsAwarded?n.setTimeout(function(){return e.gambleFailed()},2e3):n.setTimeout(function(){amplify.publish("FeatureGambleComplete")},2e3)},l.prototype.showGamble=function(){this.gambleArea.showGambling()},l.prototype.setGambleWinBGOn=function(){this.gambleArea.setWinBGOn()},l.prototype.setGambleWinBGOff=function(){this.gambleArea.setWinBGOff()},l.prototype.clackerHit=function(){Tweener.removeTween(this.clackerContainer),this.clackerContainer.rotation=-Math.PI/7,Tweener.addTween(this.clackerContainer,{rotation:0,time:.75}),i.stopSound("Clacker1"),i.stopSound("Clacker2"),i.playSound("Clacker1"),i.playSound("Clacker2")},l.prototype.setupClacker=function(){this.clackerContainer=new o("ClackerGroup","ExtraChilliScreen/ClackerGroup"),this.gambleScreenContainer.addChildAt(this.clackerContainer,2),this.clacker=r.createSprite(r.Clacker),this.clackerContainer.addChild(this.clacker),this.clacker.setLayout("ExtraChilliScreen/ClackerGroup")},l.prototype.setupGambleArea=function(){this.gambleArea=new t.GambleArea(this.gambleScreenContainer)},e=l,t.FeatureGamble=e}(extrachilli=extrachilli||{}),function(t){var e,i,n,s,o,r,a;function l(e){this.freeSpinsAwardedTextures=[t.ExtraChilliTextureLoader.NUM_Green_8,t.ExtraChilliTextureLoader.NUM_Green_12,t.ExtraChilliTextureLoader.NUM_Blue_16,t.ExtraChilliTextureLoader.NUM_Red_20,t.ExtraChilliTextureLoader.NUM_Purple_24,t.ExtraChilliTextureLoader.NUM_Purple_28],this.freeSpinsAwardedIndex=[8,12,16,20,24,28],this.container=new n("GambleIntro","GambleIntro"),e.addChild(this.container),this.setupSignals(),this.setupWindow(),this.hide()}e=t.views||(t.views={}),i=utils.SpriteWrapper,n=utils.ContainerWrapper,s=genericgame.GenericGame,o=utils.TextWrapper,r=t.ExtraChilliTextureLoader,l.prototype.setupWindow=function(){this.windowBG=r.createSprite(r.FreeSpinWindow_BG_01,"GambleIntro"),this.container.addChild(this.windowBG),s.textureLoader.TextureLayouts.addAllTextToContainer("GambleIntro",this.container),this.startButton=this.addButton(),this.container.addChild(this.startButton),this.freeSpinAmountContainer=new n("FreeSpinsNumbers","GambleIntro/FreeSpinsNumbers"),this.container.addChild(this.freeSpinAmountContainer),this.freeSpinsAwardedSprites=[];for(var e=0;e<this.freeSpinsAwardedTextures.length;e++){var t=r.createSprite(this.freeSpinsAwardedTextures[e]);t.setLayout("GambleIntro/FreeSpinsNumbers"),this.freeSpinAmountContainer.addChild(t),this.freeSpinsAwardedSprites.push(t)}},l.prototype.setupSignals=function(){var t=this;amplify.subscribe("ShowFeatureGambleWindow",function(e){t.freeSpinsAwarded=e.freeSpinsAwarded,t.show(t.freeSpinsAwarded)}),amplify.subscribe("FeatureGambleStartRecovered",function(){t.hide()}),amplify.subscribe("FeatureGambleStartClicked",function(){t.hide(),amplify.publish("ShowGambleFeature",{freeSpinsAwarded:t.freeSpinsAwarded,starting:!0})})},l.prototype.show=function(e){this.showAward(e),this.startButton.interactive=this.startButton.handCurser=!0,this.container.alpha=1,this.windowBG.alpha=1,this.startButton.alpha=1},l.prototype.hide=function(){this.container.alpha=0,this.startButton.interactive=this.startButton.handCurser=!1},l.prototype.addButton=function(){var e=new n("ButtonOK","GambleIntro/ButtonOK"),t=new i(r.getTexture(r.ECS_Button_A));return t.setLayout("GambleIntro/ButtonOK"),e.addChild(t),e.click=e.tap=function(){amplify.publish("FeatureGambleStartClicked")},new o("OK",e).setLayout("GambleIntro/ButtonOK"),e},l.prototype.showAward=function(e){this.hideAllAwards(),this.freeSpinsAwardedSprites[this.freeSpinsAwardedIndex.indexOf(e)].visible=!0},l.prototype.hideAllAwards=function(){for(var e=0;e<this.freeSpinsAwardedTextures.length;e++)this.freeSpinsAwardedSprites[e].visible=!1},a=l,e.FeatureGambleWindow=a}(extrachilli=extrachilli||{}),function(e){var t,n,s,i,o,r;function a(e,t){var i=this;this.colours=["#ff0000","#ff00d5","#ae00ff","#3300ff","#006fff","#00ffee","#00ff48","#8cff00","#eaff00","#ff7b00"],this.delay=1,this.xPos=0,this.yPos=0,this.scaleMultiplier=1,this.texture=s.STAR_PARTICLE,this.startSpeed=200,this.maxSpeed=0,this.speedMultiplier=1,this.lifeTimeMultiplier=1,this.startScale=.2,this.endScale=.4,this.container=new n,e.addChild(this.container),void 0!==t&&(void 0!==t.delay&&(this.delay=t.delay),void 0!==t.xPos&&(this.xPos=t.xPos),void 0!==t.yPos&&(this.yPos=t.yPos),void 0!==t.texture&&(this.texture=t.texture),void 0!==t.scaleMultiplier&&(this.scaleMultiplier=t.scaleMultiplier),void 0!==t.startScale&&(this.startScale=t.startScale),void 0!==t.endScale&&(this.endScale=t.endScale),void 0!==t.startSpeed&&(this.startSpeed=t.startSpeed),void 0!==t.maxSpeed&&(this.maxSpeed=t.maxSpeed),void 0!==t.speedMultiplier&&(this.speedMultiplier=t.speedMultiplier),void 0!==t.lifeTimeMultiplier&&(this.lifeTimeMultiplier=t.lifeTimeMultiplier)),o.setTimeout(function(){return i.createFireworkEmitter()},this.delay)}t=e.views||(e.views={}),n=utils.ContainerWrapper,s=genericgame.TextureLoader,i=utils.ParticleEmitterWrapper,o=utils.GameTimer,r=e.ExtraChilliTextureLoader,a.prototype.createFireworkEmitter=function(){this.emitter=new i(this.container,[r.getTexture(this.texture)],{alpha:{start:1,end:0},scale:{start:this.startScale,end:this.endScale,minimumScaleMultiplier:1},color:{start:"#f8ffd6",end:this.colours[Math.floor(Math.random()*this.colours.length)]},speed:{start:this.startSpeed+this.maxSpeed*Math.random(),end:0,minimumSpeedMultiplier:this.speedMultiplier},acceleration:{x:0,y:100},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:2},blendMode:"add",frequency:.001*this.lifeTimeMultiplier,emitterLifetime:.1*this.lifeTimeMultiplier,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:this.xPos,y:this.yPos,r:5}}),this.emitter.emit=!0},a.prototype.animate=function(e){void 0!==this.emitter&&this.emitter.update(e)},a.prototype.destroy=function(){this.emitter.destroy(),this.container.parent.removeChild(this.container),delete this.container,delete this.emitter},e=a,t.Firework=e}(extrachilli=extrachilli||{}),function(t){var e,n,s,o,i;function r(e){this.freeSpinsAwardedTextures=[t.ExtraChilliTextureLoader.NUM_Green_8,t.ExtraChilliTextureLoader.NUM_Green_12,t.ExtraChilliTextureLoader.NUM_Blue_16,t.ExtraChilliTextureLoader.NUM_Red_20,t.ExtraChilliTextureLoader.NUM_Purple_24,t.ExtraChilliTextureLoader.NUM_Purple_28],this.freeSpinsAwardedIndex=[8,12,16,20,24,28],this.container=new n("FeatureIntro","FeatureIntro"),e.addChild(this.container),this.setupSignals(),this.setupWindow(),this.hide()}e=t.views||(t.views={}),n=utils.ContainerWrapper,s=t.ExtraChilliTextureLoader,o=utils.TextWrapper,r.prototype.setupWindow=function(){this.windowBG=s.createSprite(s.FreeSpinWindow_BG_02),this.windowBG.setLayout("FeatureIntro"),this.container.addChild(this.windowBG),new o("FREE_SPINS_AWARDED",this.container).setLayout("FeatureIntro"),new o("FEATURE_INTRO_TITLE_1",this.container).setLayout("FeatureIntro"),new o("FEATURE_INTRO_INFO_0",this.container).setLayout("FeatureIntro"),new o("FEATURE_INTRO_INFO_1",this.container).setLayout("FeatureIntro"),this.startButton=this.addButton(),this.container.addChild(this.startButton),this.freeSpinAmountContainer=new n("FreeSpinsNumbers","FeatureIntro/FreeSpinsNumbers"),this.container.addChild(this.freeSpinAmountContainer),this.freeSpinsAwardedSprites=[];for(var e=0;e<this.freeSpinsAwardedTextures.length;e++){var t=s.createSprite(this.freeSpinsAwardedTextures[e]);t.setLayout("FeatureIntro/FreeSpinsNumbers"),this.freeSpinAmountContainer.addChild(t),this.freeSpinsAwardedSprites.push(t)}var i=this.freeSpinsAwardedSprites[0].layoutEntry;this.freeSpinsAwardedText=new o("",this.freeSpinAmountContainer,{font:"normal_bold 100px Arial",align:"center",fill:"0xEFEFEF"},{x:i.x,y:i.y+i.height/2,width:i.width,height:i.height,anchorY:.5}),this.freeSpinsAwardedText.visible=!1},r.prototype.setupSignals=function(){var t=this;amplify.subscribe("ShowFreeSpinsWindow",function(e){t.freeSpinsAwarded=e.freeSpinsAwarded,t.show(t.freeSpinsAwarded)}),amplify.subscribe("FreeSpinsStartClicked",function(){t.hide()})},r.prototype.show=function(e){this.showAward(e),this.startButton.interactive=this.startButton.handCurser=!0,this.container.alpha=1,this.windowBG.alpha=1,this.startButton.alpha=1},r.prototype.hide=function(){this.container.alpha=0,this.startButton.interactive=this.startButton.handCurser=!1},r.prototype.addButton=function(){var e=new n("ButtonStart","FeatureIntro/ButtonStart"),t=s.createSprite(s.BUT_StartFreeSpin_01_BG_01);t.setLayout("FeatureIntro/ButtonStart"),e.addChild(t);t=s.createSprite(s.BUT_StartFreeSpin_01);return t.setLayout("FeatureIntro/ButtonStart"),e.addChild(t),e.click=e.tap=function(){amplify.publish("FreeSpinsStartClicked")},new o("START",e).setLayout("FeatureIntro/ButtonStart"),e},r.prototype.showAward=function(e){this.hideAllAwards();var t=this.freeSpinsAwardedSprites[this.freeSpinsAwardedIndex.indexOf(e)];t?t.visible=!0:(this.freeSpinsAwardedText.setText(""+e),this.freeSpinsAwardedText.visible=!0)},r.prototype.hideAllAwards=function(){for(var e=0;e<this.freeSpinsAwardedTextures.length;e++)this.freeSpinsAwardedSprites[e].visible=!1;this.freeSpinsAwardedText.visible=!1},i=r,e.FreeSpinsWindow=i}(extrachilli=extrachilli||{}),function(a){var l,t,r,i,n,u,h,p,e;function s(e){this.fireworks=[],this.fireworksXPos=[[],[],[.1,.9],[.1,.5,.9]],this.colours=["#ff0000","#ff00d5","#ae00ff","#3300ff","#006fff","#00ffee","#00ff48","#8cff00","#eaff00","#ff7b00"],this.container=new t("MainReel","MainReel"),e.addChild(this.container),this.fireworksContainer=new t,this.container.addChild(this.fireworksContainer),this.bigNumbersContainer=new t,this.container.addChild(this.bigNumbersContainer),this.width=this.container.dimension.width,this.height=this.container.dimension.height,this.multipliers=[],this.flasher=new i,this.flasher.beginFill(16777215,.2),this.flasher.drawRect(0,0,10,10),this.flasher.endFill(),this.flasher.blendMode=n.ADD,this.flasher.visible=!1,this.flasher.position.x=-1e3,this.flasher.position.y=-500,this.flasher.width=4e3,this.flasher.height=2e3,this.container.addChild(this.flasher),this.setupSignals()}l=a.views||(a.views={}),t=utils.ContainerWrapper,r=utils.SpriteWrapper,i=utils.GraphicsWrapper,n=utils.BLEND_MODE,u=utils.SoundWrapper,h=utils.GameTimer,p=a.ExtraChilliTextureLoader,s.prototype.animate=function(e){for(var t=.001*e,i=0,n=this.fireworks;i<n.length;i++)n[i].animate(t)},s.prototype.setMultiplier=function(t){var i=this;this.removeAll(),this.bigNumbersContainer.alpha=1,this.times=new r(p.getTexture(p.NUM_X)),this.times.setLayout("Main_CounterNumbers"),this.times.anchor.set(.5),this.times.position.x=this.times.width/2,this.times.position.y=this.times.height/2,this.bigNumbersContainer.addChild(this.times),this.multipliers.push(this.times);for(var e=t.toString(),n=0;n<e.length;n++){var s=new r(p.getTexture(p.NUM+e[n]));s.setLayout("Main_CounterNumbers"),s.anchor.set(.5),s.position.x=this.multipliers[this.multipliers.length-1].position.x+.7*s.width,s.position.y=s.height/2,this.bigNumbersContainer.addChild(s),this.multipliers.push(s)}this.centerNumbers();for(var o=this,n=0;n<this.multipliers.length;n++)!function(e){Tweener.addTween(o.multipliers[e],{transition:"easeInQuint",delay:.5+.05*(e+1),time:.1*(e+1),width:o.multipliers[e].width,height:o.multipliers[e].height,alpha:1,onComplete:function(){return i.addFireworks(t,e,i.multipliers.length)}}),o.multipliers[e].width*=2,o.multipliers[e].height*=2,o.multipliers[e].alpha=0}(n);h.setTimeout(function(){return i.updateMultiplier()},150*this.multipliers.length+500),Tweener.addTween(this.bigNumbersContainer,{alpha:0,delay:1,transition:"easeInQuint",time:.75})},s.prototype.updateMultiplier=function(){amplify.publish("UpdateFreeSpinMultiplier",{multiplier:a.ExtraChilliGame.model.freeSpinWinMultiplier})},s.prototype.removeAll=function(){this.bigNumbersContainer.removeChildren(),this.clearFireworks(),this.multipliers=[],this.times=null},s.prototype.setupSignals=function(){var t=this;amplify.subscribe("SetFreeSpinMultiplier",function(e){t.setMultiplier(e.multiplier)}),amplify.subscribe("OnStakePlusPressed",function(){})},s.prototype.centerNumbers=function(){this.bigNumbersContainer.position.x=(this.width-this.bigNumbersContainer.width)/2,this.bigNumbersContainer.position.y=(this.height-this.bigNumbersContainer.height)/2},s.prototype.addFireworks=function(e,t,i){var n;if(this.flashDelays=[],(n={}).xPos=this.container.dimension.width*this.fireworksXPos[i][t],n.yPos=Math.random()*this.container.dimension.height/3,n.delay=0,n.texture=a.ExtraChilliTextureLoader.FireWork_Particle_01,n.startHeadColour=this.getRandomColour(),n.endHeadColour=this.getRandomColour(),n.startTrailColour=this.getRandomColour(),n.endTrailColour=this.getRandomColour(),utils.DeviceInfo.onIPhone()||utils.DeviceInfo.onAndroid())e*=2;else for(var s=Math.ceil(e+4),o=0;o<s;o++)this.fireworks.push(new l.CompoundFirework(this.fireworksContainer,n));for(var r=Math.ceil(e/4),o=0;o<r;o++)(n={}).xPos=Math.random()*this.container.dimension.width,n.yPos=Math.random()*this.container.dimension.height/3,n.delay=200*o*Math.random(),this.flashDelays.push(n.delay),n.texture=.5<Math.random()?a.ExtraChilliTextureLoader.FireWork_Particle_02:a.ExtraChilliTextureLoader.FireWork_Particle_01,n.texture===a.ExtraChilliTextureLoader.FireWork_Particle_02&&(n.startScale=.05,n.endScale=.1,n.speedMultiplier=.01,n.startSpeed=100,n.lifeTimeMultiplier=.1),this.fireworks.push(new l.Firework(this.fireworksContainer,n)),h.setTimeout(function(){u.playSound("OneShot"+Math.floor(9*Math.random()))},n.delay+250);this.queueFlashing()},s.prototype.clearFireworks=function(){for(var e=0,t=this.fireworks;e<t.length;e++)t[e].destroy();this.fireworks=[]},s.prototype.getRandomColour=function(){return this.colours[Math.floor(Math.random()*this.colours.length)]},s.prototype.flash=function(){var e=this;Tweener.removeTween(this.flasher),this.flasher.alpha=1,this.flasher.visible=!0,Tweener.addTween(this.flasher,{alpha:0,time:2,transition:"easeOutCubic",onComplete:function(){return e.removeFlash()}})},s.prototype.removeFlash=function(){this.flasher.visible=!1},s.prototype.queueFlashing=function(){var e=this;this.flash(),this.flashDelays.length&&h.setTimeout(function(){return e.queueFlashing()},this.flashDelays.shift())},e=s,l.FreeSpinsWinMultiplier=e}(extrachilli=extrachilli||{}),function(t){var e,i,n,s,o,r;function a(e){this.gambleTextures=[[t.ExtraChilliTextureLoader.NUM_Green_12,t.ExtraChilliTextureLoader.NUM_Black_0],[t.ExtraChilliTextureLoader.NUM_Blue_16,t.ExtraChilliTextureLoader.NUM_Black_0],[t.ExtraChilliTextureLoader.NUM_Red_20,t.ExtraChilliTextureLoader.NUM_Black_8],[t.ExtraChilliTextureLoader.NUM_Purple_24,t.ExtraChilliTextureLoader.NUM_Black_12]],this.collectTextures=[t.ExtraChilliTextureLoader.NUM_Green_8,t.ExtraChilliTextureLoader.NUM_Green_12,t.ExtraChilliTextureLoader.NUM_Blue_16,t.ExtraChilliTextureLoader.NUM_Red_20],this.gambleBGTextures=[[t.ExtraChilliTextureLoader.GambleSlot_Green,t.ExtraChilliTextureLoader.GambleSlot_Black],[t.ExtraChilliTextureLoader.GambleSlot_Blue,t.ExtraChilliTextureLoader.GambleSlot_Black],[t.ExtraChilliTextureLoader.GambleSlot_Red,t.ExtraChilliTextureLoader.GambleSlot_Black],[t.ExtraChilliTextureLoader.GambleSlot_Purple,t.ExtraChilliTextureLoader.GambleSlot_Black]],this.container=new i("GambleArea","ExtraChilliScreen/GambleArea"),e.addChild(this.container),this.setup()}e=t.views||(t.views={}),i=utils.ContainerWrapper,n=utils.TextWrapper,s=utils.GameTimer,o=t.ExtraChilliTextureLoader,a.prototype.setWinBGOn=function(){this.activeWinBG.visible=!0,this.activeLoseBG.visible=!1},a.prototype.setWinBGOff=function(){this.activeWinBG.visible=!1,this.activeLoseBG.visible=!0},a.prototype.setOff=function(){s.clearInterval(this.flashTimer),this.numWin&&(this.numWin.visible=!1),this.numLose&&(this.numLose.visible=!1),this.numCollect&&(this.numCollect.visible=!1),this.loseBG&&(this.loseBG.visible=!1),this.activeLoseBG&&(this.activeLoseBG.visible=!1),this.winBG&&(this.winBG.visible=!1),this.activeWinBG&&(this.activeWinBG.visible=!1),this.collectBG&&(this.collectBG.visible=!1),this.activeCollectBG&&(this.activeCollectBG.visible=!1),this.collectButton.visible=this.collectButton.interactive=!1,this.gambleButton.visible=this.gambleButton.interactive=!1,this.collectLozengeContainer.visible=!1,this.gambleLozengeContainer.visible=!1},a.prototype.setActive=function(){this.setOff(),this.numWin&&(this.numWin.visible=!0),this.numLose&&(this.numLose.visible=!0),this.numCollect&&(this.numCollect.visible=!0),this.loseBG&&(this.loseBG.visible=!0),this.activeLoseBG&&(this.activeLoseBG.visible=!0),this.winBG&&(this.winBG.visible=!0),this.activeWinBG&&(this.activeWinBG.visible=!0),this.collectBG&&(this.collectBG.visible=!0),this.activeCollectBG&&(this.activeCollectBG.visible=!0),this.collectButton.visible=this.collectButton.interactive=!0,this.gambleButton.visible=this.gambleButton.interactive=!0,this.collectLozengeContainer.visible=!0,this.gambleLozengeContainer.visible=!0,this.gambleLozengeContainer.position.x=this.gambleLozengeContainer.dimension.x,this.toggleFlash=!1,this.startFlash()},a.prototype.showGambling=function(){this.setOff(),this.gambleLozengeContainer.visible=!0,this.numWin.visible=!0,this.numLose.visible=!0,this.winBG.visible=!0,this.loseBG.visible=!0,this.centerGambleLozenge()},a.prototype.setup=function(){this.bg=o.createSprite(o.ECS_Panel_02,"ExtraChilliScreen/GambleArea"),this.container.addChild(this.bg),this.addGambleLozenge(),this.addGambleButton(),this.addCollectLozenge(),this.addCollectButton()},a.prototype.addGambleLozenge=function(){var e="ExtraChilliScreen/GambleArea/GambleLosange";this.gambleLozengeContainer=new i("GambleLosange",e),this.container.addChild(this.gambleLozengeContainer),this.gambleWinMarkerContainer=new i("SlotWinMarker",e),this.gambleLoseMarkerContainer=new i("SlotLoseMarker",e),this.gambleLozengeContainer.addChild(this.gambleWinMarkerContainer),this.gambleLozengeContainer.addChild(this.gambleLoseMarkerContainer),this.gambleLozengeContainer.addChild(o.createSprite(o.GlassLosange_01,e))},a.prototype.addCollectLozenge=function(){var e="ExtraChilliScreen/GambleArea/CollectLosange";this.collectLozengeContainer=new i("CollectLosange",e),this.container.addChild(this.collectLozengeContainer),this.collectMarkerContainer=new i("SlotCollectMarker",e),this.collectLozengeContainer.addChild(this.collectMarkerContainer),this.collectLozengeContainer.addChild(o.createSprite(o.GlassLosange_01,e))},a.prototype.addGambleButton=function(){var e="ExtraChilliScreen/GambleArea/ButtonGamble";this.gambleButton=new i("ButtonGamble",e),this.container.addChild(this.gambleButton),this.gambleButton.addChild(o.createSprite(o.ECS_Button_A,e)),this.gambleFlash=o.createSprite(o.ECS_Button_A_Pressed,e),this.gambleFlash.visible=!0,this.gambleFlash.alpha=0,this.gambleButton.addChild(this.gambleFlash),new n("GAMBLE",this.gambleButton).setLayout(e),this.gambleButton.click=this.gambleButton.tap=function(){amplify.publish("FeatureGambleClicked")}},a.prototype.addCollectButton=function(){var e="ExtraChilliScreen/GambleArea/ButtonCollect";this.collectButton=new i("ButtonCollect",e),this.container.addChild(this.collectButton),this.collectButton.addChild(o.createSprite(o.ECS_Button_A,e)),this.collectFlash=o.createSprite(o.ECS_Button_A_Pressed,e),this.collectFlash.visible=!0,this.collectFlash.alpha=0,this.collectButton.addChild(this.collectFlash),new n("COLLECT",this.collectButton).setLayout(e),this.collectButton.click=this.collectButton.tap=function(){amplify.publish("FeatureCollectClicked")}},a.prototype.addWinElements=function(e,t){this.gambleWinMarkerContainer.removeChildren(),this.winBG=o.createSprite(t),this.winBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.gambleWinMarkerContainer.addChild(this.winBG),this.activeWinBG=o.createSprite(t+"_Active"),this.activeWinBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.gambleWinMarkerContainer.addChild(this.activeWinBG),this.numWin=o.createSprite(e),this.numWin.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Numbers"),this.gambleWinMarkerContainer.addChild(this.numWin)},a.prototype.addLoseElements=function(e,t){this.gambleLoseMarkerContainer.removeChildren(),this.loseBG=o.createSprite(t),this.loseBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.gambleLoseMarkerContainer.addChild(this.loseBG),this.activeLoseBG=o.createSprite(t+"_Active"),this.activeLoseBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.gambleLoseMarkerContainer.addChild(this.activeLoseBG),this.numLose=o.createSprite(e),this.numLose.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Numbers"),this.gambleLoseMarkerContainer.addChild(this.numLose)},a.prototype.addCollectElements=function(e){this.collectMarkerContainer.removeChildren(),this.collectBG=o.createSprite(o.GambleSlot_Black),this.collectBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.collectMarkerContainer.addChild(this.collectBG),this.activeCollectBG=o.createSprite(o.GambleSlot_Black),this.activeCollectBG.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Slots"),this.collectMarkerContainer.addChild(this.activeCollectBG),this.numCollect=o.createSprite(e),this.numCollect.setLayout("ExtraChilliScreen/GambleArea/GambleSlot/Numbers"),this.collectMarkerContainer.addChild(this.numCollect)},a.prototype.displayGamble=function(e){this.setNumbers(e)},a.prototype.setNumbers=function(e){var t=this.gambleTextures[e],i=this.gambleBGTextures[e];t&&(this.addWinElements(t[0],i[0]),this.addLoseElements(t[1],i[1]));e=this.collectTextures[e];this.addCollectElements(e),this.setActive()},a.prototype.centerGambleLozenge=function(){var e=this.bg.width/2-this.gambleLozengeContainer.width/2;Tweener.addTween(this.gambleLozengeContainer,{x:e})},a.prototype.startFlash=function(){var e=this;this.flashTimer=s.setInterval(function(){return e.toggleButtonFlash()},1e3)},a.prototype.toggleButtonFlash=function(){this.toggleFlash?this.flashButton(this.gambleFlash):this.flashButton(this.collectFlash),this.toggleFlash=!this.toggleFlash},a.prototype.flashButton=function(e){Tweener.addTween(e,{time:.3,alpha:1}),Tweener.addTween(e,{time:.5,alpha:0,delay:.5})},r=a,e.GambleArea=r}(extrachilli=extrachilli||{}),function(e){var t,i,n,s,o;function r(e){this.NUM_WHEELS=4,this.wheels=[],this.FAILURE_WHEEL_TARGETS=[[18,90,162,234,306],[18,90,162,234],[18,90,162,234],[18,90,162,234]],this.SUCCESS_WHEEL_TARGETS=[[54,126,198,270,342],[126,198,270,306,342],[126,198,270,306,342],[126,198,270,306,342]],this.target=-1,this.PI_2=2*Math.PI,this.DEGRRES_TO_RADIANS=Math.PI/180,this.RADIAN_TO_DEGREES=180/Math.PI,this.clackerHitDegrees=0,this.container=new i("Wheel","ExtraChilliScreen/Wheel"),e.addChildAt(this.container,1),this.addMask(e,new i("WheelMask","ExtraChilliScreen").dimension),this.addWheels(),this.container.setDimensions()}t=e.views||(e.views={}),i=utils.ContainerWrapper,n=utils.GraphicsWrapper,s=utils.GameTimer,o=e.ExtraChilliTextureLoader,r.prototype.addWheels=function(){var e;this.wheelContainer=new i,this.container.addChild(this.wheelContainer);for(var t=0;t<this.NUM_WHEELS;t++)(e=o.createSprite("ExtraChilliScreen/Wheel_0"+(t+1))).position.x=-e.width/2,e.position.y=-e.height/2,this.wheelContainer.addChild(e),this.wheels.push(e);this.wheelContainer.position.x=e.width/2,this.wheelContainer.position.y=e.height/2},r.prototype.displayWheel=function(e){this.wheels[e]&&(this.wheelIndex=e,this.hideWheels(),this.wheelContainer.rotation=0,this.wheels[e].visible=!0,this.wheelContainer.rotation=-.25)},r.prototype.spinWheel=function(){this.target=-1,this.ready=!1,this.startSpin()},r.prototype.setResult=function(e){e=(e?this.SUCCESS_WHEEL_TARGETS:this.FAILURE_WHEEL_TARGETS)[this.wheelIndex];this.target=e[Math.floor(Math.random()*e.length)],this.ready&&this.finishSpin()},r.prototype.animate=function(e){},r.prototype.finishedWheel=function(){-1!==this.target&&(this.target=-1,this.ready=!1,amplify.publish("GambleWheelStopped"),s.setTimeout(function(){amplify.publish("GambleWheelFinished")},2e3))},r.prototype.hideWheels=function(){for(var e=0;e<this.NUM_WHEELS;e++)this.wheels[e].visible=!1},r.prototype.checkForLight=function(){var e=this.wheelContainer.rotation*this.RADIAN_TO_DEGREES%72,t=this.wheelContainer.rotation*this.RADIAN_TO_DEGREES;0===this.wheelIndex?0<e&&e<36?amplify.publish("SetGambleWinBGOff"):amplify.publish("SetGambleWinBGOn"):0<e&&t%360<252&&e<36?amplify.publish("SetGambleWinBGOff"):amplify.publish("SetGambleWinBGOn"),t>this.clackerHitDegrees&&(this.clackerHitDegrees=this.clackerHitDegrees+36,amplify.publish("ClackerHit"))},r.prototype.startSpin=function(){var e=this;Tweener.removeTween(this.wheelContainer),Tweener.addTween(this.wheelContainer,{rotation:-this.PI_2/15,time:1,transition:"easeInOutQuad",onUpdate:function(){return e.checkForLight()},onComplete:function(){return e.continueSpin()}})},r.prototype.continueSpin=function(){-1<this.target?this.finishSpin():this.ready=!0},r.prototype.finishSpin=function(){var e=this;this.clackerHitDegrees=0;var t=this.target*this.DEGRRES_TO_RADIANS+this.PI_2*(4+Math.floor(3*Math.random())),i=7+Math.floor(3*Math.random());Tweener.removeTween(this.wheelContainer),Tweener.addTween(this.wheelContainer,{rotation:t,time:i,transition:this.customTransitionB,onUpdate:function(){return e.checkForLight()},onComplete:function(){return e.finishedWheel()}}),s.setTimeout(function(){amplify.publish("GambleWheelSlowing")},800*i)},r.prototype.customTransitionB=function(e,t,i,n){n=(e/=n)*e,e*=n;return t+i*(3.45*e*n+-6.95*n*n+1.5*e+3*n)},r.prototype.addMask=function(e,t){var i=new n;i.beginFill(26112,1),i.drawRect(t.x,t.y,t.width,t.height),e.addChild(i),this.container.mask=i},e=r,t.GambleWheel=e}(extrachilli=extrachilli||{}),function(e){var o,a,l,t,i,n,u,s;function r(e){this.GAME_HEIGHT=1024,this.GAME_WIDTH=1443.84,this.forceWideScreen=utils.DeviceInfo.onIPhone(),this.recoveringGame=!1,this.NUM_REELS=6,this.reelsStopped=0,this.container=new l,e.addChild(this.container),this.setupSignals(),this.setupGameElements()}o=e.views||(e.views={}),a=e.models.ExtraChilliModel,l=utils.ContainerWrapper,t=genericgame.views.FeatureDropWindow,i=e.views.FreeSpinsWindow,n=utils.GameTimer,u=e.ExtraChilliGameData,r.prototype.setupGameElements=function(){this.background=new o.Background(this.container),this.setupReels(),this.extraReel=new o.ExtraReel(this.container),this.cabinet=new o.Cabinet(this.container),this.gemShower=new o.GemShower(this.container),this.megaWaysCounter=new o.MegaWaysCounter(this.container),this.freeSpinsWinMultiplier=new o.FreeSpinsWinMultiplier(this.container),this.winDisplay=new o.WinDisplay(this.container),this.featureGamble=new o.FeatureGamble(this.container),this.featureGambleWindow=new o.FeatureGambleWindow(this.container),this.freeSpinsWindow=new i(this.container),this.featureDropWindow=new t(this.container),this.menu=new e.ExtraChilliMenu(this.container)},r.prototype.resize=function(e,t){this.resizeGameView(e,t)},r.prototype.setGameRecovery=function(){this.recoveringGame=!0},r.prototype.unsetGameRecovery=function(){this.recoveringGame=!1},r.prototype.animate=function(e){for(var t=0;t<this.NUM_REELS;t++)this.reels[t].animate(e);this.winDisplay.animate(e),this.gemShower.animate(e),this.freeSpinsWinMultiplier.animate(e),this.featureGamble.animate(e)},r.prototype.startSpin=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].startSpin(0,Math.floor(4*Math.random()));this.winDisplay.startSpin(),this.extraReel.startSpin(),this.reelsStopped=0},r.prototype.setNewResults=function(e){var t=this;this.symbols=e.symbols.concat(),this.extraSymbols=e.extraSymbols.concat(),this.wins=e.wins,this.scatterOrder=e.scatterOrder.concat(),this.winMultiplier=e.freeSpinWinMultiplier;for(var i=0;i<this.NUM_REELS;i++)this.reels[i].quickSetResult(this.symbols[i].concat(),this.scatterOrder[i]);this.extraReel.setResult(this.extraSymbols,!0),this.winDisplay.setResults(e),n.setTimeout(function(){return t.allReelsStopped()},1e3)},r.prototype.setResults=function(e,t){this.wins=e.wins,this.delays=[0,0,0,0,0,0];this.symbols=e.symbols.concat(),e.extraSymbols&&(this.extraSymbols=e.extraSymbols.concat()),this.scatterOrder=e.scatterOrder.concat(),this.featureDrop=t?t.copy():null;for(var i=!1,n=0;n<this.wins.length;n++){var s=this.wins[n].payout;1===s.symIndex&&n<s.numSyms&&(i=!0)}if(this.winDisplay.setResults(e),this.recoveringGame){a.get().inFreeSpins&&(e=0<this.wins.length?e.freeSpinWinMultiplier-1:e.freeSpinWinMultiplier,amplify.publish("RecoveredFreeSpinsSignal",{multiplier:e}));for(n=0;n<this.NUM_REELS;n++)this.symbols[n]&&this.reels[n].quickSetResult(this.symbols[n].concat(),this.scatterOrder[n]);this.symbols&&this.symbols.length==u.NUM_REELS&&amplify.publish("QuickUpdateMegaWinsSignal",{symbols:this.symbols}),this.extraReel.quickSetResult(this.extraSymbols,!1),this.allReelsStopped(),this.recoveringGame=!1}else{this.delays=this.findDelays();for(n=0;n<this.delays.length;n++)this.delays[n];for(var o=0,n=0;n<this.NUM_REELS;n++){var r=void 0;this.featureDrop&&this.featureDrop.symbols.length&&(r=this.findFeatureDropSymbolByReel(this.featureDrop.symbols,n)),this.reels[n].setResult(this.symbols[n].concat(),this.scatterOrder[n],this.delays,this.lastWinReel,i,o,r),o++}this.extraReel.setResult(this.extraSymbols,!1)}},r.prototype.showInitialState=function(e){for(var t=0;t<this.NUM_REELS;t++)e.symbols[t]&&this.reels[t].quickSetResult(e.symbols[t].concat(),e.scatterOrder[t]);this.extraReel.quickSetResult(e.extraSymbols,!1),amplify.publish("QuickUpdateMegaWinsSignal",{symbols:e.symbols})},r.prototype.collapseRemainingSymbols=function(){this.extraReel.collapse();for(var e=0;e<this.NUM_REELS;e++)this.reels[e].collapse()},r.prototype.findFeatureDropSymbolByReel=function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s.reel===t)return s}return null},r.prototype.setupSignals=function(){var e=this;amplify.subscribe("reelStoppedSignal",function(){++e.reelsStopped===e.NUM_REELS+1&&e.allReelsStopped()}),amplify.subscribe("OnStakePlusPressed",function(){e.showAllSymbols()}),amplify.subscribe("OnStakeMinusPressed",function(){e.showAllSymbols()}),amplify.subscribe("OnPaysPressed",function(){e.showAllSymbols()}),amplify.subscribe("OnAutoPressed",function(){e.showAllSymbols()}),amplify.subscribe("showIntroScreenSignal",function(){e.hideNonIntroElements(),e.setupIntro()}),amplify.subscribe("IntroFinishedSignal",function(){e.showNonIntroElements()}),amplify.subscribe("ShowFreeSpinTrigger",function(){e.symbols&&e.extraSymbols&&e.scatterOrder&&(e.triggerSymbols=e.symbols.concat(),e.triggerExtraSymbols=e.extraSymbols.concat(),e.triggerScatterOrder=e.scatterOrder.concat())}),amplify.subscribe("StopFreeSpinsSignal",function(){e.triggerSymbols&&e.triggerExtraSymbols&&e.triggerScatterOrder?e.showTriggerSymbols():e.showDefaultSymbols()})},r.prototype.resizeGameView=function(e,t){var i,n,s,o,r;e<t?(n=e/(i=new l("Portrait","").dimension).width,r=(t-this.GAME_HEIGHT*n)/2,o=-i.x*n):r=(o=t/9<=e/16||this.forceWideScreen?(n=(t-.05*t)/(i=new l("LandscapeNarrow","").dimension).height,0<e-(s=this.GAME_WIDTH*n)-.1*e?(e-s)/2:10):(n=t/(i=new l("LandscapeDesktop","").dimension).height,(e-(s=this.GAME_WIDTH*n))/2),0),this.container.position.x=o,this.container.position.y=r,this.container.scale.set(n),this.winDisplay.setGameViewPosition(o,r,n),amplify.publish("GameViewResized",{w:e,h:t,posX:o,posY:r,ratio:n})},r.prototype.showNonWinningStop=function(){amplify.publish("QuickClearMegaWinsSignal"),this.wins=[];for(var e=[[2,3,4],[5,6],[2,3,4],[5,6],[2,3,4],[5,6]],t=0;t<this.NUM_REELS;t++)this.reels[t].setResult(e[t],[],[0,0,0,0,0,0],0,!1,0,null);this.extraReel.quickSetResult([7,8,7,8],!0)},r.prototype.hideNonIntroElements=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].hide()},r.prototype.showNonIntroElements=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].show()},r.prototype.setupIntro=function(){this.intro=new o.Intro(this.container)},r.prototype.showAllSymbols=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].showSymbols()},r.prototype.allReelsStopped=function(){var e=0;if(null!=this.featureDrop&&this.featureDrop.symbols.length){if(!this.recoveringGame)for(var t=0;t<this.featureDrop.symbols.length;t++)this.reels[this.featureDrop.symbols[t].reel].addExtraSymbol(e),e++;this.featureDrop.symbols=[]}n.setTimeout(function(){amplify.publish("ReelsStoppedSignal")},2e3*e)},r.prototype.removeWinningSymbols=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].removeWinningSymbols(this.wins);this.extraReel.removeWinningSymbols(this.wins),this.gemShower.showWinShower(this.wins),this.winDisplay.removeWins(this.wins)},r.prototype.showWins=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].hideWinningSymbols(this.wins);this.extraReel.hideWinningSymbols(this.wins),this.winDisplay.startWinningSymbolsShaking(this.wins)},r.prototype.findDelays=function(){return[this.lastWinReel=0,0,0,0,0,0]},r.prototype.setupReels=function(){this.reelContainer=new l("MainReel","MainReel"),this.container.addChild(this.reelContainer);var e=this.reelContainer.dimension.width/this.NUM_REELS,t=this.reelContainer.dimension.height;this.reels=[];for(var i=this.NUM_REELS-1;0<=i;i--){var n=new o.Reel(i,e,t,this.reelContainer);this.reels.push(n)}this.reels.reverse();var s=this.reelContainer.dimension;this.masker=new utils.GraphicsWrapper,this.container.addChild(this.masker),this.masker.beginFill(16711680,.4),this.masker.drawRect(s.x,s.y,s.width,s.height),this.reelContainer.mask=this.masker},r.prototype.showTriggerSymbols=function(){for(var e=0;e<this.NUM_REELS;e++)this.reels[e].setFreeSpins(!1),this.reels[e].quickSetResult(this.triggerSymbols[e],this.triggerScatterOrder[e]);this.extraReel.inFreeSpins=!1,this.extraReel.quickSetResult(this.triggerExtraSymbols,!1),amplify.publish("QuickUpdateMegaWinsSignal",{symbols:this.triggerSymbols})},r.prototype.showDefaultSymbols=function(){for(var e=[],t=0;t<this.NUM_REELS;t++)e.push(this.reels[t].showStartSymbols());this.extraReel.inFreeSpins=!1,this.extraReel.quickSetResult([1,2,3,4],!1),amplify.publish("QuickUpdateMegaWinsSignal",{symbols:e})},s=r,o.GameView=s}(extrachilli=extrachilli||{}),function(e){var t,a;function i(e,t,i,n,s,o,r){this.velocityY=0,this.GRAVITY=.6,this.rotSpeed=.6*Math.random()-.3,this.alpha=1,this.fadeSpeed=50,this.scaleFactorDif=.8,this.particle=a.createSprite(t),e.addChild(this.particle),this.particle.anchor.set(.5,.5),this.float=o,this.scale=s,this.particle.scale.set(s),this.particle.position.x=i,this.particle.position.y=n,this.particle.rotation=2*Math.PI*Math.random(),this.float?(this.rotSpeed=.05*Math.random()-.025,this.velocityY=2*Math.random()-1,this.velocityX=2*Math.random()-1,this.fadeSpeed+=20*Math.random()-10):(this.rotSpeed=.6*Math.random()-.3,this.velocityY=-8*Math.random(),this.velocityX=Math.random()-.5),this.container=e}t=e.views||(e.views={}),a=e.ExtraChilliTextureLoader,i.prototype.getY=function(){return this.particle.position.y},i.prototype.remove=function(){void 0!==this.particle&&this.container.removeChild(this.particle)},i.prototype.animate=function(e){var t;this.float?(this.alpha=this.alpha-e/this.fadeSpeed,this.scaleFactorDif+=e/50,1<(t=this.scale-(this.scaleFactorDif-1))&&(t=1)):(this.velocityY=(this.velocityY+this.GRAVITY)*e,t=this.scale),this.particle.position.x+=this.velocityX*e,this.particle.position.y+=this.velocityY*e,this.particle.rotation+=this.rotSpeed*e,this.particle.alpha=this.alpha,this.particle.scale.set(t)},i.prototype.getAlpha=function(){return this.particle.alpha},e=i,t.GemParticle=e}(extrachilli=extrachilli||{}),function(t){var a,i,e;function n(e){this.particleTexturesGems=[null,t.ExtraChilliTextureLoader.P_GemPurple_01,t.ExtraChilliTextureLoader.P_GemRed_01,t.ExtraChilliTextureLoader.P_GemBlue_01,t.ExtraChilliTextureLoader.P_GemGreen_01],this.particleTexturesDay=[t.ExtraChilliTextureLoader.SplinterDay_06,t.ExtraChilliTextureLoader.SplinterDay_05,t.ExtraChilliTextureLoader.SplinterDay_04,t.ExtraChilliTextureLoader.SplinterDay_03,t.ExtraChilliTextureLoader.SplinterDay_02,t.ExtraChilliTextureLoader.SplinterDay_01],this.particleTexturesNight=[t.ExtraChilliTextureLoader.SplinterNight_06,t.ExtraChilliTextureLoader.SplinterNight_05,t.ExtraChilliTextureLoader.SplinterNight_04,t.ExtraChilliTextureLoader.SplinterNight_03,t.ExtraChilliTextureLoader.SplinterNight_02,t.ExtraChilliTextureLoader.SplinterNight_01],this.particleScales=[[.3,.6,.4,.2,.5,.3],[.3,.6,.4,.2,.5,.3],[.3,.6,.4,.2,.5,.3],[.3,.6,.4,.2,.5,.3],[.3,.6,.4,.2,.5,.3],[.3,.6,.4,.2,.5,.3]],this.particleWeights=[[],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1]],this.particleWeightsExtraReel=[[],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1]],this.gems=[],this.container=new i,e.addChild(this.container);e=new i("MainReel","MainReel").dimension;this.REEL_X=e.x,this.REEL_Y=e.y,this.REEL_SPACING=e.width/6,this.REEL_HEIGHT=e.height,this.REEL_WIDTH=e.width,e=new i("ExtraReel","ExtraReel").dimension,this.EXTRA_REEL_X=e.x,this.EXTRA_REEL_Y=e.y,this.EXTRA_REEL_SPACING=e.width/4,this.EXTRA_REEL_HEIGHT=e.height,this.EXTRA_REEL_WIDTH=e.width,this.coalContainer=new i,this.container.addChild(this.coalContainer),this.goldContainer=new i,this.container.addChild(this.goldContainer),this.gemContainer=new i,this.container.addChild(this.gemContainer),this.particleContainers=[this.coalContainer,this.goldContainer,this.gemContainer],this.setupSignals()}a=t.views||(t.views={}),i=utils.ContainerWrapper,n.prototype.setupSignals=function(){var e=this;amplify.subscribe("RecoveredFreeSpinsSignal",function(){e.inFreeSpins=!0}),amplify.subscribe("StartFreeSpinsSignal",function(){e.inFreeSpins=!0}),amplify.subscribe("StopFreeSpinsSignal",function(){e.inFreeSpins=!1})},n.prototype.showWinShower=function(e){for(var t=0;t<e.length;t++){for(var i=e[t],n=0;n<i.positions.length;n++){var s=i.positions[n];this.addReelGemShower(i.payout.symIndex,i.numSymsInReels[s.x],s.x,Math.round(s.y))}for(n=0;n<i.extraSymbolsWinPositions.length;n++)this.addExtraReelGemShower(i.payout.symIndex,i.extraSymbolsWinPositions[n])}},n.prototype.addExtraReelGemShower=function(e,t){for(var i=this.EXTRA_REEL_X+this.EXTRA_REEL_SPACING*t,n=this.EXTRA_REEL_Y,s=this.particleWeightsExtraReel[e],o=0;o<20;o++){var r=this.findRandomWeightedIndex(s),a=void 0,a=1===e||e<5&&Math.random()<.3?this.particleTexturesGems[e]:(this.inFreeSpins?this.particleTexturesNight:this.particleTexturesDay)[r],l=-1<this.particleTexturesGems.indexOf(a)?[.6]:this.particleScales[r],u=l[Math.floor(Math.random()*l.length)],h=i+this.EXTRA_REEL_SPACING*Math.random(),l=n+this.EXTRA_REEL_HEIGHT*Math.random(),r=this.particleContainers[Math.min(r,2)];this.spawnGem(r,a,h,l,u,!1,!0)}},n.prototype.addReelGemShower=function(e,t,i,n){for(var s=this.REEL_HEIGHT/t,o=this.REEL_Y+s*n,r=this.REEL_X+this.REEL_SPACING*i,a=(8-t)/2*5,l=this.particleWeights[e],u=0;u<a;u++){var h=this.findRandomWeightedIndex(l),p=1===e||e<5&&Math.random()<.3?this.particleTexturesGems[e]:(this.inFreeSpins?this.particleTexturesNight:this.particleTexturesDay)[h],c=(m=-1<this.particleTexturesGems.indexOf(p)?[.6]:this.particleScales[h])[Math.floor(Math.random()*m.length)],d=r+this.REEL_SPACING*Math.random(),m=o+s*Math.random(),h=this.particleContainers[Math.min(h,2)];this.spawnGem(h,p,d,m,c,!1,!1)}},n.prototype.spawnGem=function(e,t,i,n,s,o,r){this.gems.push(new a.GemParticle(e,t,i,n,s,o,r))},n.prototype.findRandomWeightedIndex=function(e){for(var t=e.reduce(this.add,0),i=e.length,n=Math.ceil(t*Math.random()),s=0,o=0,r=0;r<i&&(o+=e[r])<n;r++)s++;return s},n.prototype.add=function(e,t){return e+t},n.prototype.animate=function(e){for(var t=6*e/100,i=0;i<this.gems.length;i++)this.gems[i].animate(t),(910<this.gems[i].getY()||this.gems[i].getAlpha()<=0)&&(this.gems[i].remove(),this.gems.splice(i,1),i--)},e=n,a.GemShower=e}(extrachilli=extrachilli||{}),function(i){var e,s,o,t,n,r,a,l,u,h,p;function c(e){this.container=new o("Intro","Intro"),e.addChild(this.container),this.setupSignals(),this.setup(),this.addClickHandler()}e=i.views||(i.views={}),s=utils.SpriteWrapper,o=utils.ContainerWrapper,t=utils.SoundWrapper,n=utils.GraphicsWrapper,r=utils.AnimatedSpriteWrapper,a=utils.BLEND_MODE,l=genericgame.GenericGame,u=utils.TextWrapper,h=i.ExtraChilliTextureLoader,c.prototype.addClickHandler=function(){var e=this;this.container.interactive=this.container.handCurser=!0,this.container.interactive=this.container.handCurser=!0,this.container.click=this.container.tap=function(){t.playSound("Clicker"),e.introFinished()}},c.prototype.setupSignals=function(){var e=this;amplify.subscribe("IntroFinishedSignal",function(){e.removeIntro()}),amplify.subscribe("DisplayRecoveredGameMessageSignal",function(){e.introFinished()})},c.prototype.setupBlocker=function(){this.blocker=new n,this.container.addChild(this.blocker),this.blocker.handCurser=!1,this.blocker.lineStyle(2,255,1),this.blocker.beginFill(0,.5),this.blocker.drawRect(-2e3,-2e3,4e3,4e3)},c.prototype.removeIntro=function(){this.container.removeChildren(),this.container.visible=!1},c.prototype.introFinished=function(){amplify.publish("IntroFinishedSignal")},c.prototype.setup=function(){this.setupBlocker();l.textureLoader.TextureLayouts.addAllSpritesToContainer("Intro",this.container),l.textureLoader.TextureLayouts.addAllTextToContainer("Intro",this.container);var e=this.container.findChild({id:"FREE_SPINS_GAMBLE"},u);e.setText(e.text.toUpperCase()),this.container.findChildren({id:"GAMBLE"},{id:"COLLECT"},{id:"BUY"},{id:"GAMBLE_INTRO_TITLE"},{id:"FREE_SPINS_GAMBLE"}).forEach(function(e){return e.setMinFontSize(1)}),this.container.findChildren({id:"FREE_SPINS_GAMBLE"}).forEach(function(e){e.setText((e.text||"").toUpperCase())}),this.addScatterGlows(0),this.addScatterGlows(1),this.addScatterGlows(2),this.addButton()},c.prototype.addScatterGlows=function(e){this.glowContainer=new o("Scatter_BG_2_Glow_00000","Intro"),this.glowContainer.setLayoutByIndex("Intro",e);var t=new r(i.ExtraChilliGame.textureLoader.getAnimation(i.ExtraChilliTextureLoader.SCATTER_GLOW_ANIM,2));t.blendMode=a.ADD,t.animationSpeed=.5,t.gotoAndPlay(2*e%10),this.glowContainer.addChild(t),this.glowContainer.setDimensions(),this.container.addChild(this.glowContainer)},c.prototype.addButton=function(){var e="Intro/BUT_Continue",t=new o("BUT_Continue",e);this.container.addChild(t);var i=new s(h.getTexture(h.UI,h.UI_BUT_J_BG_01));i.setLayout(e),t.addChild(i),l.textureLoader.TextureLayouts.addAllTextToContainer(e,t);var n=new s(h.getTexture(h.UI,h.UI_BUT_J));return i.setLayout(e),t.addChild(n),t},p=c,e.Intro=p}(extrachilli=extrachilli||{}),function(e){var t,i,n,s,o;function r(e){this.container=new n,e.addChild(this.container),this.megaWaysContainer=new n("MegawaysContainer","MegawaysContainer"),this.container.addChild(this.megaWaysContainer),this.container.alpha=1,this.setupSignals(),this.addMegaWaysText()}t=e.views||(e.views={}),i=genericgame.views.Counter,n=utils.ContainerWrapper,s=e.ExtraChilliGameData,o=e.ExtraChilliTextureLoader,r.prototype.setupSignals=function(){var n=this;amplify.subscribe("UpdateMegaWinsSignal",function(e){0===n.megaWaysContainer.alpha&&Tweener.addTween(n.megaWaysContainer,{alpha:1,time:1}),n.currentMegaWays*=e.numIcons,n.megaWaysAmount.clear(!1),n.megaWaysAmount.updateCount(n.currentMegaWays.toString())}),amplify.subscribe("ClearMegaWinsSignal",function(){n.currentMegaWays=1,Tweener.addTween(n.megaWaysContainer,{alpha:0,time:1})}),amplify.subscribe("QuickClearMegaWinsSignal",function(){Tweener.removeTween(n.megaWaysContainer),n.currentMegaWays=1,n.megaWaysContainer.alpha=0}),amplify.subscribe("QuickUpdateMegaWinsSignal",function(e){n.currentMegaWays=1,n.megaWaysContainer.alpha=1,Tweener.removeTween(n.megaWaysContainer);for(var t=0;t<s.NUM_REELS;t++){var i=e.symbols[t].length+(-1<s.CART_REELS.indexOf(t)?1:0);n.currentMegaWays*=i}n.megaWaysAmount.clear(!1),n.megaWaysAmount.updateCount(n.currentMegaWays.toString())})},r.prototype.addMegaWaysText=function(){this.megaWaysAmount=new i(this.megaWaysContainer,70,28,.2,!0),this.megaWaysAmount.updateCount("34300"),this.megaWaysText=o.createSprite(o.PT_Megaways_01,"MegawaysContainer"),this.megaWaysContainer.addChild(this.megaWaysText)},e=r,t.MegaWaysCounter=e}(extrachilli=extrachilli||{}),function(e){var t,c,n,o,r,s,d,m,f;function i(e){this.pageIndex=0,this.pages=[],this.container=new c,e.addChild(this.container),this.setupPaytable(),this.setupSignals()}t=e.views||(e.views={}),c=utils.ContainerWrapper,n=genericgame.TextureLoader,o=utils.SpriteWrapper,r=utils.SoundWrapper,s=utils.BLEND_MODE,d=utils.TextWrapper,m=e.ExtraChilliTextureLoader,f=e.ExtraChilliGameData,i.prototype.setupSignals=function(){var e=this;amplify.subscribe("RemoveFeatureDrop",function(){e.removeFeatureDrop=!0,utils.ArrayUtils.removeItems(e.pages,e.featureDropPage),e.container.removeChild(e.featureDropPage),e.setupPageDots()})},i.prototype.setupPaytable=function(){this.addIconPaysPages(),this.addReactionsAndExtraReelPage(),this.addScatterAndWildPage(),this.addFreeSpinPage(),this.addFreeSpinsGamblePage(),this.addFeatureDropPage(),this.addMegaWaysPage(),this.addButtons(),this.setupPageDots(),this.turnOffAllPages()},i.prototype.setupPageDots=function(){this.dots&&this.container.removeChild(this.dots),this.dots=new c,this.offDotTexture=m.getTexture(n.Bullet_01),this.onDotTexture=m.getTexture(n.Bullet_01_Pressed);for(var e=new c("BulletMarker","Menu").dimension,t=0;t<this.pages.length;t++){var i=new o(this.offDotTexture,"Menu/Bullet");i.position.set(t*i.width*1.5,8),this.dots.addChild(i)}this.dots.x=e.x-this.dots.width/2,this.dots.y=e.y-this.dots.height,this.container.addChild(this.dots),this.updatePageDots()},i.prototype.updatePageDots=function(){for(var e=0;e<this.pages.length;e++)this.dots.findChildAt(e).texture=this.offDotTexture;this.dots.findChildAt(this.pageIndex).texture=this.onDotTexture},i.prototype.isOpen=function(){return 1===this.container.alpha},i.prototype.hide=function(){this.turnOffAllPages(),this.container.alpha=0,this.left.interactive=!1,this.left.handCurser=!1,this.right.interactive=!1,this.right.handCurser=!1},i.prototype.show=function(){this.container.alpha=1,this.pageIndex=0,this.pages[this.pageIndex].alpha=1,this.left.interactive=this.left.handCurser=!0,this.right.interactive=this.right.handCurser=!0,this.updatePageDots()},i.prototype.addFeatureDropPage=function(){var e=this.featureDropPage=new c,t="Menu/Pays7",i=utils.Layouts.get(),n=i.getTextEntriesForSection(t);i.addAllToContainer(t,e);for(var s=0,o=n.length;s<o;s++){var r=n[s].id,a=e.findChild({id:r},d);-1<r.indexOf("PAYOUT")&&(r=+(r=r.split("_"))[r.length-1],a.setText(""+f.featureDropSymbolPriceReductions[r]))}e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.addFreeSpinsGamblePage=function(){var e=new c;utils.Layouts.get().addAllToContainer("Menu/Pays6",e),e.findChildren({id:"GAMBLE"},{id:"COLLECT"},{id:"BUY"},{id:"GAMBLE_INTRO_TITLE"},{id:"FREE_SPINS_GAMBLE"}).forEach(function(e){return e.setMinFontSize(1)});var t=e.findChildren({id:"FREE_SPINS_GAMBLE"});t&&0<t.length&&(t.sort(function(e,t){return+e.style.fontSize-+t.style.fontSize}),t[0].setText((t[0].text||"").toUpperCase())),e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.addFreeSpinPage=function(){var e=new c,t="Menu/Pays5";utils.Layouts.get().addAllToContainer(t,e),o.addAllToContainer(m.getTexture(m.SYMBOLS,3,11),t,e),e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.addScatterAndWildPage=function(){var e=new c,t="Menu/Pays4";utils.Layouts.get().addAllToContainer(t,e),o.addAllToContainer(m.getTexture(m.SYMBOLS,3,0),t,e),this.setupSparkles("SparkContainer_01",t,e),this.setupSparkles("SparkContainer_02",t,e),this.setupSparkles("SparkContainer_03",t,e),e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.leftButtonPressed=function(){this.pageIndex--,this.pageIndex<0&&(this.pageIndex=this.pages.length-1),this.turnOffAllPages(),this.pages[this.pageIndex].alpha=1,this.updatePageDots()},i.prototype.rightButtonPressed=function(){this.pageIndex=(this.pageIndex+1)%this.pages.length,this.turnOffAllPages(),this.pages[this.pageIndex].alpha=1,this.updatePageDots()},i.prototype.turnOffAllPages=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].alpha=0},i.prototype.addButtons=function(){var e=this;this.left=this.addChangePageButton({bgTextureID:n.BUT_Next_01,bgTexturePressedID:n.BUT_Next_01_Pressed,imageRotation:180,onClickFunction:function(){return e.leftButtonPressed()}}),this.left.setLayoutByIndex("Menu",0),this.container.addChild(this.left),this.right=this.addChangePageButton({bgTextureID:n.BUT_Next_01,bgTexturePressedID:n.BUT_Next_01_Pressed,onClickFunction:function(){return e.rightButtonPressed()}}),this.right.setLayoutByIndex("Menu",1),this.right.position.x+=12,this.container.addChild(this.right)},i.prototype.addChangePageButton=function(e){var t,i=new c("BUT_Next_01"),n=m.getTexture(e.bgTextureID),s=new o(n);return i.addChild(s),i.bg=s,void 0!==e.bgTexturePressedID&&(t=m.getTexture(e.bgTexturePressedID)),e.imageRotation&&(s.rotation=e.imageRotation*Math.PI/180,s.position.x+=.65*s.width,s.position.y+=s.height),i.activeTexture=t,i.inactiveTexture=n,i.onClick=e.onClickFunction,i.click=i.tap=function(){r.playSound("Clicker"),i.onClick()},i.interactive=i.handCurser=!0,i},i.prototype.addMegaWaysPage=function(){var e=new c;utils.Layouts.get().addAllToContainer("Menu/Pays8",e),e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.addReactionsAndExtraReelPage=function(){var e=new c;utils.Layouts.get().addAllToContainer("Menu/Pays3",e),e.alpha=0,this.pages.push(e),this.container.addChild(e)},i.prototype.setupSparkles=function(e,t,i){t=new c(e,t);i.addChild(t);i=m.createAnimation(m.SPARKLES_ANIM);i.blendMode=s.ADD,i.animationSpeed=.25,i.play(),t.addChild(i),t.width=t.dimension.width,t.height=t.dimension.height},i.prototype.addIconPaysPages=function(){this.addIconsPage("Menu/Pays1",!0),this.addIconsPage("Menu/Pays2",!1)},i.prototype.addIconsPage=function(e,t){var i=utils.Layouts.get(),n=i.getTextEntriesForSection(e),s=new c;i.addAllToContainer(e,s);for(var o=0,r=n.length;o<r;o++){var a=n[o].id,l=s.findChild({id:a},d),u=-1<a.indexOf("FREQUENCY"),h=-1<a.indexOf("PAYOUT"),p=void 0;(u||h)&&(a=+(h=a.split("_"))[h.length-2],h=6-+h[h.length-1]+1,h=f.getPayout(a,h),l.setText(""+(u?h.numSyms:h.payout/100)),p=h.symIndex),u&&(s.addChild(m.createSprite(m.SYMBOLS,e,3,p)),t&&s.addChild(m.createSprite(m.SYMBOLS,e,4,p)))}s.alpha=0,this.pages.push(s),this.container.addChild(s)},e=i,t.Paytable=e}(extrachilli=extrachilli||{}),function(e){var t,s,n,l,i;function o(e,t,i,n){this.numBlocks=2,this.state="STOPPED",this.spinSpeed=100,this.topSymbolBlock=0,this.delay=0,this.expectationDelay=0,this.spinDelay=0,this.delayNum=0,this.delayNextNum=0,this.counter=0,this.maxWinReel=0,this.lastCount=0,this.last=!1,this.foundWild=!1,this.foundJackpot=!1,this.foundScatter=!1,this.result=[],this.velocity=0,this.reelPos=1,this.reelDefIndex=0,this.numIcons=0,this.numStartSymbols=[7,3,6,6,4,5],this.startIndexes=[8,106,11,10,16,15],this.startScatterOrder=[[-1,-1,-1,-1,-1,-1,-1],[-1,0,-1],[-1,-1,1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,1,-1],[-1,-1,-1,-1]],this.reelSets=[[[7,7,7,7,7,7,7,3,3,3,3,3,3,3,6,6,6,6,6,6,6,10,10,10,10,10,10,10,7,7,7,7,7,7,7,10,10,10,10,10,10,10,3,8,8,6,6,8,8,2,5,11,5,1,3,10,3,2,10,6,6,4,10,3,7,4,7,3,2,6,9,6,6,10,3,1,6,2,7,6,4,9,7,4,6,5,5,9,3,6,7,9,2,10,2,7,3,10,6,1,6,6,7,5,11,3,8,3,8,10,6,5,3,3,10,4,11,3,10,3,2,9,3,5,6,5,7,7,6,6,5,3,11,7,7,6,8,7,5,10,6,4,10,3,10,10,5,5,8,4,1,10,9,6,10,10,11,10,7,6,7,3,6,6,8,3,9,4,3,6,9,10,6,6,3,6,10],[8,8,8,8,8,8,8,2,2,2,2,2,2,3,5,5,5,5,5,5,5,8,8,8,8,8,8,8,9,9,9,9,9,9,9,8,9,9,4,10,8,9,4,7,2,3,4,6,8,2,5,9,9,7,5,4,5,6,1,8,5,6,5,10,3,5,5,9,5,8,9,8,7,7,1,8,3,8,5,1,8,9,10,5,9,10,8,5,2,9,3,3,7,6,8,4,1,5,4,9,8,5,10,5,9,6,5,11,10,5,6,6,4,5,9,4,9,11,6,9,7,5,5,7,6,7,9,11,7,3,5,5,9,2,9,6,10,5,2,6,2,5,10,9,5,9,2,2,11,9,4,9,9,8,8,3,8,7,2,5,5,11,6,9,10,5,4,6,9,1,5,5,5,11,8,5,5],[7,9,2,2,9,4,6,6,10,7,11,2,7,6,10,7,7,4,4,4,4,9,10,2,4,4,6,3,4,9,6,4,10,5,5,4,5,2,6,10,11,4,6,6,1,7,5,9,10,10,7,8,5,7,2,8,6,7,2,6,6,9,5,4,5,2,10,7,9,6,7,2,5,2,4,7,4,9,6,9,6,4,2,6,4,3,6,7,7,3,10,9,3,8,7,5,9,4,6,10,6,9,4,8,8,6,10,7,10,11,6,9,2,8,7,7,8,8,5,5,4,8,3,2,7,6,6,4,4,5,6,2,4,4,5,4,1,1,2,4,6,9,2,7,6,10,7,4,10,4,2,10,3,7,2,9,10,9,3,3,9,4,6,6,8,5,6,4,2,2,5,11,4,3,9,2,7],[4,1,10,5,4,7,10,10,4,1,4,10,6,9,4,7,4,4,3,1,7,8,4,7,2,8,8,8,1,9,4,11,3,10,4,2,5,7,1,10,5,9,11,10,5,1,10,6,4,8,4,5,1,4,11,4,7,2,9,1,8,11,2,10,7,4,10,7,10,4,10,10,4,6,9,10,1,4,5,10,10,7,10,2,9,1,10,6,6,10,10,10,6,4,11,7,1,9,6,10,10,7,4,4,10,8,1,2,7,2,7,6,6,9,1,7,7,8,10,10,9,2,10,1,4,10,10,4,10,8,2,10,7,5,9,10,8,7,10,5,8,4,10,5,7,7,7,8,5,7,4,8,10,10,5,1,7,7,2,7,8,7,4,8,10,6,5,8,1,3,6,5,10,2,10,10,7],[1,6,6,10,9,8,4,1,3,8,2,8,4,5,6,4,1,3,11,4,9,8,5,10,5,3,3,7,8,2,9,7,10,7,6,3,9,8,4,5,8,3,4,8,6,8,6,4,9,7,10,3,4,7,2,9,8,11,10,3,2,4,9,6,2,8,9,8,9,8,4,4,6,4,3,3,2,6,7,4,5,4,10,3,7,9,2,8,4,10,3,7,4,3,7,4,9,6,8,10,7,9,10,8,1,9,7,4,3,5,11,9,4,3,4,4,3,3,7,1,5,6,4,6,3,10,1,2,8,10,3,10,4,3,11,3,4,10,8,10,4,9,5,8,10,4,10,10,9,6,8,9,3,8,9,11,10,6,9,10,4,10,4,9,3,2,5,8,4,3,6,4,10,3,9,7,4],[4,10,10,8,9,3,11,4,5,7,10,4,8,8,8,4,9,2,6,9,5,8,2,4,11,5,3,3,6,10,8,5,9,7,3,9,2,8,10,10,6,5,6,10,7,10,4,6,1,8,7,3,3,2,9,6,8,8,3,7,7,3,6,9,8,3,7,9,9,3,7,5,6,7,10,2,4,6,3,10,8,7,1,2,4,8,9,10,5,9,8,5,1,10,7,8,10,9,6,2,8,9,6,10,3,9,9,9,6,6,10,10,8,6,2,10,3,10,3,10,6,9,8,1,3,5,7,8,5,6,4,7,3,6,9,5,6,3,6,10,6,8,9,11,7,5,9,9,8,8,10,7,7,5,6,9,10,4,8,8,8,9,9,9,3,7,3,8,2,9,8,3,4,9,2,8,7]],[[4,10,11,3,8,6,10,3,5,4,4,4,4,7,6,2,7,10,2,4,10,4,5,4,3,8,7,4,7,1,6,8,9,6,8,10,11,5,4,3,9,6,6,4,7,7,6,9,4,10,9,9,4,4,4,4,6,7,10,4,6,5,5,6,5,6,4,10,4,8,4,6,7,4,6,4,6,9,9,6,4,10,11,7,4,6,4,6,8,5,6,9,4,4,5,7,5,5,1,8,4,6,7,6,5,5,7,5,7,7,6,6,4,7,11,6,8,5,9,5,5,1,6,7,6,8,3,8,2,5,6,3,7,8,4,8,7,5,10,9,10,6,10,3,7,11,8,6,6,5,1,8,9,11,8,5,7,7,5,8,9,5,9,3,7,1,6,9,9,4,7,6,4,8,6,1,2],[4,5,3,8,10,3,2,4,10,10,4,5,3,10,2,7,3,5,3,7,10,5,6,3,2,4,4,8,8,10,4,8,7,4,11,8,6,5,4,9,2,8,2,4,8,7,9,7,8,5,7,8,7,9,10,1,3,7,2,8,4,8,9,7,8,3,10,9,8,6,4,5,7,2,1,2,2,5,9,10,2,8,8,2,5,8,10,1,4,5,7,5,2,8,8,4,2,8,3,8,4,7,2,1,7,2,10,5,4,2,6,3,10,5,8,11,3,6,5,4,5,8,8,8,4,10,9,8,8,11,2,4,7,4,2,9,8,10,4,5,4,3,1,7,3,8,5,5,10,6,8,1,8,5,3,7,7,8,7,2,8,6,8,4,7,1,7,4,2,8,5,5,8,8,11,7,2],[1,3,3,4,4,4,4,4,4,4,9,9,9,9,9,9,9,5,5,5,5,5,5,5,10,11,2,7,9,3,3,3,2,2,2,2,4,10,11,7,7,7,7,10,1,3,2,4,1,7,6,7,6,9,8,8,8,5,5,5,5,8,2,1,3,9,8,10,7,6,6,6,6,8,8,8,8,8,6,2,10,10,7,7,5,11,10,9,4,2,3,10,7,8,11,9,4,2,2,9,9,7,7,7,8,8,8,2,2,2,2,6,6,6,6,10,6,9,3,6,11,7,7,10,9,6,3,1,2,10,7,4,9,9,10,2,11,4,3,5,5,9,9,9,9,8,8,8,6,10,7,4,3,1,5,6,8,8,8,8,11,9,9,3,2,4,7,7,5,5,5,4,4,8,8,8,8],[5,5,5,5,5,5,7,7,7,7,7,7,7,6,6,6,6,6,6,6,4,4,4,4,4,1,3,1,10,10,9,7,8,6,8,8,8,7,7,7,7,6,6,6,3,2,9,6,4,5,5,5,7,7,3,6,10,10,3,3,9,11,6,2,3,5,3,7,6,8,9,10,10,10,10,10,10,10,7,3,7,5,5,5,2,5,6,6,6,11,3,1,3,6,2,2,9,9,9,6,6,6,6,6,5,5,5,5,3,3,3,3,6,6,6,11,2,3,4,8,8,8,9,9,9,9,9,9,9,1,1,2,4,5,10,6,8,10,4,5,2,8,3,9,10,6,6,6,5,5,4,7,8,10,10,5,9,9,4,4,4,4,5,5,5,6,6,6,7,7,2,3,11,8,4,4,9],[9,4,8,1,2,9,10,9,9,6,9,11,1,4,6,2,10,2,5,9,1,4,2,3,4,2,9,9,10,9,1,2,5,5,2,6,7,9,2,5,1,8,7,3,9,3,2,5,3,2,7,3,7,7,1,9,9,9,7,9,5,2,5,10,5,3,10,2,5,10,9,9,3,6,4,5,5,3,9,10,9,3,2,6,9,7,4,9,5,5,4,7,3,9,7,7,5,4,8,9,7,5,6,9,3,9,2,1,2,6,9,2,3,7,1,4,9,8,11,8,9,1,2,8,3,5,7,9,1,3,6,8,6,9,4,6,10,8,5,9,3,10,5,4,10,8,7,3,8,10,10,5,7,2,5,9,11,6,2,4,2,6,6,11,9,4,5,10,7,8,7,6,7,9,5,10,9],[6,8,10,5,4,5,6,4,9,6,3,9,7,5,2,6,9,3,10,5,4,10,8,9,6,5,3,6,9,3,10,4,8,6,5,11,7,10,2,3,10,9,7,9,3,7,5,9,4,11,10,8,8,2,5,10,4,4,4,11,5,9,8,3,6,2,8,5,8,3,4,9,7,6,8,7,7,2,8,1,1,2,7,1,1,9,10,10,10,6,8,4,6,7,2,5,10,10,7,6,8,8,3,5,8,9,2,6,8,8,8,9,6,9,4,7,5,10,6,10,10,1,1,1,1,11,10,7,1,7,10,7,4,5,2,3,5,3,5,7,5,7,2,5,10,6,8,3,2,2,2,5,9,9,5,8,8,5,7,4,7,9,6,2,6,8,10,3,10,6,3,5,3,2,7,8,7]],[[7,9,2,2,9,4,6,6,10,7,11,2,7,6,10,7,7,4,4,4,4,9,10,2,4,4,6,3,4,9,6,4,10,5,5,4,5,2,6,10,11,4,6,6,1,7,5,9,10,10,7,8,5,7,2,8,6,7,2,6,6,9,5,4,5,2,10,7,9,6,7,2,5,2,4,7,4,9,6,9,6,4,2,6,4,3,6,7,7,3,10,9,3,8,7,5,9,4,6,10,6,9,4,8,8,6,10,7,10,11,6,9,2,8,7,7,8,8,5,5,4,8,3,2,7,6,6,4,4,5,6,2,4,4,5,4,1,1,2,4,6,9,2,7,6,10,7,4,10,4,2,10,3,7,2,9,10,9,3,3,9,4,6,6,8,5,6,4,2,2,5,11,4,3,9,2,7],[4,10,10,8,9,3,11,4,5,7,10,4,8,8,8,4,9,2,6,9,5,8,10,4,2,5,3,3,6,10,8,5,3,7,3,9,2,8,10,10,6,5,6,10,7,10,4,6,1,5,4,8,3,2,9,6,8,8,3,7,7,3,6,9,3,8,7,9,9,9,7,1,6,7,10,2,4,6,3,10,8,7,3,2,4,8,9,10,5,9,8,5,7,10,7,8,10,9,6,2,1,9,6,10,3,9,9,9,6,6,10,10,8,6,2,10,3,10,3,10,6,9,8,8,3,5,7,8,5,6,1,7,3,6,9,5,6,3,6,10,6,8,9,11,7,5,9,9,8,8,10,7,7,5,6,9,10,4,8,8,8,9,9,9,3,7,3,2,8,9,3,8,4,9,2,8,7],[8,7,10,10,4,7,8,9,10,6,6,10,3,4,8,10,8,1,6,6,7,10,9,10,2,4,9,7,3,9,3,9,5,8,3,9,10,5,7,6,5,11,7,7,2,8,10,7,11,10,7,4,10,4,7,7,10,6,2,3,5,7,10,7,9,7,8,7,2,10,1,8,10,6,10,2,7,7,9,7,9,9,10,3,5,10,9,6,4,2,3,2,10,2,2,7,8,9,11,10,10,7,4,6,7,8,6,9,7,7,4,11,9,7,6,4,7,3,7,7,7,6,2,7,9,10,7,10,8,3,3,8,10,10,3,1,6,4,6,10,4,10,2,7,7,1,6,5,10,7,7,10,7,7,9,10,8,7,7,7,5,7,4,7,9,7,9,2,5,8,2,5,3,1,7,8,7],[3,5,8,6,5,5,5,10,1,5,5,8,10,8,1,1,6,5,8,8,2,1,5,9,5,1,8,4,8,5,9,11,3,9,5,5,8,1,9,1,10,7,11,8,9,5,10,5,9,1,1,8,8,4,11,7,8,4,9,9,8,4,9,9,2,9,5,5,9,8,8,5,5,9,1,1,3,9,7,9,5,1,1,5,8,5,7,5,9,5,2,9,11,5,5,4,5,7,9,4,9,9,5,8,1,8,2,7,1,9,11,1,8,5,5,6,5,1,6,6,5,10,7,1,1,9,5,8,11,9,9,4,9,6,11,4,8,2,6,1,9,5,5,5,8,4,9,2,10,5,5,10,5,4,7,8,9,9,5,9,1,9,1,6,4,2,8,5,9,8,8,8,8,6,9,6,4],[5,5,5,5,5,5,5,3,3,3,3,3,3,3,6,6,6,6,6,6,6,7,7,7,7,7,7,7,10,10,10,10,10,10,10,5,6,11,9,8,2,7,4,3,6,7,2,5,3,7,7,7,7,7,7,7,11,6,6,6,6,6,6,6,10,10,10,10,10,10,10,2,2,2,5,5,5,3,10,8,4,4,4,9,9,9,8,8,8,10,8,9,3,10,10,6,2,4,1,1,1,7,8,11,10,10,10,10,10,10,10,5,6,3,7,8,10,5,9,7,2,6,7,3,5,10,9,5,8,6,10,9,5,10,7,9,10,3,6,7,8,5,4,10,3,3,3,3,6,6,6,6,6,2,8,5,4,6,6,6,10,10,10,10,1,4,6,1,9,1,5,8,10,4,6,10,3],[4,4,4,4,4,4,4,6,6,6,6,6,6,6,9,8,10,3,6,4,7,9,2,10,8,6,3,4,7,2,9,8,10,4,4,4,4,4,4,4,6,6,6,6,6,6,6,10,10,10,10,9,9,9,9,9,11,4,4,4,4,5,5,5,8,8,8,7,7,7,2,2,2,3,6,5,7,9,3,8,6,3,7,2,4,4,4,4,4,5,5,5,8,8,9,9,9,10,10,10,10,2,2,2,7,7,7,7,5,5,5,11,3,4,4,4,8,6,6,2,2,2,2,4,5,8,1,11,10,9,3,5,2,8,7,4,2,9,3,10,5,2,11,9,9,2,4,8,3,3,4,2,5,7,7,7,8,8,8,9,9,9,2,2,2,10,10,10,3,4,2,5,1,2,8,7,9]],[[10,2,10,8,1,7,3,2,4,10,3,2,5,8,9,9,5,10,10,3,6,10,4,5,8,10,3,10,3,3,10,10,6,10,6,5,4,3,8,6,8,6,7,4,1,8,9,2,7,5,5,8,9,5,8,4,9,10,8,8,3,3,4,3,3,6,10,5,3,4,7,8,9,6,5,1,4,6,10,3,10,3,4,10,7,3,9,8,5,7,2,10,8,7,5,10,6,9,5,8,7,3,2,10,9,10,3,8,5,10,1,5,4,3,9,3,9,6,8,7,1,4,6,10,8,10,2,5,5,9,6,9,10,10,9,9,1,6,3,10,6,3,10,5,10,2,6,9,9,2,1,7,6,2,6,4,3,5,10,6,9,4,7,10,3,5,3,10,4,4,8,9,4,8,7,9,8],[6,9,7,8,8,7,5,8,5,6,5,9,6,4,6,8,2,4,7,2,2,2,2,8,6,3,3,10,9,8,5,8,8,5,9,4,3,7,3,6,9,10,9,10,4,6,6,4,6,6,10,8,7,2,8,8,2,7,6,5,7,2,7,8,8,7,4,2,8,4,5,7,3,2,2,10,7,7,5,8,8,9,6,9,10,2,2,3,7,9,2,4,4,9,6,4,10,8,3,8,4,2,7,7,4,10,9,10,3,10,8,6,2,2,10,2,4,6,6,8,5,2,8,6,2,9,7,4,6,8,2,2,8,8,8,3,6,3,10,4,5,7,10,4,4,10,2,5,10,6,6,10,10,3,6,4,10,8,2,4,10,2,2,9,8,6,9,2,10,7,8,4,2,2,1,4,3],[3,3,3,3,3,3,3,2,2,2,2,2,2,2,1,7,7,7,7,7,7,7,6,6,6,6,6,6,6,1,8,8,8,8,8,8,8,2,2,2,2,2,2,2,1,9,9,9,9,9,9,9,5,5,5,5,5,5,5,4,4,4,4,4,4,4,1,10,10,10,10,10,10,10,1,3,3,3,3,3,3,3,1,6,6,6,6,6,6,6,1,7,7,7,7,7,7,10,10,10,10,10,10,10,1,4,4,4,4,4,4,4,1,6,6,6,6,6,6,6,9,9,9,9,9,9,1,5,5,5,5,5,5,5,8,8,8,8,8,8,1,7,7,7,7,7,7,7,1,9,9,9,9,9,9,9,1,8,8,8,8,8,8,8,1,5,5,5,5,5,5,10,10,10,10,10,10],[4,4,4,4,4,4,4,3,3,3,3,3,3,3,6,6,6,6,6,6,6,7,7,7,7,7,7,7,1,1,3,3,3,3,3,1,1,9,9,9,9,9,9,9,10,10,10,10,10,10,10,2,2,2,2,2,2,2,4,4,4,4,4,4,4,5,5,5,5,5,5,5,10,10,10,10,10,10,10,1,1,7,7,7,7,7,7,7,2,2,2,2,2,2,2,8,8,8,8,8,8,8,5,5,5,5,5,5,5,10,10,10,10,10,10,10,7,7,7,7,7,7,7,4,4,4,4,4,4,4,1,1,9,9,9,9,9,1,1,8,8,8,8,8,8,8,6,6,6,6,6,6,2,2,2,2,2,2,3,3,1,1,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8],[5,1,9,1,9,10,1,9,3,1,10,7,3,4,3,2,5,2,9,3,5,3,6,7,7,3,2,9,2,5,3,6,7,2,4,7,2,8,3,7,9,2,3,9,9,2,9,3,5,1,1,7,7,3,1,8,7,9,9,3,5,2,7,9,3,2,1,1,1,9,9,6,10,5,5,2,3,7,6,7,4,3,3,3,3,7,6,8,9,9,9,7,5,9,10,7,7,2,9,7,4,10,1,7,9,5,5,3,2,9,2,7,4,6,5,7,2,5,4,10,10,7,7,3,7,10,7,8,3,7,2,9,5,2,5,7,6,2,9,1,1,7,10,1,7,9,1,7,9,10,4,1,1,10,5,7,9,7,10,9,8,5,3,9,7,3,2,7,9,10,2,7,9,6,1,5,5],[2,10,9,7,4,3,10,5,2,1,3,9,5,6,1,9,6,2,5,1,9,9,5,1,6,1,3,7,10,7,8,2,6,9,10,8,9,9,5,8,1,1,2,5,1,6,9,3,1,6,10,2,4,7,10,8,5,4,6,7,8,2,7,7,9,1,7,7,8,5,1,1,4,10,2,1,10,1,9,8,8,3,5,6,4,8,7,4,9,4,1,1,4,9,7,3,6,8,5,7,10,5,8,1,8,3,6,8,7,7,7,4,7,10,8,10,10,4,10,2,8,2,8,3,8,10,4,7,1,10,7,1,7,5,4,3,5,7,4,4,9,6,8,10,7,9,1,8,4,2,6,6,10,10,3,8,4,8,8,3,8,5,4,7,2,8,7,2,8,2,4,4,1,10,2,9,1]]],this.reelSets_freeSpins=[[[5,9,10,3,7,5,8,5,7,10,6,5,10,3,5,10,5,5,10,8,3,7,9,7,7,3,1,6,3,5,3,10,7,9,3,2,4,5,7,10,2,5,7,8,10,10,7,5,3,10,8,9,10,7,5,7,7,7,10,3,3,7,3,8,7,5,5,10,10,7,9,4,10,3,3,10,10,10,5,9,7,6,7,5,5,10,3,4,3,5,5,5,5,3,8,10,10,2,5,9,3,10,3,8,9,10,9,3,5,10,3,3,2,3,7,7,3,5,7,10,10,8,7,6,5,3,3,5,9,3,10,3,8,10,9,10,3,7,5,5,3,5,7,10,2,9,5,7,10,5,9,8,5,7,2,5,7,6,5,4,5,4,5,3,7,8,1,10,2,8,4,3,10,5],[10,5,10,9,5,10,5,7,4,7,7,10,5,4,2,5,3,7,7,5,10,1,5,3,8,10,6,3,5,7,7,3,6,7,9,1,10,2,9,3,8,10,7,7,5,6,2,10,5,7,7,4,5,6,5,5,6,7,10,4,10,8,3,7,5,5,8,5,2,4,8,9,6,2,5,8,3,7,5,5,3,7,5,9,7,10,5,5,10,4,5,10,2,10,5,9,7,5,3,9,9,5,5,7,7,10,7,5,9,5,1,10,8,8,6,5,10,1,6,10,10,5,8,10,7,7,10,3,4,5,10,3,10,5,4,10,5,1,5,7,7,3,7,5,10,10,5,7,10,10,3,5,8,1,3,8,7,1,8,1,10,10,4,5,10,3,7,7,3,4,8],[7,9,2,2,9,6,8,8,10,7,2,7,8,10,7,7,6,6,6,6,9,10,2,6,6,8,3,6,9,8,6,10,5,5,6,5,2,8,10,6,8,8,1,7,5,9,10,10,7,4,5,7,2,4,8,7,2,8,8,9,5,6,5,2,10,7,9,8,7,2,5,2,6,7,6,9,8,9,8,6,2,8,6,3,8,7,7,3,10,9,3,4,7,5,9,6,8,10,8,9,6,4,4,8,10,7,10,8,9,2,4,7,7,4,4,5,5,6,4,3,2,7,8,8,6,6,5,8,2,6,6,5,6,1,1,2,6,8,9,2,7,8,10,7,6,10,6,2,10,3,7,2,9,10,9,3,3,9,6,8,8,4,5,8,6,2,2,5,6,3,9,2,7],[6,1,10,5,6,7,10,10,6,1,6,10,8,9,6,7,6,6,3,1,7,4,6,7,2,4,4,4,1,9,6,3,10,6,2,5,7,1,10,5,9,10,5,1,10,8,6,4,6,5,1,6,6,7,2,9,1,4,2,10,7,6,10,7,10,6,10,10,6,8,9,10,1,6,5,10,10,7,10,2,9,1,10,8,8,10,10,10,8,6,7,1,9,8,10,10,7,6,6,10,4,1,2,7,2,7,8,8,9,1,7,7,4,10,10,9,2,10,1,6,10,10,6,10,4,2,10,7,5,9,10,4,7,10,5,4,6,10,5,7,7,7,4,5,7,6,4,10,10,5,1,7,7,2,7,4,7,6,4,10,8,5,4,1,3,8,5,10,2,10,10,7],[1,5,5,10,9,4,6,1,3,4,2,4,6,8,5,6,1,3,4,6,9,4,8,10,8,3,3,7,4,2,9,7,10,7,5,3,9,4,6,8,4,3,6,4,5,4,5,6,9,7,10,3,6,7,2,9,4,10,3,2,6,9,5,2,4,9,4,9,4,6,6,5,6,3,3,2,5,7,6,8,6,10,3,7,9,2,4,6,10,3,7,6,3,7,6,9,5,4,10,7,9,10,4,1,9,7,6,3,8,9,6,3,6,6,3,3,7,1,8,5,6,5,3,10,1,2,4,10,3,10,6,3,3,6,10,4,10,6,9,8,4,10,6,10,10,9,5,4,9,3,4,9,4,10,5,9,10,6,10,6,9,3,2,8,4,6,3,5,6,10,3,9,7,6],[6,10,10,4,9,3,6,9,7,10,6,4,4,4,6,9,2,8,9,5,4,2,6,9,3,3,8,10,4,5,9,7,3,9,2,4,10,10,8,5,8,10,7,10,6,8,1,4,7,3,3,2,9,8,4,4,3,7,7,3,8,9,4,3,7,9,9,3,7,9,8,7,10,2,6,8,3,10,4,7,1,2,6,4,9,10,5,9,4,5,1,10,7,4,10,9,8,2,4,9,8,10,3,9,9,9,8,8,10,10,4,8,2,10,3,10,3,10,8,9,4,1,3,5,7,4,9,8,6,7,3,8,9,5,8,3,8,10,8,4,9,7,5,9,9,4,4,10,7,7,5,8,9,10,6,4,4,4,9,9,9,3,7,3,4,2,9,4,3,6,9,2,4,7]],[[8,4,8,3,7,6,5,2,8,3,6,6,9,7,8,9,6,1,10,8,5,6,9,8,6,5,6,6,8,10,5,4,6,4,7,6,8,5,6,8,10,7,5,7,5,10,1,7,8,4,8,4,4,4,5,6,6,8,6,6,10,7,10,7,3,8,4,9,4,8,6,7,2,9,7,7,8,6,3,8,4,5,3,4,4,6,1,10,9,9,10,1,8,5,9,4,2,8,5,10,10,6,9,7,8,7,6,6,10,7,9,9,8,9,8,8,9,7,5,6,8,9,5,7,6,8,8,5,5,6,9,10,6,3,4,3,8,5,8,7,6,8,5,6,10,5,7,7,6,6,8,10,5,8,8,4,6,7,7,8,6,6,7,8,5,10,2,6,8,6,6,7,5,5,6,4],[7,5,8,10,6,5,1,7,7,8,6,8,4,5,10,5,3,5,9,5,8,10,6,6,7,1,4,6,7,8,3,6,9,4,5,2,9,10,7,6,6,6,7,1,9,5,10,8,5,7,4,1,2,8,8,6,7,6,6,8,5,9,9,3,10,3,10,5,8,10,1,1,4,6,9,8,4,5,6,9,2,8,10,4,6,6,7,7,7,9,7,10,5,4,5,8,9,7,6,6,6,6,7,6,8,3,6,4,7,8,1,4,5,6,8,3,6,9,5,3,6,10,5,2,10,8,4,5,8,4,4,5,6,3,6,7,6,6,8,5,1,6,8,8,4,5,8,6,10,10,7,6,7,7,8,4,1,8,8,1,9,6,6,8,8,9,4,10,9,6,6,7,8],[1,3,3,6,6,6,6,6,6,6,9,9,9,9,9,9,9,5,5,5,5,5,5,9,10,2,7,9,3,3,3,2,2,2,2,6,10,7,7,7,7,10,1,3,2,6,1,7,8,7,8,9,4,4,4,9,5,5,5,4,2,1,3,9,4,10,7,8,8,8,8,4,4,4,4,4,8,2,10,10,7,7,9,10,9,6,2,3,10,7,4,9,6,2,2,9,9,7,7,7,4,4,4,2,2,2,2,8,8,8,8,10,8,9,3,8,7,7,10,9,8,3,1,2,10,7,6,9,9,10,2,6,3,9,5,9,9,9,9,4,4,4,8,10,7,9,3,1,5,8,4,4,4,4,9,9,3,2,9,7,7,5,5,5,6,9,4,4,4,4],[5,5,5,5,5,5,7,7,7,7,7,7,7,8,8,8,8,8,8,8,6,6,6,6,6,1,3,1,10,10,9,7,4,8,3,3,3,7,7,7,7,8,8,8,3,2,9,8,6,5,5,5,7,7,3,8,10,10,3,3,9,8,8,2,3,5,3,7,8,4,9,10,10,10,10,10,10,10,7,3,7,5,5,5,2,5,8,8,8,3,1,3,8,2,2,9,9,9,8,8,8,8,8,5,5,5,5,3,3,3,3,8,8,8,8,2,3,6,4,4,4,9,9,9,9,9,9,9,1,1,2,6,5,10,8,4,10,6,5,2,4,3,9,10,8,8,8,5,5,6,7,3,10,10,5,9,9,6,6,6,6,5,5,5,8,8,8,7,7,2,3,8,4,6,6,9],[4,6,9,1,2,4,10,4,4,8,4,1,10,8,2,10,2,5,4,1,6,2,3,6,2,4,4,10,4,1,2,5,5,2,8,7,4,2,5,1,9,7,3,4,3,2,5,3,2,7,3,7,7,1,4,4,4,7,4,5,2,5,10,5,3,10,2,5,10,4,4,3,8,6,5,5,3,4,10,4,3,2,8,4,7,6,4,5,5,6,7,3,4,7,7,5,6,9,4,7,5,8,4,3,4,2,1,2,8,4,2,3,7,1,10,4,9,9,4,1,2,9,3,5,7,4,1,3,8,9,8,4,6,8,10,9,5,4,3,10,5,6,10,9,7,3,9,10,10,5,7,2,5,4,8,2,6,2,8,8,4,6,5,10,7,9,7,8,7,4,5,10,4],[8,4,10,5,6,5,8,6,9,8,3,9,7,5,2,8,9,3,10,5,6,10,4,9,8,5,3,8,9,3,10,6,4,8,5,7,10,2,3,10,9,7,9,3,7,5,9,6,10,4,4,2,5,10,6,6,6,5,9,4,3,8,2,4,5,4,3,6,9,7,8,4,7,7,2,4,1,1,2,7,1,1,9,10,10,10,8,4,6,8,7,2,5,10,10,7,8,4,4,3,5,4,9,2,8,4,4,4,9,8,9,6,7,5,10,8,10,10,1,1,1,1,10,7,1,7,10,7,6,5,2,3,5,3,5,7,5,7,2,5,10,8,4,3,2,2,2,5,9,9,5,4,4,5,7,6,7,9,8,2,8,4,10,3,10,8,3,5,3,2,7,4,7]],[[7,9,2,2,9,4,6,6,10,7,2,7,6,10,7,7,4,4,4,4,9,10,2,4,4,6,3,4,9,6,4,10,5,5,4,5,2,6,10,4,6,6,1,7,5,9,10,10,7,8,5,7,2,8,6,7,2,6,6,9,5,4,5,2,10,7,9,6,7,2,5,2,4,7,4,9,6,9,6,4,2,6,4,3,6,7,7,3,10,9,3,8,7,5,9,4,6,10,6,9,4,8,8,6,10,7,10,6,9,2,8,7,7,8,8,5,5,4,8,3,2,7,6,6,4,4,5,6,2,4,4,5,4,1,1,2,4,6,9,2,7,6,10,7,4,10,4,2,10,3,7,2,9,10,9,3,3,9,4,6,6,8,5,6,4,2,2,5,4,3,9,2,7],[4,10,10,8,9,3,4,5,7,10,4,8,8,8,4,9,2,6,9,5,8,10,4,2,5,3,3,6,10,8,5,3,7,3,9,2,8,10,10,6,5,6,10,7,10,4,6,1,5,4,8,3,2,9,6,8,8,3,7,7,3,6,9,3,8,7,9,9,9,7,1,6,7,10,2,4,6,3,10,8,7,3,2,4,8,9,10,5,9,8,5,7,10,7,8,10,9,6,2,1,9,6,10,3,9,9,9,6,6,10,10,8,6,2,10,3,10,3,10,6,9,8,8,3,5,7,8,5,6,1,7,3,6,9,5,6,3,6,10,6,8,9,7,5,9,9,8,8,10,7,7,5,6,9,10,4,8,8,8,9,9,9,3,7,3,2,8,9,3,8,4,9,2,8,7],[8,7,10,10,4,7,8,9,10,6,6,10,3,4,8,10,8,1,6,6,7,10,9,10,2,4,9,7,3,9,3,9,5,8,3,9,10,9,7,6,5,7,7,2,8,10,7,10,7,4,10,4,7,7,10,6,2,3,9,7,10,7,9,7,8,7,2,10,1,8,10,6,10,2,7,7,9,7,9,9,10,3,5,10,9,6,4,2,3,2,10,2,2,7,8,9,10,10,7,4,6,7,8,6,9,7,7,4,9,7,6,4,7,3,7,7,7,6,2,7,9,10,7,10,8,3,3,8,10,10,3,1,6,4,6,10,4,10,2,7,7,1,6,5,10,7,7,10,7,7,9,10,8,7,7,7,5,7,4,7,9,7,9,2,5,8,2,9,3,1,7,8,7],[3,5,8,6,5,5,5,10,1,5,5,8,10,8,1,1,6,5,8,8,2,1,5,9,5,1,8,4,8,5,9,3,9,5,5,8,1,9,1,10,7,8,9,5,10,5,9,1,1,8,8,4,7,8,4,9,9,8,4,9,9,2,9,5,5,9,8,8,5,5,9,1,1,3,9,7,9,5,1,1,5,8,5,7,5,9,5,2,9,5,5,4,5,7,9,4,9,9,5,8,1,8,2,7,1,9,1,8,5,5,6,5,1,6,6,5,10,7,1,1,9,5,8,9,9,4,9,6,4,8,2,6,1,9,5,5,5,8,4,9,2,10,5,5,10,5,4,7,8,9,9,5,9,1,9,1,6,4,2,8,5,9,8,8,8,8,6,9,6,4],[5,5,5,5,5,5,5,3,3,3,3,3,3,3,6,6,6,6,6,6,6,7,7,7,7,7,7,7,10,10,10,10,10,10,10,5,6,9,8,2,7,4,3,6,7,2,5,3,7,7,7,7,7,7,7,6,6,6,6,6,6,6,10,10,10,10,10,10,10,2,2,2,5,5,5,3,10,8,3,3,3,9,9,9,8,8,8,10,8,9,3,10,10,6,2,4,1,1,1,7,8,10,10,10,10,10,10,10,5,6,3,7,8,10,5,9,7,2,6,7,3,5,10,9,5,8,6,10,9,5,10,7,9,10,3,6,7,8,5,4,10,3,3,3,3,6,6,6,6,6,2,8,5,4,6,6,6,10,10,10,10,1,4,6,1,9,1,5,8,10,4,6,10,3],[4,4,4,4,4,4,4,6,6,6,6,6,6,6,9,8,10,3,6,4,7,9,2,10,8,6,3,4,7,2,9,8,10,4,4,4,4,4,4,4,6,6,6,6,6,6,6,10,10,10,10,9,9,9,9,9,4,4,4,4,5,5,5,8,8,8,7,7,7,2,2,2,3,6,5,7,9,3,8,6,3,7,2,4,4,4,4,4,5,5,5,8,8,9,9,9,10,10,10,10,2,2,2,7,7,7,7,5,5,5,3,4,4,4,8,6,6,2,2,2,2,4,5,8,1,10,9,3,5,2,8,7,4,2,9,3,10,5,2,9,9,2,4,8,3,3,4,2,5,7,7,7,8,8,8,9,9,9,2,2,2,10,10,10,3,4,2,5,1,2,8,7,9]]],this.container=new s,n.addChild(this.container),this.setupSignals(),this.reelNum=e,this.blockHeight=i,this.numBlocks=2,this.symbolFrequency=0===this.reelNum?1+Math.ceil(6*Math.random()):Math.ceil(7*Math.random()),this.setupSymbolBlocks(),this.container.position.x=t*e}t=e.views||(e.views={}),s=utils.ContainerWrapper,n=utils.SoundWrapper,l=whiterabbit.models.ExtraChilliExtraSymbolVO,i=utils.GameTimer,o.prototype.animate=function(e){var t=this;switch(this.state){case"HOLD":this.counter+=60*e/1e3,this.counter>this.delay&&(this.state="START_SPIN");break;case"START_SPIN":this.counter=0,this.velocity=-.2*this.spinSpeed,this.state="SPINNING";break;case"SPINNING":Math.abs(this.velocity)<this.spinSpeed&&(this.velocity=Math.round((20*this.velocity+this.spinSpeed)/21),this.counter+=60*e/1e3);for(var i=0;i<this.numBlocks;i++)this.symbolBlock=this.symbolBlocks[i],this.symbolBlock.setY(Math.round(this.symbolBlock.getY()+this.velocity*e*60/1e3)),this.symbolBlock.getY()>this.blockHeight&&(this.symbolBlock.setY(this.symbolBlock.getY()-this.numBlocks*this.blockHeight),this.lastCount--,this.counter+=60*e/1e3,0<this.result.length&&this.counter>15*this.delay+this.expectationDelay?(this.numIcons=this.result.length,0<this.expectationDelay?(this.delay+=this.expectationDelay,this.expectationDelay=0):(this.delay=this.spinDelay,1<this.result.length&&(this.symbolFrequency=this.result.length),this.symbolBlock.displaySymbols(this.result,this.scatters),1==this.result.length?this.foundWild=!0:-1<this.result.indexOf(11)?this.foundScatter=!0:-1<this.result.indexOf(13)&&(this.foundFeatureDropSymbol=!0),this.result=[],this.last=!0,this.lastCount=1)):this.last&&0===this.lastCount?(this.state="KICKBACK",this.last=!1,this.topSymbolBlock=(i+1)%this.numBlocks):this.inFreeSpins?this.symbolBlock.displaySymbols(this.getFreeSpinSymbols(),[]):this.symbolBlock.displaySymbols(this.getNormalSpinSymbols(),[]));break;case"KICKBACK":this.counter=0,this.container.position.y-=20,Tweener.addTween(this.container.position,{y:this.container.position.y+20,transition:"easeOutBounce",time:.5,onComplete:function(){return t.reelStopped()}}),n.playSound("Stop",1),amplify.publish("UpdateMegaWinsSignal",{numIcons:0<this.reelNum&&this.reelNum<5?this.numIcons+1:this.numIcons}),5===this.reelNum&&5===this.maxWinReel&&(n.playSound("AntWinStop"),amplify.publish("AntWinStopSignal")),this.foundJackpot&&0!==this.reelNum&&this.topPayWin?n.playSound("StopDragon"):this.foundScatter&&(n.playSound("Diamond"),this.flashScatters()),this.foundFeatureDropSymbol&&n.playSound("GetFeatureDrop");for(i=0;i<this.numBlocks;i++)this.symbolBlock=this.symbolBlocks[(this.topSymbolBlock+i)%this.numBlocks],this.symbolBlock.setY(i*this.blockHeight);this.state="STOPPED"}},o.prototype.setResult=function(e,t,i,n,s,o,r){if(this.result=e,this.counter=0,this.delay=1.25*o,this.maxWinReel=n,this.topPayWin=s,this.scatters=t.concat(),r){t=this.result.concat();if(this.extraSymbol=new l(t,this.reelNum,r.row,1),this.result.splice(0,1),this.result.splice(r.row,0,13),this.scatters&&0<this.scatters.length)for(var a=0;a<this.scatters.length;a++)0!=a&&-1!==this.scatters[a]&&a<=r.row&&(this.scatters[a-1]=this.scatters[a])}this.delayNum=i[this.reelNum],0<this.delayNum&&(this.expectationDelay=9),this.delayNextNum=5!==this.reelNum?i[this.reelNum+1]:0;for(a=0;a<this.reelNum;a++)this.delay+=0<i[a]?9:0},o.prototype.showStartSymbols=function(){var e=this.getStartSymbols();return this.quickSetResult(e,this.startScatterOrder[this.reelNum]),e},o.prototype.quickSetResult=function(e,t){this.result=e,this.scatters=t,this.foundFeatureDropSymbol=!1,this.extraSymbol=null,this.symbolBlocks[this.topSymbolBlock].displaySymbols(e,t)},o.prototype.startSpin=function(e,t){this.reelPos=0,this.reelDefIndex=t,this.delay=e,this.expectationDelay=0,this.spinDelay=this.delay,this.delayNextNum=0,this.counter=0,this.state="HOLD",this.last=!1,this.foundWild=!1,this.foundJackpot=!1,this.foundScatter=!1,this.result=[],this.foundFeatureDropSymbol=!1,this.showSymbols()},o.prototype.removeWinningSymbols=function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.positions.length;n++){var s=i.positions[n];s.x==this.reelNum&&this.removeSymbol(Math.round(s.y))}},o.prototype.removeSymbol=function(e){this.symbolBlocks[this.topSymbolBlock].removeSymbol(Math.round(e))},o.prototype.hideWinningSymbols=function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.positions.length;n++){var s=i.positions[n];s.x==this.reelNum&&this.hideSymbol(Math.round(s.y))}},o.prototype.hideSymbol=function(e){this.symbolBlocks[this.topSymbolBlock].hideSymbol(Math.round(e))},o.prototype.showSymbols=function(){for(var e=0;e<this.symbolBlocks.length;e++)this.symbolBlocks[e].showSymbols()},o.prototype.collapse=function(){this.symbolBlocks[this.topSymbolBlock].collapseSymbols()},o.prototype.hide=function(){this.container.visible=!1},o.prototype.show=function(){this.container.visible=!0},o.prototype.positionY=function(e){this.container.position.y=e},o.prototype.addExtraSymbol=function(e){var t=this;this.extraSymbol&&i.setTimeout(function(){return t.startExtraSymbolAnimation()},2e3*e)},o.prototype.startExtraSymbolAnimation=function(){var e=this;amplify.publish("ShowFeatureDropSymbolAnimation",{reelNum:this.extraSymbol.reel,row:this.extraSymbol.row,numSyms:this.extraSymbol.symbols.length}),this.symbolBlocks[this.topSymbolBlock].removeFeatureDropSymbol(this.extraSymbol.row),i.setTimeout(function(){return e.dropSymbols()},500)},o.prototype.dropSymbols=function(){this.symbolBlocks[this.topSymbolBlock].dropSymbolsForFeatureDrop(this.extraSymbol.symbols,this.extraSymbol.newSymbolCount)},o.prototype.setupSymbolBlocks=function(){this.symbolBlocks=[];for(var e=0;e<this.numBlocks;e++)this.symbolBlock=new t.SymbolBlock(this.blockHeight,this.container),this.symbolBlock.setY(e*this.blockHeight),this.symbolBlock.displaySymbols(this.getStartSymbols(),this.startScatterOrder[this.reelNum]),this.symbolBlocks.push(this.symbolBlock)},o.prototype.reelStopped=function(){amplify.publish("reelStoppedSignal",{reelNum:this.reelNum,numIcons:this.numIcons})},o.prototype.getStartSymbols=function(){var e=this.numStartSymbols[this.reelNum];return this.reelPos=this.startIndexes[this.reelNum],this.getSymbols(this.reelSets[0],e)},o.prototype.getSymbols=function(e,t){var i=[];if(1==t)i=[1];else for(var n=0;n<t;n++)i.push(e[this.reelNum][this.reelPos]),this.reelPos++,this.reelPos>=e[this.reelNum].length&&(this.reelPos=0);return i},o.prototype.getNormalSpinSymbols=function(){this.symbolFrequency+=.2;var e=2,e=0<this.reelNum&&this.reelNum<5?Math.floor(this.symbolFrequency%5)+2:Math.floor(this.symbolFrequency%6)+2;return this.getSymbols(this.reelSets[this.reelDefIndex],e)},o.prototype.getFreeSpinSymbols=function(){this.symbolFrequency+=.2;var e=2,e=0<this.reelNum&&this.reelNum<5?Math.floor(this.symbolFrequency%5)+2:Math.floor(this.symbolFrequency%6)+2;return this.getSymbols(this.reelSets_freeSpins[0],e)},o.prototype.setupSignals=function(){var e=this;amplify.subscribe("StartFreeSpinsSignal",function(){e.setFreeSpins(!0)}),amplify.subscribe("RecoveredFreeSpinsSignal",function(){e.setFreeSpins(!0)}),amplify.subscribe("StopFreeSpinsSignal",function(){e.setFreeSpins(!1)}),amplify.subscribe("ShowScatterAnticipation",function(){e.startScatterFlashing()}),amplify.subscribe("StopScatterAnticipation",function(){e.stopScatterFlashing()}),amplify.subscribe("FreeSpinsTriggered",function(){e.showScatterAnimation()})},o.prototype.setFreeSpins=function(e){this.inFreeSpins=e;for(var t=0;t<this.numBlocks;t++)this.symbolBlocks[t].setFreeSpins(this.inFreeSpins)},o.prototype.stopScatterFlashing=function(){i.clearInterval(this.flashInterval)},o.prototype.startScatterFlashing=function(){var e=this;this.flashScatters(),this.flashInterval=i.setInterval(function(){return e.flashScatters()},900)},o.prototype.flashScatters=function(){this.symbolBlocks[this.topSymbolBlock].flashScatters()},o.prototype.showScatterAnimation=function(){this.symbolBlocks[this.topSymbolBlock].animateScatters()},e=o,t.Reel=e}(extrachilli=extrachilli||{}),function(n){var e,s,o,r,a,l,t;function i(e,t,i){this.container=new o,i.addChild(this.container),this.bg=new s(l.getTexture(l.SYMBOL_BACKGROUNDS,t,11)),this.bg.setLayout("MainReel/Symbol"+t+"/Scatter"+t),this.container.addChild(this.bg),void 0!==e&&(this.sprite=new s(l.getTexture(l.SCATTER_SYMBOLS,e)),this.sprite.setLayout("MainReel/Symbol"+t+"/Scatter"+t),this.container.addChild(this.sprite),this.glowContainer=new o("Scatter_BG_"+t+"_Glow_00000","MainReel/Symbol"+t+"/Scatter"+t),(t=new r(n.ExtraChilliGame.textureLoader.getAnimation(n.ExtraChilliTextureLoader.SCATTER_GLOW_ANIM,t))).blendMode=a.ADD,t.animationSpeed=.5,t.gotoAndPlay(Math.ceil(10*Math.random())),this.glowContainer.addChild(t),this.glowContainer.height=this.glowContainer.dimension.height,this.glowContainer.width=this.glowContainer.dimension.width,this.container.addChild(this.glowContainer),this.glowContainer.alpha=0)}e=n.views||(n.views={}),s=utils.SpriteWrapper,o=utils.ContainerWrapper,r=utils.AnimatedSpriteWrapper,a=utils.BLEND_MODE,l=n.ExtraChilliTextureLoader,i.prototype.remove=function(){this.container.removeChild(this.sprite),this.container.parent.removeChild(this.container)},i.prototype.getSprite=function(){return this.container},i.prototype.positionY=function(e){this.container.position.y=e},i.prototype.setVisible=function(e){this.container.visible=e},i.prototype.setSymbolVisible=function(e){this.sprite.visible=e},i.prototype.showGlow=function(){Tweener.removeTween(this.glowContainer),void 0!==this.glowContainer&&(this.glowContainer.alpha=1)},i.prototype.fadeOutGlow=function(){Tweener.addTween(this.glowContainer,{alpha:0,time:2,transition:"easeOutSine"})},t=i,e.ScatterSymbol=t}(extrachilli=extrachilli||{}),function(e){var t,a,l;function i(e,t,i,n,s,o,r){this.container=new a,r?n.addChildAt(this.container,0):n.addChild(this.container),this.shadow=new l(i),this.shadow.setLayout(o),this.container.addChild(this.shadow),this.bg=new l(t),this.bg.setLayout(o),this.container.addChild(this.bg),this.sprite=new l(e),this.sprite.setLayout(s),this.container.addChild(this.sprite)}t=e.views||(e.views={}),a=utils.ContainerWrapper,l=utils.SpriteWrapper,i.prototype.remove=function(){this.container.removeChild(this.sprite),this.container.parent.removeChild(this.container)},i.prototype.getSprite=function(){return this.container},i.prototype.positionY=function(e){this.container.position.y=e},i.prototype.setVisible=function(e){this.container.visible=e},i.prototype.setSymbolVisible=function(e){this.sprite.visible=e},i.prototype.setSymbolShadowVisible=function(e){this.shadow.visible=e},e=i,t.Symbol=e}(extrachilli=extrachilli||{}),function(e){var r,i,a;function t(e,t){this.symbols=[],this.scatters=[],this.scatterOrder=[],this.symbolHeight=0,this.numSymbols=0,this.dropIn=!1,this.container=new i,t.addChild(this.container),this.blockHeight=e}r=e.views||(e.views={}),i=utils.ContainerWrapper,a=e.ExtraChilliTextureLoader,t.prototype.displaySymbols=function(e,t){if(this.scatterOrder=t.concat(),this.dropIn){e.reverse();for(o=this.symbols.length;o<this.numSymbols;o++)11===e[o]?(this.symbol=new r.ScatterSymbol(t[this.numSymbols-1-o],this.numSymbols,this.container),this.scatters.push(this.symbol)):(i=void 0,i=this.inFreeSpins?a.getTexture(a.SYMBOL_FREESPINS_BACKGROUNDS,this.numSymbols,e[o]):a.getTexture(a.SYMBOL_BACKGROUNDS,this.numSymbols,e[o]),this.symbol=new r.Symbol(a.getTexture(a.SYMBOLS,this.numSymbols,e[o]),i,a.getTexture(a.SYMBOL_SHADOWS,this.numSymbols),this.container,"MainReel/Symbol"+this.numSymbols,"MainReel/Symbol"+this.numSymbols,!0)),this.symbol.positionY(-this.symbolHeight),this.symbols.unshift(this.symbol);this.dropSymbols(),this.dropIn=!1}else{this.container.removeChildren(),this.symbols=[],this.scatters=[],this.numSymbols=e.length,this.symbolHeight=Math.floor(this.blockHeight/this.numSymbols);for(var i,n,s,o=0;o<this.numSymbols;o++)11===e[o]?(this.symbol=new r.ScatterSymbol(t[o],this.numSymbols,this.container),this.scatters.push(this.symbol)):(i=void 0,i=this.inFreeSpins?a.getTexture(a.SYMBOL_FREESPINS_BACKGROUNDS,this.numSymbols,e[o]):a.getTexture(a.SYMBOL_BACKGROUNDS,this.numSymbols,e[o]),n="MainReel/Symbol"+this.numSymbols,s="MainReel/Symbol"+this.numSymbols,this.symbol=new r.Symbol(a.getTexture(a.SYMBOLS,this.numSymbols,e[o]),i,a.getTexture(a.SYMBOL_SHADOWS,this.numSymbols),this.container,n,s)),this.symbol.positionY(o*this.symbolHeight),this.symbols.push(this.symbol)}},t.prototype.setY=function(e){this.container.position.y=e},t.prototype.getY=function(){return this.container.position.y},t.prototype.hideSymbol=function(e){void 0!==this.symbols[e]&&this.symbols[e].setSymbolVisible(!1)},t.prototype.showSymbols=function(){for(var e=0;e<this.numSymbols;e++)this.symbols[e].setVisible(!0)},t.prototype.removeFeatureDropSymbol=function(e){void 0!==this.symbols[e]&&(this.container.removeChild(this.symbols[e].getSprite()),this.symbols.splice(e,1))},t.prototype.removeSymbol=function(e){if(void 0!==this.symbols[e]){this.container.removeChild(this.symbols[e].getSprite()),this.symbols[e]=null;for(var t=e;0<=t;t--)null!==this.symbols[t]&&Tweener.addTween(this.symbols[t].getSprite(),{y:this.symbols[t].getSprite().position.y-15,transition:"easeOutExpo",time:.45})}},t.prototype.collapseSymbols=function(){if(this.container.children.length<this.numSymbols){this.symbols.reverse();for(var e=0;e<this.symbols.length;)null!==this.symbols[e]?(this.symbol=this.symbols[e],e++):this.symbols.splice(e,1);this.symbols.reverse(),this.dropIn=!0}},t.prototype.dropSymbolsForFeatureDrop=function(e,t){for(var i=0;i<e.length;i++){i<t?(11===e[i]?(this.symbol=new r.ScatterSymbol(this.scatterOrder[i],this.numSymbols,this.container),this.scatters.push(this.symbol)):this.symbol=new r.Symbol(a.getTexture(a.SYMBOLS,this.numSymbols,e[i]),a.getTexture(a.SYMBOL_BACKGROUNDS,this.numSymbols,e[i]),a.getTexture(a.SYMBOL_SHADOWS,this.numSymbols),this.container,"MainReel/Symbol"+this.numSymbols,"MainReel/Symbol"+this.numSymbols,!0),this.symbol.positionY(-this.symbolHeight*(i+1)),this.symbols.unshift(this.symbol)):this.symbol=this.symbols[i];var n=.05*(this.numSymbols-i);Tweener.addTween(this.symbol.getSprite(),{y:i*this.symbolHeight,delay:n,time:.5-n,transition:"easeOutBounce"})}},t.prototype.dropSymbols=function(){for(var e=0;e<this.numSymbols;e++){this.symbol=this.symbols[e];var t=.05*(this.numSymbols-e);Tweener.addTween(this.symbol.getSprite(),{y:e*this.symbolHeight,delay:t,time:.5-t,transition:"easeOutBounce"})}},t.prototype.setFreeSpins=function(e){this.inFreeSpins=e},t.prototype.flashScatters=function(){for(var e=0;e<this.scatters.length;e++)this.scatters[e].showGlow(),this.scatters[e].fadeOutGlow()},t.prototype.animateScatters=function(){for(var e=0;e<this.scatters.length;e++)this.scatters[e].showGlow()},e=t,r.SymbolBlock=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(o){var e,t,i,a,l,u,r,h,p,n,c,d,s,m,f,g,y,S,_,b,T,x,v,E,I,w,C,R;function B(){return null!==t&&t.apply(this,arguments)||this}function F(){return null!==y&&y.apply(this,arguments)||this}function A(){return null!==_&&_.apply(this,arguments)||this}function M(){return null!==T&&T.apply(this,arguments)||this}function P(){return null!==v&&v.apply(this,arguments)||this}function G(){return null!==I&&I.apply(this,arguments)||this}function D(e){var t=C.call(this)||this;return t.PERCENT_INFO_DISPLAY_Y=.05,t.LOGO_HEIGHT=0,t.LOGO_WIDTH=0,t.BUTTON_WIDTH=0,t.BUTTON_HEIGHT=0,t.GAME_WIDTH=738,t.GAME_HEIGHT=500,t.specialButtonPos1={x:0,y:0},t.specialButtonPos2={x:0,y:0},t.flashID=0,t.flashTimeoutID=0,t.targetTime=0,t.forceWideScreen=utils.DeviceInfo.onIPhone(),t.gameViewRatio=1,t.hasBeenResized=!1,t.lastW=1e3,t.lastH=1e3,t.container=new i,t.topContainer=new i,e.addChild(t.container),e.addChild(t.topContainer),t.infoContainer=new i,t.topContainer.addChild(t.infoContainer),t.setupSignals(),t.setUpInfo(),t.setupButtons(),t.setupLogo(),t.registerTextFields({balance:t.balanceAmount,freeRoundsPlayed:t.freeRoundsDisplay.played,freeRoundsRemaining:t.freeRoundsDisplay.remaining,freeRoundStake:t.freeRoundStakeDisplay.amount,freeRoundWin:t.freeRoundWinDisplay.amount,freeSpinsPlayed:t.freeSpinsDisplay.played,freeSpinsRemaining:t.freeSpinsDisplay.remaining,freeSpinStake:t.freeSpinStakeDisplay.amount,freeSpinWin:t.freeSpinWinDisplay.amount,stake:t.stakeButton.amount,stopButtonLabel:t.stopButton.label,talkback:t.talkback.text,win:t.winAmount}),t}e=o.views||(o.views={}),i=utils.ContainerWrapper,a=utils.SpriteWrapper,l=utils.TextWrapper,u=genericgame.TextureLoader,r=genericgame.GenericGame,h=utils.SoundWrapper,p=utils.TranslationManager,n=utils.Currency,c=utils.AnimatedSpriteWrapper,d=utils.GameTimer,s=o.models.ExtraChilliModel,m=o.ExtraChilliTextureLoader,f=genericgame.views.UIState,__extends(B,t=i),__extends(F,y=g=B),S=F,__extends(A,_=i),b=A,__extends(M,T=i),x=M,__extends(P,v=i),E=P,__extends(G,I=i),w=G,C=genericgame.views.UI,__extends(D,C),D.prototype.resize=function(e,t){this.hasBeenResized=!0,this.lastW=e,this.lastH=t,this.repositionUI(e,t)},D.prototype.resizeAgain=function(){this.hasBeenResized&&this.resize(this.lastW,this.lastH)},D.prototype.setState=function(e){this.state!=e&&(this.state=e,this.onStateChange(e),this.resizeAgain())},D.prototype.updateFreeSpinWinMultiplier=function(e){this.setFreeSpinWinMultiplier(e)},D.prototype.popFreeSpinsRemaining=function(e){this.playFreeSpinsRemainingPopAnimation(e)},D.prototype.repositionUI=function(e,t){this.repositionLogo(e,t),this.repositionInfo(e,t),this.repositionButtons(e,t)},D.prototype.setFeatureDropTotal=function(e){this.featureDropButton.amount.setText(n.format(e))},D.prototype.setFreeSpinWinMultiplier=function(e){this.freeSpinWinMultiplierDisplay.amount.setText("x"+e)},D.prototype.repositionLogo=function(e,t){var i,n,s,o=0,r=0,a=0,l=0,u=0,h=0,p=0;e<t?(o=t/2-550*(e/768)/2,r=e/2-15,u=Math.min(r/this.LOGO_WIDTH,o/this.LOGO_HEIGHT),l=5,a=e/2,h=.5,p=0,i=null,amplify.publish("GetBackgroundTopPosGlobal",{cb:function(e){i=e}}),null!=i&&(s=this.container.toLocal(i,stage),l=Math.max(s.y+10,l))):t/9<=e/16||this.forceWideScreen?(s=0<e-(n=(t-.15*t)/this.GAME_HEIGHT*this.GAME_WIDTH)-.1*e?(e-n-.1*e)/2:10,r=e-(n+.13*e),o=(t-this.PERCENT_INFO_DISPLAY_Y*t)/5,u=Math.min(r/this.LOGO_WIDTH,o/this.LOGO_HEIGHT),a=n+s+((r=this.LOGO_WIDTH*u)<e-n?(e-n-r)/2:0)/4,l=.05*t):(a=e/2,l=t-.15*t-this.PERCENT_INFO_DISPLAY_Y*t/2,l+=10,o=.15*t,r=.35*e,u=Math.min(r/(1.2*this.LOGO_WIDTH),o/(1.2*this.LOGO_HEIGHT)),h=.5),this.logo.anchor.set(h,p),this.logo.position.x=a,this.logo.position.y=l,this.logo.scale.set(u)},D.prototype.repositionInfo=function(e,t){var i=this.balance.height/this.balance.scale.y,n=1.2*i,s=(e-30)/3.25,o=Math.max(.05*t,D.INFO_HEIGHT),o=Math.min(o/n,s/D.INFO_TEXT_WIDTH),s=n*o,n=t-s,i=i*o,o=D.INFO_TEXT_WIDTH*o,t=t-i/2;this.setPos(this.balance,o/2,t,o,i),this.setPos(this.talkback,e/2,t,1.5*o,i),this.setPos(this.infoBG,0,n,e,s),this.setPos(this.win,e-.75*o*.5,t,.75*o,i)},D.prototype.repositionButtons=function(e,t){var i,n,s,o,r,a,l,u,h,p,c,d,m,f=e/t,g=this.playButton.bg.texture.width,y=this.playButton.bg.texture.height,S=this.featureDropButton;S.removeChild(S.anim),t/9<=e/16||this.forceWideScreen&&t<=e?(d=this.gameViewRatio,a=y*(d=Math.min(t/(8*y),d)),l=g*d,h=t-.1*t,m=Math.round(a/10),u=(i=this.logo.position.x+this.logo.width/2-l/2)+l/2,o=(s=(_=(n=h-1.15*a)-a-m)-a-m)-a-m,r=s-a-2*m,this.setPos(this.playButton,i,n,l,a),this.setPos(this.freeSpinsDisplay,i,n,l,a),this.setPos(this.freeSpinWinDisplay,i,_,l,a),this.setPos(this.freeSpinStakeDisplay,i,s,l,a),this.setPos(this.freeSpinWinMultiplierDisplay,i,o,l,a),this.setPos(this.stakeButton,i,s,l,a),this.setPos(this.featureDropButton,i,r,l,a),this.setPos(this.autoButton,u,_,l/2,a),this.setPos(this.paysButton,i,_,l/2,a),this.setPos(this.stopButton,this.playButton.x,this.playButton.y,l,a),this.setPos(this.freeRoundsDisplay,i,s,l,a),this.setPos(this.discardFreeGamesButton,i-l/4,s+a/4,l/4,a/2),this.setPos(this.freeRoundWinDisplay,i,o,l,a),this.setPos(this.freeRoundStakeDisplay,u,_,l/2,a),this.setPos(this.bankButton,0,0,l/2,a),this.setPos(this.retrieveFreeRoundsButton,0,0,l/2,a),this.specialButtonPos1={x:.15*l,y:h-a},this.specialButtonPos2={x:.65*l,y:h-a},amplify.publish("UpdateFeatureDropPosition",{x:S.x+S.width/2,y:S.y-.75*S.height})):(d=this.gameViewRatio,a=y*(d=e<t?(p=4.1,d=Math.min(e/(g*p),d),Math.min(t/(9.5*y),d)):(p=4.75,c=9.5-1.5*(f-.5625),d=Math.min(e/(g*p),d),Math.min(t/(y*c),d))),l=g*d,m=Math.round(a/10),h=(u=5+l)+l/2,c=(y=(p=(f=e-l-5)-l/2)-l/2)-l/2,g=f+l/2,d=Math.max(.01*t,e<t?10:2),_=(d=t-this.balance.height-a-d)-a-m,m=d-a-2*m,e<t?(this.setPos(this.stakeButton,5,d,l,a),this.setPos(this.playButton,f,d,l,a),this.setPos(this.stopButton,f,d,l,a),this.setPos(this.autoButton,p,d,l/2,a),this.setPos(this.paysButton,y,d,l/2,a),this.setPos(this.freeSpinsDisplay,f,d,l,a),this.setPos(this.freeSpinWinDisplay,y,d,l,a),this.setPos(this.freeSpinStakeDisplay,5,d,l,a),this.setPos(this.freeSpinWinMultiplierDisplay,u,d,l,a),this.setPos(this.freeRoundsDisplay,5,d,l,a),this.setPos(this.discardFreeGamesButton,5,d-a/2,l/4,a/2),this.setPos(this.freeRoundWinDisplay,u,d,l,a),this.setPos(this.freeRoundStakeDisplay,p,d,l/2,a),this.setPos(this.bankButton,0,0,l/2,a),this.setPos(this.retrieveFreeRoundsButton,0,0,l/2,a),this.setPos(this.featureDropButton,u,d,l,a),this.specialButtonPos1={x:5,y:m},this.specialButtonPos2={x:5+l/2,y:m}):(this.setPos(this.stakeButton,5,d,l,a),this.setPos(this.paysButton,u,d,l/2,a),this.setPos(this.playButton,f,d,l,a),this.setPos(this.stopButton,f,d,l,a),this.setPos(this.autoButton,p,d,l/2,a),this.setPos(this.freeSpinsDisplay,f,d,l,a),this.setPos(this.freeSpinWinDisplay,y,d,l,a),this.setPos(this.freeSpinStakeDisplay,5,d,l,a),this.setPos(this.freeSpinWinMultiplierDisplay,u,d,l,a),this.setPos(this.freeRoundsDisplay,5,d,l,a),this.setPos(this.discardFreeGamesButton,5,d-a/2,l/4,a/2),this.setPos(this.freeRoundStakeDisplay,p,d,l/2,a),this.setPos(this.bankButton,0,0,l/2,a),this.setPos(this.retrieveFreeRoundsButton,0,0,l/2,a),6*l<e?(this.setPos(this.freeRoundWinDisplay,h,d,l,a),this.setPos(this.featureDropButton,h,d,l,a),this.specialButtonPos1={x:y,y:d},this.specialButtonPos2={x:c,y:d}):5.05*l<e?(this.setPos(this.freeRoundWinDisplay,5,_,l,a),this.setPos(this.featureDropButton,5,m,l,a),this.specialButtonPos1={x:h,y:d},this.specialButtonPos2={x:y,y:d}):(this.setPos(this.freeRoundWinDisplay,5,_,l,a),this.setPos(this.featureDropButton,5,m,l,a),this.specialButtonPos1={x:g,y:_},this.specialButtonPos2={x:f,y:_})),amplify.publish("UpdateFeatureDropPosition",{x:S.x+S.width/2,y:S.y-S.height/2}));var _=this.stakeButton;this.setPos(this.stakeHeading,_.x+.2*_.width,_.y-.15*_.height,.6*_.width,.4*_.height),this.setPos(this.featureDropHeading,S.x,S.y-.259*S.height+.5,S.width,.26*S.height),S.addChild(S.anim),this.repositionSpecialButtons()},D.prototype.setPos=function(e,t,i,n,s){e.position.x=t,e.position.y=i,e.width=n,e.height=s},D.prototype.canUseAutoPlayButtonPosForSpecialButton=function(){return!this.autoButton.visible&&this.state==f.Normal},D.prototype.repositionSpecialButtons=function(){var e,t=[this.specialButtonPos1,this.specialButtonPos2];this.canUseAutoPlayButtonPosForSpecialButton()&&t.unshift({x:this.autoButton.x,y:this.autoButton.y}),this.bankButton.visible&&(e=t.shift(),this.bankButton.position.set(e.x,e.y)),this.retrieveFreeRoundsButton.visible&&(e=t.shift(),this.retrieveFreeRoundsButton.position.set(e.x,e.y))},D.prototype.setupButtons=function(){this.playButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_A_Spin,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_03,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_03_Pressed,onClickFunction:function(){amplify.publish("OnPlayPressed")}}),this.BUTTON_WIDTH=this.playButton.width,this.BUTTON_HEIGHT=this.playButton.height,this.topContainer.addChild(this.playButton),this.stopButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_A_Stop,text:"0",fontSize:50,fontColour:0,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_05,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_05_Pressed,onClickFunction:function(){amplify.publish("StopAutoSpinsSignal")}}),this.topContainer.addChild(this.stopButton),this.stakeButton=this.addSelectionButton({text:"",fontSize:30,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_01,alpha:.75,onClickFunctions:[function(){amplify.publish("OnStakePlusPressed")},function(){amplify.publish("OnStakeMinusPressed")}]}),this.container.addChild(this.stakeButton),this.stakeHeading=this.addHeading({text:p.getString("STAKE"),fontSize:30,textureID:o.ExtraChilliTextureLoader.UI_BUT_H,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_H_BG_01,alpha:.75,colorTints:[0]}),this.container.addChild(this.stakeHeading),this.autoButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_D_Autoplay,textureID:o.ExtraChilliTextureLoader.UI_BUT_D,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_03,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_03_Pressed,onClickFunction:function(){amplify.publish("OnAutoPressed")}}),this.container.addChild(this.autoButton),this.paysButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_D_Paytable,textureID:o.ExtraChilliTextureLoader.UI_BUT_D,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04_Pressed,onClickFunction:function(){amplify.publish("OnPaysPressed")}}),this.container.addChild(this.paysButton),this.bankButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_D_Bank,textureID:o.ExtraChilliTextureLoader.UI_BUT_D,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04_Pressed,onClickFunction:function(){amplify.publish("OnBankPressed")}}),this.container.addChild(this.bankButton),this.retrieveFreeRoundsButton=this.addButton({image:o.ExtraChilliTextureLoader.UI_BUT_D_Prize,textureID:o.ExtraChilliTextureLoader.UI_BUT_D,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04,bgTexturePressedID:o.ExtraChilliTextureLoader.UI_BUT_D_BG_04_Pressed,onClickFunction:function(){amplify.publish("OnRetrieveFreeRoundsPressed")}}),this.container.addChild(this.retrieveFreeRoundsButton),this.featureDropHeading=this.addHeading({bgTextureID:o.ExtraChilliTextureLoader.Feature_Drop_Button_BG_Top}),this.container.addChild(this.featureDropHeading),this.featureDropButton=this.addFeatureDropButton({text:"",fontSize:24,textureID:o.ExtraChilliTextureLoader.Feature_Drop_Button,bgTextureID:o.ExtraChilliTextureLoader.Feature_Drop_Button_BG_Bottom,alpha:1,onClickFunctions:[function(){amplify.publish("OnFeatureDropPressed")}]}),this.container.addChild(this.featureDropButton),this.freeSpinsDisplay=this.addSpinsDisplay({label:p.getString("FREE_SPINS"),bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_02}),this.container.addChild(this.freeSpinsDisplay),this.freeSpinWinDisplay=this.addDisplay({label:p.getString("TOTAL_WINNINGS"),labelFontSize:25,amountFontSize:40,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_04}),this.container.addChild(this.freeSpinWinDisplay),this.freeSpinStakeDisplay=this.addDisplay({label:p.getString("FREE_SPIN_STAKE"),labelFontSize:25,amountFontSize:40,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_04}),this.container.addChild(this.freeSpinStakeDisplay),this.freeSpinWinMultiplierDisplay=this.addDisplay({label:p.getString("WIN_MULTIPLIER"),labelFontSize:25,amountFontSize:40,textureID:o.ExtraChilliTextureLoader.UI_BUT_A,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_A_BG_04}),this.container.addChild(this.freeSpinWinMultiplierDisplay),this.freeRoundsDisplay=this.addSpinsDisplay({label:this.getFreeRoundTitleText(),colorTints:[19560],bgTextureID:u.UI_BUT_A_BG_01}),this.container.addChild(this.freeRoundsDisplay),this.freeRoundWinDisplay=this.addDisplay({label:p.getString("TOTAL_WINNINGS"),labelFontSize:25,amountFontSize:30,colorTints:[19560],textureID:u.UI_BUT_A,bgTextureID:u.UI_BUT_A_BG_01}),this.container.addChild(this.freeRoundWinDisplay),this.freeRoundStakeDisplay=this.addDisplay({label:p.getString("STAKE"),labelFontSize:25,amountFontSize:30,colorTints:[19560],textureID:u.UI_BUT_D,bgTextureID:u.UI_BUT_D_BG_01}),this.container.addChild(this.freeRoundStakeDisplay),this.discardFreeGamesButton=new a(m.getTexture("Discard_01")),this.discardFreeGamesButton.click=this.discardFreeGamesButton.tap=function(){amplify.publish("DiscardCurrentOfferClicked")},this.container.addChild(this.discardFreeGamesButton),this.playButton.interactive=!1,this.stopButton.visible=!1,this.bankButton.visible=!1,this.retrieveFreeRoundsButton.visible=!1,this.discardFreeGamesButton.visible=this.isDiscardFreeGamesButtonApplicable()},D.prototype.addFeatureDropButton=function(e){var t=new x,i=new a(m.getTexture(m.UI,e.bgTextureID));t.addChild(i),t.bg=i,this.container.addChild(t);var n=new l("",t,{font:"bold "+e.fontSize+"px Arial",fill:16777215},{width:i.width-30,anchorX:.5,anchorY:.5,x:i.width/2,y:53});t.amount=n;e=this.addButton({text:"BUY",fontSize:30,fontColour:16777215,bgTextureID:o.ExtraChilliTextureLoader.Feature_Drop_Button,alpha:1,onClickFunction:e.onClickFunctions[0]});e.position.x=0,e.position.y=i.height-e.height,t.addChild(e),t.buy=e;var s=new c(r.textureLoader.getAnimation(u.FEATURE_DROP_COIN_DISAPPEAR_ANIM));return s.anchor.set(.5),s.position.x=e.width/2,s.position.y=0,s.scale.set(.8),s.alpha=0,s.animationSpeed=.5,s.loop=!1,s.onComplete=function(){return s.alpha=0},t.anim=s,t},D.prototype.addButton=function(e){var t,i,n=this,s=new g,o=m.getTexture(m.UI,e.bgTextureID),r=new a(o);return s.addChild(r),s.bg=r,void 0!==e.colorTints?r.tint=e.colorTints[0]:void 0!==e.bgTexturePressedID&&((t=new a(m.getTexture(m.UI,e.bgTexturePressedID))).alpha=0,s.addChild(t),s.bgPressed=t),e.alpha&&(r.alpha=e.alpha),s.onClick=e.onClickFunction,s.mousedown=s.touchstart=function(){t&&(e.image==u.UI_BUT_A_Spin&&(d.clearInterval(n.flashID),s.flash=!1),t.alpha=1),e.colorTints&&(s.bg.tint=e.colorTints[1])},s.mouseup=s.touchend=function(){t&&(e.image==u.UI_BUT_A_Spin&&n.startFlashPlayButton(),t.alpha=0),e.colorTints&&(s.bg.tint=e.colorTints[0])},s.click=s.tap=function(){e.image!=u.UI_BUT_A_Spin&&h.playSound("Clicker"),s.onClick()},s.interactive=!0,void 0!==e.image&&((o=new a(m.getTexture(m.UI,e.image))).anchor.set(.5,.5),o.x=r.width/2,o.y=r.height/2,e.imageRotation&&(o.rotation=e.imageRotation*Math.PI/180),s.addChild(o)),void 0!==e.text&&(i=new l(e.text,s,{font:"bold "+e.fontSize+"px Arial",fill:e.fontColour},{x:r.width/2,y:r.height/2,width:.8*r.width,anchorX:.5,anchorY:.5}),s.label=i),void 0!==e.textureID&&(i=m.getTexture(m.UI,e.textureID),s.addChild(new utils.SpriteWrapper(i))),s},D.prototype.addDisplay=function(e){var t=new E,i=m.getTexture(u.UI,e.bgTextureID),n=new a(i);t.addChild(n),t.bg=n,e.colorTints&&(n.tint=e.colorTints[0]);var s=m.getTexture(u.UI,e.textureID),i=new a(s);t.addChild(i);s=new l(e.label,t,{font:"bold "+e.labelFontSize+"px Arial",fill:16777215},{width:n.width-30,anchorX:.5,anchorY:1,x:i.width/2,y:i.height-20});t.label=s;i=new l("0",t,{font:"bold "+e.amountFontSize+"px Arial",fill:16777215},{width:n.width-30,anchorX:.5,anchorY:.75,x:i.width/2,y:i.height/2});return t.amount=i,t},D.prototype.addHeading=function(e){var t=new g,i=new a(m.getTexture(m.UI,e.bgTextureID));t.addChild(i),t.bg=i;var n=new a(m.getTexture(m.UI,e.textureID));return t.addChild(n),this.container.addChild(t),e.colorTints&&(i.tint=e.colorTints[0]),e.alpha&&(i.alpha=e.alpha),e.text&&(i=new l(e.text,t,{font:"bold "+e.fontSize+"px Arial",fill:16777215},{width:.8*i.width,anchorX:.5,anchorY:.5,x:i.width/2,y:i.height/2}),t.text=i),t},D.prototype.addSelectionButton=function(e){var t=new S,i=m.getTexture(m.UI,e.textureID),n=new a(m.getTexture(m.UI,e.bgTextureID));t.addChild(n),t.bg=n;i=new a(i);t.addChild(i),this.container.addChild(t),e.colorTints&&(n.tint=e.colorTints[0]),e.alpha&&(n.alpha=e.alpha);i=new l("",t,{font:"bold "+e.fontSize+"px Arial",fill:0},{width:n.width-30,anchorX:.5,anchorY:.5,x:n.width/2,y:n.height/3});t.amount=i;i=this.addButton({image:o.ExtraChilliTextureLoader.UI_Arrow_01,imageRotation:180,textureID:o.ExtraChilliTextureLoader.UI_BUT_E,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_E_BG_01,alpha:1,colorTints:[39168,65280,3355443],onClickFunction:e.onClickFunctions[1]});i.position.x=8,i.position.y=n.height-i.height-8;e=this.addButton({image:o.ExtraChilliTextureLoader.UI_Arrow_01,textureID:o.ExtraChilliTextureLoader.UI_BUT_E,bgTextureID:o.ExtraChilliTextureLoader.UI_BUT_E_BG_01,alpha:1,colorTints:[39168,65280,3355443],onClickFunction:e.onClickFunctions[0]});return e.position.x=i.position.x+i.width,e.position.y=i.position.y,t.addChild(e),t.addChild(i),t.plus=e,t.minus=i,t},D.prototype.addSpinsDisplay=function(e){var t=new b,i=m.getTexture(m.UI,e.bgTextureID),n=new a(i);t.addChild(n),t.bg=n,e.colorTints&&(n.tint=e.colorTints[0]);i=m.getTexture(m.UI,m.UI_BUT_A);t.addChild(new a(i));e=new l(e.label,t,{font:"bold 25px Arial",fill:16777215},{width:.8*n.width,anchorX:.5,anchorY:0,x:i.width/2,y:20});t.label=e;e=new l(p.getString("FREE_SPINS_PLAYED"),t,{font:"bold 20px Arial",fill:16777215},{width:.4*n.width,anchorX:.5,anchorY:1,x:i.width/4+5,y:i.height-20});t.playedLabel=e;e=new l("FREE_SPINS_REMAINING",t,{font:"bold 20px Arial",fill:16777215},{width:.4*n.width,anchorX:.5,anchorY:1,x:i.width-i.width/4-5,y:i.height-20});t.remainingLabel=e;e=new l("0",t,{font:"bold 50px Arial",fill:16777215},{width:n.width/3,anchorX:.5,anchorY:.5,x:i.width/4+5,y:i.height/2});t.played=e;i=new l("0",t,{font:"bold 50px Arial",fill:16777215},{width:n.width/3,anchorX:.5,anchorY:.5,x:i.width-i.width/4-5,y:i.height/2});t.remaining=i;var s=new c(r.textureLoader.getAnimation(o.ExtraChilliTextureLoader.EXTRA_SPIN_POP_ANIM));return t.addChild(s),s.blendMode=PIXI.BLEND_MODES.ADD,s.anchor.set(.5,.5),s.position.x=i.x,s.position.y=i.y,s.alpha=0,s.scale.set(.8),s.animationSpeed=.4,s.loop=!1,s.onComplete=function(){s.alpha=0},t.pop=s,t},D.prototype.playFreeSpinsRemainingPopAnimation=function(e){this.freeSpinsDisplay.remaining.setText(""+e),this.freeSpinsDisplay.pop.alpha=1,this.freeSpinsDisplay.pop.gotoAndPlay(1)},D.prototype.stopFlashPlayButton=function(){d.clearInterval(this.flashID),d.clearTimeout(this.flashTimeoutID),Tweener.removeTween(this.playButton.bgPressed),this.playButton.flash=!1,this.playButton.bgPressed.alpha=0},D.prototype.startFlashPlayButton=function(){var e=this;d.clearInterval(this.flashID),this.flashID=d.setInterval(function(){return e.flashPlayButton()},1e3),this.playButton.flash=!1},D.prototype.flashPlayButton=function(){this.playButton.flash?(Tweener.addTween(this.playButton.bgPressed,{alpha:1,time:.5}),this.playButton.flash=!1):(Tweener.addTween(this.playButton.bgPressed,{alpha:0,time:.5}),this.playButton.flash=!0)},D.prototype.setupSignals=function(){var i=this;amplify.subscribe("GameViewResized",function(e){i.gameViewRatio=e.ratio,i.resize(e.w,e.h)}),amplify.subscribe("ShowFeatureGambleWindow",function(){i.hideUI()}),amplify.subscribe("ShowGambleFeature",function(){i.hideUI()}),amplify.subscribe("RecoveredFreeSpinsSignal",function(){i.hideUI(),i.fadeInFreeSpinUI()}),amplify.subscribe("StartAutoSpinsSignal",function(){i.showAutoSpinUI()}),amplify.subscribe("StopAutoSpinsSignal",function(){i.hideAutoSpinUI()}),amplify.subscribe("HideAutoPlay",function(){i.autoButton.visible=!1,i.resizeAgain()}),amplify.subscribe("UpdateFeatureDropTotalSignal",function(e){i.setFeatureDropTotal(e.total)}),amplify.subscribe("ShowFeatureDropUICoinAnimation",function(){i.featureDropButton.anim.gotoAndPlay(1),i.featureDropButton.anim.alpha=1,h.playSound("InTheSlot")}),amplify.subscribe("SetUIEnabled",function(e){i.setEnabled(e.enabled)}),amplify.subscribe("ShowNormalUISignal",function(){i.hideUI(),i.fadeInRegularUI()}),amplify.subscribe("OnAutoOpened",function(){i.autoOpen=!0,i.stopFlashPlayButton()}),amplify.subscribe("OnAutoClosed",function(){i.autoOpen&&i.playButton.interactive&&(d.clearTimeout(i.flashTimeoutID),i.startFlashPlayButton()),i.autoOpen=!1}),amplify.subscribe("SetWinTargetSignal",function(e){i.targetTime=d.getCurrentTime()+e.targetTime}),amplify.subscribe("UpdateFreeSpinMultiplier",function(e){i.setFreeSpinWinMultiplier(e.multiplier)}),amplify.subscribe("RecoveredFreeSpinsSignal",function(e){var t=s.get();i.setFreeSpinWinMultiplier(e.multiplier),i.updateFreeSpins(t.numFreeSpins-t.freeSpinsRetriggerAmount,t.totalFreeSpins-t.numFreeSpins),i.updateFreeSpinWin(t.freeSpinWin)}),amplify.subscribe("AcceptedFreeRoundsSignal",function(e){e.optionSelected||(i.hideUI(),i.showFreeRoundsUI())}),amplify.subscribe("ShowFreeRoundsSignal",function(){i.hideUI(),i.showFreeRoundsUI()}),amplify.subscribe("FinishedFreeRoundsSignal",function(){i.hideUI(),i.showRegularUI()}),amplify.subscribe("showIntroScreenSignal",function(){i.hideUI(),i.hideLogo(),i.hideBottomBar()}),amplify.subscribe("IntroFinishedSignal",function(){i.hideUI(),i.showRegularUI(),i.showLogo(),i.showBottomBar(),amplify.publish("APIIntroFinishedSignal")}),amplify.subscribe("DisplayingFreeRoundScreenSignal",function(){i.hideUI(),i.hideLogo(),i.hideBottomBar()}),amplify.subscribe("HidingFreeRoundScreenSignal",function(){i.showLogo(),i.showBottomBar()}),amplify.subscribe("ShowCashierButton",function(e){i.setBankVisible(e.visible)}),amplify.subscribe("ShowRetrieveFreeRoundsButton",function(e){i.setRetrieveFreeRoundsVisible(e.visible)}),amplify.subscribe("OnRetrieveFreeRoundsPressed",function(){i.setRetrieveFreeRoundsVisible(!1)}),amplify.subscribe("StartFreeSpinsSignal",function(){i.hideUI(),i.fadeInFreeSpinUI()}),amplify.subscribe("FeatureBuyDisabled",function(){i.featureDropButton.buy.bg.tint=6250335,i.featureDropButton.buy.label.tint=6250335}),amplify.subscribe("RemoveFeatureDrop",function(){i.removeFeatureDrop=!0,i.hideFeatureDropUI()})},D.prototype.getRegularUIElementsForAlpha=function(){return[this.playButton,this.stopButton,this.autoButton,this.paysButton,this.bankButton,this.retrieveFreeRoundsButton,this.stakeButton,this.stakeHeading,this.featureDropButton,this.featureDropHeading]},D.prototype.getRegularUIElementsForInteractivity=function(){return[this.playButton,this.stopButton,this.autoButton,this.paysButton,this.bankButton,this.retrieveFreeRoundsButton,this.featureDropButton.buy,this.stakeButton.minus,this.stakeButton.plus]},D.prototype.getFreeRoundOnlyElementsForAlpha=function(){return[this.freeRoundsDisplay,this.freeRoundStakeDisplay,this.freeRoundWinDisplay,this.discardFreeGamesButton]},D.prototype.getFreeSpinOnlyElementsForAlpha=function(){return[this.freeSpinsDisplay,this.freeSpinWinDisplay,this.freeSpinStakeDisplay,this.freeSpinWinMultiplierDisplay]},D.prototype.setBankVisible=function(e){this.bankButton.visible=e,this.resizeAgain()},D.prototype.setRetrieveFreeRoundsVisible=function(e){this.retrieveFreeRoundsButton.visible=e,this.resizeAgain()},D.prototype.showFreeRoundsUI=function(){this.getFreeRoundOnlyElementsForAlpha().forEach(function(e){return e.alpha=1}),this.playButton.interactive=!0,this.playButton.alpha=1,this.stopButton.interactive=!0,this.stopButton.alpha=1,this.paysButton.interactive=!0,this.paysButton.alpha=1,this.discardFreeGamesButton.interactive=!0,this.setState(f.FreeRounds)},D.prototype.hideUI=function(){this.getRegularUIElementsForAlpha().forEach(function(e){Tweener.removeTween(e),e.alpha=0}),this.getRegularUIElementsForInteractivity().forEach(function(e){return e.interactive=!1}),this.getFreeSpinOnlyElementsForAlpha().forEach(function(e){return e.alpha=0}),this.getFreeRoundOnlyElementsForAlpha().forEach(function(e){return e.alpha=0}),this.discardFreeGamesButton.interactive=!1,amplify.publish("UpdateFeatureDropCoinVisibility",{visible:!1}),this.removeFeatureDrop&&this.hideFeatureDropUI()},D.prototype.showRegularUI=function(){this.getRegularUIElementsForAlpha().forEach(function(e){Tweener.removeTween(e),e.alpha=1}),this.getRegularUIElementsForInteractivity().forEach(function(e){return e.interactive=!0}),this.setState(f.Normal),amplify.publish("UpdateFeatureDropCoinVisibility",{visible:!0})},D.prototype.hideLogo=function(){this.logo.visible=!1},D.prototype.hideBottomBar=function(){this.infoContainer.visible=!1},D.prototype.showLogo=function(){this.logo.visible=!0},D.prototype.showBottomBar=function(){this.infoContainer.visible=!0},D.prototype.fadeInRegularUI=function(){for(var e=0,t=this.getRegularUIElementsForAlpha();e<t.length;e++)(i=t[e]).alpha=.01,Tweener.removeTween(i),Tweener.addTween(i,{alpha:1,time:1,transition:"easeInQuad"});for(var i,n=0,s=this.getRegularUIElementsForInteractivity();n<s.length;n++)(i=s[n]).interactive=!0;this.setState(f.Normal),amplify.publish("UpdateFeatureDropCoinVisibility",{visible:!0})},D.prototype.fadeInFreeSpinUI=function(){for(var e=0,t=this.getFreeSpinOnlyElementsForAlpha();e<t.length;e++){var i=t[e];Tweener.removeTween(i),Tweener.addTween(i,{alpha:1,time:1,transition:"easeInQuad"})}this.setState(f.FreeSpins)},D.prototype.showAutoSpinUI=function(){this.playButton.visible=!1,this.stopButton.visible=!0},D.prototype.hideAutoSpinUI=function(){this.playButton.visible=!0,this.stopButton.visible=!1},D.prototype.setEnabled=function(e){var t=this;this.container.interactiveChildren=e&&!s.get().triggeredFeatureDrop,this.playButton.interactive=e&&!!this.playButton.alpha,e?(d.clearTimeout(this.flashTimeoutID),this.flashTimeoutID=d.schedule(function(){return t.startFlashPlayButton()},this.targetTime+3e3)):this.stopFlashPlayButton()},D.prototype.setUpInfo=function(){this.setUpInfoDisplayBG(),this.setupWinDisplay(),this.setupBalanceDisplay(),this.setupTalkbackDisplay()},D.prototype.setUpInfoDisplayBG=function(){var e=m.getTexture(m.UI,m.UI_BottomBar_BG),t=e.frame.clone();t.x+=1,t.width-=2;e=new utils.TextureWrapper("",new PIXI.Texture(e.baseTexture,t,e.orig,e.trim,e.rotate));this.infoBG=new a(e),this.infoContainer.addChild(this.infoBG)},D.prototype.setupTalkbackDisplay=function(){this.talkback=new w,this.infoContainer.addChild(this.talkback),this.talkback.text=new l("",this.talkback,{font:D.TALKBACK_TEXT_SIZE+"px Arial",fill:13421772},{width:1.5*D.INFO_TEXT_WIDTH,anchorX:.5,anchorY:.5})},D.prototype.setupBalanceDisplay=function(){this.balance=new i,this.infoContainer.addChild(this.balance),this.balanceAmount=new l("",this.balance,{font:D.TALKBACK_TEXT_SIZE+"px Arial",fill:13421772},{width:D.INFO_TEXT_WIDTH,anchorX:.5,anchorY:.5}),this.setupBalanceDisplayInteraction(this.balance)},D.prototype.setupWinDisplay=function(){this.win=new i,this.infoContainer.addChild(this.win),this.winAmount=new l("",this.win,{font:D.TALKBACK_TEXT_SIZE+"px Arial",fill:13421772},{width:.75*D.INFO_TEXT_WIDTH,anchorX:.5,anchorY:.5})},D.prototype.setupLogo=function(){var e=m.getTexture(m.DB_Logo_01);this.LOGO_HEIGHT=e.height,this.LOGO_WIDTH=e.width,this.logo=new a(e),this.logo.anchor.set(.5,0),this.container.addChild(this.logo),this.logo.interactive=!0,this.logo.mousedown=this.logo.touchstart=function(){amplify.publish("TriggerFreeSpinsSignal")}},D.prototype.hideFeatureDropUI=function(){this.featureDropButton.buy.interactive=!1,this.featureDropButton.visible=!1,this.featureDropHeading.visible=!1},D.INFO_TEXT_WIDTH=250,D.INFO_HEIGHT=25,D.TALKBACK_TEXT_SIZE=20,R=D,e.UI=R}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(i){var e,n,s,o,r,t;function a(e,t,i){i=n.call(this,e,t,i,0)||this;return i.sparkles=[],i.setupSparkles("WildSparkleContainer_01"),i.setupSparkles("WildSparkleContainer_02"),i.setupSparkles("WildSparkleContainer_03"),i}e=i.views||(i.views={}),s=utils.ContainerWrapper,o=utils.AnimatedSpriteWrapper,r=genericgame.GenericGame,n=e.CartSymbol,__extends(a,n),a.prototype.setSymbolVisible=function(e){n.prototype.setSymbolVisible.call(this,e),this.setSparklesVisible(e)},a.prototype.setSparklesVisible=function(e){for(var t=0;t<this.sparkles.length;t++)this.sparkles[t].visible=e},a.prototype.setupSparkles=function(e){var t=new s(e,"MainReel/Symbol3/WildSparkles");this.container.addChild(t);e=new o(r.textureLoader.getAnimation(i.ExtraChilliTextureLoader.SPARKLES_ANIM));e.blendMode=PIXI.BLEND_MODES.ADD,e.animationSpeed=.25,e.play(),t.addChild(e),t.width=t.dimension.width,t.height=t.dimension.height,this.sparkles.push(e)},t=a,e.WildCartSymbol=t}(extrachilli=extrachilli||{}),function(n){var e,s,o,t;function i(e,t,i){this.container=e;i=1<i?2+Math.floor(3*Math.random()):Math.floor(2*Math.random());this.anim=new o(s.textureLoader.getAnimation(n.ExtraChilliTextureLoader.WIN_ANIMATIONS,i)),this.container.addChild(this.anim),this.anim.anchor.set(.5,.5);this.anim.scale.set([1.1,1.1,1,.9,.9][i]),this.anim.animationSpeed=1<i?1:.5,this.anim.position.x=700,this.anim.position.y=950,this.anim.rotation=2*Math.PI*Math.random(),this.anim.play(),this.rotSpeed=.6*Math.random()-.3,this.gravity=.98,this.velocityY=-40-(t?2*Math.random():Math.random()-4),this.velocityX=t?15*Math.random()-7.5:10*Math.random()-5}e=n.views||(n.views={}),s=genericgame.GenericGame,o=utils.AnimatedSpriteWrapper,i.prototype.animate=function(e){this.velocityY=this.velocityY+this.gravity*e,this.anim.position.x+=this.velocityX*e,this.anim.position.y+=this.velocityY*e,this.anim.rotation+=this.rotSpeed*e},i.prototype.getY=function(){return this.anim.position.y},i.prototype.remove=function(){this.container.removeChild(this.anim),this.anim=null},t=i,e.WinAnimation=t}(extrachilli=extrachilli||{}),function(u){var i,h,p,c,o,d,m,t,n,s,f,r,a,l,g,e;function y(e){this.scaleFactorDif=0,this.explosions=[],this.winSound="",this.winElements=[],this.totalTime=0,this.targetTime=0,this.pauseTime=0,this.steps=[],this.maxSpawns=[],this.step=0,this.startSpawn=1,this.animIndex=0,this.animIndexes=[],this.bigWinTexts=["BIG_WIN","SUPER_WIN","MEGA_WIN","EPIC_WIN"],this.bigWinTextStep=-1,this.bigWinSoundData=[{target:14200,pause:2e3,steps:[2e3,2400,2800,2850,2890,2895,3e3,3050,3100,3150,3200,3400,3800,4e3,4200,4400,4600,5e3,5200,5400,5600,5800,6200,6400,6600,6800,7100,7500,7700,7900,8100,8300,8400,8500,8600,8700,8900,9100,9300,9500,9600,9700,9900,10100,10300,10500,10700,10800,10900,11e3,11200,11400,11600,11800,12400,12600,12800,13e3,13200,13250,13300,13350,13400,13450,13500,13550,13600,13650,13700,13750,13800,14200],maxSpawns:[8,4,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,2,2,1,1,1,2,2,2,1,1,1,1,1,1,1,5,1,1,2,4,1,2,1,4,1,2,2,4,8,1,1,1,1,1,1,1,1,1,1,2,4,10],animIndexes:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,1,2,2,1,2,2,1,2,3,1,2,3,1,2,3,2,1,3,2,1,2,3,2,3,1,2,3,1,2,3,2,1,3,2,1,2,3,1,2,3,2,3,1,2,1,3,1,1,2,3,2]},{target:14500,pause:2e3,steps:[2e3,3600,5200,6e3,6400,6800,8100,8500,9300,11800,12600,13600,13800,14e3,14200,14500],maxSpawns:[30,20,10,2,2,19,3,25,13,12,8,6,4,2,1,28],animIndexes:[1,2,3,1,2,1,3,2,3,1,1,2,3,2,1,2]},{target:16e3,pause:2e3,steps:[2e3,3200,3600,6e3,6400,6800,7600,8500,8700,8900,9e3,9700,10800,12500,13800,14200,15e3,15500,16e3],maxSpawns:[18,4,12,4,8,16,10,5,8,13,8,6,4,24,5,7,9,12,30],animIndexes:[1,2,2,3,1,2,3,2,2,3,1,2,3,2,1,2,3,2,1]},{target:22460,pause:2e3,steps:[2e3,3650,5200,7e3,7800,8500,9500,11900,12500,13e3,13500,14e3,14500,15e3,15500,16e3,16500,17700,18500,19e3,19500,2e4,20500,21e3,21500,22460],maxSpawns:[20,20,4,8,12,16,8,29,20,15,10,8,4,3,2,2,1,29,4,8,4,8,10,12,16,23],animIndexes:[1,2,2,3,1,2,1,3,2,1,3,2,1,3,2,1,3,2,1,2,3,2,1,2,3,2]},{target:27600,pause:2e3,steps:[2e3,4400,4800,8500,10900,11300,11800,12e3,12200,12400,13e3,14e3,15e3,16e3,17e3,17200,17400,17600,17800,21100,22e3,23e3,24e3,24900,25800,26700,27600],maxSpawns:[20,5,10,20,5,10,8,6,4,2,4,8,16,8,16,2,4,6,8,24,12,6,3,2,1,1,30],animIndexes:[1,2,1,3,1,3,2,1,2,3,2,1,3,2,1,2,1,2,3,3,1,2,3,2,1,2,3]},{target:33850,pause:2e3,steps:[2e3,2600,2700,2800,3400,3500,3600,3800,4e3,4200,4400,4600,4800,5e3,5200,5900,6600,7900,8300,8700,9500,9900,11200,11600,12e3,12900,14400,14800,15200,16e3,16400,17700,18100,18500,19500,21e3,21500,21900,22300,22700,23400,24200,24600,25e3,26500,27500,27900,28300,2900,29500,30700,31200,31600,32600,33800],maxSpawns:[10,2,4,6,3,6,9,5,2,2,2,2,2,3,10,15,19,10,7,10,20,10,12,10,14,19,10,5,10,7,12,23,10,30,20,10,5,5,5,5,20,20,15,10,15,5,10,12,15,30,5,10,20,30,40],animIndexes:[1,1,2,3,1,2,3,1,1,1,1,1,1,2,1,2,3,3,2,1,2,2,3,3,2,2,1,1,2,3,2,1,2,3,3,1,2,3,2,1,1,2,1,2,3,1,2,1,3,2,3,2,3,2,1]}],this.mediumWinSoundData=[{interval:200,target:800,pause:200,steps:[],maxSpawns:[],animIndexes:[0]},{interval:100,target:2e3,pause:300,steps:[300],maxSpawns:[2],animIndexes:[0]},{interval:125,target:2200,pause:700,steps:[1800,2e3],maxSpawns:[2,4],animIndexes:[0,0]},{interval:100,target:3e3,pause:100,steps:[200,300,400,500,600,700,800,900,1e3,2700,3e3],maxSpawns:[1,1,1,2,2,2,3,3,6,5,10],animIndexes:[0,0,0,0,0,0,0,0,0,0]},{interval:90,target:4500,pause:1500,steps:[50,500,1e3,1500,4e3],maxSpawns:[3,6,9,12,15],animIndexes:[0,0,0,0,0,0]},{interval:50,target:6200,pause:2e3,steps:[2e3,2400,2800,3200,3400,3600,3700,4e3,4300,4500,4700,4900,5200,5300,5400,5500,5600,5700,5800,5900,6e3,6100,6200],maxSpawns:[4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,15],animIndexes:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],this.animFade=30,this.animatingSymbols=[],this.container=new c,e.addChild(this.container);e=new c("MainReel","MainReel").dimension;this.REEL_X=e.x,this.REEL_Y=e.y,this.REEL_SPACING=e.width/6,this.REEL_HEIGHT=e.height,this.REEL_WIDTH=e.width,e=new c("ExtraReel","ExtraReel").dimension,this.EXTRA_REEL_X=e.x,this.EXTRA_REEL_Y=e.y,this.EXTRA_REEL_SPACING=e.width/4,this.EXTRA_REEL_HEIGHT=e.height,this.EXTRA_REEL_WIDTH=e.width,e=new c("Symbol3Marker","ExtraReel").dimension,this.EXTRA_REEL_SYMBOL_X=e.x,this.EXTRA_REEL_SYMBOL_Y=e.y,this.EXTRA_REEL_SYMBOL_HEIGHT=e.height,this.EXTRA_REEL_SYMBOL_WIDTH=e.width,this.setupSignals(),this.winSymbols=[],this.wildWinSymbols=[],this.winAnims=[],this.blockerContainer=new c,this.container.addChild(this.blockerContainer),this.blocker=new s,this.blocker.lineStyle(2,255,1),this.blocker.beginFill(0,.5),this.blocker.drawRect(-2e3,-2e3,4e3,4e3),this.blockerContainer.addChild(this.blocker),this.blockerContainer.alpha=0,this.addGodRays(),this.winAnimationContainer=new c,this.winTextContainer=new c,this.container.addChild(this.winAnimationContainer),this.container.addChild(this.winTextContainer),this.bigWinText=new PIXI.BitmapText("",{fontName:"D891-Deco",fontSize:200,align:"right"}),this.bigWinText.alpha=1,this.winTextContainer.addChild(this.bigWinText),this.winCountText=new n(this.winTextContainer,700,600,1),this.countingUp=!1}i=u.views||(u.views={}),h=utils.AnimatedSpriteWrapper,p=utils.SpriteWrapper,c=utils.ContainerWrapper,o=genericgame.GenericGame,d=utils.TranslationManager,m=utils.Currency,t=utils.SoundWrapper,n=genericgame.views.Counter,s=utils.GraphicsWrapper,f=utils.BLEND_MODE,r=genericgame.views.FeatureDropSymbol,a=utils.GameTimer,l=u.models.ExtraChilliModel,g=u.ExtraChilliTextureLoader,y.prototype.endWins=function(){this.startSpin()},y.prototype.startSpin=function(){this.countingUp&&this.setWinCountText(this.totalWin.toFixed(2)),this.removeAllSymbols(),this.reset()},y.prototype.setGameViewPosition=function(e,t,i){this.gameViewPosX=e,this.gameViewPosY=t,this.gameViewScale=i,this.localFeatureDropX=(this.featureDropX-this.gameViewPosX)/this.gameViewScale-this.container.position.x*this.gameViewScale,this.localFeatureDropY=(this.featureDropY-this.gameViewPosY)/this.gameViewScale-this.container.position.y*this.gameViewScale},y.prototype.removeAllSymbols=function(){for(var e=0;e<this.winSymbols.length;e++)this.container.removeChild(this.winSymbols[e]),this.container.removeChild(this.winAnims[e]);for(e=0;e<this.explosions.length;e++)this.container.removeChild(this.explosions[e]);for(e=0;e<this.animatingSymbols.length;e++)this.animatingSymbols[e].remove();this.explosions=[],this.winSymbols=[],this.wildWinSymbols=[],this.winAnims=[],this.animatingSymbols=[]},y.prototype.animate=function(e){this.totalTime+=e;var t=6*e/100;if(this.shakeSymbols)for(var i=0;i<this.winSymbols.length;i++){var n=this.winSymbols[i],s=n.position.x+(Math.random()-.5)*t,o=n.position.y+(Math.random()-.5)*t;n.position.set(s,o)}if(this.removeSymbols){this.scaleFactorDif+=t/40;var r=void 0;this.scaleFactorDif<.6&&(r=.8-Math.abs(this.scaleFactorDif-.4));for(i=0;i<this.winSymbols.length;i++)-1===this.wildWinSymbols.indexOf(this.winSymbols[i])?(a=this.winSymbols[i].alpha,this.winSymbols[i].scale.set(r),this.winSymbols[i].alpha=a-t/20,this.winSymbols[i].alpha<0&&(this.container.removeChild(this.winSymbols[i]),this.winSymbols.splice(i,1),i--)):(this.container.removeChild(this.winSymbols[i]),this.winSymbols.splice(i,1),i--);for(i=0;i<this.winAnims.length;i++){var a=this.winAnims[i].alpha;this.winAnims[i].alpha=a-t/this.animFade,this.winAnims[i].alpha<0&&(this.container.removeChild(this.winAnims[i]),this.winAnims.splice(i,1),i--)}}for(var l,i=0;i<this.winElements.length;i++)this.winElements[i].animate(t),1e3<this.winElements[i].getY()&&(this.winElements[i].remove(),this.winElements[i]=void 0,this.winElements.splice(i,1),i--);if(this.countingUp&&this.totalTime>this.pauseTime&&(1<(l=(this.totalTime-this.pauseTime)/(this.targetTime-this.pauseTime))&&(l=1),l=Math.floor(l*this.totalWin*100)/100,this.setWinCountText(l.toFixed(2)),this.checkBigWinText(l)),this.animatingSymbols.length)for(i=0;i<this.animatingSymbols.length;i++)this.animatingSymbols[i].animate(e)},y.prototype.checkBigWinText=function(e){var t=l.get().lastStake,i=this.bigWinTextStep;this.bigWinTextStep<3&&200*t<e?this.bigWinTextStep=3:this.bigWinTextStep<2&&100*t<e?this.bigWinTextStep=2:this.bigWinTextStep<1&&60*t<e?this.bigWinTextStep=1:this.bigWinTextStep<0&&25*t<=e&&(this.bigWinTextStep=0),i!==this.bigWinTextStep&&this.displayBigWinText(this.bigWinTexts[this.bigWinTextStep])},y.prototype.displayBigWinText=function(e){var t=this,i=50;0!==this.bigWinTextStep&&(this.clearBigWinText(),i=500),this.bigWinTextTimeout=a.setTimeout(function(){return t.startBigWinTextAnimation(e)},i)},y.prototype.startBigWinTextAnimation=function(e){this.bigWinText.text=d.getString(e),this.bigWinText.updateTransform(),this.bigWinText.position.x=700-this.bigWinText.textWidth/2,this.bigWinText.position.y=400-this.bigWinText.textHeight/2,this.bigWinText.alpha=.01,Tweener.addTween(this.bigWinText,{alpha:1,transition:"easeInExpo",time:.5}),Tweener.addTween(this.blockerContainer,{alpha:1,transition:"easeInExpo",time:.5}),Tweener.addTween(this.godRays,{alpha:1,transition:"easeInExpo",time:.5}),Tweener.addTween(this.godRays.scale,{x:this.bigWinTextStep+6,y:this.bigWinTextStep+4,transition:"easeInSine",time:3}),this.godRays.play(),amplify.publish("WinTextChangedSignal")},y.prototype.addGodRays=function(){this.godRays=new h(o.textureLoader.getAnimation(u.ExtraChilliTextureLoader.GOD_RAY_ANIM)),this.godRays.blendMode=PIXI.BLEND_MODES.ADD,this.godRays.animationSpeed=.4,this.godRays.anchor.set(.5),this.container.addChild(this.godRays),this.godRays.position.x=700,this.godRays.position.y=550,this.godRays.alpha=0},y.prototype.removeWins=function(e){this.removeSymbols=!0,this.shakeSymbols=!1;for(var t=[],i=this.scaleFactorDif=0;i<e.length;i++)for(var n,s,o=e[i],r=0;r<o.extraSymbolsWinPositions.length;r++)-1===t.indexOf(o.extraSymbolsWinPositions[r])&&(t.push(o.extraSymbolsWinPositions[r]),0===this.extraSymbols[o.extraSymbolsWinPositions[r]]&&(n=this.EXTRA_REEL_X+this.EXTRA_REEL_SPACING*o.extraSymbolsWinPositions[r]+this.EXTRA_REEL_SYMBOL_X,s=this.EXTRA_REEL_Y+this.EXTRA_REEL_SYMBOL_Y,this.addExplosion(n,s,this.EXTRA_REEL_SYMBOL_WIDTH,this.EXTRA_REEL_SYMBOL_HEIGHT)))},y.prototype.startWinningSymbolsShaking=function(e){this.removeSymbols=!1;for(var t=0,i=[],n=0;n<e.length;n++){for(var s=e[n],o=0;o<s.positions.length;o++){var r=s.positions[o];this.addReelWinSymbol(s.payout.symIndex,s.numSymsInReels[r.x],r.x,Math.round(r.y))}t+=s.lines;for(var a,o=0;o<s.extraSymbolsWinPositions.length;o++)-1===i.indexOf(s.extraSymbolsWinPositions[o])&&(i.push(s.extraSymbolsWinPositions[o]),a=void 0,a=0===this.extraSymbols[s.extraSymbolsWinPositions[o]]?0:s.payout.symIndex,this.addExtraReelWinSymbol(a,s.extraSymbolsWinPositions[o]))}var l=1<t?d.getString("WAYS"):d.getString("WAY"),l=u.ExtraChilliGame.model.inFreeSpins?t+" "+l+" X"+this.currentWinMultiplier+" = "+m.format(this.currentWin):t+" "+l+" = "+m.format(this.currentWin);amplify.publish("SetTalkbackSignal",{text:l}),this.shakeSymbols=!0},y.prototype.setResults=function(e){this.wins=e.wins,this.extraSymbols=e.extraSymbols,this.currentWinMultiplier=e.freeSpinWinMultiplier-1,this.currentWin=e.win,this.targetTime=0,this.animFade=u.ExtraChilliGame.model.inFreeSpins?60:30},y.prototype.reset=function(){this.clearWinCountText(),this.clearBigWinText(),this.bigWinTextStep=-1,this.totalWin=0,this.currentWin=0,this.godRays.scale.set(0),this.godRays.stop(),a.clearInterval(this.winAnimationsTimer),a.clearInterval(this.bigWinTextTimeout),""!==this.winSound&&t.stopSound(this.winSound)},y.prototype.clearBigWinText=function(){0<this.bigWinText.alpha&&(this.bigWinText.alpha=1,Tweener.removeTween(this.bigWinText),Tweener.addTween(this.bigWinText,{alpha:0,transition:"easeInQuad",time:.5}),Tweener.removeTween(this.blockerContainer),Tweener.addTween(this.blockerContainer,{alpha:0,transition:"easeInQuad",time:.5}),Tweener.removeTween(this.godRays),Tweener.removeTween(this.godRays.scale),Tweener.addTween(this.godRays,{alpha:0,transition:"easeInQuad",time:.5}))},y.prototype.clearWinCountText=function(){this.countingUp&&(this.winCountText.clear(!0),this.countingUp=!1)},y.prototype.setupSignals=function(){var i=this;amplify.subscribe("GameComplete",function(e){i.totalWin=e.totalWin,0<i.totalWin&&i.findWinType();var t=l.get(),t=e.totalWin>=25*t.currentStake?2e3:e.totalWin>=t.currentStake?1250:250,e={targetTime:i.targetTime,isFinalWin:e.isFinalWin,postWinDelay:t,win:e.totalWin};amplify.publish("SetWinTargetSignal",e)}),amplify.subscribe("ShowFeatureDropSymbolAnimation",function(e){i.showFeatureDropSymbolAnimation(e.reelNum,e.row,e.numSyms)}),amplify.subscribe("UpdateFeatureDropCoinVisibility",function(e){i.featureDropCoinVisible=e.visible}),amplify.subscribe("StopFreeSpinsSignal",function(){i.reset()}),amplify.subscribe("UpdateFeatureDropPosition",function(e){i.featureDropX=e.x,i.featureDropY=e.y}),amplify.subscribe("AbortWins",function(){i.endWins()}),amplify.subscribe("MenuVisibilityChanged",function(e){i.container.visible=!e.visible})},y.prototype.findWinType=function(){var e=l.get().lastStake,t=0;this.totalWin>=25*e?(this.totalWin>200*e?t=5:this.totalWin>100*e?t=4:this.totalWin>80*e?t=3:this.totalWin>60*e?t=2:this.totalWin>40*e&&(t=1),this.startBigWinAnimations(t)):this.totalWin>e?(this.totalWin>15*e?t=5:this.totalWin>10*e?t=4:this.totalWin>8*e?t=3:this.totalWin>3*e?t=2:this.totalWin>2*e&&(t=1),this.startMediumWinAnimations(t)):this.startSmallWinAnimations()},y.prototype.addReelWinSymbol=function(e,t,i,n){var s=this.REEL_HEIGHT/t,n=this.REEL_Y+s*n,i=this.REEL_X+this.REEL_SPACING*i,e=g.getTexture(g.SYMBOLS,t,e);this.addSymbol(e,i,n,void 0,void 0,void 0,t)},y.prototype.addExtraReelWinSymbol=function(e,t){var i=this.EXTRA_REEL_X+this.EXTRA_REEL_SPACING*t+this.EXTRA_REEL_SYMBOL_X,n=this.EXTRA_REEL_Y+this.EXTRA_REEL_SYMBOL_Y,t=g.getTexture(g.SYMBOLS,3,e);this.addSymbol(t,i,n,void 0,void 0,0===e,3)},y.prototype.addExplosion=function(e,t,i,n){var s=new h(o.textureLoader.getAnimation(u.ExtraChilliTextureLoader.EXPLOSION_ANIM));s.anchor.set(.5),s.position.set(e+i/2,t+n/2),s.scale.set(2),s.animationSpeed=.5,s.loop=!1,s.blendMode=f.ADD,s.onComplete=function(){s.alpha=0},s.play(),this.container.addChild(s),this.explosions.push(s)},y.prototype.addSymbol=function(e,t,i,n,s,o,r){var a,l=new c;this.winSymbol=new p(e),this.winSymbol.setLayout("MainReel/Symbol"+r),void 0!==n&&(this.winSymbol.width=n,this.winSymbol.height=s),l.addChild(this.winSymbol),this.winSymbols.push(l),o?(this.wildWinSymbols.push(l),l.position.set(t,i),this.addSparkles("WildSparkleContainer_01",l),this.addSparkles("WildSparkleContainer_02",l),this.addSparkles("WildSparkleContainer_03",l)):(this.winSymbol.anchor.set(.5),l.position.set(t+this.winSymbol.width/2,i+this.winSymbol.height/2)),void 0!==r?(this.winAnim=new c("SYM_Main_BG_"+r+"_Reaction_00000","MainReel/Symbol"+r),a=void 0,u.ExtraChilliGame.model.inFreeSpins?((a=new h(u.ExtraChilliGame.textureLoader.getAnimation(u.ExtraChilliTextureLoader.SYMBOL_WIN_FREE_SPIN_ANIMS,r))).alpha=.8,a.animationSpeed=.44,a.loop=!1):((a=new h(u.ExtraChilliGame.textureLoader.getAnimation(u.ExtraChilliTextureLoader.SYMBOL_WIN_ANIMS,r))).alpha=.5,a.animationSpeed=.5),a.blendMode=f.ADD,a.play(),this.winAnim.position.set(t+this.winAnim.dimension.x,i+this.winAnim.dimension.y),this.winAnim.addChild(a),this.winAnim.setDimensions()):u.ExtraChilliGame.model.inFreeSpins?(this.winAnim=new c("SYM_Main_BG_4_Reaction_00000","MainReel/Symbol"+r),(a=new h(u.ExtraChilliGame.textureLoader.getAnimation(u.ExtraChilliTextureLoader.SYMBOL_WIN_FREE_SPIN_ANIMS,4))).alpha=.8,a.animationSpeed=.44,a.loop=!1,a.blendMode=PIXI.BLEND_MODES.ADD,a.play(),this.winAnim.position.set(t+this.winAnim.dimension.x,i+this.winAnim.dimension.y),this.winAnim.addChild(a),this.winAnim.setDimensions()):(this.winAnim=new h(u.ExtraChilliGame.textureLoader.getAnimation(u.ExtraChilliTextureLoader.SPARKLE_WIN_ANIM)),this.winAnim.anchor.set(.5),this.winAnim.width=1.5*this.winSymbol.width,this.winAnim.height=1.2*this.winSymbol.height,this.winAnim.play(),this.winAnim.blendMode=PIXI.BLEND_MODES.ADD,this.winAnim.animationSpeed=.25,this.winAnim.position.set(t+this.winSymbol.width/2,i+this.winSymbol.height/2)),this.container.addChild(this.winAnim),this.container.addChild(l),this.winAnims.push(this.winAnim)},y.prototype.startSmallWinAnimations=function(){var e=this;amplify.publish("SmallWinsStartedSignal"),this.targetTime=500,this.pauseTime=2e5,this.steps=[],this.maxSpawns=[],this.animIndexes=[],this.animIndex=0,this.step=0,this.totalTime=0,this.startSpawn=0,this.countingUp=!1,this.winSound="UnderStakeWin0",t.playSound(this.winSound,1),this.winAnimationsTimer=a.setInterval(function(){return e.spawnElement()},100)},y.prototype.spawnElement=function(){var e=0;this.totalTime>this.pauseTime&&(this.countingUp=!0),void 0!==this.steps[this.step]&&this.totalTime>this.steps[this.step]-125&&(e=this.maxSpawns[this.step],this.animIndex=this.animIndexes[this.step],this.step++),this.countingUp&&this.winElements.push(new i.WinAnimation(this.winAnimationContainer,!1,Math.floor(2*Math.random())));for(var t=0;t<e;t++)this.winElements.push(new i.WinAnimation(this.winAnimationContainer,!0,this.animIndex+1));this.totalTime>this.targetTime&&(a.clearInterval(this.winAnimationsTimer),this.countingUp&&this.setWinCountText(this.totalWin.toFixed(2)),this.clearBigWinText(),this.clearWinCountText(),a.clearTimeout(this.bigWinTextTimeout),amplify.publish("WinsFinishedSignal"))},y.prototype.setWinCountText=function(e){this.winCountText.updateCount(e)},y.prototype.startMediumWinAnimations=function(e){var t=this;amplify.publish("MediumWinsStartedSignal"),this.targetTime=this.mediumWinSoundData[e].target,this.pauseTime=this.mediumWinSoundData[e].pause,this.steps=this.mediumWinSoundData[e].steps,this.maxSpawns=this.mediumWinSoundData[e].maxSpawns,this.animIndexes=this.mediumWinSoundData[e].animIndexes,this.animIndex=this.animIndexes[0],this.step=0,this.totalTime=0,this.startSpawn=1,this.countingUp=!0,this.winSound="Win"+e,utils.SoundWrapper.playSound(this.winSound,1),this.winAnimationsTimer=a.setInterval(function(){return t.spawnElement()},this.mediumWinSoundData[e].interval)},y.prototype.startBigWinAnimations=function(e){var t=this;amplify.publish("BigWinsStartedSignal"),this.targetTime=this.bigWinSoundData[e].target,this.pauseTime=this.bigWinSoundData[e].pause,this.steps=this.bigWinSoundData[e].steps,this.maxSpawns=this.bigWinSoundData[e].maxSpawns,this.animIndexes=this.bigWinSoundData[e].animIndexes,this.animIndex=this.animIndexes[0],this.step=0,this.totalTime=0,this.startSpawn=1,this.winSound="BigWin"+e,utils.SoundWrapper.playSound(this.winSound,1),this.winAnimationsTimer=a.setInterval(function(){return t.spawnElement()},25)},y.prototype.addSparkles=function(e,t){e=new c(e,"MainReel/Symbol3/WildSparkles");t.addChild(e);t=new h(o.textureLoader.getAnimation(u.ExtraChilliTextureLoader.SPARKLES_ANIM));t.blendMode=PIXI.BLEND_MODES.ADD,t.animationSpeed=.25,t.play(),e.addChild(t),e.width=e.dimension.width,e.height=e.dimension.height},y.prototype.showFeatureDropSymbolAnimation=function(e,t,i){var n=Math.floor(this.REEL_HEIGHT/i),t=new r(this.container,e,this.REEL_SPACING,n,i,{x:this.REEL_X+this.REEL_SPACING*e,y:this.REEL_Y+n*t},{x:this.localFeatureDropX,y:this.localFeatureDropY},this.featureDropCoinVisible);this.animatingSymbols.push(t)},e=y,i.WinDisplay=e}(extrachilli=extrachilli||{});__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var t,i=(t=genericgame.GameAssetMetadata,__extends(n,t),n.prototype.getAssetsToLoad=function(){return["Animations0.json","Animations1.json","Animations2.json","Animations3.json","Animations4.json","Animations5.json","Animations6.json","Animations7.json","Animations8.json","Animations9.json","Animations10.json","Animations11.json","Animations12.json","Backgrounds0.json","Backgrounds1.json","Backgrounds2.json","Backgrounds3.json","Backgrounds4.json","Backgrounds5.json","Backgrounds6.json","Backgrounds7.json","D891.xml","GameElements0.json","GameElements1.json","GameElements2.json","GameElements3.json","GameElements4.json","GameElements5.json","GameElements6.json","GameElements7.json","GameElements8.json","GameElements9.json","GameElements10.json","GameElements11.json","GameElements12.json","GameElements13.json","GameElementsHigh0.json","GameElementsHigh1.json","GameElementsHigh2.json"]},n.prototype.getAudioToLoad=function(){return{Ambience1:[".m4a",".ogg"],AnticipationB:[".m4a",".ogg"],Bang0:[".m4a",".ogg"],Bang1:[".m4a",".ogg"],Bang2:[".m4a",".ogg"],Bang3:[".m4a",".ogg"],Bang4:[".m4a",".ogg"],Bang5:[".m4a",".ogg"],Bang6:[".m4a",".ogg"],Bang7:[".m4a",".ogg"],Bang8:[".m4a",".ogg"],Bang9:[".m4a",".ogg"],Bang10:[".m4a",".ogg"],BigWin0:[".m4a",".ogg"],BigWin1:[".m4a",".ogg"],BigWin2:[".m4a",".ogg"],BigWin3:[".m4a",".ogg"],BigWin4:[".m4a",".ogg"],BigWin5:[".m4a",".ogg"],BonanzaFreeSpins:[".m4a",".ogg"],Cart123:[".m4a",".ogg"],CartMove:[".m4a",".ogg"],Clacker1:[".m4a",".ogg"],Clacker2:[".m4a",".ogg"],Diamond:[".m4a",".ogg"],ExtraSpinDiamond:[".m4a",".ogg"],FinalBang:[".m4a",".ogg"],GameOver:[".m4a",".ogg"],GetFeature:[".m4a",".ogg"],GetFeatureDrop:[".m4a",".ogg"],InTheSlot:[".m4a",".ogg"],OneShot0:[".m4a",".ogg"],OneShot1:[".m4a",".ogg"],OneShot2:[".m4a",".ogg"],OneShot3:[".m4a",".ogg"],OneShot4:[".m4a",".ogg"],OneShot5:[".m4a",".ogg"],OneShot6:[".m4a",".ogg"],OneShot7:[".m4a",".ogg"],OneShot8:[".m4a",".ogg"],Spin0:[".m4a",".ogg"],Spin1:[".m4a",".ogg"],Spin2:[".m4a",".ogg"],Spin3:[".m4a",".ogg"],Spin4:[".m4a",".ogg"],Spin5:[".m4a",".ogg"],Spin6:[".m4a",".ogg"],StartSpin:[".m4a",".ogg"],Stop:[".m4a",".ogg"],UnderStakeWin0:[".m4a",".ogg"],WheelSpin0:[".m4a",".ogg"],WheelSpin1:[".m4a",".ogg"],WheelSpin2:[".m4a",".ogg"],WheelSpin3:[".m4a",".ogg"],WheelStart:[".m4a",".ogg"],WheelWinner0:[".m4a",".ogg"],WheelWinner1:[".m4a",".ogg"],WheelWinner2:[".m4a",".ogg"],WheelWinner3:[".m4a",".ogg"],Win0:[".m4a",".ogg"],Win1:[".m4a",".ogg"],Win2:[".m4a",".ogg"],Win3:[".m4a",".ogg"],Win4:[".m4a",".ogg"],Win5:[".m4a",".ogg"]}},n);function n(){return null!==t&&t.apply(this,arguments)||this}e.ExtraChilliAssetMetadata=i}(extrachilli=extrachilli||{});var extrachilli,__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(o){var r,n=utils.SoundWrapper,s=utils.STR,a=o.models.ExtraChilliModel,e=o.views.GameView,t=o.views.UI,l=utils.TranslationManager,u=genericgame.GenericGame,h=utils.GameTimer,i=(r=genericgame.GenericGame,__extends(p,r),p.prototype.setupSignals=function(){var i=this;r.prototype.setupSignals.call(this),amplify.subscribe("ReelsStoppedSignal",function(){if(!i.spin)return i.closed=!0,amplify.publish("GameComplete",{isFinalWin:!0,totalWin:0}),void amplify.publish("GameAnimationComplete");var e,t=a.get();i.response.spins.length||i.spin.wins.length?(e=t.featureDrop,0==i.dropCount&&e&&e.symbols.length&&!t.triggeredFeatureDrop&&i.updateFeatureDropBalance(),i.dropCount++,t.inDrop=!0,i.totalWin+=i.spin.win,i.ui.updateWin(i.totalWin),i.gameView.showWins(),e=t.inFreeSpins?1750:500,h.setTimeout(function(){return i.removeWinningSymbols()},e),e+=500,t.freeSpinWinMultiplier=i.spin.freeSpinWinMultiplier,i.response.spins.length?h.setTimeout(function(){return i.showNewSymbols()},e):amplify.publish("SendRequest",{requestType:s.PLAY})):(e=!t.inFreeSpins&&!t.freeSpinsTriggered,amplify.publish("GameComplete",{totalWin:i.totalWin,isFinalWin:e}),t.freeSpinsTriggered?(t.autoPlaying&&(amplify.publish("StopAutoSpinsSignal"),amplify.publish("SetUIEnabled",{enabled:!1})),amplify.publish("FreeSpinsTriggered"),n.playSound("GetFeature"),amplify.publish("SetTalkbackSignal",{text:l.getString("BONUS_TRIGGERED")}),h.setTimeout(function(){return i.showFreeSpinTrigger()},i.findWinDelay(1e3)),amplify.publish("SendRequest",{requestType:s.CLOSE})):t.inFreeSpins?(e=i.findWinDelay(1e3),t.numFreeSpins==t.totalFreeSpins&&(e=0),t.freeSpinsRetriggered?(n.playSound("GetFeature"),amplify.publish("FreeSpinsRetriggered"),h.setTimeout(function(){return i.startFreeSpinRetriggerAnimation()},e),e+=1e3*(t.freeSpinsRetriggerAmount+1)):amplify.publish("SendRequest",{requestType:s.CLOSE}),i.freeSpinsCheck(e)):(t.win=i.response.win,n.fadeSound("Spin"+i.spinSoundIndex,1,0,2e3),t.autoPlaying&&!apiMapper.sendGameCompleteWhenAutoPlaying()||amplify.publish("GameAnimationComplete"),amplify.publish("SendRequest",{requestType:s.CLOSE})))}),amplify.subscribe("FeatureCollectClicked",function(){p.model.collectingGamble=!0,amplify.publish("SendRequest",{requestType:s.FEATURE_PICK})}),amplify.subscribe("FeatureGambleClicked",function(){p.model.collectingGamble=!1,amplify.publish("SendRequest",{requestType:s.FEATURE_PICK}),i.gambleWheelStarted()}),amplify.subscribe("FreeSpinsStartClicked",function(){i.freeSpinSoundFaded=!1,i.freeSpinSoundStopped=!1,n.stopSound("WheelSpin"+i.wheelSpinCount),i.startFreeSpins(),amplify.publish("UpdateFreeSpinMultiplier",{multiplier:1}),n.stopSound("Ambience1"),n.playSound("BonanzaFreeSpins",1,!0)}),amplify.subscribe("RecoveredFreeSpinsSignal",function(){n.stopSound("Ambience1"),n.playSound("BonanzaFreeSpins",1,!0)}),amplify.subscribe("StartFreeSpinsSignal",function(){n.playSound("Bang10"),i.onPlayButtonClicked()}),amplify.subscribe("FeatureGambleComplete",function(){n.stopSound("WheelSpin"+i.wheelSpinCount),amplify.publish("SendRequest",{requestType:s.FEATURE_END})}),amplify.subscribe("FeatureGambleStartRecovered",function(){i.wheelSpinCount=-1}),amplify.subscribe("FeatureGambleStartClicked",function(){i.wheelSpinCount=-1,amplify.publish("SendRequest",{requestType:s.FEATURE_START})}),amplify.subscribe("GambleWheelStopped",function(){var e;0<p.model.numFreeSpins?(e=3e3,24===p.model.numFreeSpins&&(n.playSound("GameOver"),e=1e4),p.model.gambleSuccess?n.playSound("WheelWinner"+i.gambleSuccessSoundIndexes[i.wheelSpinCount]):n.playSound("WheelWinner1"),24!==p.model.numFreeSpins&&p.model.gambleSuccess?(n.setSoundVolume("WheelSpin"+i.wheelSpinCount,.1),n.fadeSound("WheelSpin"+i.wheelSpinCount,.1,1,e)):n.stopSound("WheelSpin"+i.wheelSpinCount)):(n.fadeSound("WheelSpin"+i.wheelSpinCount,1,0,4e3),amplify.publish("SetTalkbackSignal",{lock:!0,text:l.getString("BONUS_COMPLETE")}))}),amplify.subscribe("ShowFeatureDropUICoinAnimation",function(e){i.previousFeatureDropCost-=i.findFeatureDropAmountForReelIndex(e.reelIndex),i.previousFeatureDropCost=Math.round(100*i.previousFeatureDropCost)/100,i.previousFeatureDropCost<=0&&(a.get().triggeredFeatureDrop=!0,amplify.publish("StopAutoSpinsSignal"),i.previousFeatureDropCost=0),amplify.publish("UpdateFeatureDropTotalSignal",{total:i.previousFeatureDropCost})}),amplify.subscribe("RecoverFromNonCriticalError",function(){i.totalWin=0,i.spin=null,-1<i.spinSoundIndex&&n.fadeSound("Spin"+i.spinSoundIndex,.5,0,2e3),i.gameView.showNonWinningStop()})},p.prototype.setupGameView=function(){this.gameView=new e(stage)},p.prototype.setupViews=function(){r.prototype.setupViews.call(this),n.playSound("Ambience1",1,!0)},p.prototype.getGameLogoTexture=function(){return genericgame.TextureLoader.getTexture("DB_Logo_01")},p.prototype.setupUI=function(){this.ui=new t(stage)},p.prototype.showInitialState=function(e){r.prototype.showInitialState.call(this,e),this.gameView.showInitialState(utils.ArrayUtils.last(e.spins))},p.prototype.continueFreeSpins=function(){this.onPlayButtonClicked()},p.prototype.onPlayButtonClicked=function(){r.prototype.onPlayButtonClicked.call(this),amplify.publish("SetTalkbackSignal",{text:""});var e=a.get();this.ui.updateWin(e.win),e.inFreeSpins?(e.numFreeSpins--,this.ui.updateFreeSpins(e.numFreeSpins,e.totalFreeSpins-e.numFreeSpins),this.ui.updateFreeSpinWin(e.freeSpinWin),this.freeSpinSoundFaded&&(n.fadeSound("BonanzaFreeSpins",.3,1,500),this.freeSpinSoundFaded=!1),this.freeSpinSoundStopped&&(n.playSound("BonanzaFreeSpins",1,!0),n.fadeSound("BonanzaFreeSpins",.3,1,500),this.freeSpinSoundStopped=!1)):null!=e.featureDrop&&(this.previousFeatureDropCost=e.featureDrop.totals[e.currentStake]),this.startSpin(),this.spinning=!0,this.dropCount=0,p.model.inDrop=!1,this.checkPlayRequest()},p.prototype.startSpin=function(){if(r.prototype.startSpin.call(this),-1<this.spinSoundIndex&&n.stopSound("Spin"+this.spinSoundIndex),!p.model.inFreeSpins){for(var e=this.spinSoundIndex;e===this.spinSoundIndex;)this.spinSoundIndex=Math.floor(7*Math.random());n.playSound("Spin"+this.spinSoundIndex,.5,!0),n.fadeSound("Spin"+this.spinSoundIndex,.5,1,3e3)}},p.prototype.responseParsed=function(e){switch(r.prototype.responseParsed.call(this,e),e.type){case s.FEATURE_START:this.startFeatureGambleResponse();break;case s.FEATURE_PICK:this.setFeatureGambleResponse(e);break;case s.FEATURE_END:this.closedFeatureGambleResponse(e)}},p.prototype.setCollectFeatureGambleResponse=function(){amplify.publish("SendRequest",{requestType:s.FEATURE_END})},p.prototype.startFeatureGambleResponse=function(){p.model.nextgenNumFeatureGambles=1,amplify.publish("StartGambleFeature")},p.prototype.closedFeatureGambleResponse=function(e){var t=a.get();t.numFreeSpins=e.numFreeSpins,t.totalFreeSpins=e.totalFreeSpins,"NEXTGEN"==apiMapper.type&&e.balance&&(t.balance=e.balance),this.closed=!0,0<t.numFreeSpins?amplify.publish("ShowFreeSpinsWindow",{freeSpinsAwarded:t.numFreeSpins}):(t.inFreeSpins=!1,this.sendStopFreeSpinsSignal()),amplify.publish("FeatureGambleFinished")},p.prototype.findFeatureDropAmountForReelIndex=function(e){for(var t=p.model.featureDrop.symbols,i=0,n=t.length;i<n;++i)if(t[i].reel===e)return t[i].amount;return 0},p.prototype.setFeatureGambleResponse=function(e){var t=a.get();t.numFreeSpins=e.numFreeSpins,t.totalFreeSpins=e.totalFreeSpins,t.gambleSuccess=e.gambleSuccess,t.nextgenNumFeatureGambles=e.gambleStage,e.freeSpinWin&&(t.freeSpinWin=e.freeSpinWin),"NEXTGEN"!=apiMapper.type&&e.balance&&(t.balance=e.balance),t.collectingGamble?amplify.publish("SendRequest",{requestType:s.FEATURE_END}):e.gambleSuccess?amplify.publish("GambleSucceeded",{freeSpinsAwarded:e.numFreeSpins}):amplify.publish("GambleFailed",{freeSpinsAwarded:e.numFreeSpins})},p.prototype.setPlayResponse=function(e){var t=this;r.prototype.setPlayResponse.call(this,e),0===this.dropCount&&(this.ui.updateWin(0),this.totalWin=0);var i,n=a.get();n.numFreeSpins=e.numFreeSpins,n.totalFreeSpins=e.totalFreeSpins,n.freeSpinWin=e.freeSpinWin,n.freeSpinsTriggered=e.freeSpinsTriggered,n.freeSpinsRetriggered=e.freeSpinsRetriggered,n.freeSpinsRetriggerAmount=e.freeSpinsRetriggerAmount,n.scatterWin=e.scatterWin,n.featureDrop=e.featureDrop?e.featureDrop.copy():null,e.isNew||n.freeSpinsTriggered||!n.totalFreeSpins||(n.inFreeSpins=!0,this.ui.updateFreeSpinWinMultiplier(e.freeSpinWinMultiplier),this.ui.updateFreeSpinWin(n.freeSpinWin)),e.inGambleFeature?(n.nextgenNumFeatureGambles=e.gambleStage,i=void 0===e.previousGambleAward?n.numFreeSpins:e.previousGambleAward,amplify.publish("ShowGambleFeature",{freeSpinsAwarded:i,starting:!1}),!n.collectingGamble&&void 0===e.gambleSuccess||(amplify.publish("RecoveredFeatureGamble"),this.setFeatureGambleResponse(e),this.gambleWheelStarted()),this.gameView.unsetGameRecovery()):0===this.dropCount?this.setSpinResults():(n=n.inFreeSpins?1750:1e3,h.setTimeout(function(){return t.showNewSymbols()},n))},p.prototype.showFreeSpinTrigger=function(){var e=this;amplify.publish("ShowFreeSpinTrigger"),p.model.numFreeSpins<24?h.setTimeout(function(){return e.showFeatureGambleWindow()},1e3):h.setTimeout(function(){return e.showFreeSpinsWindow()},1e3)},p.prototype.showFreeSpinsWindow=function(){amplify.publish("ShowFreeSpinsWindow",{freeSpinsAwarded:p.model.numFreeSpins})},p.prototype.showFeatureGambleWindow=function(){amplify.publish("ShowFeatureGambleWindow",{freeSpinsAwarded:p.model.numFreeSpins})},p.prototype.showNewSymbols=function(){var e=this,t=this.spin.numScatters;this.spin=this.response.spins.shift(),p.model.remainingSymbols=this.copy2DArray(this.spin.remainingSymbols),p.model.remainingScatterOrder=this.copy2DArray(this.spin.remainingScatterOrder),p.model.numScatters=this.spin.numScatters,p.model.scatterOrder=this.spin.scatterOrder,amplify.publish("SetTalkbackSignal",{text:""}),p.model.inFreeSpins?(amplify.publish("SetFreeSpinMultiplier",{multiplier:p.model.freeSpinWinMultiplier}),h.setTimeout(function(){return e.showNewResult()},2e3)):2===t?(n.setSoundVolume("Spin"+this.spinSoundIndex,0),n.playSound("AnticipationB"),amplify.publish("ShowScatterAnticipation"),h.setTimeout(function(){return e.anticipationOver()},2500)):this.showNewResult()},p.prototype.anticipationOver=function(){n.stopSound("AnticipationB"),n.setSoundVolume("Spin"+this.spinSoundIndex,1),amplify.publish("StopScatterAnticipation"),this.showNewResult()},p.prototype.showNewResult=function(){this.gameView.collapseRemainingSymbols(),this.setNewSpinResults()},p.prototype.setSpinResults=function(){var e=a.get();this.spin=this.response.spins.shift(),e.remainingSymbols=this.copy2DArray(this.spin.remainingSymbols),e.remainingScatterOrder=this.copy2DArray(this.spin.remainingScatterOrder),e.numScatters=this.spin.numScatters,e.scatterOrder=this.spin.scatterOrder,e.win=this.spin.win,this.gameView.setResults(this.spin,e.featureDrop)},p.prototype.setNewSpinResults=function(){p.model.win=this.spin.win,this.gameView.setNewResults(this.spin)},p.prototype.startFreeSpins=function(){p.model.inFreeSpins=!0,amplify.publish("StartFreeSpinsSignal")},p.prototype.finishFreeSpins=function(){var e=this,t=a.get();this.totalWin=t.win=t.freeSpinWin,t.inFreeSpins=!1,t.numFreeSpins=0,t.totalFreeSpins=0,this.spin.win=0,amplify.publish("SetTalkbackSignal",{lock:!0,text:l.getString("BONUS_COMPLETE")}),h.setTimeout(function(){return e.sendStopFreeSpinsSignal()},4e3),n.playSound("Ambience1",.1,!0),n.fadeSound("Ambience1",.1,1,4e3),n.fadeSound("BonanzaFreeSpins",1,0,2e3)},p.prototype.sendStopFreeSpinsSignal=function(){var e=a.get();e.collectingGamble=!1,amplify.publish("SendRequest",{requestType:s.CLOSE}),amplify.publish("QuickClearMegaWinsSignal"),amplify.publish("StopFreeSpinsSignal"),amplify.publish("GameComplete",{totalWin:this.totalWin,isFinalWin:!0}),this.ui.updateWin(this.totalWin),this.ui.updateBalance(p.model.balance),this.updateFeatureDropBalance(),amplify.publish("SetTalkbackSignal",{lock:!1,text:l.getString("BONUS_COMPLETE")}),e.freeRound?(this.updateFreeRounds(),amplify.publish("ShowFreeRoundsSignal")):amplify.publish("ShowNormalUISignal"),amplify.publish("GameAnimationComplete")},p.prototype.freeSpinsCheck=function(e){var t=this;3500<e&&(n.fadeSound("BonanzaFreeSpins",1,.3,100),this.freeSpinSoundFaded=!0,8e3<e&&(this.freeSpinSoundStopped=!0,this.freeSpinSoundFaded=!1,n.stopSound("BonanzaFreeSpins"))),0===p.model.numFreeSpins?(this.ui.updateFreeSpinWin(p.model.freeSpinWin),h.setTimeout(function(){return t.finishFreeSpins()},e)):h.setTimeout(function(){return t.continueFreeSpins()},e)},p.prototype.playBangSound=function(){100<=this.spin.win?n.playSound("Bang10"):50<=this.spin.win?n.playSound("Bang9"):25<=this.spin.win?n.playSound("Bang8"):15<=this.spin.win?n.playSound("Bang7"):10<=this.spin.win?n.playSound("Bang6"):5<=this.spin.win?n.playSound("Bang5"):3<=this.spin.win?n.playSound("Bang4"):2<=this.spin.win?n.playSound("Bang3"):1<=this.spin.win?n.playSound("Bang2"):n.playSound("Bang1")},p.prototype.removeWinningSymbols=function(){this.playBangSound(),this.gameView.removeWinningSymbols()},p.prototype.copy2DArray=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i].concat();return t},p.prototype.startFreeSpinRetriggerAnimation=function(){var e=this;this.freeSpinRetriggerPopInterval=h.setInterval(function(){return e.popFreeSpinAmount()},1e3)},p.prototype.popFreeSpinAmount=function(){p.model.freeSpinsRetriggerAmount--,n.stopSound("ExtraSpinDiamond"),n.playSound("ExtraSpinDiamond"),this.ui.popFreeSpinsRemaining(p.model.numFreeSpins-p.model.freeSpinsRetriggerAmount),0===p.model.freeSpinsRetriggerAmount&&(amplify.publish("SendRequest",{requestType:s.CLOSE}),h.clearInterval(this.freeSpinRetriggerPopInterval))},p.prototype.gambleWheelStarted=function(){-1<this.spinSoundIndex&&n.stopSound("Spin"+this.spinSoundIndex),-1<this.wheelSpinCount&&n.stopSound("WheelSpin"+this.wheelSpinCount),this.wheelSpinCount++,n.playSound("StartSpin"),n.playSound("WheelSpin"+this.wheelSpinCount,1,!0)},p);function p(e,t,i,n,s){i=r.call(this,e,t,i)||this;return i.totalWin=0,i.dropCount=0,i.spinSoundIndex=-1,i.wheelSpinCount=0,i.gambleSuccessSoundIndexes=[3,2,0],p.model=a.get(),p.textureLoader=genericgame.GenericGame.textureLoader=new o.ExtraChilliTextureLoader,i.requestService=n,i.responseService=s,void 0!==o.services.ExtraChilliTestingService&&o.services.ExtraChilliTestingService.initialise(),u.USE_FR2_WINDOW=!0,u.USE_GENERIC_WIN_TIMER=!0,u.ALLOW_AUTOPLAY_IN_FR=!0,u.RESULT_DISPLAY_MINIMUM_TIME=1850,i}o.ExtraChilliGame=i}(extrachilli=extrachilli||{});